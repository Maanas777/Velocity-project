function P9(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(n,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WB={exports:{}},Gb={},qB={exports:{}},kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=Symbol.for("react.element"),O9=Symbol.for("react.portal"),M9=Symbol.for("react.fragment"),k9=Symbol.for("react.strict_mode"),I9=Symbol.for("react.profiler"),D9=Symbol.for("react.provider"),R9=Symbol.for("react.context"),L9=Symbol.for("react.forward_ref"),j9=Symbol.for("react.suspense"),$9=Symbol.for("react.memo"),N9=Symbol.for("react.lazy"),DR=Symbol.iterator;function z9(e){return e===null||typeof e!="object"?null:(e=DR&&e[DR]||e["@@iterator"],typeof e=="function"?e:null)}var GB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HB=Object.assign,ZB={};function Rp(e,t,r){this.props=e,this.context=t,this.refs=ZB,this.updater=r||GB}Rp.prototype.isReactComponent={};Rp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function XB(){}XB.prototype=Rp.prototype;function nO(e,t,r){this.props=e,this.context=t,this.refs=ZB,this.updater=r||GB}var iO=nO.prototype=new XB;iO.constructor=nO;HB(iO,Rp.prototype);iO.isPureReactComponent=!0;var RR=Array.isArray,KB=Object.prototype.hasOwnProperty,oO={current:null},YB={key:!0,ref:!0,__self:!0,__source:!0};function JB(e,t,r){var n,a={},c=null,f=null;if(t!=null)for(n in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)KB.call(t,n)&&!YB.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var m=Array(o),_=0;_<o;_++)m[_]=arguments[_+2];a.children=m}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Zv,type:e,key:c,ref:f,props:a,_owner:oO.current}}function B9(e,t){return{$$typeof:Zv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function aO(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zv}function F9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var LR=/\/+/g;function RT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F9(""+e.key):t.toString(36)}function Ux(e,t,r,n,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Zv:case O9:f=!0}}if(f)return f=e,a=a(f),e=n===""?"."+RT(f,0):n,RR(a)?(r="",e!=null&&(r=e.replace(LR,"$&/")+"/"),Ux(a,t,r,"",function(_){return _})):a!=null&&(aO(a)&&(a=B9(a,r+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(LR,"$&/")+"/")+e)),t.push(a)),1;if(f=0,n=n===""?".":n+":",RR(e))for(var o=0;o<e.length;o++){c=e[o];var m=n+RT(c,o);f+=Ux(c,t,r,m,a)}else if(m=z9(e),typeof m=="function")for(e=m.call(e),o=0;!(c=e.next()).done;)c=c.value,m=n+RT(c,o++),f+=Ux(c,t,r,m,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function tx(e,t,r){if(e==null)return e;var n=[],a=0;return Ux(e,n,"","",function(c){return t.call(r,c,a++)}),n}function U9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fo={current:null},Vx={transition:null},V9={ReactCurrentDispatcher:fo,ReactCurrentBatchConfig:Vx,ReactCurrentOwner:oO};kr.Children={map:tx,forEach:function(e,t,r){tx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return tx(e,function(){t++}),t},toArray:function(e){return tx(e,function(t){return t})||[]},only:function(e){if(!aO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kr.Component=Rp;kr.Fragment=M9;kr.Profiler=I9;kr.PureComponent=nO;kr.StrictMode=k9;kr.Suspense=j9;kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V9;kr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=HB({},e.props),a=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=oO.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(m in t)KB.call(t,m)&&!YB.hasOwnProperty(m)&&(n[m]=t[m]===void 0&&o!==void 0?o[m]:t[m])}var m=arguments.length-2;if(m===1)n.children=r;else if(1<m){o=Array(m);for(var _=0;_<m;_++)o[_]=arguments[_+2];n.children=o}return{$$typeof:Zv,type:e.type,key:a,ref:c,props:n,_owner:f}};kr.createContext=function(e){return e={$$typeof:R9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:D9,_context:e},e.Consumer=e};kr.createElement=JB;kr.createFactory=function(e){var t=JB.bind(null,e);return t.type=e,t};kr.createRef=function(){return{current:null}};kr.forwardRef=function(e){return{$$typeof:L9,render:e}};kr.isValidElement=aO;kr.lazy=function(e){return{$$typeof:N9,_payload:{_status:-1,_result:e},_init:U9}};kr.memo=function(e,t){return{$$typeof:$9,type:e,compare:t===void 0?null:t}};kr.startTransition=function(e){var t=Vx.transition;Vx.transition={};try{e()}finally{Vx.transition=t}};kr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};kr.useCallback=function(e,t){return fo.current.useCallback(e,t)};kr.useContext=function(e){return fo.current.useContext(e)};kr.useDebugValue=function(){};kr.useDeferredValue=function(e){return fo.current.useDeferredValue(e)};kr.useEffect=function(e,t){return fo.current.useEffect(e,t)};kr.useId=function(){return fo.current.useId()};kr.useImperativeHandle=function(e,t,r){return fo.current.useImperativeHandle(e,t,r)};kr.useInsertionEffect=function(e,t){return fo.current.useInsertionEffect(e,t)};kr.useLayoutEffect=function(e,t){return fo.current.useLayoutEffect(e,t)};kr.useMemo=function(e,t){return fo.current.useMemo(e,t)};kr.useReducer=function(e,t,r){return fo.current.useReducer(e,t,r)};kr.useRef=function(e){return fo.current.useRef(e)};kr.useState=function(e){return fo.current.useState(e)};kr.useSyncExternalStore=function(e,t,r){return fo.current.useSyncExternalStore(e,t,r)};kr.useTransition=function(){return fo.current.useTransition()};kr.version="18.2.0";qB.exports=kr;var Y=qB.exports;const Se=Hr(Y),W9=P9({__proto__:null,default:Se},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q9=Y,G9=Symbol.for("react.element"),H9=Symbol.for("react.fragment"),Z9=Object.prototype.hasOwnProperty,X9=q9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K9={key:!0,ref:!0,__self:!0,__source:!0};function QB(e,t,r){var n,a={},c=null,f=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(n in t)Z9.call(t,n)&&!K9.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:G9,type:e,key:c,ref:f,props:a,_owner:X9.current}}Gb.Fragment=H9;Gb.jsx=QB;Gb.jsxs=QB;WB.exports=Gb;var j=WB.exports,u1={},eF={exports:{}},ra={},tF={exports:{}},rF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ke,Ge){var Ye=ke.length;ke.push(Ge);e:for(;0<Ye;){var _t=Ye-1>>>1,Ot=ke[_t];if(0<a(Ot,Ge))ke[_t]=Ge,ke[Ye]=Ot,Ye=_t;else break e}}function r(ke){return ke.length===0?null:ke[0]}function n(ke){if(ke.length===0)return null;var Ge=ke[0],Ye=ke.pop();if(Ye!==Ge){ke[0]=Ye;e:for(var _t=0,Ot=ke.length,bt=Ot>>>1;_t<bt;){var Zt=2*(_t+1)-1,Xt=ke[Zt],kt=Zt+1,Mt=ke[kt];if(0>a(Xt,Ye))kt<Ot&&0>a(Mt,Xt)?(ke[_t]=Mt,ke[kt]=Ye,_t=kt):(ke[_t]=Xt,ke[Zt]=Ye,_t=Zt);else if(kt<Ot&&0>a(Mt,Ye))ke[_t]=Mt,ke[kt]=Ye,_t=kt;else break e}}return Ge}function a(ke,Ge){var Ye=ke.sortIndex-Ge.sortIndex;return Ye!==0?Ye:ke.id-Ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,o=f.now();e.unstable_now=function(){return f.now()-o}}var m=[],_=[],w=1,E=null,C=3,M=!1,I=!1,D=!1,$=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ke){for(var Ge=r(_);Ge!==null;){if(Ge.callback===null)n(_);else if(Ge.startTime<=ke)n(_),Ge.sortIndex=Ge.expirationTime,t(m,Ge);else break;Ge=r(_)}}function U(ke){if(D=!1,R(ke),!I)if(r(m)!==null)I=!0,Ve(H);else{var Ge=r(_);Ge!==null&&Ke(U,Ge.startTime-ke)}}function H(ke,Ge){I=!1,D&&(D=!1,B(oe),oe=-1),M=!0;var Ye=C;try{for(R(Ge),E=r(m);E!==null&&(!(E.expirationTime>Ge)||ke&&!he());){var _t=E.callback;if(typeof _t=="function"){E.callback=null,C=E.priorityLevel;var Ot=_t(E.expirationTime<=Ge);Ge=e.unstable_now(),typeof Ot=="function"?E.callback=Ot:E===r(m)&&n(m),R(Ge)}else n(m);E=r(m)}if(E!==null)var bt=!0;else{var Zt=r(_);Zt!==null&&Ke(U,Zt.startTime-Ge),bt=!1}return bt}finally{E=null,C=Ye,M=!1}}var X=!1,ee=null,oe=-1,ae=5,ge=-1;function he(){return!(e.unstable_now()-ge<ae)}function ve(){if(ee!==null){var ke=e.unstable_now();ge=ke;var Ge=!0;try{Ge=ee(!0,ke)}finally{Ge?Ee():(X=!1,ee=null)}}else X=!1}var Ee;if(typeof F=="function")Ee=function(){F(ve)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Ne=Re.port2;Re.port1.onmessage=ve,Ee=function(){Ne.postMessage(null)}}else Ee=function(){$(ve,0)};function Ve(ke){ee=ke,X||(X=!0,Ee())}function Ke(ke,Ge){oe=$(function(){ke(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ke){ke.callback=null},e.unstable_continueExecution=function(){I||M||(I=!0,Ve(H))},e.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<ke?Math.floor(1e3/ke):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(ke){switch(C){case 1:case 2:case 3:var Ge=3;break;default:Ge=C}var Ye=C;C=Ge;try{return ke()}finally{C=Ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ke,Ge){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var Ye=C;C=ke;try{return Ge()}finally{C=Ye}},e.unstable_scheduleCallback=function(ke,Ge,Ye){var _t=e.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?_t+Ye:_t):Ye=_t,ke){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=Ye+Ot,ke={id:w++,callback:Ge,priorityLevel:ke,startTime:Ye,expirationTime:Ot,sortIndex:-1},Ye>_t?(ke.sortIndex=Ye,t(_,ke),r(m)===null&&ke===r(_)&&(D?(B(oe),oe=-1):D=!0,Ke(U,Ye-_t))):(ke.sortIndex=Ot,t(m,ke),I||M||(I=!0,Ve(H))),ke},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(ke){var Ge=C;return function(){var Ye=C;C=Ge;try{return ke.apply(this,arguments)}finally{C=Ye}}}})(rF);tF.exports=rF;var Y9=tF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nF=Y,Jo=Y9;function Et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iF=new Set,Ny={};function of(e,t){tp(e,t),tp(e+"Capture",t)}function tp(e,t){for(Ny[e]=t,e=0;e<t.length;e++)iF.add(t[e])}var ql=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vA=Object.prototype.hasOwnProperty,J9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jR={},$R={};function Q9(e){return vA.call($R,e)?!0:vA.call(jR,e)?!1:J9.test(e)?$R[e]=!0:(jR[e]=!0,!1)}function e7(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t7(e,t,r,n){if(t===null||typeof t>"u"||e7(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function po(e,t,r,n,a,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var Ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ui[e]=new po(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ui[t]=new po(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ui[e]=new po(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ui[e]=new po(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ui[e]=new po(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ui[e]=new po(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ui[e]=new po(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ui[e]=new po(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ui[e]=new po(e,5,!1,e.toLowerCase(),null,!1,!1)});var sO=/[\-:]([a-z])/g;function lO(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sO,lO);Ui[t]=new po(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sO,lO);Ui[t]=new po(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sO,lO);Ui[t]=new po(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ui[e]=new po(e,1,!1,e.toLowerCase(),null,!1,!1)});Ui.xlinkHref=new po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ui[e]=new po(e,1,!1,e.toLowerCase(),null,!0,!0)});function cO(e,t,r,n){var a=Ui.hasOwnProperty(t)?Ui[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t7(t,r,a,n)&&(r=null),n||a===null?Q9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rc=nF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rx=Symbol.for("react.element"),Pd=Symbol.for("react.portal"),Od=Symbol.for("react.fragment"),uO=Symbol.for("react.strict_mode"),_A=Symbol.for("react.profiler"),oF=Symbol.for("react.provider"),aF=Symbol.for("react.context"),hO=Symbol.for("react.forward_ref"),xA=Symbol.for("react.suspense"),bA=Symbol.for("react.suspense_list"),fO=Symbol.for("react.memo"),qc=Symbol.for("react.lazy"),sF=Symbol.for("react.offscreen"),NR=Symbol.iterator;function jg(e){return e===null||typeof e!="object"?null:(e=NR&&e[NR]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,LT;function sy(e){if(LT===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);LT=t&&t[1]||""}return`
`+LT+e}var jT=!1;function $T(e,t){if(!e||jT)return"";jT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var n=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){n=_}e.call(t.prototype)}else{try{throw Error()}catch(_){n=_}e()}}catch(_){if(_&&n&&typeof _.stack=="string"){for(var a=_.stack.split(`
`),c=n.stack.split(`
`),f=a.length-1,o=c.length-1;1<=f&&0<=o&&a[f]!==c[o];)o--;for(;1<=f&&0<=o;f--,o--)if(a[f]!==c[o]){if(f!==1||o!==1)do if(f--,o--,0>o||a[f]!==c[o]){var m=`
`+a[f].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=f&&0<=o);break}}}finally{jT=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sy(e):""}function r7(e){switch(e.tag){case 5:return sy(e.type);case 16:return sy("Lazy");case 13:return sy("Suspense");case 19:return sy("SuspenseList");case 0:case 2:case 15:return e=$T(e.type,!1),e;case 11:return e=$T(e.type.render,!1),e;case 1:return e=$T(e.type,!0),e;default:return""}}function wA(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Od:return"Fragment";case Pd:return"Portal";case _A:return"Profiler";case uO:return"StrictMode";case xA:return"Suspense";case bA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aF:return(e.displayName||"Context")+".Consumer";case oF:return(e._context.displayName||"Context")+".Provider";case hO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fO:return t=e.displayName||null,t!==null?t:wA(e.type)||"Memo";case qc:t=e._payload,e=e._init;try{return wA(e(t))}catch{}}return null}function n7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wA(t);case 8:return t===uO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i7(e){var t=lF(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){n=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nx(e){e._valueTracker||(e._valueTracker=i7(e))}function cF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=lF(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function h1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function SA(e,t){var r=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zR(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=wu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uF(e,t){t=t.checked,t!=null&&cO(e,"checked",t,!1)}function EA(e,t){uF(e,t);var r=wu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?TA(e,t.type,r):t.hasOwnProperty("defaultValue")&&TA(e,t.type,wu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BR(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function TA(e,t,r){(t!=="number"||h1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ly=Array.isArray;function Wd(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+wu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function AA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Et(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function FR(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Et(92));if(ly(r)){if(1<r.length)throw Error(Et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wu(r)}}function hF(e,t){var r=wu(t.value),n=wu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function UR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function CA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ix,dF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ix=ix||document.createElement("div"),ix.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ix.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var vy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o7=["Webkit","ms","Moz","O"];Object.keys(vy).forEach(function(e){o7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vy[t]=vy[e]})});function pF(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||vy.hasOwnProperty(e)&&vy[e]?(""+t).trim():t+"px"}function mF(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=pF(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var a7=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PA(e,t){if(t){if(a7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Et(62))}}function OA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MA=null;function dO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kA=null,qd=null,Gd=null;function VR(e){if(e=Yv(e)){if(typeof kA!="function")throw Error(Et(280));var t=e.stateNode;t&&(t=Yb(t),kA(e.stateNode,e.type,t))}}function gF(e){qd?Gd?Gd.push(e):Gd=[e]:qd=e}function yF(){if(qd){var e=qd,t=Gd;if(Gd=qd=null,VR(e),t)for(e=0;e<t.length;e++)VR(t[e])}}function vF(e,t){return e(t)}function _F(){}var NT=!1;function xF(e,t,r){if(NT)return e(t,r);NT=!0;try{return vF(e,t,r)}finally{NT=!1,(qd!==null||Gd!==null)&&(_F(),yF())}}function By(e,t){var r=e.stateNode;if(r===null)return null;var n=Yb(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Et(231,t,typeof r));return r}var IA=!1;if(ql)try{var $g={};Object.defineProperty($g,"passive",{get:function(){IA=!0}}),window.addEventListener("test",$g,$g),window.removeEventListener("test",$g,$g)}catch{IA=!1}function s7(e,t,r,n,a,c,f,o,m){var _=Array.prototype.slice.call(arguments,3);try{t.apply(r,_)}catch(w){this.onError(w)}}var _y=!1,f1=null,d1=!1,DA=null,l7={onError:function(e){_y=!0,f1=e}};function c7(e,t,r,n,a,c,f,o,m){_y=!1,f1=null,s7.apply(l7,arguments)}function u7(e,t,r,n,a,c,f,o,m){if(c7.apply(this,arguments),_y){if(_y){var _=f1;_y=!1,f1=null}else throw Error(Et(198));d1||(d1=!0,DA=_)}}function af(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function bF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function WR(e){if(af(e)!==e)throw Error(Et(188))}function h7(e){var t=e.alternate;if(!t){if(t=af(e),t===null)throw Error(Et(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var c=a.alternate;if(c===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===r)return WR(a),e;if(c===n)return WR(a),t;c=c.sibling}throw Error(Et(188))}if(r.return!==n.return)r=a,n=c;else{for(var f=!1,o=a.child;o;){if(o===r){f=!0,r=a,n=c;break}if(o===n){f=!0,n=a,r=c;break}o=o.sibling}if(!f){for(o=c.child;o;){if(o===r){f=!0,r=c,n=a;break}if(o===n){f=!0,n=c,r=a;break}o=o.sibling}if(!f)throw Error(Et(189))}}if(r.alternate!==n)throw Error(Et(190))}if(r.tag!==3)throw Error(Et(188));return r.stateNode.current===r?e:t}function wF(e){return e=h7(e),e!==null?SF(e):null}function SF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=SF(e);if(t!==null)return t;e=e.sibling}return null}var EF=Jo.unstable_scheduleCallback,qR=Jo.unstable_cancelCallback,f7=Jo.unstable_shouldYield,d7=Jo.unstable_requestPaint,Xn=Jo.unstable_now,p7=Jo.unstable_getCurrentPriorityLevel,pO=Jo.unstable_ImmediatePriority,TF=Jo.unstable_UserBlockingPriority,p1=Jo.unstable_NormalPriority,m7=Jo.unstable_LowPriority,AF=Jo.unstable_IdlePriority,Hb=null,Gs=null;function g7(e){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Hb,e,void 0,(e.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:_7,y7=Math.log,v7=Math.LN2;function _7(e){return e>>>=0,e===0?32:31-(y7(e)/v7|0)|0}var ox=64,ax=4194304;function cy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function m1(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,c=e.pingedLanes,f=r&268435455;if(f!==0){var o=f&~a;o!==0?n=cy(o):(c&=f,c!==0&&(n=cy(c)))}else f=r&~a,f!==0?n=cy(f):c!==0&&(n=cy(c));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ws(t),a=1<<r,n|=e[r],t&=~a;return n}function x7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-ws(c),o=1<<f,m=a[f];m===-1?(!(o&r)||o&n)&&(a[f]=x7(o,t)):m<=t&&(e.expiredLanes|=o),c&=~o}}function RA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CF(){var e=ox;return ox<<=1,!(ox&4194240)&&(ox=64),e}function zT(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ws(t),e[t]=r}function w7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ws(r),c=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~c}}function mO(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ws(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var en=0;function PF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var OF,gO,MF,kF,IF,LA=!1,sx=[],lu=null,cu=null,uu=null,Fy=new Map,Uy=new Map,Yc=[],S7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GR(e,t){switch(e){case"focusin":case"focusout":lu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":uu=null;break;case"pointerover":case"pointerout":Fy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uy.delete(t.pointerId)}}function Ng(e,t,r,n,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Yv(t),t!==null&&gO(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function E7(e,t,r,n,a){switch(t){case"focusin":return lu=Ng(lu,e,t,r,n,a),!0;case"dragenter":return cu=Ng(cu,e,t,r,n,a),!0;case"mouseover":return uu=Ng(uu,e,t,r,n,a),!0;case"pointerover":var c=a.pointerId;return Fy.set(c,Ng(Fy.get(c)||null,e,t,r,n,a)),!0;case"gotpointercapture":return c=a.pointerId,Uy.set(c,Ng(Uy.get(c)||null,e,t,r,n,a)),!0}return!1}function DF(e){var t=Dh(e.target);if(t!==null){var r=af(t);if(r!==null){if(t=r.tag,t===13){if(t=bF(r),t!==null){e.blockedOn=t,IF(e.priority,function(){MF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);MA=n,r.target.dispatchEvent(n),MA=null}else return t=Yv(r),t!==null&&gO(t),e.blockedOn=r,!1;t.shift()}return!0}function HR(e,t,r){Wx(e)&&r.delete(t)}function T7(){LA=!1,lu!==null&&Wx(lu)&&(lu=null),cu!==null&&Wx(cu)&&(cu=null),uu!==null&&Wx(uu)&&(uu=null),Fy.forEach(HR),Uy.forEach(HR)}function zg(e,t){e.blockedOn===t&&(e.blockedOn=null,LA||(LA=!0,Jo.unstable_scheduleCallback(Jo.unstable_NormalPriority,T7)))}function Vy(e){function t(a){return zg(a,e)}if(0<sx.length){zg(sx[0],e);for(var r=1;r<sx.length;r++){var n=sx[r];n.blockedOn===e&&(n.blockedOn=null)}}for(lu!==null&&zg(lu,e),cu!==null&&zg(cu,e),uu!==null&&zg(uu,e),Fy.forEach(t),Uy.forEach(t),r=0;r<Yc.length;r++)n=Yc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yc.length&&(r=Yc[0],r.blockedOn===null);)DF(r),r.blockedOn===null&&Yc.shift()}var Hd=rc.ReactCurrentBatchConfig,g1=!0;function A7(e,t,r,n){var a=en,c=Hd.transition;Hd.transition=null;try{en=1,yO(e,t,r,n)}finally{en=a,Hd.transition=c}}function C7(e,t,r,n){var a=en,c=Hd.transition;Hd.transition=null;try{en=4,yO(e,t,r,n)}finally{en=a,Hd.transition=c}}function yO(e,t,r,n){if(g1){var a=jA(e,t,r,n);if(a===null)XT(e,t,n,y1,r),GR(e,n);else if(E7(a,e,t,r,n))n.stopPropagation();else if(GR(e,n),t&4&&-1<S7.indexOf(e)){for(;a!==null;){var c=Yv(a);if(c!==null&&OF(c),c=jA(e,t,r,n),c===null&&XT(e,t,n,y1,r),c===a)break;a=c}a!==null&&n.stopPropagation()}else XT(e,t,n,null,r)}}var y1=null;function jA(e,t,r,n){if(y1=null,e=dO(n),e=Dh(e),e!==null)if(t=af(e),t===null)e=null;else if(r=t.tag,r===13){if(e=bF(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return y1=e,null}function RF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p7()){case pO:return 1;case TF:return 4;case p1:case m7:return 16;case AF:return 536870912;default:return 16}default:return 16}}var eu=null,vO=null,qx=null;function LF(){if(qx)return qx;var e,t=vO,r=t.length,n,a="value"in eu?eu.value:eu.textContent,c=a.length;for(e=0;e<r&&t[e]===a[e];e++);var f=r-e;for(n=1;n<=f&&t[r-n]===a[c-n];n++);return qx=a.slice(e,1<n?1-n:void 0)}function Gx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lx(){return!0}function ZR(){return!1}function na(e){function t(r,n,a,c,f){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(c):c[o]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?lx:ZR,this.isPropagationStopped=ZR,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lx)},persist:function(){},isPersistent:lx}),t}var Lp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_O=na(Lp),Kv=Fn({},Lp,{view:0,detail:0}),P7=na(Kv),BT,FT,Bg,Zb=Fn({},Kv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xO,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bg&&(Bg&&e.type==="mousemove"?(BT=e.screenX-Bg.screenX,FT=e.screenY-Bg.screenY):FT=BT=0,Bg=e),BT)},movementY:function(e){return"movementY"in e?e.movementY:FT}}),XR=na(Zb),O7=Fn({},Zb,{dataTransfer:0}),M7=na(O7),k7=Fn({},Kv,{relatedTarget:0}),UT=na(k7),I7=Fn({},Lp,{animationName:0,elapsedTime:0,pseudoElement:0}),D7=na(I7),R7=Fn({},Lp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L7=na(R7),j7=Fn({},Lp,{data:0}),KR=na(j7),$7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z7[e])?!!t[e]:!1}function xO(){return B7}var F7=Fn({},Kv,{key:function(e){if(e.key){var t=$7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xO,charCode:function(e){return e.type==="keypress"?Gx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U7=na(F7),V7=Fn({},Zb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YR=na(V7),W7=Fn({},Kv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xO}),q7=na(W7),G7=Fn({},Lp,{propertyName:0,elapsedTime:0,pseudoElement:0}),H7=na(G7),Z7=Fn({},Zb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X7=na(Z7),K7=[9,13,27,32],bO=ql&&"CompositionEvent"in window,xy=null;ql&&"documentMode"in document&&(xy=document.documentMode);var Y7=ql&&"TextEvent"in window&&!xy,jF=ql&&(!bO||xy&&8<xy&&11>=xy),JR=String.fromCharCode(32),QR=!1;function $F(e,t){switch(e){case"keyup":return K7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Md=!1;function J7(e,t){switch(e){case"compositionend":return NF(t);case"keypress":return t.which!==32?null:(QR=!0,JR);case"textInput":return e=t.data,e===JR&&QR?null:e;default:return null}}function Q7(e,t){if(Md)return e==="compositionend"||!bO&&$F(e,t)?(e=LF(),qx=vO=eu=null,Md=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jF&&t.locale!=="ko"?null:t.data;default:return null}}var eH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eH[e.type]:t==="textarea"}function zF(e,t,r,n){gF(n),t=v1(t,"onChange"),0<t.length&&(r=new _O("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var by=null,Wy=null;function tH(e){KF(e,0)}function Xb(e){var t=Dd(e);if(cF(t))return e}function rH(e,t){if(e==="change")return t}var BF=!1;if(ql){var VT;if(ql){var WT="oninput"in document;if(!WT){var tL=document.createElement("div");tL.setAttribute("oninput","return;"),WT=typeof tL.oninput=="function"}VT=WT}else VT=!1;BF=VT&&(!document.documentMode||9<document.documentMode)}function rL(){by&&(by.detachEvent("onpropertychange",FF),Wy=by=null)}function FF(e){if(e.propertyName==="value"&&Xb(Wy)){var t=[];zF(t,Wy,e,dO(e)),xF(tH,t)}}function nH(e,t,r){e==="focusin"?(rL(),by=t,Wy=r,by.attachEvent("onpropertychange",FF)):e==="focusout"&&rL()}function iH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xb(Wy)}function oH(e,t){if(e==="click")return Xb(t)}function aH(e,t){if(e==="input"||e==="change")return Xb(t)}function sH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Es=typeof Object.is=="function"?Object.is:sH;function qy(e,t){if(Es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!vA.call(t,a)||!Es(e[a],t[a]))return!1}return!0}function nL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iL(e,t){var r=nL(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nL(r)}}function UF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function VF(){for(var e=window,t=h1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=h1(e.document)}return t}function wO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lH(e){var t=VF(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&UF(r.ownerDocument.documentElement,r)){if(n!==null&&wO(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,c=Math.min(n.start,a);n=n.end===void 0?c:Math.min(n.end,a),!e.extend&&c>n&&(a=n,n=c,c=a),a=iL(r,c);var f=iL(r,n);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>n?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cH=ql&&"documentMode"in document&&11>=document.documentMode,kd=null,$A=null,wy=null,NA=!1;function oL(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;NA||kd==null||kd!==h1(n)||(n=kd,"selectionStart"in n&&wO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wy&&qy(wy,n)||(wy=n,n=v1($A,"onSelect"),0<n.length&&(t=new _O("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=kd)))}function cx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Id={animationend:cx("Animation","AnimationEnd"),animationiteration:cx("Animation","AnimationIteration"),animationstart:cx("Animation","AnimationStart"),transitionend:cx("Transition","TransitionEnd")},qT={},WF={};ql&&(WF=document.createElement("div").style,"AnimationEvent"in window||(delete Id.animationend.animation,delete Id.animationiteration.animation,delete Id.animationstart.animation),"TransitionEvent"in window||delete Id.transitionend.transition);function Kb(e){if(qT[e])return qT[e];if(!Id[e])return e;var t=Id[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in WF)return qT[e]=t[r];return e}var qF=Kb("animationend"),GF=Kb("animationiteration"),HF=Kb("animationstart"),ZF=Kb("transitionend"),XF=new Map,aL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cu(e,t){XF.set(e,t),of(t,[e])}for(var GT=0;GT<aL.length;GT++){var HT=aL[GT],uH=HT.toLowerCase(),hH=HT[0].toUpperCase()+HT.slice(1);Cu(uH,"on"+hH)}Cu(qF,"onAnimationEnd");Cu(GF,"onAnimationIteration");Cu(HF,"onAnimationStart");Cu("dblclick","onDoubleClick");Cu("focusin","onFocus");Cu("focusout","onBlur");Cu(ZF,"onTransitionEnd");tp("onMouseEnter",["mouseout","mouseover"]);tp("onMouseLeave",["mouseout","mouseover"]);tp("onPointerEnter",["pointerout","pointerover"]);tp("onPointerLeave",["pointerout","pointerover"]);of("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));of("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));of("onBeforeInput",["compositionend","keypress","textInput","paste"]);of("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));of("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));of("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fH=new Set("cancel close invalid load scroll toggle".split(" ").concat(uy));function sL(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,u7(n,t,void 0,e),e.currentTarget=null}function KF(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var f=n.length-1;0<=f;f--){var o=n[f],m=o.instance,_=o.currentTarget;if(o=o.listener,m!==c&&a.isPropagationStopped())break e;sL(a,o,_),c=m}else for(f=0;f<n.length;f++){if(o=n[f],m=o.instance,_=o.currentTarget,o=o.listener,m!==c&&a.isPropagationStopped())break e;sL(a,o,_),c=m}}}if(d1)throw e=DA,d1=!1,DA=null,e}function _n(e,t){var r=t[VA];r===void 0&&(r=t[VA]=new Set);var n=e+"__bubble";r.has(n)||(YF(t,e,2,!1),r.add(n))}function ZT(e,t,r){var n=0;t&&(n|=4),YF(r,e,n,t)}var ux="_reactListening"+Math.random().toString(36).slice(2);function Gy(e){if(!e[ux]){e[ux]=!0,iF.forEach(function(r){r!=="selectionchange"&&(fH.has(r)||ZT(r,!1,e),ZT(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ux]||(t[ux]=!0,ZT("selectionchange",!1,t))}}function YF(e,t,r,n){switch(RF(t)){case 1:var a=A7;break;case 4:a=C7;break;default:a=yO}r=a.bind(null,t,r,e),a=void 0,!IA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function XT(e,t,r,n,a){var c=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(f===4)for(f=n.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;f=f.return}for(;o!==null;){if(f=Dh(o),f===null)return;if(m=f.tag,m===5||m===6){n=c=f;continue e}o=o.parentNode}}n=n.return}xF(function(){var _=c,w=dO(r),E=[];e:{var C=XF.get(e);if(C!==void 0){var M=_O,I=e;switch(e){case"keypress":if(Gx(r)===0)break e;case"keydown":case"keyup":M=U7;break;case"focusin":I="focus",M=UT;break;case"focusout":I="blur",M=UT;break;case"beforeblur":case"afterblur":M=UT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=XR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=M7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=q7;break;case qF:case GF:case HF:M=D7;break;case ZF:M=H7;break;case"scroll":M=P7;break;case"wheel":M=X7;break;case"copy":case"cut":case"paste":M=L7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=YR}var D=(t&4)!==0,$=!D&&e==="scroll",B=D?C!==null?C+"Capture":null:C;D=[];for(var F=_,R;F!==null;){R=F;var U=R.stateNode;if(R.tag===5&&U!==null&&(R=U,B!==null&&(U=By(F,B),U!=null&&D.push(Hy(F,U,R)))),$)break;F=F.return}0<D.length&&(C=new M(C,I,null,r,w),E.push({event:C,listeners:D}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",C&&r!==MA&&(I=r.relatedTarget||r.fromElement)&&(Dh(I)||I[Gl]))break e;if((M||C)&&(C=w.window===w?w:(C=w.ownerDocument)?C.defaultView||C.parentWindow:window,M?(I=r.relatedTarget||r.toElement,M=_,I=I?Dh(I):null,I!==null&&($=af(I),I!==$||I.tag!==5&&I.tag!==6)&&(I=null)):(M=null,I=_),M!==I)){if(D=XR,U="onMouseLeave",B="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(D=YR,U="onPointerLeave",B="onPointerEnter",F="pointer"),$=M==null?C:Dd(M),R=I==null?C:Dd(I),C=new D(U,F+"leave",M,r,w),C.target=$,C.relatedTarget=R,U=null,Dh(w)===_&&(D=new D(B,F+"enter",I,r,w),D.target=R,D.relatedTarget=$,U=D),$=U,M&&I)t:{for(D=M,B=I,F=0,R=D;R;R=yd(R))F++;for(R=0,U=B;U;U=yd(U))R++;for(;0<F-R;)D=yd(D),F--;for(;0<R-F;)B=yd(B),R--;for(;F--;){if(D===B||B!==null&&D===B.alternate)break t;D=yd(D),B=yd(B)}D=null}else D=null;M!==null&&lL(E,C,M,D,!1),I!==null&&$!==null&&lL(E,$,I,D,!0)}}e:{if(C=_?Dd(_):window,M=C.nodeName&&C.nodeName.toLowerCase(),M==="select"||M==="input"&&C.type==="file")var H=rH;else if(eL(C))if(BF)H=aH;else{H=iH;var X=nH}else(M=C.nodeName)&&M.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(H=oH);if(H&&(H=H(e,_))){zF(E,H,r,w);break e}X&&X(e,C,_),e==="focusout"&&(X=C._wrapperState)&&X.controlled&&C.type==="number"&&TA(C,"number",C.value)}switch(X=_?Dd(_):window,e){case"focusin":(eL(X)||X.contentEditable==="true")&&(kd=X,$A=_,wy=null);break;case"focusout":wy=$A=kd=null;break;case"mousedown":NA=!0;break;case"contextmenu":case"mouseup":case"dragend":NA=!1,oL(E,r,w);break;case"selectionchange":if(cH)break;case"keydown":case"keyup":oL(E,r,w)}var ee;if(bO)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Md?$F(e,r)&&(oe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(oe="onCompositionStart");oe&&(jF&&r.locale!=="ko"&&(Md||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Md&&(ee=LF()):(eu=w,vO="value"in eu?eu.value:eu.textContent,Md=!0)),X=v1(_,oe),0<X.length&&(oe=new KR(oe,e,null,r,w),E.push({event:oe,listeners:X}),ee?oe.data=ee:(ee=NF(r),ee!==null&&(oe.data=ee)))),(ee=Y7?J7(e,r):Q7(e,r))&&(_=v1(_,"onBeforeInput"),0<_.length&&(w=new KR("onBeforeInput","beforeinput",null,r,w),E.push({event:w,listeners:_}),w.data=ee))}KF(E,t)})}function Hy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function v1(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=By(e,r),c!=null&&n.unshift(Hy(e,c,a)),c=By(e,t),c!=null&&n.push(Hy(e,c,a))),e=e.return}return n}function yd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lL(e,t,r,n,a){for(var c=t._reactName,f=[];r!==null&&r!==n;){var o=r,m=o.alternate,_=o.stateNode;if(m!==null&&m===n)break;o.tag===5&&_!==null&&(o=_,a?(m=By(r,c),m!=null&&f.unshift(Hy(r,m,o))):a||(m=By(r,c),m!=null&&f.push(Hy(r,m,o)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var dH=/\r\n?/g,pH=/\u0000|\uFFFD/g;function cL(e){return(typeof e=="string"?e:""+e).replace(dH,`
`).replace(pH,"")}function hx(e,t,r){if(t=cL(t),cL(e)!==t&&r)throw Error(Et(425))}function _1(){}var zA=null,BA=null;function FA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var UA=typeof setTimeout=="function"?setTimeout:void 0,mH=typeof clearTimeout=="function"?clearTimeout:void 0,uL=typeof Promise=="function"?Promise:void 0,gH=typeof queueMicrotask=="function"?queueMicrotask:typeof uL<"u"?function(e){return uL.resolve(null).then(e).catch(yH)}:UA;function yH(e){setTimeout(function(){throw e})}function KT(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Vy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Vy(t)}function hu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jp=Math.random().toString(36).slice(2),Ws="__reactFiber$"+jp,Zy="__reactProps$"+jp,Gl="__reactContainer$"+jp,VA="__reactEvents$"+jp,vH="__reactListeners$"+jp,_H="__reactHandles$"+jp;function Dh(e){var t=e[Ws];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gl]||r[Ws]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hL(e);e!==null;){if(r=e[Ws])return r;e=hL(e)}return t}e=r,r=e.parentNode}return null}function Yv(e){return e=e[Ws]||e[Gl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Et(33))}function Yb(e){return e[Zy]||null}var WA=[],Rd=-1;function Pu(e){return{current:e}}function Sn(e){0>Rd||(e.current=WA[Rd],WA[Rd]=null,Rd--)}function pn(e,t){Rd++,WA[Rd]=e.current,e.current=t}var Su={},no=Pu(Su),Oo=Pu(!1),Gh=Su;function rp(e,t){var r=e.type.contextTypes;if(!r)return Su;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in r)a[c]=t[c];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mo(e){return e=e.childContextTypes,e!=null}function x1(){Sn(Oo),Sn(no)}function fL(e,t,r){if(no.current!==Su)throw Error(Et(168));pn(no,t),pn(Oo,r)}function JF(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Et(108,n7(e)||"Unknown",a));return Fn({},r,n)}function b1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Su,Gh=no.current,pn(no,e),pn(Oo,Oo.current),!0}function dL(e,t,r){var n=e.stateNode;if(!n)throw Error(Et(169));r?(e=JF(e,t,Gh),n.__reactInternalMemoizedMergedChildContext=e,Sn(Oo),Sn(no),pn(no,e)):Sn(Oo),pn(Oo,r)}var kl=null,Jb=!1,YT=!1;function QF(e){kl===null?kl=[e]:kl.push(e)}function xH(e){Jb=!0,QF(e)}function Ou(){if(!YT&&kl!==null){YT=!0;var e=0,t=en;try{var r=kl;for(en=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}kl=null,Jb=!1}catch(a){throw kl!==null&&(kl=kl.slice(e+1)),EF(pO,Ou),a}finally{en=t,YT=!1}}return null}var Ld=[],jd=0,w1=null,S1=0,wa=[],Sa=0,Hh=null,Rl=1,Ll="";function Th(e,t){Ld[jd++]=S1,Ld[jd++]=w1,w1=e,S1=t}function e4(e,t,r){wa[Sa++]=Rl,wa[Sa++]=Ll,wa[Sa++]=Hh,Hh=e;var n=Rl;e=Ll;var a=32-ws(n)-1;n&=~(1<<a),r+=1;var c=32-ws(t)+a;if(30<c){var f=a-a%5;c=(n&(1<<f)-1).toString(32),n>>=f,a-=f,Rl=1<<32-ws(t)+a|r<<a|n,Ll=c+e}else Rl=1<<c|r<<a|n,Ll=e}function SO(e){e.return!==null&&(Th(e,1),e4(e,1,0))}function EO(e){for(;e===w1;)w1=Ld[--jd],Ld[jd]=null,S1=Ld[--jd],Ld[jd]=null;for(;e===Hh;)Hh=wa[--Sa],wa[Sa]=null,Ll=wa[--Sa],wa[Sa]=null,Rl=wa[--Sa],wa[Sa]=null}var Yo=null,Ko=null,Pn=!1,ms=null;function t4(e,t){var r=Ca(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yo=e,Ko=hu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yo=e,Ko=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Hh!==null?{id:Rl,overflow:Ll}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ca(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Yo=e,Ko=null,!0):!1;default:return!1}}function qA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function GA(e){if(Pn){var t=Ko;if(t){var r=t;if(!pL(e,t)){if(qA(e))throw Error(Et(418));t=hu(r.nextSibling);var n=Yo;t&&pL(e,t)?t4(n,r):(e.flags=e.flags&-4097|2,Pn=!1,Yo=e)}}else{if(qA(e))throw Error(Et(418));e.flags=e.flags&-4097|2,Pn=!1,Yo=e}}}function mL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yo=e}function fx(e){if(e!==Yo)return!1;if(!Pn)return mL(e),Pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!FA(e.type,e.memoizedProps)),t&&(t=Ko)){if(qA(e))throw r4(),Error(Et(418));for(;t;)t4(e,t),t=hu(t.nextSibling)}if(mL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ko=hu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ko=null}}else Ko=Yo?hu(e.stateNode.nextSibling):null;return!0}function r4(){for(var e=Ko;e;)e=hu(e.nextSibling)}function np(){Ko=Yo=null,Pn=!1}function TO(e){ms===null?ms=[e]:ms.push(e)}var bH=rc.ReactCurrentBatchConfig;function hs(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var E1=Pu(null),T1=null,$d=null,AO=null;function CO(){AO=$d=T1=null}function PO(e){var t=E1.current;Sn(E1),e._currentValue=t}function HA(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Zd(e,t){T1=e,AO=$d=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ao=!0),e.firstContext=null)}function Ra(e){var t=e._currentValue;if(AO!==e)if(e={context:e,memoizedValue:t,next:null},$d===null){if(T1===null)throw Error(Et(308));$d=e,T1.dependencies={lanes:0,firstContext:e}}else $d=$d.next=e;return t}var Rh=null;function OO(e){Rh===null?Rh=[e]:Rh.push(e)}function n4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,OO(t)):(r.next=a.next,a.next=r),t.interleaved=r,Hl(e,n)}function Hl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gc=!1;function MO(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,jr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Hl(e,r)}return a=n.interleaved,a===null?(t.next=t,OO(n)):(t.next=a.next,a.next=t),n.interleaved=t,Hl(e,r)}function Hx(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mO(e,r)}}function gL(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?a=c=f:c=c.next=f,r=r.next}while(r!==null);c===null?a=c=t:c=c.next=t}else a=c=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function A1(e,t,r,n){var a=e.updateQueue;Gc=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var m=o,_=m.next;m.next=null,f===null?c=_:f.next=_,f=m;var w=e.alternate;w!==null&&(w=w.updateQueue,o=w.lastBaseUpdate,o!==f&&(o===null?w.firstBaseUpdate=_:o.next=_,w.lastBaseUpdate=m))}if(c!==null){var E=a.baseState;f=0,w=_=m=null,o=c;do{var C=o.lane,M=o.eventTime;if((n&C)===C){w!==null&&(w=w.next={eventTime:M,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var I=e,D=o;switch(C=t,M=r,D.tag){case 1:if(I=D.payload,typeof I=="function"){E=I.call(M,E,C);break e}E=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=D.payload,C=typeof I=="function"?I.call(M,E,C):I,C==null)break e;E=Fn({},E,C);break e;case 2:Gc=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,C=a.effects,C===null?a.effects=[o]:C.push(o))}else M={eventTime:M,lane:C,tag:o.tag,payload:o.payload,callback:o.callback,next:null},w===null?(_=w=M,m=E):w=w.next=M,f|=C;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;C=o,o=C.next,C.next=null,a.lastBaseUpdate=C,a.shared.pending=null}}while(1);if(w===null&&(m=E),a.baseState=m,a.firstBaseUpdate=_,a.lastBaseUpdate=w,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Xh|=f,e.lanes=f,e.memoizedState=E}}function yL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Et(191,a));a.call(n)}}}var o4=new nF.Component().refs;function ZA(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Fn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qb={isMounted:function(e){return(e=e._reactInternals)?af(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ho(),a=pu(e),c=zl(n,a);c.payload=t,r!=null&&(c.callback=r),t=fu(e,c,a),t!==null&&(Ss(t,e,a,n),Hx(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ho(),a=pu(e),c=zl(n,a);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=fu(e,c,a),t!==null&&(Ss(t,e,a,n),Hx(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ho(),n=pu(e),a=zl(r,n);a.tag=2,t!=null&&(a.callback=t),t=fu(e,a,n),t!==null&&(Ss(t,e,n,r),Hx(t,e,n))}};function vL(e,t,r,n,a,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,f):t.prototype&&t.prototype.isPureReactComponent?!qy(r,n)||!qy(a,c):!0}function a4(e,t,r){var n=!1,a=Su,c=t.contextType;return typeof c=="object"&&c!==null?c=Ra(c):(a=Mo(t)?Gh:no.current,n=t.contextTypes,c=(n=n!=null)?rp(e,a):Su),t=new t(r,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qb,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function _L(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Qb.enqueueReplaceState(t,t.state,null)}function XA(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=o4,MO(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Ra(c):(c=Mo(t)?Gh:no.current,a.context=rp(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(ZA(e,t,c,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Qb.enqueueReplaceState(a,a.state,null),A1(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Et(309));var n=r.stateNode}if(!n)throw Error(Et(147,e));var a=n,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var o=a.refs;o===o4&&(o=a.refs={}),f===null?delete o[c]:o[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Et(284));if(!r._owner)throw Error(Et(290,e))}return e}function dx(e,t){throw e=Object.prototype.toString.call(t),Error(Et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xL(e){var t=e._init;return t(e._payload)}function s4(e){function t(B,F){if(e){var R=B.deletions;R===null?(B.deletions=[F],B.flags|=16):R.push(F)}}function r(B,F){if(!e)return null;for(;F!==null;)t(B,F),F=F.sibling;return null}function n(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function a(B,F){return B=mu(B,F),B.index=0,B.sibling=null,B}function c(B,F,R){return B.index=R,e?(R=B.alternate,R!==null?(R=R.index,R<F?(B.flags|=2,F):R):(B.flags|=2,F)):(B.flags|=1048576,F)}function f(B){return e&&B.alternate===null&&(B.flags|=2),B}function o(B,F,R,U){return F===null||F.tag!==6?(F=i2(R,B.mode,U),F.return=B,F):(F=a(F,R),F.return=B,F)}function m(B,F,R,U){var H=R.type;return H===Od?w(B,F,R.props.children,U,R.key):F!==null&&(F.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===qc&&xL(H)===F.type)?(U=a(F,R.props),U.ref=Fg(B,F,R),U.return=B,U):(U=Qx(R.type,R.key,R.props,null,B.mode,U),U.ref=Fg(B,F,R),U.return=B,U)}function _(B,F,R,U){return F===null||F.tag!==4||F.stateNode.containerInfo!==R.containerInfo||F.stateNode.implementation!==R.implementation?(F=o2(R,B.mode,U),F.return=B,F):(F=a(F,R.children||[]),F.return=B,F)}function w(B,F,R,U,H){return F===null||F.tag!==7?(F=Bh(R,B.mode,U,H),F.return=B,F):(F=a(F,R),F.return=B,F)}function E(B,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return F=i2(""+F,B.mode,R),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case rx:return R=Qx(F.type,F.key,F.props,null,B.mode,R),R.ref=Fg(B,null,F),R.return=B,R;case Pd:return F=o2(F,B.mode,R),F.return=B,F;case qc:var U=F._init;return E(B,U(F._payload),R)}if(ly(F)||jg(F))return F=Bh(F,B.mode,R,null),F.return=B,F;dx(B,F)}return null}function C(B,F,R,U){var H=F!==null?F.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return H!==null?null:o(B,F,""+R,U);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case rx:return R.key===H?m(B,F,R,U):null;case Pd:return R.key===H?_(B,F,R,U):null;case qc:return H=R._init,C(B,F,H(R._payload),U)}if(ly(R)||jg(R))return H!==null?null:w(B,F,R,U,null);dx(B,R)}return null}function M(B,F,R,U,H){if(typeof U=="string"&&U!==""||typeof U=="number")return B=B.get(R)||null,o(F,B,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case rx:return B=B.get(U.key===null?R:U.key)||null,m(F,B,U,H);case Pd:return B=B.get(U.key===null?R:U.key)||null,_(F,B,U,H);case qc:var X=U._init;return M(B,F,R,X(U._payload),H)}if(ly(U)||jg(U))return B=B.get(R)||null,w(F,B,U,H,null);dx(F,U)}return null}function I(B,F,R,U){for(var H=null,X=null,ee=F,oe=F=0,ae=null;ee!==null&&oe<R.length;oe++){ee.index>oe?(ae=ee,ee=null):ae=ee.sibling;var ge=C(B,ee,R[oe],U);if(ge===null){ee===null&&(ee=ae);break}e&&ee&&ge.alternate===null&&t(B,ee),F=c(ge,F,oe),X===null?H=ge:X.sibling=ge,X=ge,ee=ae}if(oe===R.length)return r(B,ee),Pn&&Th(B,oe),H;if(ee===null){for(;oe<R.length;oe++)ee=E(B,R[oe],U),ee!==null&&(F=c(ee,F,oe),X===null?H=ee:X.sibling=ee,X=ee);return Pn&&Th(B,oe),H}for(ee=n(B,ee);oe<R.length;oe++)ae=M(ee,B,oe,R[oe],U),ae!==null&&(e&&ae.alternate!==null&&ee.delete(ae.key===null?oe:ae.key),F=c(ae,F,oe),X===null?H=ae:X.sibling=ae,X=ae);return e&&ee.forEach(function(he){return t(B,he)}),Pn&&Th(B,oe),H}function D(B,F,R,U){var H=jg(R);if(typeof H!="function")throw Error(Et(150));if(R=H.call(R),R==null)throw Error(Et(151));for(var X=H=null,ee=F,oe=F=0,ae=null,ge=R.next();ee!==null&&!ge.done;oe++,ge=R.next()){ee.index>oe?(ae=ee,ee=null):ae=ee.sibling;var he=C(B,ee,ge.value,U);if(he===null){ee===null&&(ee=ae);break}e&&ee&&he.alternate===null&&t(B,ee),F=c(he,F,oe),X===null?H=he:X.sibling=he,X=he,ee=ae}if(ge.done)return r(B,ee),Pn&&Th(B,oe),H;if(ee===null){for(;!ge.done;oe++,ge=R.next())ge=E(B,ge.value,U),ge!==null&&(F=c(ge,F,oe),X===null?H=ge:X.sibling=ge,X=ge);return Pn&&Th(B,oe),H}for(ee=n(B,ee);!ge.done;oe++,ge=R.next())ge=M(ee,B,oe,ge.value,U),ge!==null&&(e&&ge.alternate!==null&&ee.delete(ge.key===null?oe:ge.key),F=c(ge,F,oe),X===null?H=ge:X.sibling=ge,X=ge);return e&&ee.forEach(function(ve){return t(B,ve)}),Pn&&Th(B,oe),H}function $(B,F,R,U){if(typeof R=="object"&&R!==null&&R.type===Od&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case rx:e:{for(var H=R.key,X=F;X!==null;){if(X.key===H){if(H=R.type,H===Od){if(X.tag===7){r(B,X.sibling),F=a(X,R.props.children),F.return=B,B=F;break e}}else if(X.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===qc&&xL(H)===X.type){r(B,X.sibling),F=a(X,R.props),F.ref=Fg(B,X,R),F.return=B,B=F;break e}r(B,X);break}else t(B,X);X=X.sibling}R.type===Od?(F=Bh(R.props.children,B.mode,U,R.key),F.return=B,B=F):(U=Qx(R.type,R.key,R.props,null,B.mode,U),U.ref=Fg(B,F,R),U.return=B,B=U)}return f(B);case Pd:e:{for(X=R.key;F!==null;){if(F.key===X)if(F.tag===4&&F.stateNode.containerInfo===R.containerInfo&&F.stateNode.implementation===R.implementation){r(B,F.sibling),F=a(F,R.children||[]),F.return=B,B=F;break e}else{r(B,F);break}else t(B,F);F=F.sibling}F=o2(R,B.mode,U),F.return=B,B=F}return f(B);case qc:return X=R._init,$(B,F,X(R._payload),U)}if(ly(R))return I(B,F,R,U);if(jg(R))return D(B,F,R,U);dx(B,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,F!==null&&F.tag===6?(r(B,F.sibling),F=a(F,R),F.return=B,B=F):(r(B,F),F=i2(R,B.mode,U),F.return=B,B=F),f(B)):r(B,F)}return $}var ip=s4(!0),l4=s4(!1),Jv={},Hs=Pu(Jv),Xy=Pu(Jv),Ky=Pu(Jv);function Lh(e){if(e===Jv)throw Error(Et(174));return e}function kO(e,t){switch(pn(Ky,t),pn(Xy,e),pn(Hs,Jv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:CA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=CA(t,e)}Sn(Hs),pn(Hs,t)}function op(){Sn(Hs),Sn(Xy),Sn(Ky)}function c4(e){Lh(Ky.current);var t=Lh(Hs.current),r=CA(t,e.type);t!==r&&(pn(Xy,e),pn(Hs,r))}function IO(e){Xy.current===e&&(Sn(Hs),Sn(Xy))}var zn=Pu(0);function C1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var JT=[];function DO(){for(var e=0;e<JT.length;e++)JT[e]._workInProgressVersionPrimary=null;JT.length=0}var Zx=rc.ReactCurrentDispatcher,QT=rc.ReactCurrentBatchConfig,Zh=0,Bn=null,mi=null,Oi=null,P1=!1,Sy=!1,Yy=0,wH=0;function Yi(){throw Error(Et(321))}function RO(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Es(e[r],t[r]))return!1;return!0}function LO(e,t,r,n,a,c){if(Zh=c,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zx.current=e===null||e.memoizedState===null?AH:CH,e=r(n,a),Sy){c=0;do{if(Sy=!1,Yy=0,25<=c)throw Error(Et(301));c+=1,Oi=mi=null,t.updateQueue=null,Zx.current=PH,e=r(n,a)}while(Sy)}if(Zx.current=O1,t=mi!==null&&mi.next!==null,Zh=0,Oi=mi=Bn=null,P1=!1,t)throw Error(Et(300));return e}function jO(){var e=Yy!==0;return Yy=0,e}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?Bn.memoizedState=Oi=e:Oi=Oi.next=e,Oi}function La(){if(mi===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=mi.next;var t=Oi===null?Bn.memoizedState:Oi.next;if(t!==null)Oi=t,mi=e;else{if(e===null)throw Error(Et(310));mi=e,e={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Oi===null?Bn.memoizedState=Oi=e:Oi=Oi.next=e}return Oi}function Jy(e,t){return typeof t=="function"?t(e):t}function e2(e){var t=La(),r=t.queue;if(r===null)throw Error(Et(311));r.lastRenderedReducer=e;var n=mi,a=n.baseQueue,c=r.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}n.baseQueue=a=c,r.pending=null}if(a!==null){c=a.next,n=n.baseState;var o=f=null,m=null,_=c;do{var w=_.lane;if((Zh&w)===w)m!==null&&(m=m.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),n=_.hasEagerState?_.eagerState:e(n,_.action);else{var E={lane:w,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};m===null?(o=m=E,f=n):m=m.next=E,Bn.lanes|=w,Xh|=w}_=_.next}while(_!==null&&_!==c);m===null?f=n:m.next=o,Es(n,t.memoizedState)||(Ao=!0),t.memoizedState=n,t.baseState=f,t.baseQueue=m,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do c=a.lane,Bn.lanes|=c,Xh|=c,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function t2(e){var t=La(),r=t.queue;if(r===null)throw Error(Et(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,c=t.memoizedState;if(a!==null){r.pending=null;var f=a=a.next;do c=e(c,f.action),f=f.next;while(f!==a);Es(c,t.memoizedState)||(Ao=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,n]}function u4(){}function h4(e,t){var r=Bn,n=La(),a=t(),c=!Es(n.memoizedState,a);if(c&&(n.memoizedState=a,Ao=!0),n=n.queue,$O(p4.bind(null,r,n,e),[e]),n.getSnapshot!==t||c||Oi!==null&&Oi.memoizedState.tag&1){if(r.flags|=2048,Qy(9,d4.bind(null,r,n,a,t),void 0,null),Mi===null)throw Error(Et(349));Zh&30||f4(r,t,a)}return a}function f4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function d4(e,t,r,n){t.value=r,t.getSnapshot=n,m4(t)&&g4(e)}function p4(e,t,r){return r(function(){m4(t)&&g4(e)})}function m4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Es(e,r)}catch{return!0}}function g4(e){var t=Hl(e,1);t!==null&&Ss(t,e,1,-1)}function bL(e){var t=Fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jy,lastRenderedState:e},t.queue=e,e=e.dispatch=TH.bind(null,Bn,e),[t.memoizedState,e]}function Qy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function y4(){return La().memoizedState}function Xx(e,t,r,n){var a=Fs();Bn.flags|=e,a.memoizedState=Qy(1|t,r,void 0,n===void 0?null:n)}function ew(e,t,r,n){var a=La();n=n===void 0?null:n;var c=void 0;if(mi!==null){var f=mi.memoizedState;if(c=f.destroy,n!==null&&RO(n,f.deps)){a.memoizedState=Qy(t,r,c,n);return}}Bn.flags|=e,a.memoizedState=Qy(1|t,r,c,n)}function wL(e,t){return Xx(8390656,8,e,t)}function $O(e,t){return ew(2048,8,e,t)}function v4(e,t){return ew(4,2,e,t)}function _4(e,t){return ew(4,4,e,t)}function x4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function b4(e,t,r){return r=r!=null?r.concat([e]):null,ew(4,4,x4.bind(null,t,e),r)}function NO(){}function w4(e,t){var r=La();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&RO(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function S4(e,t){var r=La();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&RO(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function E4(e,t,r){return Zh&21?(Es(r,t)||(r=CF(),Bn.lanes|=r,Xh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ao=!0),e.memoizedState=r)}function SH(e,t){var r=en;en=r!==0&&4>r?r:4,e(!0);var n=QT.transition;QT.transition={};try{e(!1),t()}finally{en=r,QT.transition=n}}function T4(){return La().memoizedState}function EH(e,t,r){var n=pu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},A4(e))C4(t,r);else if(r=n4(e,t,r,n),r!==null){var a=ho();Ss(r,e,n,a),P4(r,t,n)}}function TH(e,t,r){var n=pu(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(A4(e))C4(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,o=c(f,r);if(a.hasEagerState=!0,a.eagerState=o,Es(o,f)){var m=t.interleaved;m===null?(a.next=a,OO(t)):(a.next=m.next,m.next=a),t.interleaved=a;return}}catch{}finally{}r=n4(e,t,a,n),r!==null&&(a=ho(),Ss(r,e,n,a),P4(r,t,n))}}function A4(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function C4(e,t){Sy=P1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function P4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mO(e,r)}}var O1={readContext:Ra,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useInsertionEffect:Yi,useLayoutEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useMutableSource:Yi,useSyncExternalStore:Yi,useId:Yi,unstable_isNewReconciler:!1},AH={readContext:Ra,useCallback:function(e,t){return Fs().memoizedState=[e,t===void 0?null:t],e},useContext:Ra,useEffect:wL,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Xx(4194308,4,x4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Xx(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xx(4,2,e,t)},useMemo:function(e,t){var r=Fs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Fs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=EH.bind(null,Bn,e),[n.memoizedState,e]},useRef:function(e){var t=Fs();return e={current:e},t.memoizedState=e},useState:bL,useDebugValue:NO,useDeferredValue:function(e){return Fs().memoizedState=e},useTransition:function(){var e=bL(!1),t=e[0];return e=SH.bind(null,e[1]),Fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Bn,a=Fs();if(Pn){if(r===void 0)throw Error(Et(407));r=r()}else{if(r=t(),Mi===null)throw Error(Et(349));Zh&30||f4(n,t,r)}a.memoizedState=r;var c={value:r,getSnapshot:t};return a.queue=c,wL(p4.bind(null,n,c,e),[e]),n.flags|=2048,Qy(9,d4.bind(null,n,c,r,t),void 0,null),r},useId:function(){var e=Fs(),t=Mi.identifierPrefix;if(Pn){var r=Ll,n=Rl;r=(n&~(1<<32-ws(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wH++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CH={readContext:Ra,useCallback:w4,useContext:Ra,useEffect:$O,useImperativeHandle:b4,useInsertionEffect:v4,useLayoutEffect:_4,useMemo:S4,useReducer:e2,useRef:y4,useState:function(){return e2(Jy)},useDebugValue:NO,useDeferredValue:function(e){var t=La();return E4(t,mi.memoizedState,e)},useTransition:function(){var e=e2(Jy)[0],t=La().memoizedState;return[e,t]},useMutableSource:u4,useSyncExternalStore:h4,useId:T4,unstable_isNewReconciler:!1},PH={readContext:Ra,useCallback:w4,useContext:Ra,useEffect:$O,useImperativeHandle:b4,useInsertionEffect:v4,useLayoutEffect:_4,useMemo:S4,useReducer:t2,useRef:y4,useState:function(){return t2(Jy)},useDebugValue:NO,useDeferredValue:function(e){var t=La();return mi===null?t.memoizedState=e:E4(t,mi.memoizedState,e)},useTransition:function(){var e=t2(Jy)[0],t=La().memoizedState;return[e,t]},useMutableSource:u4,useSyncExternalStore:h4,useId:T4,unstable_isNewReconciler:!1};function ap(e,t){try{var r="",n=t;do r+=r7(n),n=n.return;while(n);var a=r}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function r2(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function KA(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var OH=typeof WeakMap=="function"?WeakMap:Map;function O4(e,t,r){r=zl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){k1||(k1=!0,aC=n),KA(e,t)},r}function M4(e,t,r){r=zl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){KA(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){KA(e,t),typeof n!="function"&&(du===null?du=new Set([this]):du.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function SL(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new OH;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=VH.bind(null,e,t,r),t.then(e,e))}function EL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function TL(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=zl(-1,1),t.tag=2,fu(r,t,1))),r.lanes|=1),e)}var MH=rc.ReactCurrentOwner,Ao=!1;function co(e,t,r,n){t.child=e===null?l4(t,null,r,n):ip(t,e.child,r,n)}function AL(e,t,r,n,a){r=r.render;var c=t.ref;return Zd(t,a),n=LO(e,t,r,n,c,a),r=jO(),e!==null&&!Ao?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zl(e,t,a)):(Pn&&r&&SO(t),t.flags|=1,co(e,t,n,a),t.child)}function CL(e,t,r,n,a){if(e===null){var c=r.type;return typeof c=="function"&&!GO(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,k4(e,t,c,n,a)):(e=Qx(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var f=c.memoizedProps;if(r=r.compare,r=r!==null?r:qy,r(f,n)&&e.ref===t.ref)return Zl(e,t,a)}return t.flags|=1,e=mu(c,n),e.ref=t.ref,e.return=t,t.child=e}function k4(e,t,r,n,a){if(e!==null){var c=e.memoizedProps;if(qy(c,n)&&e.ref===t.ref)if(Ao=!1,t.pendingProps=n=c,(e.lanes&a)!==0)e.flags&131072&&(Ao=!0);else return t.lanes=e.lanes,Zl(e,t,a)}return YA(e,t,r,n,a)}function I4(e,t,r){var n=t.pendingProps,a=n.children,c=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(zd,Zo),Zo|=r;else{if(!(r&1073741824))return e=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pn(zd,Zo),Zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=c!==null?c.baseLanes:r,pn(zd,Zo),Zo|=n}else c!==null?(n=c.baseLanes|r,t.memoizedState=null):n=r,pn(zd,Zo),Zo|=n;return co(e,t,a,r),t.child}function D4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function YA(e,t,r,n,a){var c=Mo(r)?Gh:no.current;return c=rp(t,c),Zd(t,a),r=LO(e,t,r,n,c,a),n=jO(),e!==null&&!Ao?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zl(e,t,a)):(Pn&&n&&SO(t),t.flags|=1,co(e,t,r,a),t.child)}function PL(e,t,r,n,a){if(Mo(r)){var c=!0;b1(t)}else c=!1;if(Zd(t,a),t.stateNode===null)Kx(e,t),a4(t,r,n),XA(t,r,n,a),n=!0;else if(e===null){var f=t.stateNode,o=t.memoizedProps;f.props=o;var m=f.context,_=r.contextType;typeof _=="object"&&_!==null?_=Ra(_):(_=Mo(r)?Gh:no.current,_=rp(t,_));var w=r.getDerivedStateFromProps,E=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function";E||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==n||m!==_)&&_L(t,f,n,_),Gc=!1;var C=t.memoizedState;f.state=C,A1(t,n,f,a),m=t.memoizedState,o!==n||C!==m||Oo.current||Gc?(typeof w=="function"&&(ZA(t,r,w,n),m=t.memoizedState),(o=Gc||vL(t,r,o,n,C,m,_))?(E||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=m),f.props=n,f.state=m,f.context=_,n=o):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{f=t.stateNode,i4(e,t),o=t.memoizedProps,_=t.type===t.elementType?o:hs(t.type,o),f.props=_,E=t.pendingProps,C=f.context,m=r.contextType,typeof m=="object"&&m!==null?m=Ra(m):(m=Mo(r)?Gh:no.current,m=rp(t,m));var M=r.getDerivedStateFromProps;(w=typeof M=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==E||C!==m)&&_L(t,f,n,m),Gc=!1,C=t.memoizedState,f.state=C,A1(t,n,f,a);var I=t.memoizedState;o!==E||C!==I||Oo.current||Gc?(typeof M=="function"&&(ZA(t,r,M,n),I=t.memoizedState),(_=Gc||vL(t,r,_,n,C,I,m)||!1)?(w||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(n,I,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(n,I,m)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=I),f.props=n,f.state=I,f.context=m,n=_):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),n=!1)}return JA(e,t,r,n,c,a)}function JA(e,t,r,n,a,c){D4(e,t);var f=(t.flags&128)!==0;if(!n&&!f)return a&&dL(t,r,!1),Zl(e,t,c);n=t.stateNode,MH.current=t;var o=f&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&f?(t.child=ip(t,e.child,null,c),t.child=ip(t,null,o,c)):co(e,t,o,c),t.memoizedState=n.state,a&&dL(t,r,!0),t.child}function R4(e){var t=e.stateNode;t.pendingContext?fL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fL(e,t.context,!1),kO(e,t.containerInfo)}function OL(e,t,r,n,a){return np(),TO(a),t.flags|=256,co(e,t,r,n),t.child}var QA={dehydrated:null,treeContext:null,retryLane:0};function eC(e){return{baseLanes:e,cachePool:null,transitions:null}}function L4(e,t,r){var n=t.pendingProps,a=zn.current,c=!1,f=(t.flags&128)!==0,o;if((o=f)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),pn(zn,a&1),e===null)return GA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=n.children,e=n.fallback,c?(n=t.mode,c=t.child,f={mode:"hidden",children:f},!(n&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=nw(f,n,0,null),e=Bh(e,n,r,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=eC(r),t.memoizedState=QA,e):zO(t,f));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return kH(e,t,f,n,o,a,r);if(c){c=n.fallback,f=t.mode,a=e.child,o=a.sibling;var m={mode:"hidden",children:n.children};return!(f&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=m,t.deletions=null):(n=mu(a,m),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?c=mu(o,c):(c=Bh(c,f,r,null),c.flags|=2),c.return=t,n.return=t,n.sibling=c,t.child=n,n=c,c=t.child,f=e.child.memoizedState,f=f===null?eC(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~r,t.memoizedState=QA,n}return c=e.child,e=c.sibling,n=mu(c,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zO(e,t){return t=nw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function px(e,t,r,n){return n!==null&&TO(n),ip(t,e.child,null,r),e=zO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kH(e,t,r,n,a,c,f){if(r)return t.flags&256?(t.flags&=-257,n=r2(Error(Et(422))),px(e,t,f,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=n.fallback,a=t.mode,n=nw({mode:"visible",children:n.children},a,0,null),c=Bh(c,a,f,null),c.flags|=2,n.return=t,c.return=t,n.sibling=c,t.child=n,t.mode&1&&ip(t,e.child,null,f),t.child.memoizedState=eC(f),t.memoizedState=QA,c);if(!(t.mode&1))return px(e,t,f,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,c=Error(Et(419)),n=r2(c,n,void 0),px(e,t,f,n)}if(o=(f&e.childLanes)!==0,Ao||o){if(n=Mi,n!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Hl(e,a),Ss(n,e,a,-1))}return qO(),n=r2(Error(Et(421))),px(e,t,f,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=WH.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Ko=hu(a.nextSibling),Yo=t,Pn=!0,ms=null,e!==null&&(wa[Sa++]=Rl,wa[Sa++]=Ll,wa[Sa++]=Hh,Rl=e.id,Ll=e.overflow,Hh=t),t=zO(t,n.children),t.flags|=4096,t)}function ML(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),HA(e.return,t,r)}function n2(e,t,r,n,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=n,c.tail=r,c.tailMode=a)}function j4(e,t,r){var n=t.pendingProps,a=n.revealOrder,c=n.tail;if(co(e,t,n.children,r),n=zn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ML(e,r,t);else if(e.tag===19)ML(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(pn(zn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&C1(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),n2(t,!1,a,r,c);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&C1(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}n2(t,!0,r,null,c);break;case"together":n2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Et(153));if(t.child!==null){for(e=t.child,r=mu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function IH(e,t,r){switch(t.tag){case 3:R4(t),np();break;case 5:c4(t);break;case 1:Mo(t.type)&&b1(t);break;case 4:kO(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;pn(E1,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(pn(zn,zn.current&1),t.flags|=128,null):r&t.child.childLanes?L4(e,t,r):(pn(zn,zn.current&1),e=Zl(e,t,r),e!==null?e.sibling:null);pn(zn,zn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return j4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),pn(zn,zn.current),n)break;return null;case 22:case 23:return t.lanes=0,I4(e,t,r)}return Zl(e,t,r)}var $4,tC,N4,z4;$4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tC=function(){};N4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Lh(Hs.current);var c=null;switch(r){case"input":a=SA(e,a),n=SA(e,n),c=[];break;case"select":a=Fn({},a,{value:void 0}),n=Fn({},n,{value:void 0}),c=[];break;case"textarea":a=AA(e,a),n=AA(e,n),c=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=_1)}PA(r,n);var f;r=null;for(_ in a)if(!n.hasOwnProperty(_)&&a.hasOwnProperty(_)&&a[_]!=null)if(_==="style"){var o=a[_];for(f in o)o.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Ny.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in n){var m=n[_];if(o=a!=null?a[_]:void 0,n.hasOwnProperty(_)&&m!==o&&(m!=null||o!=null))if(_==="style")if(o){for(f in o)!o.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in m)m.hasOwnProperty(f)&&o[f]!==m[f]&&(r||(r={}),r[f]=m[f])}else r||(c||(c=[]),c.push(_,r)),r=m;else _==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,o=o?o.__html:void 0,m!=null&&o!==m&&(c=c||[]).push(_,m)):_==="children"?typeof m!="string"&&typeof m!="number"||(c=c||[]).push(_,""+m):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Ny.hasOwnProperty(_)?(m!=null&&_==="onScroll"&&_n("scroll",e),c||o===m||(c=[])):(c=c||[]).push(_,m))}r&&(c=c||[]).push("style",r);var _=c;(t.updateQueue=_)&&(t.flags|=4)}};z4=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ug(e,t){if(!Pn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function DH(e,t,r){var n=t.pendingProps;switch(EO(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(t),null;case 1:return Mo(t.type)&&x1(),Ji(t),null;case 3:return n=t.stateNode,op(),Sn(Oo),Sn(no),DO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(fx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ms!==null&&(cC(ms),ms=null))),tC(e,t),Ji(t),null;case 5:IO(t);var a=Lh(Ky.current);if(r=t.type,e!==null&&t.stateNode!=null)N4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Et(166));return Ji(t),null}if(e=Lh(Hs.current),fx(t)){n=t.stateNode,r=t.type;var c=t.memoizedProps;switch(n[Ws]=t,n[Zy]=c,e=(t.mode&1)!==0,r){case"dialog":_n("cancel",n),_n("close",n);break;case"iframe":case"object":case"embed":_n("load",n);break;case"video":case"audio":for(a=0;a<uy.length;a++)_n(uy[a],n);break;case"source":_n("error",n);break;case"img":case"image":case"link":_n("error",n),_n("load",n);break;case"details":_n("toggle",n);break;case"input":zR(n,c),_n("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!c.multiple},_n("invalid",n);break;case"textarea":FR(n,c),_n("invalid",n)}PA(r,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var o=c[f];f==="children"?typeof o=="string"?n.textContent!==o&&(c.suppressHydrationWarning!==!0&&hx(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(c.suppressHydrationWarning!==!0&&hx(n.textContent,o,e),a=["children",""+o]):Ny.hasOwnProperty(f)&&o!=null&&f==="onScroll"&&_n("scroll",n)}switch(r){case"input":nx(n),BR(n,c,!0);break;case"textarea":nx(n),UR(n);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(n.onclick=_1)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fF(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=f.createElement(r,{is:n.is}):(e=f.createElement(r),r==="select"&&(f=e,n.multiple?f.multiple=!0:n.size&&(f.size=n.size))):e=f.createElementNS(e,r),e[Ws]=t,e[Zy]=n,$4(e,t,!1,!1),t.stateNode=e;e:{switch(f=OA(r,n),r){case"dialog":_n("cancel",e),_n("close",e),a=n;break;case"iframe":case"object":case"embed":_n("load",e),a=n;break;case"video":case"audio":for(a=0;a<uy.length;a++)_n(uy[a],e);a=n;break;case"source":_n("error",e),a=n;break;case"img":case"image":case"link":_n("error",e),_n("load",e),a=n;break;case"details":_n("toggle",e),a=n;break;case"input":zR(e,n),a=SA(e,n),_n("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Fn({},n,{value:void 0}),_n("invalid",e);break;case"textarea":FR(e,n),a=AA(e,n),_n("invalid",e);break;default:a=n}PA(r,a),o=a;for(c in o)if(o.hasOwnProperty(c)){var m=o[c];c==="style"?mF(e,m):c==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&dF(e,m)):c==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&zy(e,m):typeof m=="number"&&zy(e,""+m):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ny.hasOwnProperty(c)?m!=null&&c==="onScroll"&&_n("scroll",e):m!=null&&cO(e,c,m,f))}switch(r){case"input":nx(e),BR(e,n,!1);break;case"textarea":nx(e),UR(e);break;case"option":n.value!=null&&e.setAttribute("value",""+wu(n.value));break;case"select":e.multiple=!!n.multiple,c=n.value,c!=null?Wd(e,!!n.multiple,c,!1):n.defaultValue!=null&&Wd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=_1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ji(t),null;case 6:if(e&&t.stateNode!=null)z4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Et(166));if(r=Lh(Ky.current),Lh(Hs.current),fx(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ws]=t,(c=n.nodeValue!==r)&&(e=Yo,e!==null))switch(e.tag){case 3:hx(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hx(n.nodeValue,r,(e.mode&1)!==0)}c&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ws]=t,t.stateNode=n}return Ji(t),null;case 13:if(Sn(zn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pn&&Ko!==null&&t.mode&1&&!(t.flags&128))r4(),np(),t.flags|=98560,c=!1;else if(c=fx(t),n!==null&&n.dehydrated!==null){if(e===null){if(!c)throw Error(Et(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Et(317));c[Ws]=t}else np(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ji(t),c=!1}else ms!==null&&(cC(ms),ms=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||zn.current&1?gi===0&&(gi=3):qO())),t.updateQueue!==null&&(t.flags|=4),Ji(t),null);case 4:return op(),tC(e,t),e===null&&Gy(t.stateNode.containerInfo),Ji(t),null;case 10:return PO(t.type._context),Ji(t),null;case 17:return Mo(t.type)&&x1(),Ji(t),null;case 19:if(Sn(zn),c=t.memoizedState,c===null)return Ji(t),null;if(n=(t.flags&128)!==0,f=c.rendering,f===null)if(n)Ug(c,!1);else{if(gi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=C1(e),f!==null){for(t.flags|=128,Ug(c,!1),n=f.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)c=r,e=n,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return pn(zn,zn.current&1|2),t.child}e=e.sibling}c.tail!==null&&Xn()>sp&&(t.flags|=128,n=!0,Ug(c,!1),t.lanes=4194304)}else{if(!n)if(e=C1(f),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ug(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Pn)return Ji(t),null}else 2*Xn()-c.renderingStartTime>sp&&r!==1073741824&&(t.flags|=128,n=!0,Ug(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(r=c.last,r!==null?r.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Xn(),t.sibling=null,r=zn.current,pn(zn,n?r&1|2:r&1),t):(Ji(t),null);case 22:case 23:return WO(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Zo&1073741824&&(Ji(t),t.subtreeFlags&6&&(t.flags|=8192)):Ji(t),null;case 24:return null;case 25:return null}throw Error(Et(156,t.tag))}function RH(e,t){switch(EO(t),t.tag){case 1:return Mo(t.type)&&x1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return op(),Sn(Oo),Sn(no),DO(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return IO(t),null;case 13:if(Sn(zn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Et(340));np()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(zn),null;case 4:return op(),null;case 10:return PO(t.type._context),null;case 22:case 23:return WO(),null;case 24:return null;default:return null}}var mx=!1,to=!1,LH=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Nd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Wn(e,t,n)}else r.current=null}function rC(e,t,r){try{r()}catch(n){Wn(e,t,n)}}var kL=!1;function jH(e,t){if(zA=g1,e=VF(),wO(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var f=0,o=-1,m=-1,_=0,w=0,E=e,C=null;t:for(;;){for(var M;E!==r||a!==0&&E.nodeType!==3||(o=f+a),E!==c||n!==0&&E.nodeType!==3||(m=f+n),E.nodeType===3&&(f+=E.nodeValue.length),(M=E.firstChild)!==null;)C=E,E=M;for(;;){if(E===e)break t;if(C===r&&++_===a&&(o=f),C===c&&++w===n&&(m=f),(M=E.nextSibling)!==null)break;E=C,C=E.parentNode}E=M}r=o===-1||m===-1?null:{start:o,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(BA={focusedElem:e,selectionRange:r},g1=!1,Ut=t;Ut!==null;)if(t=Ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ut=e;else for(;Ut!==null;){t=Ut;try{var I=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var D=I.memoizedProps,$=I.memoizedState,B=t.stateNode,F=B.getSnapshotBeforeUpdate(t.elementType===t.type?D:hs(t.type,D),$);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Et(163))}}catch(U){Wn(t,t.return,U)}if(e=t.sibling,e!==null){e.return=t.return,Ut=e;break}Ut=t.return}return I=kL,kL=!1,I}function Ey(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&rC(t,r,c)}a=a.next}while(a!==n)}}function tw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function nC(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function B4(e){var t=e.alternate;t!==null&&(e.alternate=null,B4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ws],delete t[Zy],delete t[VA],delete t[vH],delete t[_H])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function F4(e){return e.tag===5||e.tag===3||e.tag===4}function IL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_1));else if(n!==4&&(e=e.child,e!==null))for(iC(e,t,r),e=e.sibling;e!==null;)iC(e,t,r),e=e.sibling}function oC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(oC(e,t,r),e=e.sibling;e!==null;)oC(e,t,r),e=e.sibling}var $i=null,fs=!1;function Bc(e,t,r){for(r=r.child;r!==null;)U4(e,t,r),r=r.sibling}function U4(e,t,r){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Hb,r)}catch{}switch(r.tag){case 5:to||Nd(r,t);case 6:var n=$i,a=fs;$i=null,Bc(e,t,r),$i=n,fs=a,$i!==null&&(fs?(e=$i,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):$i.removeChild(r.stateNode));break;case 18:$i!==null&&(fs?(e=$i,r=r.stateNode,e.nodeType===8?KT(e.parentNode,r):e.nodeType===1&&KT(e,r),Vy(e)):KT($i,r.stateNode));break;case 4:n=$i,a=fs,$i=r.stateNode.containerInfo,fs=!0,Bc(e,t,r),$i=n,fs=a;break;case 0:case 11:case 14:case 15:if(!to&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&rC(r,t,f),a=a.next}while(a!==n)}Bc(e,t,r);break;case 1:if(!to&&(Nd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Wn(r,t,o)}Bc(e,t,r);break;case 21:Bc(e,t,r);break;case 22:r.mode&1?(to=(n=to)||r.memoizedState!==null,Bc(e,t,r),to=n):Bc(e,t,r);break;default:Bc(e,t,r)}}function DL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new LH),t.forEach(function(n){var a=qH.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ls(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var c=e,f=t,o=f;e:for(;o!==null;){switch(o.tag){case 5:$i=o.stateNode,fs=!1;break e;case 3:$i=o.stateNode.containerInfo,fs=!0;break e;case 4:$i=o.stateNode.containerInfo,fs=!0;break e}o=o.return}if($i===null)throw Error(Et(160));U4(c,f,a),$i=null,fs=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(_){Wn(a,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V4(t,e),t=t.sibling}function V4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ls(t,e),zs(e),n&4){try{Ey(3,e,e.return),tw(3,e)}catch(D){Wn(e,e.return,D)}try{Ey(5,e,e.return)}catch(D){Wn(e,e.return,D)}}break;case 1:ls(t,e),zs(e),n&512&&r!==null&&Nd(r,r.return);break;case 5:if(ls(t,e),zs(e),n&512&&r!==null&&Nd(r,r.return),e.flags&32){var a=e.stateNode;try{zy(a,"")}catch(D){Wn(e,e.return,D)}}if(n&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,f=r!==null?r.memoizedProps:c,o=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{o==="input"&&c.type==="radio"&&c.name!=null&&uF(a,c),OA(o,f);var _=OA(o,c);for(f=0;f<m.length;f+=2){var w=m[f],E=m[f+1];w==="style"?mF(a,E):w==="dangerouslySetInnerHTML"?dF(a,E):w==="children"?zy(a,E):cO(a,w,E,_)}switch(o){case"input":EA(a,c);break;case"textarea":hF(a,c);break;case"select":var C=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var M=c.value;M!=null?Wd(a,!!c.multiple,M,!1):C!==!!c.multiple&&(c.defaultValue!=null?Wd(a,!!c.multiple,c.defaultValue,!0):Wd(a,!!c.multiple,c.multiple?[]:"",!1))}a[Zy]=c}catch(D){Wn(e,e.return,D)}}break;case 6:if(ls(t,e),zs(e),n&4){if(e.stateNode===null)throw Error(Et(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(D){Wn(e,e.return,D)}}break;case 3:if(ls(t,e),zs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vy(t.containerInfo)}catch(D){Wn(e,e.return,D)}break;case 4:ls(t,e),zs(e);break;case 13:ls(t,e),zs(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(UO=Xn())),n&4&&DL(e);break;case 22:if(w=r!==null&&r.memoizedState!==null,e.mode&1?(to=(_=to)||w,ls(t,e),to=_):ls(t,e),zs(e),n&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!w&&e.mode&1)for(Ut=e,w=e.child;w!==null;){for(E=Ut=w;Ut!==null;){switch(C=Ut,M=C.child,C.tag){case 0:case 11:case 14:case 15:Ey(4,C,C.return);break;case 1:Nd(C,C.return);var I=C.stateNode;if(typeof I.componentWillUnmount=="function"){n=C,r=C.return;try{t=n,I.props=t.memoizedProps,I.state=t.memoizedState,I.componentWillUnmount()}catch(D){Wn(n,r,D)}}break;case 5:Nd(C,C.return);break;case 22:if(C.memoizedState!==null){LL(E);continue}}M!==null?(M.return=C,Ut=M):LL(E)}w=w.sibling}e:for(w=null,E=e;;){if(E.tag===5){if(w===null){w=E;try{a=E.stateNode,_?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(o=E.stateNode,m=E.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,o.style.display=pF("display",f))}catch(D){Wn(e,e.return,D)}}}else if(E.tag===6){if(w===null)try{E.stateNode.nodeValue=_?"":E.memoizedProps}catch(D){Wn(e,e.return,D)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;w===E&&(w=null),E=E.return}w===E&&(w=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ls(t,e),zs(e),n&4&&DL(e);break;case 21:break;default:ls(t,e),zs(e)}}function zs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(F4(r)){var n=r;break e}r=r.return}throw Error(Et(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(zy(a,""),n.flags&=-33);var c=IL(e);oC(e,c,a);break;case 3:case 4:var f=n.stateNode.containerInfo,o=IL(e);iC(e,o,f);break;default:throw Error(Et(161))}}catch(m){Wn(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $H(e,t,r){Ut=e,W4(e)}function W4(e,t,r){for(var n=(e.mode&1)!==0;Ut!==null;){var a=Ut,c=a.child;if(a.tag===22&&n){var f=a.memoizedState!==null||mx;if(!f){var o=a.alternate,m=o!==null&&o.memoizedState!==null||to;o=mx;var _=to;if(mx=f,(to=m)&&!_)for(Ut=a;Ut!==null;)f=Ut,m=f.child,f.tag===22&&f.memoizedState!==null?jL(a):m!==null?(m.return=f,Ut=m):jL(a);for(;c!==null;)Ut=c,W4(c),c=c.sibling;Ut=a,mx=o,to=_}RL(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Ut=c):RL(e)}}function RL(e){for(;Ut!==null;){var t=Ut;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:to||tw(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!to)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:hs(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&yL(t,c,n);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}yL(t,f,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var w=_.memoizedState;if(w!==null){var E=w.dehydrated;E!==null&&Vy(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Et(163))}to||t.flags&512&&nC(t)}catch(C){Wn(t,t.return,C)}}if(t===e){Ut=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ut=r;break}Ut=t.return}}function LL(e){for(;Ut!==null;){var t=Ut;if(t===e){Ut=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ut=r;break}Ut=t.return}}function jL(e){for(;Ut!==null;){var t=Ut;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tw(4,t)}catch(m){Wn(t,r,m)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(m){Wn(t,a,m)}}var c=t.return;try{nC(t)}catch(m){Wn(t,c,m)}break;case 5:var f=t.return;try{nC(t)}catch(m){Wn(t,f,m)}}}catch(m){Wn(t,t.return,m)}if(t===e){Ut=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ut=o;break}Ut=t.return}}var NH=Math.ceil,M1=rc.ReactCurrentDispatcher,BO=rc.ReactCurrentOwner,Ma=rc.ReactCurrentBatchConfig,jr=0,Mi=null,ii=null,Fi=0,Zo=0,zd=Pu(0),gi=0,ev=null,Xh=0,rw=0,FO=0,Ty=null,To=null,UO=0,sp=1/0,Ml=null,k1=!1,aC=null,du=null,gx=!1,tu=null,I1=0,Ay=0,sC=null,Yx=-1,Jx=0;function ho(){return jr&6?Xn():Yx!==-1?Yx:Yx=Xn()}function pu(e){return e.mode&1?jr&2&&Fi!==0?Fi&-Fi:bH.transition!==null?(Jx===0&&(Jx=CF()),Jx):(e=en,e!==0||(e=window.event,e=e===void 0?16:RF(e.type)),e):1}function Ss(e,t,r,n){if(50<Ay)throw Ay=0,sC=null,Error(Et(185));Xv(e,r,n),(!(jr&2)||e!==Mi)&&(e===Mi&&(!(jr&2)&&(rw|=r),gi===4&&Jc(e,Fi)),ko(e,n),r===1&&jr===0&&!(t.mode&1)&&(sp=Xn()+500,Jb&&Ou()))}function ko(e,t){var r=e.callbackNode;b7(e,t);var n=m1(e,e===Mi?Fi:0);if(n===0)r!==null&&qR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&qR(r),t===1)e.tag===0?xH($L.bind(null,e)):QF($L.bind(null,e)),gH(function(){!(jr&6)&&Ou()}),r=null;else{switch(PF(n)){case 1:r=pO;break;case 4:r=TF;break;case 16:r=p1;break;case 536870912:r=AF;break;default:r=p1}r=J4(r,q4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function q4(e,t){if(Yx=-1,Jx=0,jr&6)throw Error(Et(327));var r=e.callbackNode;if(Xd()&&e.callbackNode!==r)return null;var n=m1(e,e===Mi?Fi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=D1(e,n);else{t=n;var a=jr;jr|=2;var c=H4();(Mi!==e||Fi!==t)&&(Ml=null,sp=Xn()+500,zh(e,t));do try{FH();break}catch(o){G4(e,o)}while(1);CO(),M1.current=c,jr=a,ii!==null?t=0:(Mi=null,Fi=0,t=gi)}if(t!==0){if(t===2&&(a=RA(e),a!==0&&(n=a,t=lC(e,a))),t===1)throw r=ev,zh(e,0),Jc(e,n),ko(e,Xn()),r;if(t===6)Jc(e,n);else{if(a=e.current.alternate,!(n&30)&&!zH(a)&&(t=D1(e,n),t===2&&(c=RA(e),c!==0&&(n=c,t=lC(e,c))),t===1))throw r=ev,zh(e,0),Jc(e,n),ko(e,Xn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Et(345));case 2:Ah(e,To,Ml);break;case 3:if(Jc(e,n),(n&130023424)===n&&(t=UO+500-Xn(),10<t)){if(m1(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ho(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=UA(Ah.bind(null,e,To,Ml),t);break}Ah(e,To,Ml);break;case 4:if(Jc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var f=31-ws(n);c=1<<f,f=t[f],f>a&&(a=f),n&=~c}if(n=a,n=Xn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NH(n/1960))-n,10<n){e.timeoutHandle=UA(Ah.bind(null,e,To,Ml),n);break}Ah(e,To,Ml);break;case 5:Ah(e,To,Ml);break;default:throw Error(Et(329))}}}return ko(e,Xn()),e.callbackNode===r?q4.bind(null,e):null}function lC(e,t){var r=Ty;return e.current.memoizedState.isDehydrated&&(zh(e,t).flags|=256),e=D1(e,t),e!==2&&(t=To,To=r,t!==null&&cC(t)),e}function cC(e){To===null?To=e:To.push.apply(To,e)}function zH(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],c=a.getSnapshot;a=a.value;try{if(!Es(c(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t){for(t&=~FO,t&=~rw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ws(t),n=1<<r;e[r]=-1,t&=~n}}function $L(e){if(jr&6)throw Error(Et(327));Xd();var t=m1(e,0);if(!(t&1))return ko(e,Xn()),null;var r=D1(e,t);if(e.tag!==0&&r===2){var n=RA(e);n!==0&&(t=n,r=lC(e,n))}if(r===1)throw r=ev,zh(e,0),Jc(e,t),ko(e,Xn()),r;if(r===6)throw Error(Et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ah(e,To,Ml),ko(e,Xn()),null}function VO(e,t){var r=jr;jr|=1;try{return e(t)}finally{jr=r,jr===0&&(sp=Xn()+500,Jb&&Ou())}}function Kh(e){tu!==null&&tu.tag===0&&!(jr&6)&&Xd();var t=jr;jr|=1;var r=Ma.transition,n=en;try{if(Ma.transition=null,en=1,e)return e()}finally{en=n,Ma.transition=r,jr=t,!(jr&6)&&Ou()}}function WO(){Zo=zd.current,Sn(zd)}function zh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mH(r)),ii!==null)for(r=ii.return;r!==null;){var n=r;switch(EO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&x1();break;case 3:op(),Sn(Oo),Sn(no),DO();break;case 5:IO(n);break;case 4:op();break;case 13:Sn(zn);break;case 19:Sn(zn);break;case 10:PO(n.type._context);break;case 22:case 23:WO()}r=r.return}if(Mi=e,ii=e=mu(e.current,null),Fi=Zo=t,gi=0,ev=null,FO=rw=Xh=0,To=Ty=null,Rh!==null){for(t=0;t<Rh.length;t++)if(r=Rh[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,c=r.pending;if(c!==null){var f=c.next;c.next=a,n.next=f}r.pending=n}Rh=null}return e}function G4(e,t){do{var r=ii;try{if(CO(),Zx.current=O1,P1){for(var n=Bn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}P1=!1}if(Zh=0,Oi=mi=Bn=null,Sy=!1,Yy=0,BO.current=null,r===null||r.return===null){gi=1,ev=t,ii=null;break}e:{var c=e,f=r.return,o=r,m=t;if(t=Fi,o.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var _=m,w=o,E=w.tag;if(!(w.mode&1)&&(E===0||E===11||E===15)){var C=w.alternate;C?(w.updateQueue=C.updateQueue,w.memoizedState=C.memoizedState,w.lanes=C.lanes):(w.updateQueue=null,w.memoizedState=null)}var M=EL(f);if(M!==null){M.flags&=-257,TL(M,f,o,c,t),M.mode&1&&SL(c,_,t),t=M,m=_;var I=t.updateQueue;if(I===null){var D=new Set;D.add(m),t.updateQueue=D}else I.add(m);break e}else{if(!(t&1)){SL(c,_,t),qO();break e}m=Error(Et(426))}}else if(Pn&&o.mode&1){var $=EL(f);if($!==null){!($.flags&65536)&&($.flags|=256),TL($,f,o,c,t),TO(ap(m,o));break e}}c=m=ap(m,o),gi!==4&&(gi=2),Ty===null?Ty=[c]:Ty.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var B=O4(c,m,t);gL(c,B);break e;case 1:o=m;var F=c.type,R=c.stateNode;if(!(c.flags&128)&&(typeof F.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(du===null||!du.has(R)))){c.flags|=65536,t&=-t,c.lanes|=t;var U=M4(c,o,t);gL(c,U);break e}}c=c.return}while(c!==null)}X4(r)}catch(H){t=H,ii===r&&r!==null&&(ii=r=r.return);continue}break}while(1)}function H4(){var e=M1.current;return M1.current=O1,e===null?O1:e}function qO(){(gi===0||gi===3||gi===2)&&(gi=4),Mi===null||!(Xh&268435455)&&!(rw&268435455)||Jc(Mi,Fi)}function D1(e,t){var r=jr;jr|=2;var n=H4();(Mi!==e||Fi!==t)&&(Ml=null,zh(e,t));do try{BH();break}catch(a){G4(e,a)}while(1);if(CO(),jr=r,M1.current=n,ii!==null)throw Error(Et(261));return Mi=null,Fi=0,gi}function BH(){for(;ii!==null;)Z4(ii)}function FH(){for(;ii!==null&&!f7();)Z4(ii)}function Z4(e){var t=Y4(e.alternate,e,Zo);e.memoizedProps=e.pendingProps,t===null?X4(e):ii=t,BO.current=null}function X4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=RH(r,t),r!==null){r.flags&=32767,ii=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gi=6,ii=null;return}}else if(r=DH(r,t,Zo),r!==null){ii=r;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);gi===0&&(gi=5)}function Ah(e,t,r){var n=en,a=Ma.transition;try{Ma.transition=null,en=1,UH(e,t,r,n)}finally{Ma.transition=a,en=n}return null}function UH(e,t,r,n){do Xd();while(tu!==null);if(jr&6)throw Error(Et(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Et(177));e.callbackNode=null,e.callbackPriority=0;var c=r.lanes|r.childLanes;if(w7(e,c),e===Mi&&(ii=Mi=null,Fi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gx||(gx=!0,J4(p1,function(){return Xd(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Ma.transition,Ma.transition=null;var f=en;en=1;var o=jr;jr|=4,BO.current=null,jH(e,r),V4(r,e),lH(BA),g1=!!zA,BA=zA=null,e.current=r,$H(r),d7(),jr=o,en=f,Ma.transition=c}else e.current=r;if(gx&&(gx=!1,tu=e,I1=a),c=e.pendingLanes,c===0&&(du=null),g7(r.stateNode),ko(e,Xn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(k1)throw k1=!1,e=aC,aC=null,e;return I1&1&&e.tag!==0&&Xd(),c=e.pendingLanes,c&1?e===sC?Ay++:(Ay=0,sC=e):Ay=0,Ou(),null}function Xd(){if(tu!==null){var e=PF(I1),t=Ma.transition,r=en;try{if(Ma.transition=null,en=16>e?16:e,tu===null)var n=!1;else{if(e=tu,tu=null,I1=0,jr&6)throw Error(Et(331));var a=jr;for(jr|=4,Ut=e.current;Ut!==null;){var c=Ut,f=c.child;if(Ut.flags&16){var o=c.deletions;if(o!==null){for(var m=0;m<o.length;m++){var _=o[m];for(Ut=_;Ut!==null;){var w=Ut;switch(w.tag){case 0:case 11:case 15:Ey(8,w,c)}var E=w.child;if(E!==null)E.return=w,Ut=E;else for(;Ut!==null;){w=Ut;var C=w.sibling,M=w.return;if(B4(w),w===_){Ut=null;break}if(C!==null){C.return=M,Ut=C;break}Ut=M}}}var I=c.alternate;if(I!==null){var D=I.child;if(D!==null){I.child=null;do{var $=D.sibling;D.sibling=null,D=$}while(D!==null)}}Ut=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,Ut=f;else e:for(;Ut!==null;){if(c=Ut,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Ey(9,c,c.return)}var B=c.sibling;if(B!==null){B.return=c.return,Ut=B;break e}Ut=c.return}}var F=e.current;for(Ut=F;Ut!==null;){f=Ut;var R=f.child;if(f.subtreeFlags&2064&&R!==null)R.return=f,Ut=R;else e:for(f=F;Ut!==null;){if(o=Ut,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:tw(9,o)}}catch(H){Wn(o,o.return,H)}if(o===f){Ut=null;break e}var U=o.sibling;if(U!==null){U.return=o.return,Ut=U;break e}Ut=o.return}}if(jr=a,Ou(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Hb,e)}catch{}n=!0}return n}finally{en=r,Ma.transition=t}}return!1}function NL(e,t,r){t=ap(r,t),t=O4(e,t,1),e=fu(e,t,1),t=ho(),e!==null&&(Xv(e,1,t),ko(e,t))}function Wn(e,t,r){if(e.tag===3)NL(e,e,r);else for(;t!==null;){if(t.tag===3){NL(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(du===null||!du.has(n))){e=ap(r,e),e=M4(t,e,1),t=fu(t,e,1),e=ho(),t!==null&&(Xv(t,1,e),ko(t,e));break}}t=t.return}}function VH(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ho(),e.pingedLanes|=e.suspendedLanes&r,Mi===e&&(Fi&r)===r&&(gi===4||gi===3&&(Fi&130023424)===Fi&&500>Xn()-UO?zh(e,0):FO|=r),ko(e,t)}function K4(e,t){t===0&&(e.mode&1?(t=ax,ax<<=1,!(ax&130023424)&&(ax=4194304)):t=1);var r=ho();e=Hl(e,t),e!==null&&(Xv(e,t,r),ko(e,r))}function WH(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),K4(e,r)}function qH(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Et(314))}n!==null&&n.delete(t),K4(e,r)}var Y4;Y4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Oo.current)Ao=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ao=!1,IH(e,t,r);Ao=!!(e.flags&131072)}else Ao=!1,Pn&&t.flags&1048576&&e4(t,S1,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Kx(e,t),e=t.pendingProps;var a=rp(t,no.current);Zd(t,r),a=LO(null,t,n,e,a,r);var c=jO();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(n)?(c=!0,b1(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,MO(t),a.updater=Qb,t.stateNode=a,a._reactInternals=t,XA(t,n,e,r),t=JA(null,t,n,!0,c,r)):(t.tag=0,Pn&&c&&SO(t),co(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Kx(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=HH(n),e=hs(n,e),a){case 0:t=YA(null,t,n,e,r);break e;case 1:t=PL(null,t,n,e,r);break e;case 11:t=AL(null,t,n,e,r);break e;case 14:t=CL(null,t,n,hs(n.type,e),r);break e}throw Error(Et(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:hs(n,a),YA(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:hs(n,a),PL(e,t,n,a,r);case 3:e:{if(R4(t),e===null)throw Error(Et(387));n=t.pendingProps,c=t.memoizedState,a=c.element,i4(e,t),A1(t,n,null,r);var f=t.memoizedState;if(n=f.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=ap(Error(Et(423)),t),t=OL(e,t,n,r,a);break e}else if(n!==a){a=ap(Error(Et(424)),t),t=OL(e,t,n,r,a);break e}else for(Ko=hu(t.stateNode.containerInfo.firstChild),Yo=t,Pn=!0,ms=null,r=l4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(np(),n===a){t=Zl(e,t,r);break e}co(e,t,n,r)}t=t.child}return t;case 5:return c4(t),e===null&&GA(t),n=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,f=a.children,FA(n,a)?f=null:c!==null&&FA(n,c)&&(t.flags|=32),D4(e,t),co(e,t,f,r),t.child;case 6:return e===null&&GA(t),null;case 13:return L4(e,t,r);case 4:return kO(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ip(t,null,n,r):co(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:hs(n,a),AL(e,t,n,a,r);case 7:return co(e,t,t.pendingProps,r),t.child;case 8:return co(e,t,t.pendingProps.children,r),t.child;case 12:return co(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,c=t.memoizedProps,f=a.value,pn(E1,n._currentValue),n._currentValue=f,c!==null)if(Es(c.value,f)){if(c.children===a.children&&!Oo.current){t=Zl(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var o=c.dependencies;if(o!==null){f=c.child;for(var m=o.firstContext;m!==null;){if(m.context===n){if(c.tag===1){m=zl(-1,r&-r),m.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var w=_.pending;w===null?m.next=m:(m.next=w.next,w.next=m),_.pending=m}}c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),HA(c.return,r,t),o.lanes|=r;break}m=m.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Et(341));f.lanes|=r,o=f.alternate,o!==null&&(o.lanes|=r),HA(f,r,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}co(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Zd(t,r),a=Ra(a),n=n(a),t.flags|=1,co(e,t,n,r),t.child;case 14:return n=t.type,a=hs(n,t.pendingProps),a=hs(n.type,a),CL(e,t,n,a,r);case 15:return k4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:hs(n,a),Kx(e,t),t.tag=1,Mo(n)?(e=!0,b1(t)):e=!1,Zd(t,r),a4(t,n,a),XA(t,n,a,r),JA(null,t,n,!0,e,r);case 19:return j4(e,t,r);case 22:return I4(e,t,r)}throw Error(Et(156,t.tag))};function J4(e,t){return EF(e,t)}function GH(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ca(e,t,r,n){return new GH(e,t,r,n)}function GO(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HH(e){if(typeof e=="function")return GO(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hO)return 11;if(e===fO)return 14}return 2}function mu(e,t){var r=e.alternate;return r===null?(r=Ca(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qx(e,t,r,n,a,c){var f=2;if(n=e,typeof e=="function")GO(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Od:return Bh(r.children,a,c,t);case uO:f=8,a|=8;break;case _A:return e=Ca(12,r,t,a|2),e.elementType=_A,e.lanes=c,e;case xA:return e=Ca(13,r,t,a),e.elementType=xA,e.lanes=c,e;case bA:return e=Ca(19,r,t,a),e.elementType=bA,e.lanes=c,e;case sF:return nw(r,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oF:f=10;break e;case aF:f=9;break e;case hO:f=11;break e;case fO:f=14;break e;case qc:f=16,n=null;break e}throw Error(Et(130,e==null?e:typeof e,""))}return t=Ca(f,r,t,a),t.elementType=e,t.type=n,t.lanes=c,t}function Bh(e,t,r,n){return e=Ca(7,e,n,t),e.lanes=r,e}function nw(e,t,r,n){return e=Ca(22,e,n,t),e.elementType=sF,e.lanes=r,e.stateNode={isHidden:!1},e}function i2(e,t,r){return e=Ca(6,e,null,t),e.lanes=r,e}function o2(e,t,r){return t=Ca(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZH(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zT(0),this.expirationTimes=zT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zT(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function HO(e,t,r,n,a,c,f,o,m){return e=new ZH(e,t,r,o,m),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Ca(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},MO(c),e}function XH(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pd,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Q4(e){if(!e)return Su;e=e._reactInternals;e:{if(af(e)!==e||e.tag!==1)throw Error(Et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Et(171))}if(e.tag===1){var r=e.type;if(Mo(r))return JF(e,r,t)}return t}function e5(e,t,r,n,a,c,f,o,m){return e=HO(r,n,!0,e,a,c,f,o,m),e.context=Q4(null),r=e.current,n=ho(),a=pu(r),c=zl(n,a),c.callback=t??null,fu(r,c,a),e.current.lanes=a,Xv(e,a,n),ko(e,n),e}function iw(e,t,r,n){var a=t.current,c=ho(),f=pu(a);return r=Q4(r),t.context===null?t.context=r:t.pendingContext=r,t=zl(c,f),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fu(a,t,f),e!==null&&(Ss(e,a,f,c),Hx(e,a,f)),f}function R1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ZO(e,t){zL(e,t),(e=e.alternate)&&zL(e,t)}function KH(){return null}var t5=typeof reportError=="function"?reportError:function(e){console.error(e)};function XO(e){this._internalRoot=e}ow.prototype.render=XO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Et(409));iw(e,t,null,null)};ow.prototype.unmount=XO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kh(function(){iw(null,e,null,null)}),t[Gl]=null}};function ow(e){this._internalRoot=e}ow.prototype.unstable_scheduleHydration=function(e){if(e){var t=kF();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yc.length&&t!==0&&t<Yc[r].priority;r++);Yc.splice(r,0,e),r===0&&DF(e)}};function KO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function BL(){}function YH(e,t,r,n,a){if(a){if(typeof n=="function"){var c=n;n=function(){var _=R1(f);c.call(_)}}var f=e5(t,n,e,0,null,!1,!1,"",BL);return e._reactRootContainer=f,e[Gl]=f.current,Gy(e.nodeType===8?e.parentNode:e),Kh(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var _=R1(m);o.call(_)}}var m=HO(e,0,!1,null,null,!1,!1,"",BL);return e._reactRootContainer=m,e[Gl]=m.current,Gy(e.nodeType===8?e.parentNode:e),Kh(function(){iw(t,m,r,n)}),m}function sw(e,t,r,n,a){var c=r._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var o=a;a=function(){var m=R1(f);o.call(m)}}iw(t,f,e,a)}else f=YH(r,t,e,a,n);return R1(f)}OF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=cy(t.pendingLanes);r!==0&&(mO(t,r|1),ko(t,Xn()),!(jr&6)&&(sp=Xn()+500,Ou()))}break;case 13:Kh(function(){var n=Hl(e,1);if(n!==null){var a=ho();Ss(n,e,1,a)}}),ZO(e,1)}};gO=function(e){if(e.tag===13){var t=Hl(e,134217728);if(t!==null){var r=ho();Ss(t,e,134217728,r)}ZO(e,134217728)}};MF=function(e){if(e.tag===13){var t=pu(e),r=Hl(e,t);if(r!==null){var n=ho();Ss(r,e,t,n)}ZO(e,t)}};kF=function(){return en};IF=function(e,t){var r=en;try{return en=e,t()}finally{en=r}};kA=function(e,t,r){switch(t){case"input":if(EA(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Yb(n);if(!a)throw Error(Et(90));cF(n),EA(n,a)}}}break;case"textarea":hF(e,r);break;case"select":t=r.value,t!=null&&Wd(e,!!r.multiple,t,!1)}};vF=VO;_F=Kh;var JH={usingClientEntryPoint:!1,Events:[Yv,Dd,Yb,gF,yF,VO]},Vg={findFiberByHostInstance:Dh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QH={bundleType:Vg.bundleType,version:Vg.version,rendererPackageName:Vg.rendererPackageName,rendererConfig:Vg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wF(e),e===null?null:e.stateNode},findFiberByHostInstance:Vg.findFiberByHostInstance||KH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yx.isDisabled&&yx.supportsFiber)try{Hb=yx.inject(QH),Gs=yx}catch{}}ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JH;ra.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KO(t))throw Error(Et(200));return XH(e,t,null,r)};ra.createRoot=function(e,t){if(!KO(e))throw Error(Et(299));var r=!1,n="",a=t5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=HO(e,1,!1,null,null,r,!1,n,a),e[Gl]=t.current,Gy(e.nodeType===8?e.parentNode:e),new XO(t)};ra.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Et(188)):(e=Object.keys(e).join(","),Error(Et(268,e)));return e=wF(t),e=e===null?null:e.stateNode,e};ra.flushSync=function(e){return Kh(e)};ra.hydrate=function(e,t,r){if(!aw(t))throw Error(Et(200));return sw(null,e,t,!0,r)};ra.hydrateRoot=function(e,t,r){if(!KO(e))throw Error(Et(405));var n=r!=null&&r.hydratedSources||null,a=!1,c="",f=t5;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=e5(t,null,e,1,r??null,a,!1,c,f),e[Gl]=t.current,Gy(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ow(t)};ra.render=function(e,t,r){if(!aw(t))throw Error(Et(200));return sw(null,e,t,!1,r)};ra.unmountComponentAtNode=function(e){if(!aw(e))throw Error(Et(40));return e._reactRootContainer?(Kh(function(){sw(null,null,e,!1,function(){e._reactRootContainer=null,e[Gl]=null})}),!0):!1};ra.unstable_batchedUpdates=VO;ra.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!aw(r))throw Error(Et(200));if(e==null||e._reactInternals===void 0)throw Error(Et(38));return sw(e,t,r,!1,n)};ra.version="18.2.0-next-9e3b772b8-20220608";function r5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r5)}catch(e){console.error(e)}}r5(),eF.exports=ra;var lw=eF.exports;const Bd=Hr(lw);var FL=lw;u1.createRoot=FL.createRoot,u1.hydrateRoot=FL.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tv.apply(this,arguments)}var ru;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ru||(ru={}));const UL="popstate";function eZ(e){e===void 0&&(e={});function t(n,a){let{pathname:c,search:f,hash:o}=n.location;return uC("",{pathname:c,search:f,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:L1(a)}return rZ(t,r,null,e)}function ai(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function YO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tZ(){return Math.random().toString(36).substr(2,8)}function VL(e,t){return{usr:e.state,key:e.key,idx:t}}function uC(e,t,r,n){return r===void 0&&(r=null),tv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$p(t):t,{state:r,key:t&&t.key||n||tZ()})}function L1(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $p(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function rZ(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:c=!1}=n,f=a.history,o=ru.Pop,m=null,_=w();_==null&&(_=0,f.replaceState(tv({},f.state,{idx:_}),""));function w(){return(f.state||{idx:null}).idx}function E(){o=ru.Pop;let $=w(),B=$==null?null:$-_;_=$,m&&m({action:o,location:D.location,delta:B})}function C($,B){o=ru.Push;let F=uC(D.location,$,B);r&&r(F,$),_=w()+1;let R=VL(F,_),U=D.createHref(F);try{f.pushState(R,"",U)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;a.location.assign(U)}c&&m&&m({action:o,location:D.location,delta:1})}function M($,B){o=ru.Replace;let F=uC(D.location,$,B);r&&r(F,$),_=w();let R=VL(F,_),U=D.createHref(F);f.replaceState(R,"",U),c&&m&&m({action:o,location:D.location,delta:0})}function I($){let B=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof $=="string"?$:L1($);return ai(B,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,B)}let D={get action(){return o},get location(){return e(a,f)},listen($){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(UL,E),m=$,()=>{a.removeEventListener(UL,E),m=null}},createHref($){return t(a,$)},createURL:I,encodeLocation($){let B=I($);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:C,replace:M,go($){return f.go($)}};return D}var WL;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(WL||(WL={}));function nZ(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?$p(t):t,a=JO(n.pathname||"/",r);if(a==null)return null;let c=n5(e);iZ(c);let f=null;for(let o=0;f==null&&o<c.length;++o)f=dZ(c[o],gZ(a));return f}function n5(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(c,f,o)=>{let m={relativePath:o===void 0?c.path||"":o,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};m.relativePath.startsWith("/")&&(ai(m.relativePath.startsWith(n),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(n.length));let _=gu([n,m.relativePath]),w=r.concat(m);c.children&&c.children.length>0&&(ai(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),n5(c.children,t,w,_)),!(c.path==null&&!c.index)&&t.push({path:_,score:hZ(_,c.index),routesMeta:w})};return e.forEach((c,f)=>{var o;if(c.path===""||!((o=c.path)!=null&&o.includes("?")))a(c,f);else for(let m of i5(c.path))a(c,f,m)}),t}function i5(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),c=r.replace(/\?$/,"");if(n.length===0)return a?[c,""]:[c];let f=i5(n.join("/")),o=[];return o.push(...f.map(m=>m===""?c:[c,m].join("/"))),a&&o.push(...f),o.map(m=>e.startsWith("/")&&m===""?"/":m)}function iZ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fZ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oZ=/^:\w+$/,aZ=3,sZ=2,lZ=1,cZ=10,uZ=-2,qL=e=>e==="*";function hZ(e,t){let r=e.split("/"),n=r.length;return r.some(qL)&&(n+=uZ),t&&(n+=sZ),r.filter(a=>!qL(a)).reduce((a,c)=>a+(oZ.test(c)?aZ:c===""?lZ:cZ),n)}function fZ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function dZ(e,t){let{routesMeta:r}=e,n={},a="/",c=[];for(let f=0;f<r.length;++f){let o=r[f],m=f===r.length-1,_=a==="/"?t:t.slice(a.length)||"/",w=pZ({path:o.relativePath,caseSensitive:o.caseSensitive,end:m},_);if(!w)return null;Object.assign(n,w.params);let E=o.route;c.push({params:n,pathname:gu([a,w.pathname]),pathnameBase:xZ(gu([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=gu([a,w.pathnameBase]))}return c}function pZ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mZ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((_,w,E)=>{if(w==="*"){let C=o[E]||"";f=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}return _[w]=yZ(o[E]||"",w),_},{}),pathname:c,pathnameBase:f,pattern:e}}function mZ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),YO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(f,o)=>(n.push(o),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gZ(e){try{return decodeURI(e)}catch(t){return YO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yZ(e,t){try{return decodeURIComponent(e)}catch(r){return YO(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function JO(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function vZ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?$p(e):e;return{pathname:r?r.startsWith("/")?r:_Z(r,t):t,search:bZ(n),hash:wZ(a)}}function _Z(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function a2(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function a5(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=$p(e):(a=tv({},e),ai(!a.pathname||!a.pathname.includes("?"),a2("?","pathname","search",a)),ai(!a.pathname||!a.pathname.includes("#"),a2("#","pathname","hash",a)),ai(!a.search||!a.search.includes("#"),a2("#","search","hash",a)));let c=e===""||a.pathname==="",f=c?"/":a.pathname,o;if(n||f==null)o=r;else{let E=t.length-1;if(f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),E-=1;a.pathname=C.join("/")}o=E>=0?t[E]:"/"}let m=vZ(a,o),_=f&&f!=="/"&&f.endsWith("/"),w=(c||f===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(_||w)&&(m.pathname+="/"),m}const gu=e=>e.join("/").replace(/\/\/+/g,"/"),xZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,wZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const s5=["post","put","patch","delete"];new Set(s5);const EZ=["get",...s5];new Set(EZ);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j1.apply(this,arguments)}const QO=Y.createContext(null),TZ=Y.createContext(null),Np=Y.createContext(null),cw=Y.createContext(null),sf=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),l5=Y.createContext(null);function AZ(e,t){let{relative:r}=t===void 0?{}:t;Qv()||ai(!1);let{basename:n,navigator:a}=Y.useContext(Np),{hash:c,pathname:f,search:o}=u5(e,{relative:r}),m=f;return n!=="/"&&(m=f==="/"?n:gu([n,f])),a.createHref({pathname:m,search:o,hash:c})}function Qv(){return Y.useContext(cw)!=null}function lf(){return Qv()||ai(!1),Y.useContext(cw).location}function c5(e){Y.useContext(Np).static||Y.useLayoutEffect(e)}function Lo(){let{isDataRoute:e}=Y.useContext(sf);return e?zZ():CZ()}function CZ(){Qv()||ai(!1);let e=Y.useContext(QO),{basename:t,navigator:r}=Y.useContext(Np),{matches:n}=Y.useContext(sf),{pathname:a}=lf(),c=JSON.stringify(o5(n).map(m=>m.pathnameBase)),f=Y.useRef(!1);return c5(()=>{f.current=!0}),Y.useCallback(function(m,_){if(_===void 0&&(_={}),!f.current)return;if(typeof m=="number"){r.go(m);return}let w=a5(m,JSON.parse(c),a,_.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:gu([t,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[t,r,c,a,e])}function u5(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=Y.useContext(sf),{pathname:a}=lf(),c=JSON.stringify(o5(n).map(f=>f.pathnameBase));return Y.useMemo(()=>a5(e,JSON.parse(c),a,r==="path"),[e,c,a,r])}function PZ(e,t){return OZ(e,t)}function OZ(e,t,r){Qv()||ai(!1);let{navigator:n}=Y.useContext(Np),{matches:a}=Y.useContext(sf),c=a[a.length-1],f=c?c.params:{};c&&c.pathname;let o=c?c.pathnameBase:"/";c&&c.route;let m=lf(),_;if(t){var w;let D=typeof t=="string"?$p(t):t;o==="/"||(w=D.pathname)!=null&&w.startsWith(o)||ai(!1),_=D}else _=m;let E=_.pathname||"/",C=o==="/"?E:E.slice(o.length)||"/",M=nZ(e,{pathname:C}),I=RZ(M&&M.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:gu([o,n.encodeLocation?n.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?o:gu([o,n.encodeLocation?n.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,r);return t&&I?Y.createElement(cw.Provider,{value:{location:j1({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:ru.Pop}},I):I}function MZ(){let e=NZ(),t=SZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},c=null;return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},t),r?Y.createElement("pre",{style:a},r):null,c)}const kZ=Y.createElement(MZ,null);class IZ extends Y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?Y.createElement(sf.Provider,{value:this.props.routeContext},Y.createElement(l5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DZ(e){let{routeContext:t,match:r,children:n}=e,a=Y.useContext(QO);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),Y.createElement(sf.Provider,{value:t},n)}function RZ(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var a;if((a=r)!=null&&a.errors)e=r.matches;else return null}let c=e,f=(n=r)==null?void 0:n.errors;if(f!=null){let o=c.findIndex(m=>m.route.id&&(f==null?void 0:f[m.route.id]));o>=0||ai(!1),c=c.slice(0,Math.min(c.length,o+1))}return c.reduceRight((o,m,_)=>{let w=m.route.id?f==null?void 0:f[m.route.id]:null,E=null;r&&(E=m.route.errorElement||kZ);let C=t.concat(c.slice(0,_+1)),M=()=>{let I;return w?I=E:m.route.Component?I=Y.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=o,Y.createElement(DZ,{match:m,routeContext:{outlet:o,matches:C,isDataRoute:r!=null},children:I})};return r&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?Y.createElement(IZ,{location:r.location,revalidation:r.revalidation,component:E,error:w,children:M(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):M()},null)}var h5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(h5||{}),$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($1||{});function LZ(e){let t=Y.useContext(QO);return t||ai(!1),t}function jZ(e){let t=Y.useContext(TZ);return t||ai(!1),t}function $Z(e){let t=Y.useContext(sf);return t||ai(!1),t}function f5(e){let t=$Z(),r=t.matches[t.matches.length-1];return r.route.id||ai(!1),r.route.id}function NZ(){var e;let t=Y.useContext(l5),r=jZ($1.UseRouteError),n=f5($1.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function zZ(){let{router:e}=LZ(h5.UseNavigateStable),t=f5($1.UseNavigateStable),r=Y.useRef(!1);return c5(()=>{r.current=!0}),Y.useCallback(function(a,c){c===void 0&&(c={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,j1({fromRouteId:t},c)))},[e,t])}function Zn(e){ai(!1)}function BZ(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ru.Pop,navigator:c,static:f=!1}=e;Qv()&&ai(!1);let o=t.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:o,navigator:c,static:f}),[o,c,f]);typeof n=="string"&&(n=$p(n));let{pathname:_="/",search:w="",hash:E="",state:C=null,key:M="default"}=n,I=Y.useMemo(()=>{let D=JO(_,o);return D==null?null:{location:{pathname:D,search:w,hash:E,state:C,key:M},navigationType:a}},[o,_,w,E,C,M,a]);return I==null?null:Y.createElement(Np.Provider,{value:m},Y.createElement(cw.Provider,{children:r,value:I}))}function FZ(e){let{children:t,location:r}=e;return PZ(hC(t),r)}new Promise(()=>{});function hC(e,t){t===void 0&&(t=[]);let r=[];return Y.Children.forEach(e,(n,a)=>{if(!Y.isValidElement(n))return;let c=[...t,a];if(n.type===Y.Fragment){r.push.apply(r,hC(n.props.children,c));return}n.type!==Zn&&ai(!1),!n.props.index||!n.props.children||ai(!1);let f={id:n.props.id||c.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(f.children=hC(n.props.children,c)),r.push(f)}),r}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fC(){return fC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fC.apply(this,arguments)}function UZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function VZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WZ(e,t){return e.button===0&&(!t||t==="_self")&&!VZ(e)}const qZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],GZ="startTransition",GL=W9[GZ];function HZ(e){let{basename:t,children:r,future:n,window:a}=e,c=Y.useRef();c.current==null&&(c.current=eZ({window:a,v5Compat:!0}));let f=c.current,[o,m]=Y.useState({action:f.action,location:f.location}),{v7_startTransition:_}=n||{},w=Y.useCallback(E=>{_&&GL?GL(()=>m(E)):m(E)},[m,_]);return Y.useLayoutEffect(()=>f.listen(w),[f,w]),Y.createElement(BZ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:f})}const ZZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ni=Y.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:c,replace:f,state:o,target:m,to:_,preventScrollReset:w}=t,E=UZ(t,qZ),{basename:C}=Y.useContext(Np),M,I=!1;if(typeof _=="string"&&XZ.test(_)&&(M=_,ZZ))try{let F=new URL(window.location.href),R=_.startsWith("//")?new URL(F.protocol+_):new URL(_),U=JO(R.pathname,C);R.origin===F.origin&&U!=null?_=U+R.search+R.hash:I=!0}catch{}let D=AZ(_,{relative:a}),$=KZ(_,{replace:f,state:o,target:m,preventScrollReset:w,relative:a});function B(F){n&&n(F),F.defaultPrevented||$(F)}return Y.createElement("a",fC({},E,{href:M||D,onClick:I||c?n:B,ref:r,target:m}))});var HL;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(HL||(HL={}));var ZL;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ZL||(ZL={}));function KZ(e,t){let{target:r,replace:n,state:a,preventScrollReset:c,relative:f}=t===void 0?{}:t,o=Lo(),m=lf(),_=u5(e,{relative:f});return Y.useCallback(w=>{if(WZ(w,r)){w.preventDefault();let E=n!==void 0?n:L1(m)===L1(_);o(e,{replace:E,state:a,preventScrollReset:c,relative:f})}},[m,o,_,n,a,r,e,c,f])}var d5={exports:{}},p5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Y;function YZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var JZ=typeof Object.is=="function"?Object.is:YZ,QZ=lp.useState,eX=lp.useEffect,tX=lp.useLayoutEffect,rX=lp.useDebugValue;function nX(e,t){var r=t(),n=QZ({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return tX(function(){a.value=r,a.getSnapshot=t,s2(a)&&c({inst:a})},[e,r,t]),eX(function(){return s2(a)&&c({inst:a}),e(function(){s2(a)&&c({inst:a})})},[e]),rX(r),r}function s2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!JZ(e,r)}catch{return!0}}function iX(e,t){return t()}var oX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iX:nX;p5.useSyncExternalStore=lp.useSyncExternalStore!==void 0?lp.useSyncExternalStore:oX;d5.exports=p5;var aX=d5.exports,m5={exports:{}},g5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=Y,sX=aX;function lX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cX=typeof Object.is=="function"?Object.is:lX,uX=sX.useSyncExternalStore,hX=uw.useRef,fX=uw.useEffect,dX=uw.useMemo,pX=uw.useDebugValue;g5.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var c=hX(null);if(c.current===null){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=dX(function(){function m(M){if(!_){if(_=!0,w=M,M=n(M),a!==void 0&&f.hasValue){var I=f.value;if(a(I,M))return E=I}return E=M}if(I=E,cX(w,M))return I;var D=n(M);return a!==void 0&&a(I,D)?I:(w=M,E=D)}var _=!1,w,E,C=r===void 0?null:r;return[function(){return m(t())},C===null?void 0:function(){return m(C())}]},[t,r,n,a]);var o=uX(e,c[0],c[1]);return fX(function(){f.hasValue=!0,f.value=o},[o]),pX(o),o};m5.exports=g5;var mX=m5.exports;function gX(e){e()}let y5=gX;const yX=e=>y5=e,vX=()=>y5,XL=Symbol.for("react-redux-context"),KL=typeof globalThis<"u"?globalThis:{};function _X(){var e;if(!Y.createContext)return{};const t=(e=KL[XL])!=null?e:KL[XL]=new Map;let r=t.get(Y.createContext);return r||(r=Y.createContext(null),t.set(Y.createContext,r)),r}const Eu=_X();function eM(e=Eu){return function(){return Y.useContext(e)}}const v5=eM(),xX=()=>{throw new Error("uSES not initialized!")};let _5=xX;const bX=e=>{_5=e},wX=(e,t)=>e===t;function SX(e=Eu){const t=e===Eu?v5:eM(e);return function(n,a={}){const{equalityFn:c=wX,stabilityCheck:f=void 0,noopCheck:o=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:m,subscription:_,getServerState:w,stabilityCheck:E,noopCheck:C}=t();Y.useRef(!0);const M=Y.useCallback({[n.name](D){return n(D)}}[n.name],[n,E,f]),I=_5(_.addNestedSub,m.getState,w||m.getState,M,c);return Y.useDebugValue(I),I}}const tM=SX();function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dC.apply(this,arguments)}function x5(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var b5={exports:{}},tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ki=typeof Symbol=="function"&&Symbol.for,rM=ki?Symbol.for("react.element"):60103,nM=ki?Symbol.for("react.portal"):60106,hw=ki?Symbol.for("react.fragment"):60107,fw=ki?Symbol.for("react.strict_mode"):60108,dw=ki?Symbol.for("react.profiler"):60114,pw=ki?Symbol.for("react.provider"):60109,mw=ki?Symbol.for("react.context"):60110,iM=ki?Symbol.for("react.async_mode"):60111,gw=ki?Symbol.for("react.concurrent_mode"):60111,yw=ki?Symbol.for("react.forward_ref"):60112,vw=ki?Symbol.for("react.suspense"):60113,EX=ki?Symbol.for("react.suspense_list"):60120,_w=ki?Symbol.for("react.memo"):60115,xw=ki?Symbol.for("react.lazy"):60116,TX=ki?Symbol.for("react.block"):60121,AX=ki?Symbol.for("react.fundamental"):60117,CX=ki?Symbol.for("react.responder"):60118,PX=ki?Symbol.for("react.scope"):60119;function ia(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rM:switch(e=e.type,e){case iM:case gw:case hw:case dw:case fw:case vw:return e;default:switch(e=e&&e.$$typeof,e){case mw:case yw:case xw:case _w:case pw:return e;default:return t}}case nM:return t}}}function w5(e){return ia(e)===gw}tn.AsyncMode=iM;tn.ConcurrentMode=gw;tn.ContextConsumer=mw;tn.ContextProvider=pw;tn.Element=rM;tn.ForwardRef=yw;tn.Fragment=hw;tn.Lazy=xw;tn.Memo=_w;tn.Portal=nM;tn.Profiler=dw;tn.StrictMode=fw;tn.Suspense=vw;tn.isAsyncMode=function(e){return w5(e)||ia(e)===iM};tn.isConcurrentMode=w5;tn.isContextConsumer=function(e){return ia(e)===mw};tn.isContextProvider=function(e){return ia(e)===pw};tn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rM};tn.isForwardRef=function(e){return ia(e)===yw};tn.isFragment=function(e){return ia(e)===hw};tn.isLazy=function(e){return ia(e)===xw};tn.isMemo=function(e){return ia(e)===_w};tn.isPortal=function(e){return ia(e)===nM};tn.isProfiler=function(e){return ia(e)===dw};tn.isStrictMode=function(e){return ia(e)===fw};tn.isSuspense=function(e){return ia(e)===vw};tn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hw||e===gw||e===dw||e===fw||e===vw||e===EX||typeof e=="object"&&e!==null&&(e.$$typeof===xw||e.$$typeof===_w||e.$$typeof===pw||e.$$typeof===mw||e.$$typeof===yw||e.$$typeof===AX||e.$$typeof===CX||e.$$typeof===PX||e.$$typeof===TX)};tn.typeOf=ia;b5.exports=tn;var OX=b5.exports,S5=OX,MX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kX={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},E5={};E5[S5.ForwardRef]=MX;E5[S5.Memo]=kX;var ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oM=Symbol.for("react.element"),aM=Symbol.for("react.portal"),bw=Symbol.for("react.fragment"),ww=Symbol.for("react.strict_mode"),Sw=Symbol.for("react.profiler"),Ew=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),IX=Symbol.for("react.server_context"),Aw=Symbol.for("react.forward_ref"),Cw=Symbol.for("react.suspense"),Pw=Symbol.for("react.suspense_list"),Ow=Symbol.for("react.memo"),Mw=Symbol.for("react.lazy"),DX=Symbol.for("react.offscreen"),T5;T5=Symbol.for("react.module.reference");function za(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case oM:switch(e=e.type,e){case bw:case Sw:case ww:case Cw:case Pw:return e;default:switch(e=e&&e.$$typeof,e){case IX:case Tw:case Aw:case Mw:case Ow:case Ew:return e;default:return t}}case aM:return t}}}ln.ContextConsumer=Tw;ln.ContextProvider=Ew;ln.Element=oM;ln.ForwardRef=Aw;ln.Fragment=bw;ln.Lazy=Mw;ln.Memo=Ow;ln.Portal=aM;ln.Profiler=Sw;ln.StrictMode=ww;ln.Suspense=Cw;ln.SuspenseList=Pw;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(e){return za(e)===Tw};ln.isContextProvider=function(e){return za(e)===Ew};ln.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===oM};ln.isForwardRef=function(e){return za(e)===Aw};ln.isFragment=function(e){return za(e)===bw};ln.isLazy=function(e){return za(e)===Mw};ln.isMemo=function(e){return za(e)===Ow};ln.isPortal=function(e){return za(e)===aM};ln.isProfiler=function(e){return za(e)===Sw};ln.isStrictMode=function(e){return za(e)===ww};ln.isSuspense=function(e){return za(e)===Cw};ln.isSuspenseList=function(e){return za(e)===Pw};ln.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bw||e===Sw||e===ww||e===Cw||e===Pw||e===DX||typeof e=="object"&&e!==null&&(e.$$typeof===Mw||e.$$typeof===Ow||e.$$typeof===Ew||e.$$typeof===Tw||e.$$typeof===Aw||e.$$typeof===T5||e.getModuleId!==void 0)};ln.typeOf=za;function RX(){const e=vX();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,c=r={callback:n,next:null,prev:r};return c.prev?c.prev.next=c:t=c,function(){!a||t===null||(a=!1,c.next?c.next.prev=c.prev:r=c.prev,c.prev?c.prev.next=c.next:t=c.next)}}}}const YL={notify(){},get:()=>[]};function LX(e,t){let r,n=YL;function a(E){return m(),n.subscribe(E)}function c(){n.notify()}function f(){w.onStateChange&&w.onStateChange()}function o(){return!!r}function m(){r||(r=t?t.addNestedSub(f):e.subscribe(f),n=RX())}function _(){r&&(r(),r=void 0,n.clear(),n=YL)}const w={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:o,trySubscribe:m,tryUnsubscribe:_,getListeners:()=>n};return w}const jX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$X=jX?Y.useLayoutEffect:Y.useEffect;function NX({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:c="once"}){const f=Y.useMemo(()=>{const _=LX(e);return{store:e,subscription:_,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:c}},[e,n,a,c]),o=Y.useMemo(()=>e.getState(),[e]);$X(()=>{const{subscription:_}=f;return _.onStateChange=_.notifyNestedSubs,_.trySubscribe(),o!==e.getState()&&_.notifyNestedSubs(),()=>{_.tryUnsubscribe(),_.onStateChange=void 0}},[f,o]);const m=t||Eu;return Y.createElement(m.Provider,{value:f},r)}function A5(e=Eu){const t=e===Eu?v5:eM(e);return function(){const{store:n}=t();return n}}const zX=A5();function BX(e=Eu){const t=e===Eu?zX:A5(e);return function(){return t().dispatch}}const cf=BX();bX(mX.useSyncExternalStoreWithSelector);yX(lw.unstable_batchedUpdates);function C5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=C5(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function nu(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=C5(e))&&(n&&(n+=" "),n+=t);return n}const Cy=e=>typeof e=="number"&&!isNaN(e),Yh=e=>typeof e=="string",Co=e=>typeof e=="function",e1=e=>Yh(e)||Co(e)?e:null,l2=e=>Y.isValidElement(e)||Yh(e)||Co(e)||Cy(e);function FX(e,t,r){r===void 0&&(r=300);const{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function kw(e){let{enter:t,exit:r,appendPosition:n=!1,collapse:a=!0,collapseDuration:c=300}=e;return function(f){let{children:o,position:m,preventExitTransition:_,done:w,nodeRef:E,isIn:C}=f;const M=n?`${t}--${m}`:t,I=n?`${r}--${m}`:r,D=Y.useRef(0);return Y.useLayoutEffect(()=>{const $=E.current,B=M.split(" "),F=R=>{R.target===E.current&&($.dispatchEvent(new Event("d")),$.removeEventListener("animationend",F),$.removeEventListener("animationcancel",F),D.current===0&&R.type!=="animationcancel"&&$.classList.remove(...B))};$.classList.add(...B),$.addEventListener("animationend",F),$.addEventListener("animationcancel",F)},[]),Y.useEffect(()=>{const $=E.current,B=()=>{$.removeEventListener("animationend",B),a?FX($,w,c):w()};C||(_?B():(D.current=1,$.className+=` ${I}`,$.addEventListener("animationend",B)))},[C]),Se.createElement(Se.Fragment,null,o)}}function JL(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const ba={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const r=this.list.get(e).filter(n=>n!==t);return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const r=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(r)})}},vx=e=>{let{theme:t,type:r,...n}=e;return Se.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...n})},c2={info:function(e){return Se.createElement(vx,{...e},Se.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Se.createElement(vx,{...e},Se.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Se.createElement(vx,{...e},Se.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Se.createElement(vx,{...e},Se.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Se.createElement("div",{className:"Toastify__spinner"})}};function UX(e){const[,t]=Y.useReducer(M=>M+1,0),[r,n]=Y.useState([]),a=Y.useRef(null),c=Y.useRef(new Map).current,f=M=>r.indexOf(M)!==-1,o=Y.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:f,getToast:M=>c.get(M)}).current;function m(M){let{containerId:I}=M;const{limit:D}=o.props;!D||I&&o.containerId!==I||(o.count-=o.queue.length,o.queue=[])}function _(M){n(I=>M==null?[]:I.filter(D=>D!==M))}function w(){const{toastContent:M,toastProps:I,staleId:D}=o.queue.shift();C(M,I,D)}function E(M,I){let{delay:D,staleId:$,...B}=I;if(!l2(M)||function(ve){return!a.current||o.props.enableMultiContainer&&ve.containerId!==o.props.containerId||c.has(ve.toastId)&&ve.updateId==null}(B))return;const{toastId:F,updateId:R,data:U}=B,{props:H}=o,X=()=>_(F),ee=R==null;ee&&o.count++;const oe={...H,style:H.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(B).filter(ve=>{let[Ee,Re]=ve;return Re!=null})),toastId:F,updateId:R,data:U,closeToast:X,isIn:!1,className:e1(B.className||H.toastClassName),bodyClassName:e1(B.bodyClassName||H.bodyClassName),progressClassName:e1(B.progressClassName||H.progressClassName),autoClose:!B.isLoading&&(ae=B.autoClose,ge=H.autoClose,ae===!1||Cy(ae)&&ae>0?ae:ge),deleteToast(){const ve=JL(c.get(F),"removed");c.delete(F),ba.emit(4,ve);const Ee=o.queue.length;if(o.count=F==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),Ee>0){const Re=F==null?o.props.limit:1;if(Ee===1||Re===1)o.displayedToast++,w();else{const Ne=Re>Ee?Ee:Re;o.displayedToast=Ne;for(let Ve=0;Ve<Ne;Ve++)w()}}else t()}};var ae,ge;oe.iconOut=function(ve){let{theme:Ee,type:Re,isLoading:Ne,icon:Ve}=ve,Ke=null;const ke={theme:Ee,type:Re};return Ve===!1||(Co(Ve)?Ke=Ve(ke):Y.isValidElement(Ve)?Ke=Y.cloneElement(Ve,ke):Yh(Ve)||Cy(Ve)?Ke=Ve:Ne?Ke=c2.spinner():(Ge=>Ge in c2)(Re)&&(Ke=c2[Re](ke))),Ke}(oe),Co(B.onOpen)&&(oe.onOpen=B.onOpen),Co(B.onClose)&&(oe.onClose=B.onClose),oe.closeButton=H.closeButton,B.closeButton===!1||l2(B.closeButton)?oe.closeButton=B.closeButton:B.closeButton===!0&&(oe.closeButton=!l2(H.closeButton)||H.closeButton);let he=M;Y.isValidElement(M)&&!Yh(M.type)?he=Y.cloneElement(M,{closeToast:X,toastProps:oe,data:U}):Co(M)&&(he=M({closeToast:X,toastProps:oe,data:U})),H.limit&&H.limit>0&&o.count>H.limit&&ee?o.queue.push({toastContent:he,toastProps:oe,staleId:$}):Cy(D)?setTimeout(()=>{C(he,oe,$)},D):C(he,oe,$)}function C(M,I,D){const{toastId:$}=I;D&&c.delete(D);const B={content:M,props:I};c.set($,B),n(F=>[...F,$].filter(R=>R!==D)),ba.emit(4,JL(B,B.props.updateId==null?"added":"updated"))}return Y.useEffect(()=>(o.containerId=e.containerId,ba.cancelEmit(3).on(0,E).on(1,M=>a.current&&_(M)).on(5,m).emit(2,o),()=>{c.clear(),ba.emit(3,o)}),[]),Y.useEffect(()=>{o.props=e,o.isToastActive=f,o.displayedToast=r.length}),{getToastToRender:function(M){const I=new Map,D=Array.from(c.values());return e.newestOnTop&&D.reverse(),D.forEach($=>{const{position:B}=$.props;I.has(B)||I.set(B,[]),I.get(B).push($)}),Array.from(I,$=>M($[0],$[1]))},containerRef:a,isToastActive:f}}function QL(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ej(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function VX(e){const[t,r]=Y.useState(!1),[n,a]=Y.useState(!1),c=Y.useRef(null),f=Y.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=Y.useRef(e),{autoClose:m,pauseOnHover:_,closeToast:w,onClick:E,closeOnClick:C}=e;function M(U){if(e.draggable){U.nativeEvent.type==="touchstart"&&U.nativeEvent.preventDefault(),f.didMove=!1,document.addEventListener("mousemove",B),document.addEventListener("mouseup",F),document.addEventListener("touchmove",B),document.addEventListener("touchend",F);const H=c.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=H.getBoundingClientRect(),H.style.transition="",f.x=QL(U.nativeEvent),f.y=ej(U.nativeEvent),e.draggableDirection==="x"?(f.start=f.x,f.removalDistance=H.offsetWidth*(e.draggablePercent/100)):(f.start=f.y,f.removalDistance=H.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function I(U){if(f.boundingRect){const{top:H,bottom:X,left:ee,right:oe}=f.boundingRect;U.nativeEvent.type!=="touchend"&&e.pauseOnHover&&f.x>=ee&&f.x<=oe&&f.y>=H&&f.y<=X?$():D()}}function D(){r(!0)}function $(){r(!1)}function B(U){const H=c.current;f.canDrag&&H&&(f.didMove=!0,t&&$(),f.x=QL(U),f.y=ej(U),f.delta=e.draggableDirection==="x"?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),H.style.transform=`translate${e.draggableDirection}(${f.delta}px)`,H.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function F(){document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",B),document.removeEventListener("touchend",F);const U=c.current;if(f.canDrag&&f.didMove&&U){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return a(!0),void e.closeToast();U.style.transition="transform 0.2s, opacity 0.2s",U.style.transform=`translate${e.draggableDirection}(0)`,U.style.opacity="1"}}Y.useEffect(()=>{o.current=e}),Y.useEffect(()=>(c.current&&c.current.addEventListener("d",D,{once:!0}),Co(e.onOpen)&&e.onOpen(Y.isValidElement(e.children)&&e.children.props),()=>{const U=o.current;Co(U.onClose)&&U.onClose(Y.isValidElement(U.children)&&U.children.props)}),[]),Y.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||$(),window.addEventListener("focus",D),window.addEventListener("blur",$)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",D),window.removeEventListener("blur",$))}),[e.pauseOnFocusLoss]);const R={onMouseDown:M,onTouchStart:M,onMouseUp:I,onTouchEnd:I};return m&&_&&(R.onMouseEnter=$,R.onMouseLeave=D),C&&(R.onClick=U=>{E&&E(U),f.canCloseOnClick&&w()}),{playToast:D,pauseToast:$,isRunning:t,preventExitTransition:n,toastRef:c,eventHandlers:R}}function P5(e){let{closeToast:t,theme:r,ariaLabel:n="close"}=e;return Se.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:a=>{a.stopPropagation(),t(a)},"aria-label":n},Se.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Se.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function WX(e){let{delay:t,isRunning:r,closeToast:n,type:a="default",hide:c,className:f,style:o,controlledProgress:m,progress:_,rtl:w,isIn:E,theme:C}=e;const M=c||m&&_===0,I={...o,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused",opacity:M?0:1};m&&(I.transform=`scaleX(${_})`);const D=nu("Toastify__progress-bar",m?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${C}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":w}),$=Co(f)?f({rtl:w,type:a,defaultClassName:D}):nu(D,f);return Se.createElement("div",{role:"progressbar","aria-hidden":M?"true":"false","aria-label":"notification timer",className:$,style:I,[m&&_>=1?"onTransitionEnd":"onAnimationEnd"]:m&&_<1?null:()=>{E&&n()}})}const qX=e=>{const{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:a}=VX(e),{closeButton:c,children:f,autoClose:o,onClick:m,type:_,hideProgressBar:w,closeToast:E,transition:C,position:M,className:I,style:D,bodyClassName:$,bodyStyle:B,progressClassName:F,progressStyle:R,updateId:U,role:H,progress:X,rtl:ee,toastId:oe,deleteToast:ae,isIn:ge,isLoading:he,iconOut:ve,closeOnClick:Ee,theme:Re}=e,Ne=nu("Toastify__toast",`Toastify__toast-theme--${Re}`,`Toastify__toast--${_}`,{"Toastify__toast--rtl":ee},{"Toastify__toast--close-on-click":Ee}),Ve=Co(I)?I({rtl:ee,position:M,type:_,defaultClassName:Ne}):nu(Ne,I),Ke=!!X||!o,ke={closeToast:E,type:_,theme:Re};let Ge=null;return c===!1||(Ge=Co(c)?c(ke):Y.isValidElement(c)?Y.cloneElement(c,ke):P5(ke)),Se.createElement(C,{isIn:ge,done:ae,position:M,preventExitTransition:r,nodeRef:n},Se.createElement("div",{id:oe,onClick:m,className:Ve,...a,style:D,ref:n},Se.createElement("div",{...ge&&{role:H},className:Co($)?$({type:_}):nu("Toastify__toast-body",$),style:B},ve!=null&&Se.createElement("div",{className:nu("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!he})},ve),Se.createElement("div",null,f)),Ge,Se.createElement(WX,{...U&&!Ke?{key:`pb-${U}`}:{},rtl:ee,theme:Re,delay:o,isRunning:t,isIn:ge,closeToast:E,hide:w,type:_,style:R,className:F,controlledProgress:Ke,progress:X||0})))},Iw=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},GX=kw(Iw("bounce",!0));kw(Iw("slide",!0));kw(Iw("zoom"));kw(Iw("flip"));const Ro=Y.forwardRef((e,t)=>{const{getToastToRender:r,containerRef:n,isToastActive:a}=UX(e),{className:c,style:f,rtl:o,containerId:m}=e;function _(w){const E=nu("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":o});return Co(c)?c({position:w,rtl:o,defaultClassName:E}):nu(E,e1(c))}return Y.useEffect(()=>{t&&(t.current=n.current)},[]),Se.createElement("div",{ref:n,className:"Toastify",id:m},r((w,E)=>{const C=E.length?{...f}:{...f,pointerEvents:"none"};return Se.createElement("div",{className:_(w),style:C,key:`container-${w}`},E.map((M,I)=>{let{content:D,props:$}=M;return Se.createElement(qX,{...$,isIn:a($.toastId),style:{...$.style,"--nth":I+1,"--len":E.length},key:`toast-${$.key}`},D)}))}))});Ro.displayName="ToastContainer",Ro.defaultProps={position:"top-right",transition:GX,autoClose:5e3,closeButton:P5,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let u2,Ch=new Map,hy=[],HX=1;function O5(){return""+HX++}function ZX(e){return e&&(Yh(e.toastId)||Cy(e.toastId))?e.toastId:O5()}function Py(e,t){return Ch.size>0?ba.emit(0,e,t):hy.push({content:e,options:t}),t.toastId}function N1(e,t){return{...t,type:t&&t.type||e,toastId:ZX(t)}}function _x(e){return(t,r)=>Py(t,N1(e,r))}function Qt(e,t){return Py(e,N1("default",t))}Qt.loading=(e,t)=>Py(e,N1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Qt.promise=function(e,t,r){let n,{pending:a,error:c,success:f}=t;a&&(n=Yh(a)?Qt.loading(a,r):Qt.loading(a.render,{...r,...a}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(w,E,C)=>{if(E==null)return void Qt.dismiss(n);const M={type:w,...o,...r,data:C},I=Yh(E)?{render:E}:E;return n?Qt.update(n,{...M,...I}):Qt(I.render,{...M,...I}),C},_=Co(e)?e():e;return _.then(w=>m("success",f,w)).catch(w=>m("error",c,w)),_},Qt.success=_x("success"),Qt.info=_x("info"),Qt.error=_x("error"),Qt.warning=_x("warning"),Qt.warn=Qt.warning,Qt.dark=(e,t)=>Py(e,N1("default",{theme:"dark",...t})),Qt.dismiss=e=>{Ch.size>0?ba.emit(1,e):hy=hy.filter(t=>e!=null&&t.options.toastId!==e)},Qt.clearWaitingQueue=function(e){return e===void 0&&(e={}),ba.emit(5,e)},Qt.isActive=e=>{let t=!1;return Ch.forEach(r=>{r.isToastActive&&r.isToastActive(e)&&(t=!0)}),t},Qt.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const r=function(n,a){let{containerId:c}=a;const f=Ch.get(c||u2);return f&&f.getToast(n)}(e,t);if(r){const{props:n,content:a}=r,c={delay:100,...n,...t,toastId:t.toastId||e,updateId:O5()};c.toastId!==e&&(c.staleId=e);const f=c.render||a;delete c.render,Py(f,c)}},0)},Qt.done=e=>{Qt.update(e,{progress:1})},Qt.onChange=e=>(ba.on(4,e),()=>{ba.off(4,e)}),Qt.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Qt.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},ba.on(2,e=>{u2=e.containerId||e,Ch.set(u2,e),hy.forEach(t=>{ba.emit(0,t.content,t.options)}),hy=[]}).on(3,e=>{Ch.delete(e.containerId||e),Ch.size===0&&ba.off(0).off(1).off(5)});const el=Object.create(null);el.open="0";el.close="1";el.ping="2";el.pong="3";el.message="4";el.upgrade="5";el.noop="6";const t1=Object.create(null);Object.keys(el).forEach(e=>{t1[el[e]]=e});const pC={type:"error",data:"parser error"},M5=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",k5=typeof ArrayBuffer=="function",I5=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,sM=({type:e,data:t},r,n)=>M5&&t instanceof Blob?r?n(t):tj(t,n):k5&&(t instanceof ArrayBuffer||I5(t))?r?n(t):tj(new Blob([t]),n):n(el[e]+(t||"")),tj=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function rj(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let h2;function XX(e,t){if(M5&&e.data instanceof Blob)return e.data.arrayBuffer().then(rj).then(t);if(k5&&(e.data instanceof ArrayBuffer||I5(e.data)))return t(rj(e.data));sM(e,!1,r=>{h2||(h2=new TextEncoder),t(h2.encode(r))})}const nj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<nj.length;e++)fy[nj.charCodeAt(e)]=e;const KX=e=>{let t=e.length*.75,r=e.length,n,a=0,c,f,o,m;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const _=new ArrayBuffer(t),w=new Uint8Array(_);for(n=0;n<r;n+=4)c=fy[e.charCodeAt(n)],f=fy[e.charCodeAt(n+1)],o=fy[e.charCodeAt(n+2)],m=fy[e.charCodeAt(n+3)],w[a++]=c<<2|f>>4,w[a++]=(f&15)<<4|o>>2,w[a++]=(o&3)<<6|m&63;return _},YX=typeof ArrayBuffer=="function",lM=(e,t)=>{if(typeof e!="string")return{type:"message",data:D5(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:JX(e.substring(1),t)}:t1[r]?e.length>1?{type:t1[r],data:e.substring(1)}:{type:t1[r]}:pC},JX=(e,t)=>{if(YX){const r=KX(e);return D5(r,t)}else return{base64:!0,data:e}},D5=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},R5=String.fromCharCode(30),QX=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((c,f)=>{sM(c,!1,o=>{n[f]=o,++a===r&&t(n.join(R5))})})},eK=(e,t)=>{const r=e.split(R5),n=[];for(let a=0;a<r.length;a++){const c=lM(r[a],t);if(n.push(c),c.type==="error")break}return n};function tK(){return new TransformStream({transform(e,t){XX(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const c=new DataView(a.buffer);c.setUint8(0,126),c.setUint16(1,n)}else{a=new Uint8Array(9);const c=new DataView(a.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let f2;function xx(e){return e.reduce((t,r)=>t+r.length,0)}function bx(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function rK(e,t){f2||(f2=new TextDecoder);const r=[];let n=0,a=-1,c=!1;return new TransformStream({transform(f,o){for(r.push(f);;){if(n===0){if(xx(r)<1)break;const m=bx(r,1);c=(m[0]&128)===128,a=m[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(xx(r)<2)break;const m=bx(r,2);a=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),n=3}else if(n===2){if(xx(r)<8)break;const m=bx(r,8),_=new DataView(m.buffer,m.byteOffset,m.length),w=_.getUint32(0);if(w>Math.pow(2,53-32)-1){o.enqueue(pC);break}a=w*Math.pow(2,32)+_.getUint32(4),n=3}else{if(xx(r)<a)break;const m=bx(r,a);o.enqueue(lM(c?m:f2.decode(m),t)),n=0}if(a===0||a>e){o.enqueue(pC);break}}}})}const L5=4;function oi(e){if(e)return nK(e)}function nK(e){for(var t in oi.prototype)e[t]=oi.prototype[t];return e}oi.prototype.on=oi.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};oi.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};oi.prototype.off=oi.prototype.removeListener=oi.prototype.removeAllListeners=oi.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};oi.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};oi.prototype.emitReserved=oi.prototype.emit;oi.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};oi.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ea=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function j5(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const iK=Ea.setTimeout,oK=Ea.clearTimeout;function Dw(e,t){t.useNativeTimers?(e.setTimeoutFn=iK.bind(Ea),e.clearTimeoutFn=oK.bind(Ea)):(e.setTimeoutFn=Ea.setTimeout.bind(Ea),e.clearTimeoutFn=Ea.clearTimeout.bind(Ea))}const aK=1.33;function sK(e){return typeof e=="string"?lK(e):Math.ceil((e.byteLength||e.size)*aK)}function lK(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function cK(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function uK(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let c=r[n].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}class hK extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class cM extends oi{constructor(t){super(),this.writable=!1,Dw(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new hK(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=lM(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=cK(t);return r.length?"?"+r:""}}const $5="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),mC=64,fK={};let ij=0,wx=0,oj;function aj(e){let t="";do t=$5[e%mC]+t,e=Math.floor(e/mC);while(e>0);return t}function N5(){const e=aj(+new Date);return e!==oj?(ij=0,oj=e):e+"."+aj(ij++)}for(;wx<mC;wx++)fK[$5[wx]]=wx;let z5=!1;try{z5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dK=z5;function B5(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dK))return new XMLHttpRequest}catch{}if(!t)try{return new Ea[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function pK(){}const mK=function(){return new B5({xdomain:!1}).responseType!=null}();class gK extends cM{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let a=location.port;a||(a=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}const r=t&&t.forceBase64;this.supportsBinary=mK&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};eK(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,QX(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=N5()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Zs(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,c)=>{this.onError("xhr post error",a,c)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Zs extends oi{constructor(t,r){super(),Dw(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;const r=j5(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const n=this.xhr=new B5(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this.opts.cookieJar)===null||a===void 0||a.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(a){this.setTimeoutFn(()=>{this.onError(a)},0);return}typeof document<"u"&&(this.index=Zs.requestsCount++,Zs.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=pK,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Zs.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Zs.requestsCount=0;Zs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",sj);else if(typeof addEventListener=="function"){const e="onpagehide"in Ea?"pagehide":"unload";addEventListener(e,sj,!1)}}function sj(){for(let e in Zs.requests)Zs.requests.hasOwnProperty(e)&&Zs.requests[e].abort()}const uM=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0))(),Sx=Ea.WebSocket||Ea.MozWebSocket,lj=!0,yK="arraybuffer",cj=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vK extends cM{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=cj?{}:j5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=lj&&!cj?r?new Sx(t,r):new Sx(t):new Sx(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;sM(n,this.supportsBinary,c=>{const f={};try{lj&&this.ws.send(c)}catch{}a&&uM(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=N5()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}check(){return!!Sx}}class _K extends cM{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const r=rK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=tK();a.readable.pipeTo(t.writable),this.writer=a.writable.getWriter();const c=()=>{n.read().then(({done:o,value:m})=>{o||(this.onPacket(m),c())}).catch(o=>{})};c();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this.writer.write(f).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this.writer.write(n).then(()=>{a&&uM(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const xK={websocket:vK,webtransport:_K,polling:gK},bK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function gC(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=bK.exec(e||""),c={},f=14;for(;f--;)c[wK[f]]=a[f]||"";return r!=-1&&n!=-1&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=SK(c,c.path),c.queryKey=EK(c,c.query),c}function SK(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function EK(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,c){a&&(r[a]=c)}),r}let F5=class Cd extends oi{constructor(t,r={}){super(),this.binaryType=yK,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=gC(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=gC(r.host).host),Dw(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uK(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=L5,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new xK[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Cd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;Cd.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",E=>{if(!n)if(E.type==="pong"&&E.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Cd.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(w(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=r.name,this.emitReserved("upgradeError",C)}}))};function c(){n||(n=!0,w(),r.close(),r=null)}const f=E=>{const C=new Error("probe error: "+E);C.transport=r.name,c(),this.emitReserved("upgradeError",C)};function o(){f("transport closed")}function m(){f("socket closed")}function _(E){r&&E.name!==r.name&&c()}const w=()=>{r.removeListener("open",a),r.removeListener("error",f),r.removeListener("close",o),this.off("close",m),this.off("upgrading",_)};r.once("open",a),r.once("error",f),r.once("close",o),this.once("close",m),this.once("upgrading",_),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Cd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=sK(a)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const c={type:t,data:r,options:n};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){Cd.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const a=t.length;for(;n<a;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}};F5.protocol=L5;function TK(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=gC(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const c=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+c+":"+n.port+t,n.href=n.protocol+"://"+c+(r&&r.port===n.port?"":":"+n.port),n}const AK=typeof ArrayBuffer=="function",CK=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,U5=Object.prototype.toString,PK=typeof Blob=="function"||typeof Blob<"u"&&U5.call(Blob)==="[object BlobConstructor]",OK=typeof File=="function"||typeof File<"u"&&U5.call(File)==="[object FileConstructor]";function hM(e){return AK&&(e instanceof ArrayBuffer||CK(e))||PK&&e instanceof Blob||OK&&e instanceof File}function r1(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(r1(e[r]))return!0;return!1}if(hM(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return r1(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&r1(e[r]))return!0;return!1}function MK(e){const t=[],r=e.data,n=e;return n.data=yC(r,t),n.attachments=t.length,{packet:n,buffers:t}}function yC(e,t){if(!e)return e;if(hM(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=yC(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=yC(e[n],t));return r}return e}function kK(e,t){return e.data=vC(e.data,t),delete e.attachments,e}function vC(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=vC(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=vC(e[r],t));return e}const IK=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DK=5;var Dr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Dr||(Dr={}));class RK{constructor(t){this.replacer=t}encode(t){return(t.type===Dr.EVENT||t.type===Dr.ACK)&&r1(t)?this.encodeAsBinary({type:t.type===Dr.EVENT?Dr.BINARY_EVENT:Dr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Dr.BINARY_EVENT||t.type===Dr.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=MK(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function uj(e){return Object.prototype.toString.call(e)==="[object Object]"}class fM extends oi{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Dr.BINARY_EVENT;n||r.type===Dr.BINARY_ACK?(r.type=n?Dr.EVENT:Dr.ACK,this.reconstructor=new LK(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(hM(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Dr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Dr.BINARY_EVENT||n.type===Dr.BINARY_ACK){const c=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const f=t.substring(c,r);if(f!=Number(f)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(f)}if(t.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(c,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const c=r+1;for(;++r;){const f=t.charAt(r);if(f==null||Number(f)!=f){--r;break}if(r===t.length)break}n.id=Number(t.substring(c,r+1))}if(t.charAt(++r)){const c=this.tryParse(t.substr(r));if(fM.isPayloadValid(n.type,c))n.data=c;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Dr.CONNECT:return uj(r);case Dr.DISCONNECT:return r===void 0;case Dr.CONNECT_ERROR:return typeof r=="string"||uj(r);case Dr.EVENT:case Dr.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&IK.indexOf(r[0])===-1);case Dr.ACK:case Dr.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class LK{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=kK(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const jK=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fM,Encoder:RK,get PacketType(){return Dr},protocol:DK},Symbol.toStringTag,{value:"Module"}));function ds(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const $K=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V5 extends oi{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ds(t,"open",this.onopen.bind(this)),ds(t,"packet",this.onpacket.bind(this)),ds(t,"error",this.onerror.bind(this)),ds(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if($K.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:Dr.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const f=this.ids++,o=r.pop();this._registerAckCallback(f,o),n.id=f}const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===t&&this.sendBuffer.splice(f,1);r.call(this,new Error("operation has timed out"))},a);this.acks[t]=(...f)=>{this.io.clearTimeoutFn(c),r.apply(this,[null,...f])}}emitWithAck(t,...r){const n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((a,c)=>{r.push((f,o)=>n?f?c(f):a(o):a(f)),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...c)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...c)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Dr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Dr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Dr.EVENT:case Dr.BINARY_EVENT:this.onevent(t);break;case Dr.ACK:case Dr.BINARY_ACK:this.onack(t);break;case Dr.DISCONNECT:this.ondisconnect();break;case Dr.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Dr.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Dr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function zp(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}zp.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};zp.prototype.reset=function(){this.attempts=0};zp.prototype.setMin=function(e){this.ms=e};zp.prototype.setMax=function(e){this.max=e};zp.prototype.setJitter=function(e){this.jitter=e};class _C extends oi{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Dw(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new zp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||jK;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new F5(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ds(r,"open",function(){n.onopen(),t&&t()}),c=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},f=ds(r,"error",c);if(this._timeout!==!1){const o=this._timeout,m=this.setTimeoutFn(()=>{a(),c(new Error("timeout")),r.close()},o);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(a),this.subs.push(f),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ds(t,"ping",this.onping.bind(this)),ds(t,"data",this.ondata.bind(this)),ds(t,"error",this.onerror.bind(this)),ds(t,"close",this.onclose.bind(this)),ds(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){uM(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new V5(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Wg={};function Bl(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=TK(e,t.path||"/socket.io"),n=r.source,a=r.id,c=r.path,f=Wg[a]&&c in Wg[a].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||f;let m;return o?m=new _C(n,t):(Wg[a]||(Wg[a]=new _C(n,t)),m=Wg[a]),r.query&&!t.query&&(t.query=r.queryKey),m.socket(r.path,t)}Object.assign(Bl,{Manager:_C,Socket:V5,io:Bl,connect:Bl});function vs(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Tu(e){return!!e&&!!e[Cn]}function Xl(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===GK}(e)||Array.isArray(e)||!!e[yj]||!!(!((t=e.constructor)===null||t===void 0)&&t[yj])||dM(e)||pM(e))}function Jh(e,t,r){r===void 0&&(r=!1),Bp(e)===0?(r?Object.keys:Yd)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Bp(e){var t=e[Cn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:dM(e)?2:pM(e)?3:0}function Kd(e,t){return Bp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NK(e,t){return Bp(e)===2?e.get(t):e[t]}function W5(e,t,r){var n=Bp(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function q5(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function dM(e){return WK&&e instanceof Map}function pM(e){return qK&&e instanceof Set}function Ph(e){return e.o||e.t}function mM(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H5(e);delete t[Cn];for(var r=Yd(t),n=0;n<r.length;n++){var a=r[n],c=t[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(t[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function gM(e,t){return t===void 0&&(t=!1),yM(e)||Tu(e)||!Xl(e)||(Bp(e)>1&&(e.set=e.add=e.clear=e.delete=zK),Object.freeze(e),t&&Jh(e,function(r,n){return gM(n,!0)},!0)),e}function zK(){vs(2)}function yM(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xs(e){var t=SC[e];return t||vs(18,e),t}function BK(e,t){SC[e]||(SC[e]=t)}function xC(){return rv}function d2(e,t){t&&(Xs("Patches"),e.u=[],e.s=[],e.v=t)}function z1(e){bC(e),e.p.forEach(FK),e.p=null}function bC(e){e===rv&&(rv=e.l)}function hj(e){return rv={p:[],l:rv,h:e,m:!0,_:0}}function FK(e){var t=e[Cn];t.i===0||t.i===1?t.j():t.g=!0}function p2(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||Xs("ES5").S(t,e,n),n?(r[Cn].P&&(z1(t),vs(4)),Xl(e)&&(e=B1(t,e),t.l||F1(t,e)),t.u&&Xs("Patches").M(r[Cn].t,e,t.u,t.s)):e=B1(t,r,[]),z1(t),t.u&&t.v(t.u,t.s),e!==G5?e:void 0}function B1(e,t,r){if(yM(t))return t;var n=t[Cn];if(!n)return Jh(t,function(o,m){return fj(e,n,t,o,m,r)},!0),t;if(n.A!==e)return t;if(!n.P)return F1(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=mM(n.k):n.o,c=a,f=!1;n.i===3&&(c=new Set(a),a.clear(),f=!0),Jh(c,function(o,m){return fj(e,n,a,o,m,r,f)}),F1(e,a,!1),r&&e.u&&Xs("Patches").N(n,r,e.u,e.s)}return n.o}function fj(e,t,r,n,a,c,f){if(Tu(a)){var o=B1(e,a,c&&t&&t.i!==3&&!Kd(t.R,n)?c.concat(n):void 0);if(W5(r,n,o),!Tu(o))return;e.m=!1}else f&&r.add(a);if(Xl(a)&&!yM(a)){if(!e.h.D&&e._<1)return;B1(e,a),t&&t.A.l||F1(e,a)}}function F1(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&gM(t,r)}function m2(e,t){var r=e[Cn];return(r?Ph(r):e)[t]}function dj(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Qc(e){e.P||(e.P=!0,e.l&&Qc(e.l))}function g2(e){e.o||(e.o=mM(e.t))}function wC(e,t,r){var n=dM(t)?Xs("MapSet").F(t,r):pM(t)?Xs("MapSet").T(t,r):e.O?function(a,c){var f=Array.isArray(a),o={i:f?1:0,A:c?c.A:xC(),P:!1,I:!1,R:{},l:c,t:a,k:null,o:null,j:null,C:!1},m=o,_=nv;f&&(m=[o],_=dy);var w=Proxy.revocable(m,_),E=w.revoke,C=w.proxy;return o.k=C,o.j=E,C}(t,r):Xs("ES5").J(t,r);return(r?r.A:xC()).p.push(n),n}function UK(e){return Tu(e)||vs(22,e),function t(r){if(!Xl(r))return r;var n,a=r[Cn],c=Bp(r);if(a){if(!a.P&&(a.i<4||!Xs("ES5").K(a)))return a.t;a.I=!0,n=pj(r,c),a.I=!1}else n=pj(r,c);return Jh(n,function(f,o){a&&NK(a.t,f)===o||W5(n,f,t(o))}),c===3?new Set(n):n}(e)}function pj(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return mM(e)}function VK(){function e(c,f){var o=a[c];return o?o.enumerable=f:a[c]=o={configurable:!0,enumerable:f,get:function(){var m=this[Cn];return nv.get(m,c)},set:function(m){var _=this[Cn];nv.set(_,c,m)}},o}function t(c){for(var f=c.length-1;f>=0;f--){var o=c[f][Cn];if(!o.P)switch(o.i){case 5:n(o)&&Qc(o);break;case 4:r(o)&&Qc(o)}}}function r(c){for(var f=c.t,o=c.k,m=Yd(o),_=m.length-1;_>=0;_--){var w=m[_];if(w!==Cn){var E=f[w];if(E===void 0&&!Kd(f,w))return!0;var C=o[w],M=C&&C[Cn];if(M?M.t!==E:!q5(C,E))return!0}}var I=!!f[Cn];return m.length!==Yd(f).length+(I?0:1)}function n(c){var f=c.k;if(f.length!==c.t.length)return!0;var o=Object.getOwnPropertyDescriptor(f,f.length-1);if(o&&!o.get)return!0;for(var m=0;m<f.length;m++)if(!f.hasOwnProperty(m))return!0;return!1}var a={};BK("ES5",{J:function(c,f){var o=Array.isArray(c),m=function(w,E){if(w){for(var C=Array(E.length),M=0;M<E.length;M++)Object.defineProperty(C,""+M,e(M,!0));return C}var I=H5(E);delete I[Cn];for(var D=Yd(I),$=0;$<D.length;$++){var B=D[$];I[B]=e(B,w||!!I[B].enumerable)}return Object.create(Object.getPrototypeOf(E),I)}(o,c),_={i:o?5:4,A:f?f.A:xC(),P:!1,I:!1,R:{},l:f,t:c,k:m,o:null,g:!1,C:!1};return Object.defineProperty(m,Cn,{value:_,writable:!0}),m},S:function(c,f,o){o?Tu(f)&&f[Cn].A===c&&t(c.p):(c.u&&function m(_){if(_&&typeof _=="object"){var w=_[Cn];if(w){var E=w.t,C=w.k,M=w.R,I=w.i;if(I===4)Jh(C,function(R){R!==Cn&&(E[R]!==void 0||Kd(E,R)?M[R]||m(C[R]):(M[R]=!0,Qc(w)))}),Jh(E,function(R){C[R]!==void 0||Kd(C,R)||(M[R]=!1,Qc(w))});else if(I===5){if(n(w)&&(Qc(w),M.length=!0),C.length<E.length)for(var D=C.length;D<E.length;D++)M[D]=!1;else for(var $=E.length;$<C.length;$++)M[$]=!0;for(var B=Math.min(C.length,E.length),F=0;F<B;F++)C.hasOwnProperty(F)||(M[F]=!0),M[F]===void 0&&m(C[F])}}}}(c.p[0]),t(c.p))},K:function(c){return c.i===4?r(c):n(c)}})}var mj,rv,vM=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",WK=typeof Map<"u",qK=typeof Set<"u",gj=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",G5=vM?Symbol.for("immer-nothing"):((mj={})["immer-nothing"]=!0,mj),yj=vM?Symbol.for("immer-draftable"):"__$immer_draftable",Cn=vM?Symbol.for("immer-state"):"__$immer_state",GK=""+Object.prototype.constructor,Yd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H5=Object.getOwnPropertyDescriptors||function(e){var t={};return Yd(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},SC={},nv={get:function(e,t){if(t===Cn)return e;var r=Ph(e);if(!Kd(r,t))return function(a,c,f){var o,m=dj(c,f);return m?"value"in m?m.value:(o=m.get)===null||o===void 0?void 0:o.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Xl(n)?n:n===m2(e.t,t)?(g2(e),e.o[t]=wC(e.A.h,n,e)):n},has:function(e,t){return t in Ph(e)},ownKeys:function(e){return Reflect.ownKeys(Ph(e))},set:function(e,t,r){var n=dj(Ph(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=m2(Ph(e),t),c=a==null?void 0:a[Cn];if(c&&c.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(q5(r,a)&&(r!==void 0||Kd(e.t,t)))return!0;g2(e),Qc(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return m2(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,g2(e),Qc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Ph(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){vs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){vs(12)}},dy={};Jh(nv,function(e,t){dy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),dy.deleteProperty=function(e,t){return dy.set.call(this,e,t,void 0)},dy.set=function(e,t,r){return nv.set.call(this,e[0],t,r,e[0])};var HK=function(){function e(r){var n=this;this.O=gj,this.D=!0,this.produce=function(a,c,f){if(typeof a=="function"&&typeof c!="function"){var o=c;c=a;var m=n;return function(D){var $=this;D===void 0&&(D=o);for(var B=arguments.length,F=Array(B>1?B-1:0),R=1;R<B;R++)F[R-1]=arguments[R];return m.produce(D,function(U){var H;return(H=c).call.apply(H,[$,U].concat(F))})}}var _;if(typeof c!="function"&&vs(6),f!==void 0&&typeof f!="function"&&vs(7),Xl(a)){var w=hj(n),E=wC(n,a,void 0),C=!0;try{_=c(E),C=!1}finally{C?z1(w):bC(w)}return typeof Promise<"u"&&_ instanceof Promise?_.then(function(D){return d2(w,f),p2(D,w)},function(D){throw z1(w),D}):(d2(w,f),p2(_,w))}if(!a||typeof a!="object"){if((_=c(a))===void 0&&(_=a),_===G5&&(_=void 0),n.D&&gM(_,!0),f){var M=[],I=[];Xs("Patches").M(a,_,M,I),f(M,I)}return _}vs(21,a)},this.produceWithPatches=function(a,c){if(typeof a=="function")return function(_){for(var w=arguments.length,E=Array(w>1?w-1:0),C=1;C<w;C++)E[C-1]=arguments[C];return n.produceWithPatches(_,function(M){return a.apply(void 0,[M].concat(E))})};var f,o,m=n.produce(a,c,function(_,w){f=_,o=w});return typeof Promise<"u"&&m instanceof Promise?m.then(function(_){return[_,f,o]}):[m,f,o]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Xl(r)||vs(8),Tu(r)&&(r=UK(r));var n=hj(this),a=wC(this,r,void 0);return a[Cn].C=!0,bC(n),a},t.finishDraft=function(r,n){var a=r&&r[Cn],c=a.A;return d2(c,n),p2(void 0,c)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!gj&&vs(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var c=n[a];if(c.path.length===0&&c.op==="replace"){r=c.value;break}}a>-1&&(n=n.slice(a+1));var f=Xs("Patches").$;return Tu(r)?f(r,n):this.produce(r,function(o){return f(o,n)})},e}(),Qo=new HK,Z5=Qo.produce;Qo.produceWithPatches.bind(Qo);Qo.setAutoFreeze.bind(Qo);Qo.setUseProxies.bind(Qo);Qo.applyPatches.bind(Qo);Qo.createDraft.bind(Qo);Qo.finishDraft.bind(Qo);function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}function ZK(e,t){if(iv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(iv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XK(e){var t=ZK(e,"string");return iv(t)==="symbol"?t:String(t)}function KK(e,t,r){return t=XK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){KK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qi(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var xj=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),y2=function(){return Math.random().toString(36).substring(7).split("").join(".")},U1={INIT:"@@redux/INIT"+y2(),REPLACE:"@@redux/REPLACE"+y2(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+y2()}};function YK(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function X5(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qi(1));return r(X5)(e,t)}if(typeof e!="function")throw new Error(Qi(2));var a=e,c=t,f=[],o=f,m=!1;function _(){o===f&&(o=f.slice())}function w(){if(m)throw new Error(Qi(3));return c}function E(D){if(typeof D!="function")throw new Error(Qi(4));if(m)throw new Error(Qi(5));var $=!0;return _(),o.push(D),function(){if($){if(m)throw new Error(Qi(6));$=!1,_();var F=o.indexOf(D);o.splice(F,1),f=null}}}function C(D){if(!YK(D))throw new Error(Qi(7));if(typeof D.type>"u")throw new Error(Qi(8));if(m)throw new Error(Qi(9));try{m=!0,c=a(c,D)}finally{m=!1}for(var $=f=o,B=0;B<$.length;B++){var F=$[B];F()}return D}function M(D){if(typeof D!="function")throw new Error(Qi(10));a=D,C({type:U1.REPLACE})}function I(){var D,$=E;return D={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(Qi(11));function R(){F.next&&F.next(w())}R();var U=$(R);return{unsubscribe:U}}},D[xj]=function(){return this},D}return C({type:U1.INIT}),n={dispatch:C,subscribe:E,getState:w,replaceReducer:M},n[xj]=I,n}function JK(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:U1.INIT});if(typeof n>"u")throw new Error(Qi(12));if(typeof r(void 0,{type:U1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qi(13))})}function QK(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var c=Object.keys(r),f;try{JK(r)}catch(o){f=o}return function(m,_){if(m===void 0&&(m={}),f)throw f;for(var w=!1,E={},C=0;C<c.length;C++){var M=c[C],I=r[M],D=m[M],$=I(D,_);if(typeof $>"u")throw _&&_.type,new Error(Qi(14));E[M]=$,w=w||$!==D}return w=w||c.length!==Object.keys(m).length,w?E:m}}function V1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function eY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),c=function(){throw new Error(Qi(15))},f={getState:a.getState,dispatch:function(){return c.apply(void 0,arguments)}},o=t.map(function(m){return m(f)});return c=V1.apply(void 0,o)(a.dispatch),_j(_j({},a),{},{dispatch:c})}}}function K5(e){var t=function(n){var a=n.dispatch,c=n.getState;return function(f){return function(o){return typeof o=="function"?o(a,c,e):f(o)}}};return t}var Y5=K5();Y5.withExtraArgument=K5;const bj=Y5;var J5=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tY=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,a,c,f;return f={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function o(_){return function(w){return m([_,w])}}function m(_){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,a=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){r.label=_[1];break}if(_[0]===6&&r.label<c[1]){r.label=c[1],c=_;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(_);break}c[2]&&r.ops.pop(),r.trys.pop();continue}_=t.call(e,r)}catch(w){_=[6,w],a=0}finally{n=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},cp=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},rY=Object.defineProperty,nY=Object.defineProperties,iY=Object.getOwnPropertyDescriptors,wj=Object.getOwnPropertySymbols,oY=Object.prototype.hasOwnProperty,aY=Object.prototype.propertyIsEnumerable,Sj=function(e,t,r){return t in e?rY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},yu=function(e,t){for(var r in t||(t={}))oY.call(t,r)&&Sj(e,r,t[r]);if(wj)for(var n=0,a=wj(t);n<a.length;n++){var r=a[n];aY.call(t,r)&&Sj(e,r,t[r])}return e},v2=function(e,t){return nY(e,iY(t))},sY=function(e,t,r){return new Promise(function(n,a){var c=function(m){try{o(r.next(m))}catch(_){a(_)}},f=function(m){try{o(r.throw(m))}catch(_){a(_)}},o=function(m){return m.done?n(m.value):Promise.resolve(m.value).then(c,f)};o((r=r.apply(e,t)).next())})},lY=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?V1:V1.apply(null,arguments)};function cY(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var uY=function(e){J5(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,cp([void 0],r[0].concat(this)))):new(t.bind.apply(t,cp([void 0],r.concat(this))))},t}(Array),hY=function(e){J5(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,cp([void 0],r[0].concat(this)))):new(t.bind.apply(t,cp([void 0],r.concat(this))))},t}(Array);function EC(e){return Xl(e)?Z5(e,function(){}):e}function fY(e){return typeof e=="boolean"}function dY(){return function(t){return pY(t)}}function pY(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var n=new uY;return r&&(fY(r)?n.push(bj):n.push(bj.withExtraArgument(r.extraArgument))),n}var mY=!0;function gY(e){var t=dY(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,c=r.middleware,f=c===void 0?t():c,o=r.devTools,m=o===void 0?!0:o,_=r.preloadedState,w=_===void 0?void 0:_,E=r.enhancers,C=E===void 0?void 0:E,M;if(typeof a=="function")M=a;else if(cY(a))M=QK(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var I=f;typeof I=="function"&&(I=I(t));var D=eY.apply(void 0,I),$=V1;m&&($=lY(yu({trace:!mY},typeof m=="object"&&m)));var B=new hY(D),F=B;Array.isArray(C)?F=cp([D],C):typeof C=="function"&&(F=C(B));var R=$.apply(void 0,F);return X5(M,w,R)}function vu(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var c=t.apply(void 0,n);if(!c)throw new Error("prepareAction did not return an object");return yu(yu({type:e,payload:c.payload},"meta"in c&&{meta:c.meta}),"error"in c&&{error:c.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}function Q5(e){var t={},r=[],n,a={addCase:function(c,f){var o=typeof c=="string"?c:c.type;if(o in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[o]=f,a},addMatcher:function(c,f){return r.push({matcher:c,reducer:f}),a},addDefaultCase:function(c){return n=c,a}};return e(a),[t,r,n]}function yY(e){return typeof e=="function"}function vY(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?Q5(t):[t,r,n],c=a[0],f=a[1],o=a[2],m;if(yY(e))m=function(){return EC(e())};else{var _=EC(e);m=function(){return _}}function w(E,C){E===void 0&&(E=m());var M=cp([c[C.type]],f.filter(function(I){var D=I.matcher;return D(C)}).map(function(I){var D=I.reducer;return D}));return M.filter(function(I){return!!I}).length===0&&(M=[o]),M.reduce(function(I,D){if(D)if(Tu(I)){var $=I,B=D($,C);return B===void 0?I:B}else{if(Xl(I))return Z5(I,function(F){return D(F,C)});var B=D(I,C);if(B===void 0){if(I===null)return I;throw Error("A case reducer on a non-draftable value must not return undefined")}return B}return I},E)}return w.getInitialState=m,w}function _Y(e,t){return e+"/"+t}function xY(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:EC(e.initialState),n=e.reducers||{},a=Object.keys(n),c={},f={},o={};a.forEach(function(w){var E=n[w],C=_Y(t,w),M,I;"reducer"in E?(M=E.reducer,I=E.prepare):M=E,c[w]=M,f[C]=M,o[w]=I?vu(C,I):vu(C)});function m(){var w=typeof e.extraReducers=="function"?Q5(e.extraReducers):[e.extraReducers],E=w[0],C=E===void 0?{}:E,M=w[1],I=M===void 0?[]:M,D=w[2],$=D===void 0?void 0:D,B=yu(yu({},C),f);return vY(r,function(F){for(var R in B)F.addCase(R,B[R]);for(var U=0,H=I;U<H.length;U++){var X=H[U];F.addMatcher(X.matcher,X.reducer)}$&&F.addDefaultCase($)})}var _;return{name:t,reducer:function(w,E){return _||(_=m()),_(w,E)},actions:o,caseReducers:c,getInitialState:function(){return _||(_=m()),_.getInitialState()}}}var bY="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wY=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=bY[Math.random()*64|0];return t},SY=["name","message","stack","code"],_2=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Ej=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),EY=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=SY;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};(function(){function e(t,r,n){var a=vu(t+"/fulfilled",function(_,w,E,C){return{payload:_,meta:v2(yu({},C||{}),{arg:E,requestId:w,requestStatus:"fulfilled"})}}),c=vu(t+"/pending",function(_,w,E){return{payload:void 0,meta:v2(yu({},E||{}),{arg:w,requestId:_,requestStatus:"pending"})}}),f=vu(t+"/rejected",function(_,w,E,C,M){return{payload:C,error:(n&&n.serializeError||EY)(_||"Rejected"),meta:v2(yu({},M||{}),{arg:E,requestId:w,rejectedWithValue:!!C,requestStatus:"rejected",aborted:(_==null?void 0:_.name)==="AbortError",condition:(_==null?void 0:_.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function _(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return _.prototype.abort=function(){},_}();function m(_){return function(w,E,C){var M=n!=null&&n.idGenerator?n.idGenerator(_):wY(),I=new o,D;function $(F){D=F,I.abort()}var B=function(){return sY(this,null,function(){var F,R,U,H,X,ee,oe;return tY(this,function(ae){switch(ae.label){case 0:return ae.trys.push([0,4,,5]),H=(F=n==null?void 0:n.condition)==null?void 0:F.call(n,_,{getState:E,extra:C}),AY(H)?[4,H]:[3,2];case 1:H=ae.sent(),ae.label=2;case 2:if(H===!1||I.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return X=new Promise(function(ge,he){return I.signal.addEventListener("abort",function(){return he({name:"AbortError",message:D||"Aborted"})})}),w(c(M,_,(R=n==null?void 0:n.getPendingMeta)==null?void 0:R.call(n,{requestId:M,arg:_},{getState:E,extra:C}))),[4,Promise.race([X,Promise.resolve(r(_,{dispatch:w,getState:E,extra:C,requestId:M,signal:I.signal,abort:$,rejectWithValue:function(ge,he){return new _2(ge,he)},fulfillWithValue:function(ge,he){return new Ej(ge,he)}})).then(function(ge){if(ge instanceof _2)throw ge;return ge instanceof Ej?a(ge.payload,M,_,ge.meta):a(ge,M,_)})])];case 3:return U=ae.sent(),[3,5];case 4:return ee=ae.sent(),U=ee instanceof _2?f(null,M,_,ee.payload,ee.meta):f(ee,M,_),[3,5];case 5:return oe=n&&!n.dispatchConditionRejection&&f.match(U)&&U.meta.condition,oe||w(U),[2,U]}})})}();return Object.assign(B,{abort:$,requestId:M,arg:_,unwrap:function(){return B.then(TY)}})}}return Object.assign(m,{pending:c,rejected:f,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e})();function TY(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function AY(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var _M="listenerMiddleware";vu(_M+"/add");vu(_M+"/removeAll");vu(_M+"/remove");var Tj;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);VK();const CY={user:""},eU=xY({name:"user",initialState:CY,reducers:{login:(e,t)=>{e.user=t.payload},signup:(e,t)=>{e.user=t.payload},logout:e=>{e.user=""}}}),{login:Kl,logout:IMe,signup:DMe}=eU.actions,xM=e=>e.users.user,PY=eU.reducer,Rw="/assets/logofinal-34f36033.png";function tU(e,t){return function(){return e.apply(t,arguments)}}const{toString:OY}=Object.prototype,{getPrototypeOf:bM}=Object,Lw=(e=>t=>{const r=OY.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),rl=e=>(e=e.toLowerCase(),t=>Lw(t)===e),jw=e=>t=>typeof t===e,{isArray:Fp}=Array,ov=jw("undefined");function MY(e){return e!==null&&!ov(e)&&e.constructor!==null&&!ov(e.constructor)&&ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rU=rl("ArrayBuffer");function kY(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rU(e.buffer),t}const IY=jw("string"),ka=jw("function"),nU=jw("number"),$w=e=>e!==null&&typeof e=="object",DY=e=>e===!0||e===!1,n1=e=>{if(Lw(e)!=="object")return!1;const t=bM(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},RY=rl("Date"),LY=rl("File"),jY=rl("Blob"),$Y=rl("FileList"),NY=e=>$w(e)&&ka(e.pipe),zY=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ka(e.append)&&((t=Lw(e))==="formdata"||t==="object"&&ka(e.toString)&&e.toString()==="[object FormData]"))},BY=rl("URLSearchParams"),FY=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function e_(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Fp(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const c=r?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let o;for(n=0;n<f;n++)o=c[n],t.call(null,e[o],o,e)}}function iU(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const oU=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),aU=e=>!ov(e)&&e!==oU;function TC(){const{caseless:e}=aU(this)&&this||{},t={},r=(n,a)=>{const c=e&&iU(t,a)||a;n1(t[c])&&n1(n)?t[c]=TC(t[c],n):n1(n)?t[c]=TC({},n):Fp(n)?t[c]=n.slice():t[c]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&e_(arguments[n],r);return t}const UY=(e,t,r,{allOwnKeys:n}={})=>(e_(t,(a,c)=>{r&&ka(a)?e[c]=tU(a,r):e[c]=a},{allOwnKeys:n}),e),VY=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),WY=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},qY=(e,t,r,n)=>{let a,c,f;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)f=a[c],(!n||n(f,e,t))&&!o[f]&&(t[f]=e[f],o[f]=!0);e=r!==!1&&bM(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},GY=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},HY=e=>{if(!e)return null;if(Fp(e))return e;let t=e.length;if(!nU(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},ZY=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&bM(Uint8Array)),XY=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=n.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},KY=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},YY=rl("HTMLFormElement"),JY=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Aj=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),QY=rl("RegExp"),sU=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};e_(r,(a,c)=>{let f;(f=t(a,c,e))!==!1&&(n[c]=f||a)}),Object.defineProperties(e,n)},eJ=e=>{sU(e,(t,r)=>{if(ka(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ka(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tJ=(e,t)=>{const r={},n=a=>{a.forEach(c=>{r[c]=!0})};return Fp(e)?n(e):n(String(e).split(t)),r},rJ=()=>{},nJ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),x2="abcdefghijklmnopqrstuvwxyz",Cj="0123456789",lU={DIGIT:Cj,ALPHA:x2,ALPHA_DIGIT:x2+x2.toUpperCase()+Cj},iJ=(e=16,t=lU.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function oJ(e){return!!(e&&ka(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const aJ=e=>{const t=new Array(10),r=(n,a)=>{if($w(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const c=Fp(n)?[]:{};return e_(n,(f,o)=>{const m=r(f,a+1);!ov(m)&&(c[o]=m)}),t[a]=void 0,c}}return n};return r(e,0)},sJ=rl("AsyncFunction"),lJ=e=>e&&($w(e)||ka(e))&&ka(e.then)&&ka(e.catch),ct={isArray:Fp,isArrayBuffer:rU,isBuffer:MY,isFormData:zY,isArrayBufferView:kY,isString:IY,isNumber:nU,isBoolean:DY,isObject:$w,isPlainObject:n1,isUndefined:ov,isDate:RY,isFile:LY,isBlob:jY,isRegExp:QY,isFunction:ka,isStream:NY,isURLSearchParams:BY,isTypedArray:ZY,isFileList:$Y,forEach:e_,merge:TC,extend:UY,trim:FY,stripBOM:VY,inherits:WY,toFlatObject:qY,kindOf:Lw,kindOfTest:rl,endsWith:GY,toArray:HY,forEachEntry:XY,matchAll:KY,isHTMLForm:YY,hasOwnProperty:Aj,hasOwnProp:Aj,reduceDescriptors:sU,freezeMethods:eJ,toObjectSet:tJ,toCamelCase:JY,noop:rJ,toFiniteNumber:nJ,findKey:iU,global:oU,isContextDefined:aU,ALPHABET:lU,generateString:iJ,isSpecCompliantForm:oJ,toJSONObject:aJ,isAsyncFn:sJ,isThenable:lJ};function Lr(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a)}ct.inherits(Lr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const cU=Lr.prototype,uU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{uU[e]={value:e}});Object.defineProperties(Lr,uU);Object.defineProperty(cU,"isAxiosError",{value:!0});Lr.from=(e,t,r,n,a,c)=>{const f=Object.create(cU);return ct.toFlatObject(e,f,function(m){return m!==Error.prototype},o=>o!=="isAxiosError"),Lr.call(f,e.message,t,r,n,a),f.cause=e,f.name=e.name,c&&Object.assign(f,c),f};const cJ=null;function AC(e){return ct.isPlainObject(e)||ct.isArray(e)}function hU(e){return ct.endsWith(e,"[]")?e.slice(0,-2):e}function Pj(e,t,r){return e?e.concat(t).map(function(a,c){return a=hU(a),!r&&c?"["+a+"]":a}).join(r?".":""):t}function uJ(e){return ct.isArray(e)&&!e.some(AC)}const hJ=ct.toFlatObject(ct,{},null,function(t){return/^is[A-Z]/.test(t)});function Nw(e,t,r){if(!ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ct.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,$){return!ct.isUndefined($[D])});const n=r.metaTokens,a=r.visitor||w,c=r.dots,f=r.indexes,m=(r.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(t);if(!ct.isFunction(a))throw new TypeError("visitor must be a function");function _(I){if(I===null)return"";if(ct.isDate(I))return I.toISOString();if(!m&&ct.isBlob(I))throw new Lr("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(I)||ct.isTypedArray(I)?m&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function w(I,D,$){let B=I;if(I&&!$&&typeof I=="object"){if(ct.endsWith(D,"{}"))D=n?D:D.slice(0,-2),I=JSON.stringify(I);else if(ct.isArray(I)&&uJ(I)||(ct.isFileList(I)||ct.endsWith(D,"[]"))&&(B=ct.toArray(I)))return D=hU(D),B.forEach(function(R,U){!(ct.isUndefined(R)||R===null)&&t.append(f===!0?Pj([D],U,c):f===null?D:D+"[]",_(R))}),!1}return AC(I)?!0:(t.append(Pj($,D,c),_(I)),!1)}const E=[],C=Object.assign(hJ,{defaultVisitor:w,convertValue:_,isVisitable:AC});function M(I,D){if(!ct.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+D.join("."));E.push(I),ct.forEach(I,function(B,F){(!(ct.isUndefined(B)||B===null)&&a.call(t,B,ct.isString(F)?F.trim():F,D,C))===!0&&M(B,D?D.concat(F):[F])}),E.pop()}}if(!ct.isObject(e))throw new TypeError("data must be an object");return M(e),t}function Oj(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function wM(e,t){this._pairs=[],e&&Nw(e,this,t)}const fU=wM.prototype;fU.append=function(t,r){this._pairs.push([t,r])};fU.toString=function(t){const r=t?function(n){return t.call(this,n,Oj)}:Oj;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function fJ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dU(e,t,r){if(!t)return e;const n=r&&r.encode||fJ,a=r&&r.serialize;let c;if(a?c=a(t,r):c=ct.isURLSearchParams(t)?t.toString():new wM(t,r).toString(n),c){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class dJ{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ct.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Mj=dJ,pU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pJ=typeof URLSearchParams<"u"?URLSearchParams:wM,mJ=typeof FormData<"u"?FormData:null,gJ=typeof Blob<"u"?Blob:null,yJ=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vJ=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),xs={isBrowser:!0,classes:{URLSearchParams:pJ,FormData:mJ,Blob:gJ},isStandardBrowserEnv:yJ,isStandardBrowserWebWorkerEnv:vJ,protocols:["http","https","file","blob","url","data"]};function _J(e,t){return Nw(e,new xs.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,c){return xs.isNode&&ct.isBuffer(r)?(this.append(n,r.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function xJ(e){return ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bJ(e){const t={},r=Object.keys(e);let n;const a=r.length;let c;for(n=0;n<a;n++)c=r[n],t[c]=e[c];return t}function mU(e){function t(r,n,a,c){let f=r[c++];const o=Number.isFinite(+f),m=c>=r.length;return f=!f&&ct.isArray(a)?a.length:f,m?(ct.hasOwnProp(a,f)?a[f]=[a[f],n]:a[f]=n,!o):((!a[f]||!ct.isObject(a[f]))&&(a[f]=[]),t(r,n,a[f],c)&&ct.isArray(a[f])&&(a[f]=bJ(a[f])),!o)}if(ct.isFormData(e)&&ct.isFunction(e.entries)){const r={};return ct.forEachEntry(e,(n,a)=>{t(xJ(n),a,r,0)}),r}return null}function wJ(e,t,r){if(ct.isString(e))try{return(t||JSON.parse)(e),ct.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const SM={transitional:pU,adapter:xs.isNode?"http":"xhr",transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,c=ct.isObject(t);if(c&&ct.isHTMLForm(t)&&(t=new FormData(t)),ct.isFormData(t))return a&&a?JSON.stringify(mU(t)):t;if(ct.isArrayBuffer(t)||ct.isBuffer(t)||ct.isStream(t)||ct.isFile(t)||ct.isBlob(t))return t;if(ct.isArrayBufferView(t))return t.buffer;if(ct.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(c){if(n.indexOf("application/x-www-form-urlencoded")>-1)return _J(t,this.formSerializer).toString();if((o=ct.isFileList(t))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Nw(o?{"files[]":t}:t,m&&new m,this.formSerializer)}}return c||a?(r.setContentType("application/json",!1),wJ(t)):t}],transformResponse:[function(t){const r=this.transitional||SM.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(t&&ct.isString(t)&&(n&&!this.responseType||a)){const f=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?Lr.from(o,Lr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xs.classes.FormData,Blob:xs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],e=>{SM.headers[e]={}});const EM=SM,SJ=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),EJ=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),r=f.substring(0,a).trim().toLowerCase(),n=f.substring(a+1).trim(),!(!r||t[r]&&SJ[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},kj=Symbol("internals");function qg(e){return e&&String(e).trim().toLowerCase()}function i1(e){return e===!1||e==null?e:ct.isArray(e)?e.map(i1):String(e)}function TJ(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const AJ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function b2(e,t,r,n,a){if(ct.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!ct.isString(t)){if(ct.isString(n))return t.indexOf(n)!==-1;if(ct.isRegExp(n))return n.test(t)}}function CJ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function PJ(e,t){const r=ct.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,c,f){return this[n].call(this,t,a,c,f)},configurable:!0})})}class zw{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function c(o,m,_){const w=qg(m);if(!w)throw new Error("header name must be a non-empty string");const E=ct.findKey(a,w);(!E||a[E]===void 0||_===!0||_===void 0&&a[E]!==!1)&&(a[E||m]=i1(o))}const f=(o,m)=>ct.forEach(o,(_,w)=>c(_,w,m));return ct.isPlainObject(t)||t instanceof this.constructor?f(t,r):ct.isString(t)&&(t=t.trim())&&!AJ(t)?f(EJ(t),r):t!=null&&c(r,t,n),this}get(t,r){if(t=qg(t),t){const n=ct.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return TJ(a);if(ct.isFunction(r))return r.call(this,a,n);if(ct.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=qg(t),t){const n=ct.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||b2(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function c(f){if(f=qg(f),f){const o=ct.findKey(n,f);o&&(!r||b2(n,n[o],o,r))&&(delete n[o],a=!0)}}return ct.isArray(t)?t.forEach(c):c(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const c=r[n];(!t||b2(this,this[c],c,t,!0))&&(delete this[c],a=!0)}return a}normalize(t){const r=this,n={};return ct.forEach(this,(a,c)=>{const f=ct.findKey(n,c);if(f){r[f]=i1(a),delete r[c];return}const o=t?CJ(c):String(c).trim();o!==c&&delete r[c],r[o]=i1(a),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ct.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&ct.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[kj]=this[kj]={accessors:{}}).accessors,a=this.prototype;function c(f){const o=qg(f);n[o]||(PJ(a,f),n[o]=!0)}return ct.isArray(t)?t.forEach(c):c(t),this}}zw.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(zw.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});ct.freezeMethods(zw);const Fl=zw;function w2(e,t){const r=this||EM,n=t||r,a=Fl.from(n.headers);let c=n.data;return ct.forEach(e,function(o){c=o.call(r,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function gU(e){return!!(e&&e.__CANCEL__)}function t_(e,t,r){Lr.call(this,e??"canceled",Lr.ERR_CANCELED,t,r),this.name="CanceledError"}ct.inherits(t_,Lr,{__CANCEL__:!0});function OJ(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Lr("Request failed with status code "+r.status,[Lr.ERR_BAD_REQUEST,Lr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const MJ=xs.isStandardBrowserEnv?function(){return{write:function(r,n,a,c,f,o){const m=[];m.push(r+"="+encodeURIComponent(n)),ct.isNumber(a)&&m.push("expires="+new Date(a).toGMTString()),ct.isString(c)&&m.push("path="+c),ct.isString(f)&&m.push("domain="+f),o===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function kJ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function IJ(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function yU(e,t){return e&&!kJ(t)?IJ(e,t):t}const DJ=xs.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function a(c){let f=c;return t&&(r.setAttribute("href",f),f=r.href),r.setAttribute("href",f),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=a(window.location.href),function(f){const o=ct.isString(f)?a(f):f;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function RJ(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function LJ(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,c=0,f;return t=t!==void 0?t:1e3,function(m){const _=Date.now(),w=n[c];f||(f=_),r[a]=m,n[a]=_;let E=c,C=0;for(;E!==a;)C+=r[E++],E=E%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),_-f<t)return;const M=w&&_-w;return M?Math.round(C*1e3/M):void 0}}function Ij(e,t){let r=0;const n=LJ(50,250);return a=>{const c=a.loaded,f=a.lengthComputable?a.total:void 0,o=c-r,m=n(o),_=c<=f;r=c;const w={loaded:c,total:f,progress:f?c/f:void 0,bytes:o,rate:m||void 0,estimated:m&&f&&_?(f-c)/m:void 0,event:a};w[t?"download":"upload"]=!0,e(w)}}const jJ=typeof XMLHttpRequest<"u",$J=jJ&&function(e){return new Promise(function(r,n){let a=e.data;const c=Fl.from(e.headers).normalize(),f=e.responseType;let o;function m(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}ct.isFormData(a)&&(xs.isStandardBrowserEnv||xs.isStandardBrowserWebWorkerEnv?c.setContentType(!1):c.setContentType("multipart/form-data;",!1));let _=new XMLHttpRequest;if(e.auth){const M=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.set("Authorization","Basic "+btoa(M+":"+I))}const w=yU(e.baseURL,e.url);_.open(e.method.toUpperCase(),dU(w,e.params,e.paramsSerializer),!0),_.timeout=e.timeout;function E(){if(!_)return;const M=Fl.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),D={data:!f||f==="text"||f==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:M,config:e,request:_};OJ(function(B){r(B),m()},function(B){n(B),m()},D),_=null}if("onloadend"in _?_.onloadend=E:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(E)},_.onabort=function(){_&&(n(new Lr("Request aborted",Lr.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new Lr("Network Error",Lr.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let I=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const D=e.transitional||pU;e.timeoutErrorMessage&&(I=e.timeoutErrorMessage),n(new Lr(I,D.clarifyTimeoutError?Lr.ETIMEDOUT:Lr.ECONNABORTED,e,_)),_=null},xs.isStandardBrowserEnv){const M=(e.withCredentials||DJ(w))&&e.xsrfCookieName&&MJ.read(e.xsrfCookieName);M&&c.set(e.xsrfHeaderName,M)}a===void 0&&c.setContentType(null),"setRequestHeader"in _&&ct.forEach(c.toJSON(),function(I,D){_.setRequestHeader(D,I)}),ct.isUndefined(e.withCredentials)||(_.withCredentials=!!e.withCredentials),f&&f!=="json"&&(_.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&_.addEventListener("progress",Ij(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",Ij(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=M=>{_&&(n(!M||M.type?new t_(null,e,_):M),_.abort(),_=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const C=RJ(w);if(C&&xs.protocols.indexOf(C)===-1){n(new Lr("Unsupported protocol "+C+":",Lr.ERR_BAD_REQUEST,e));return}_.send(a||null)})},o1={http:cJ,xhr:$J};ct.forEach(o1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const vU={getAdapter:e=>{e=ct.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let a=0;a<t&&(r=e[a],!(n=ct.isString(r)?o1[r.toLowerCase()]:r));a++);if(!n)throw n===!1?new Lr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ct.hasOwnProp(o1,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!ct.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:o1};function S2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new t_(null,e)}function Dj(e){return S2(e),e.headers=Fl.from(e.headers),e.data=w2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vU.getAdapter(e.adapter||EM.adapter)(e).then(function(n){return S2(e),n.data=w2.call(e,e.transformResponse,n),n.headers=Fl.from(n.headers),n},function(n){return gU(n)||(S2(e),n&&n.response&&(n.response.data=w2.call(e,e.transformResponse,n.response),n.response.headers=Fl.from(n.response.headers))),Promise.reject(n)})}const Rj=e=>e instanceof Fl?e.toJSON():e;function up(e,t){t=t||{};const r={};function n(_,w,E){return ct.isPlainObject(_)&&ct.isPlainObject(w)?ct.merge.call({caseless:E},_,w):ct.isPlainObject(w)?ct.merge({},w):ct.isArray(w)?w.slice():w}function a(_,w,E){if(ct.isUndefined(w)){if(!ct.isUndefined(_))return n(void 0,_,E)}else return n(_,w,E)}function c(_,w){if(!ct.isUndefined(w))return n(void 0,w)}function f(_,w){if(ct.isUndefined(w)){if(!ct.isUndefined(_))return n(void 0,_)}else return n(void 0,w)}function o(_,w,E){if(E in t)return n(_,w);if(E in e)return n(void 0,_)}const m={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:o,headers:(_,w)=>a(Rj(_),Rj(w),!0)};return ct.forEach(Object.keys(Object.assign({},e,t)),function(w){const E=m[w]||a,C=E(e[w],t[w],w);ct.isUndefined(C)&&E!==o||(r[w]=C)}),r}const _U="1.5.0",TM={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{TM[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Lj={};TM.transitional=function(t,r,n){function a(c,f){return"[Axios v"+_U+"] Transitional option '"+c+"'"+f+(n?". "+n:"")}return(c,f,o)=>{if(t===!1)throw new Lr(a(f," has been removed"+(r?" in "+r:"")),Lr.ERR_DEPRECATED);return r&&!Lj[f]&&(Lj[f]=!0,console.warn(a(f," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(c,f,o):!0}};function NJ(e,t,r){if(typeof e!="object")throw new Lr("options must be an object",Lr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const c=n[a],f=t[c];if(f){const o=e[c],m=o===void 0||f(o,c,e);if(m!==!0)throw new Lr("option "+c+" must be "+m,Lr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Lr("Unknown option "+c,Lr.ERR_BAD_OPTION)}}const CC={assertOptions:NJ,validators:TM},Fc=CC.validators;class W1{constructor(t){this.defaults=t,this.interceptors={request:new Mj,response:new Mj}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=up(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:c}=r;n!==void 0&&CC.assertOptions(n,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1),a!=null&&(ct.isFunction(a)?r.paramsSerializer={serialize:a}:CC.assertOptions(a,{encode:Fc.function,serialize:Fc.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=c&&ct.merge(c.common,c[r.method]);c&&ct.forEach(["delete","get","head","post","put","patch","common"],I=>{delete c[I]}),r.headers=Fl.concat(f,c);const o=[];let m=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(r)===!1||(m=m&&D.synchronous,o.unshift(D.fulfilled,D.rejected))});const _=[];this.interceptors.response.forEach(function(D){_.push(D.fulfilled,D.rejected)});let w,E=0,C;if(!m){const I=[Dj.bind(this),void 0];for(I.unshift.apply(I,o),I.push.apply(I,_),C=I.length,w=Promise.resolve(r);E<C;)w=w.then(I[E++],I[E++]);return w}C=o.length;let M=r;for(E=0;E<C;){const I=o[E++],D=o[E++];try{M=I(M)}catch($){D.call(this,$);break}}try{w=Dj.call(this,M)}catch(I){return Promise.reject(I)}for(E=0,C=_.length;E<C;)w=w.then(_[E++],_[E++]);return w}getUri(t){t=up(this.defaults,t);const r=yU(t.baseURL,t.url);return dU(r,t.params,t.paramsSerializer)}}ct.forEach(["delete","get","head","options"],function(t){W1.prototype[t]=function(r,n){return this.request(up(n||{},{method:t,url:r,data:(n||{}).data}))}});ct.forEach(["post","put","patch"],function(t){function r(n){return function(c,f,o){return this.request(up(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}W1.prototype[t]=r(),W1.prototype[t+"Form"]=r(!0)});const a1=W1;class AM{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(c){r=c});const n=this;this.promise.then(a=>{if(!n._listeners)return;let c=n._listeners.length;for(;c-- >0;)n._listeners[c](a);n._listeners=null}),this.promise.then=a=>{let c;const f=new Promise(o=>{n.subscribe(o),c=o}).then(a);return f.cancel=function(){n.unsubscribe(c)},f},t(function(c,f,o){n.reason||(n.reason=new t_(c,f,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new AM(function(a){t=a}),cancel:t}}}const zJ=AM;function BJ(e){return function(r){return e.apply(null,r)}}function FJ(e){return ct.isObject(e)&&e.isAxiosError===!0}const PC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PC).forEach(([e,t])=>{PC[t]=e});const UJ=PC;function xU(e){const t=new a1(e),r=tU(a1.prototype.request,t);return ct.extend(r,a1.prototype,t,{allOwnKeys:!0}),ct.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return xU(up(e,a))},r}const li=xU(EM);li.Axios=a1;li.CanceledError=t_;li.CancelToken=zJ;li.isCancel=gU;li.VERSION=_U;li.toFormData=Nw;li.AxiosError=Lr;li.Cancel=li.CanceledError;li.all=function(t){return Promise.all(t)};li.spread=BJ;li.isAxiosError=FJ;li.mergeConfig=up;li.AxiosHeaders=Fl;li.formToJSON=e=>mU(ct.isHTMLForm(e)?new FormData(e):e);li.getAdapter=vU.getAdapter;li.HttpStatusCode=UJ;li.default=li;const vi=li,Fh=vi.create({baseURL:"https://www.velocityy.online/api/users"}),bU=vi.create({baseURL:"http://localhost:3003/api/drivers"}),vd=vi.create({baseURL:"http://localhost:3003/api/admin"});const VJ=Bl("http://localhost:3003"),WJ=()=>{const[e,t]=Y.useState(""),[r,n]=Y.useState(""),a=Lo(),c=cf(),f=o=>{o.preventDefault(),Fh.post("/userLogin",{email:e,password:r}).then(m=>{Qt.success(m.data.message);const _=m.data;VJ.emit("loginUser",{userId:_.user._id}),localStorage.setItem("userData",JSON.stringify(_)),localStorage.setItem("token",_.token),c(Kl(_)),a("/userhome")}).catch(m=>{console.log(m),Qt.error(m.response.data.message)})};return j.jsxs("div",{className:"login-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"login-form",children:j.jsxs("form",{onSubmit:f,children:[j.jsx("img",{src:Rw,alt:"Logo",className:"logo"}),j.jsx("h1",{className:"head",children:"Login"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{className:"input",type:"text",id:"username",placeholder:"Email",value:e,onChange:o=>t(o.target.value),required:!0})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"password",id:"password",placeholder:"Password",value:r,onChange:o=>n(o.target.value),required:!0})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{className:"button",type:"submit",children:"Login"})}),j.jsxs("div",{className:"links-container ",style:{display:"flex",flexDirection:"column"},children:[j.jsxs("p",{children:[j.jsx(Ni,{to:"OtpPhone",children:"Login with OTP"})," "]}),j.jsxs("p",{children:[j.jsx(Ni,{to:"usersignup",children:"Create New accout"})," "]})]})]})})]})};const qJ=e=>{const r=/[A-Z]/.test(e),n=/[a-z]/.test(e),a=/[0-9]/.test(e),c=/[!@#$%^&*()_+{}[\]:;<>,.?~\\/-]/.test(e);return e.length>=8&&r&&n&&a&&c},GJ=()=>{const[e,t]=Y.useState(""),[r,n]=Y.useState(""),[a,c]=Y.useState(""),[f,o]=Y.useState(""),[m,_]=Y.useState(""),w=E=>{E.preventDefault();const C=e.trim(),M=r.trim(),I=a.trim(),D=f.trim();if(C===""||M===""||I===""||D===""){Qt.error("Please fill in all required fields.");return}if(!qJ(D)){Qt.error("Password must be at least 8 characters long and include uppercase, lowercase, numbers, and special characters.");return}f!==m?Qt.error("Passwords do not match"):Fh.post("/signup",{username:e,email:r,phone:a,password:f}).then($=>{console.log($.data),Qt.success("User created successfully")}).catch($=>{console.log($),Qt.error("An error occurred")})};return j.jsxs("div",{className:"signup-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"logo-container",children:j.jsx("img",{src:Rw,alt:"Logo",className:"logo"})}),j.jsxs("form",{onSubmit:w,className:"signup-form",children:[j.jsx("h1",{children:"Sign Up"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"text",id:"username",placeholder:"Username",required:!0,value:e,onChange:E=>t(E.target.value)})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"email",id:"email",placeholder:"Email",required:!0,value:r,onChange:E=>n(E.target.value)})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"tel",id:"phoneNumber",placeholder:"Phone Number",required:!0,value:a,onChange:E=>c(E.target.value)})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"password",id:"password",placeholder:"Password",required:!0,value:f,onChange:E=>o(E.target.value)})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:!0,value:m,onChange:E=>_(E.target.value)})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{type:"submit",children:"Sign Up"})}),j.jsx("div",{className:"login-link",children:j.jsxs("p",{children:["Already have an account? ",j.jsx(Ni,{to:"/",children:"LogIn"})]})})]})]})};const wU="/assets/logofinal-34f36033.png",HJ=()=>{const[e,t]=Y.useState(null),[r,n]=Y.useState(""),[a,c]=Y.useState(""),[f,o]=Y.useState(""),[m,_]=Y.useState(""),[w,E]=Y.useState(null),[C,M]=Y.useState(""),[I,D]=Y.useState(""),[$,B]=Y.useState(""),[F,R]=Y.useState(""),[U,H]=Y.useState(""),[X,ee]=Y.useState(""),oe=Lo(),ae=async ge=>{ge.preventDefault();const he=new FormData;e&&he.append("vehiclePhoto",e),he.append("VehicleModel",r),he.append("vehicleNo",a),he.append("RCNo",f),he.append("licenseno",m),w&&(he.append("driverPhoto",w),console.log("Driver Photo attached to FormData:",w)),he.append("Drivername",$),he.append("email",F),he.append("phone",U),he.append("password",X);try{const ve=await vi.post("http://localhost:3003/api/drivers/driversignup",he,{headers:{"Content-Type":"multipart/form-data"}});Qt.success("User created successfully"),console.log("Signup Successful:",ve.data),oe("/driverlogin")}catch(ve){Qt.error("An error occurred"),console.error("Signup Error:",ve)}};return j.jsx("div",{className:"parent",children:j.jsxs("div",{className:"xyz",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"logo-container",children:j.jsx("img",{src:wU,alt:"Logo",className:"logo"})}),j.jsx("h2",{children:"Driver Signup Form"}),j.jsxs("form",{onSubmit:ae,encType:"multipart/form-data",className:"signup-form-container",children:[j.jsxs("div",{className:"section",children:[j.jsx("h3",{className:"details",children:"Vehicle Details:"}),j.jsxs("div",{className:"vehicle-details",children:[j.jsxs("div",{className:"photo-input",children:[j.jsx("div",{className:"photo-container",children:C&&j.jsx("img",{className:"image",src:C,alt:"Vehicle Preview"})}),j.jsx("input",{type:"file",className:"inputfile",name:"file",id:"file",accept:"image/*",onChange:ge=>{const he=ge.target.files&&ge.target.files[0];he&&(t(he),M(URL.createObjectURL(he)))}}),I?j.jsx("label",{htmlFor:"file",className:"label",children:"Change Image"}):j.jsx("label",{htmlFor:"file",className:"label",children:"Upload your vehicle image"})]}),j.jsxs("div",{className:"vehicle-info",children:[j.jsx("label",{children:"Name:"}),j.jsx("input",{type:"text",name:"VehicleModel",value:r,onChange:ge=>n(ge.target.value),required:!0}),j.jsx("label",{children:"Vehicle Number:"}),j.jsx("input",{type:"text",name:"vehicleNo",value:a,onChange:ge=>c(ge.target.value),required:!0}),j.jsx("label",{children:"RC Number:"}),j.jsx("input",{type:"text",name:"RCNo",value:f,onChange:ge=>o(ge.target.value),required:!0}),j.jsx("label",{children:"License No:"}),j.jsx("input",{type:"text",name:"licenseno",value:m,onChange:ge=>_(ge.target.value),required:!0})]})]})]}),j.jsxs("div",{className:"section",children:[j.jsx("h3",{className:"details",children:"Driver Details:"}),j.jsxs("div",{className:"driver-details",children:[j.jsxs("div",{className:"photo-input",children:[j.jsx("div",{className:"photo-container",children:C&&j.jsx("img",{className:"image",src:I,alt:"Vehicle Preview"})}),j.jsx("input",{type:"file",id:"vehiclePhotoInput",className:"inputfile2",accept:"image/*",onChange:ge=>{const he=ge.target.files&&ge.target.files[0];he&&(E(he),D(URL.createObjectURL(he)))}}),I?j.jsx("label",{htmlFor:"vehiclePhotoInput",className:"label",children:"Change Image"}):j.jsx("label",{htmlFor:"vehiclePhotoInput",className:"label",children:"Upload your Driver image"})]}),j.jsxs("div",{className:"driver-info",children:[j.jsx("label",{children:"Name:"}),j.jsx("input",{type:"text",name:"Drivername",value:$,onChange:ge=>B(ge.target.value),required:!0}),j.jsx("label",{children:"E-mail:"}),j.jsx("input",{type:"email",name:"email",value:F,onChange:ge=>R(ge.target.value),required:!0}),j.jsx("label",{children:"Phone Number:"}),j.jsx("input",{type:"tel",name:"phone",value:U,onChange:ge=>H(ge.target.value),required:!0}),j.jsx("label",{children:"Password:"}),j.jsx("input",{type:"password",name:"password",value:X,onChange:ge=>ee(ge.target.value),required:!0})]})]})]}),j.jsx("button",{type:"submit",children:"Sign Up"})]})]})})};const ZJ=Bl("http://localhost:3003"),XJ=()=>{const[e,t]=Y.useState(""),[r,n]=Y.useState(""),a=Lo(),c=cf(),f=o=>{o.preventDefault(),vi.post("http://localhost:3003/api/drivers/driverLogin",{email:e,password:r}).then(m=>{Qt.success(m.data.message);const _=m.data,w=_.driver._id;ZJ.emit("driverConnected",w),localStorage.setItem("DriverData",JSON.stringify(_)),c(Kl(_)),localStorage.setItem("drivertoken",_.token),a("/driverhome")}).catch(m=>{Qt.error(m.response.data.message)})};return j.jsxs("div",{className:"login-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"login-form",children:j.jsxs("form",{onSubmit:f,children:[j.jsx("img",{src:wU,alt:"Logo",className:"logo"}),j.jsx("h1",{className:"head",children:"Driver Login"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{className:"input",type:"text",id:"username",placeholder:"Email",value:e,onChange:o=>t(o.target.value),required:!0})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"password",id:"password",placeholder:"Password",value:r,onChange:o=>n(o.target.value),required:!0})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{className:"button",type:"submit",children:"Login"})}),j.jsx("div",{className:"links-container"})]})})]})},KJ="/assets/logofinal-34f36033.png",YJ=()=>{const[e,t]=Y.useState(""),[r,n]=Y.useState(""),a=Lo(),c=f=>{f.preventDefault(),vi.post("http://localhost:3003/api/admin/adminlogin",{email:e,password:r}).then(o=>{console.log(o),Qt.success(o.data.message),a("/dashboard")}).catch(o=>{Qt.error(o.response.data.message)})};return j.jsxs("div",{className:"login-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"login-form",children:j.jsxs("form",{onSubmit:c,children:[j.jsx("img",{src:KJ,alt:"Logo",className:"logo"}),j.jsx("h1",{className:"head",children:"Admin Login"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{className:"input",type:"text",id:"username",placeholder:"Email",value:e,onChange:f=>t(f.target.value),required:!0})}),j.jsx("div",{className:"input-container",children:j.jsx("input",{type:"password",id:"password",placeholder:"Password",value:r,onChange:f=>n(f.target.value),required:!0})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{className:"button",type:"submit",children:"Login"})})]})})]})};const JJ=()=>{const[e,t]=Y.useState(""),r=Lo(),n=async a=>{a.preventDefault();try{const c=await vi.post("http://localhost:3003/api/users/sendOtp",{phone:e}),f=c.data.existingUser;localStorage.setItem("userData",JSON.stringify(f)),Qt.success(c.data.msg),localStorage.setItem("UserPhone",JSON.stringify(e)),r("/VerifyOtp")}catch(c){c instanceof Error?Qt.error(c.message):Qt.error("An error occurred.")}};return j.jsxs("div",{className:"login-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"login-form",children:j.jsxs("form",{onSubmit:n,children:[j.jsx("img",{src:Rw,alt:"Logo",className:"logo"}),j.jsx("h1",{className:"head",children:"OTP Login"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{className:"input",type:"text",id:"username",placeholder:"Enter your phone number",value:e,onChange:a=>t(a.target.value),required:!0})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{className:"button",type:"submit",children:"Submit"})})]})})]})};const QJ=()=>{const[e,t]=Y.useState(""),r=localStorage.getItem("UserPhone"),n=Lo(),a=cf(),c=f=>{f.preventDefault(),vi.post("http://localhost:3003/api/users/verifyOtp",{OTP:e,phone:r}).then(o=>{if(o.data.msg==="verified user"){const m=localStorage.getItem("userData");m!==null?(a(Kl(m)),Qt.success("User verified"),n("/userhome")):Qt.error("Invalid User")}else Qt.error("Invalid user")}).catch(o=>{console.error(o),o.response&&o.response.data&&o.response.data.message?Qt.error(o.response.data.message):Qt.error("An error occurred")})};return j.jsxs("div",{className:"login-container",children:[j.jsx(Ro,{position:"top-center",autoClose:2e3}),j.jsx("div",{className:"login-form",children:j.jsxs("form",{onSubmit:c,children:[j.jsx("img",{src:Rw,alt:"Logo",className:"logo"}),j.jsx("h1",{className:"head",children:"Verify OTP"}),j.jsx("div",{className:"input-container",children:j.jsx("input",{className:"input",type:"text",id:"username",placeholder:"Enter your OTP",value:e,onChange:f=>t(f.target.value),required:!0})}),j.jsx("div",{className:"button-container",children:j.jsx("button",{className:"button",type:"submit",children:"Submit"})})]})})]})};var SU={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],a=0;a<arguments.length;a++){var c=arguments[a];if(c){var f=typeof c;if(f==="string"||f==="number")n.push(c);else if(Array.isArray(c)){if(c.length){var o=r.apply(null,c);o&&n.push(o)}}else if(f==="object"){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){n.push(c.toString());continue}for(var m in c)t.call(c,m)&&c[m]&&n.push(m)}}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(SU);var eQ=SU.exports;const Yt=Hr(eQ),tQ=["xxl","xl","lg","md","sm","xs"],rQ="xs",EU=Y.createContext({prefixes:{},breakpoints:tQ,minBreakpoint:rQ});function ci(e,t){const{prefixes:r}=Y.useContext(EU);return e||r[t]||t}function TU(){const{dir:e}=Y.useContext(EU);return e==="rtl"}const AU=Y.forwardRef(({bsPrefix:e,fluid:t=!1,as:r="div",className:n,...a},c)=>{const f=ci(e,"container"),o=typeof t=="string"?`-${t}`:"-fluid";return j.jsx(r,{ref:c,...a,className:Yt(n,t?`${f}${o}`:f)})});AU.displayName="Container";const nQ=AU;var jj={exports:{}},OC={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){function a(f,o,m,_,w,E){var C=_||"<<anonymous>>",M=E||m;if(o[m]==null)return f?new Error("Required "+w+" `"+M+"` was not specified "+("in `"+C+"`.")):null;for(var I=arguments.length,D=Array(I>6?I-6:0),$=6;$<I;$++)D[$-6]=arguments[$];return n.apply(void 0,[o,m,C,w,M].concat(D))}var c=a.bind(null,!1);return c.isRequired=a.bind(null,!0),c}e.exports=t.default})(OC,OC.exports);var iQ=OC.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=iQ,n=a(r);function a(f){return f&&f.__esModule?f:{default:f}}function c(){for(var f=arguments.length,o=Array(f),m=0;m<f;m++)o[m]=arguments[m];function _(){for(var w=arguments.length,E=Array(w),C=0;C<w;C++)E[C]=arguments[C];var M=null;return o.forEach(function(I){if(M==null){var D=I.apply(void 0,E);D!=null&&(M=D)}}),M}return(0,n.default)(_)}e.exports=t.default})(jj,jj.exports);function $j(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function oQ(e){var t=aQ(e,"string");return typeof t=="symbol"?t:String(t)}function aQ(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sQ(e,t,r){var n=Y.useRef(e!==void 0),a=Y.useState(t),c=a[0],f=a[1],o=e!==void 0,m=n.current;return n.current=o,!o&&m&&c!==t&&f(t),[o?e:c,Y.useCallback(function(_){for(var w=arguments.length,E=new Array(w>1?w-1:0),C=1;C<w;C++)E[C-1]=arguments[C];r&&r.apply(void 0,[_].concat(E)),f(_)},[r])]}function CM(e,t){return Object.keys(t).reduce(function(r,n){var a,c=r,f=c[$j(n)],o=c[n],m=x5(c,[$j(n),n].map(oQ)),_=t[n],w=sQ(o,f,e[_]),E=w[0],C=w[1];return dC({},m,(a={},a[n]=E,a[_]=C,a))},e)}function MC(e,t){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},MC(e,t)}function lQ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,MC(e,t)}var cQ=Function.prototype.bind.call(Function.prototype.call,[].slice);function Il(e,t){return cQ(e.querySelectorAll(t))}function CU(){const[,e]=Y.useReducer(t=>!t,!1);return e}const Nj=e=>!e||typeof e=="function"?e:t=>{e.current=t};function uQ(e,t){const r=Nj(e),n=Nj(t);return a=>{r&&r(a),n&&n(a)}}function uf(e,t){return Y.useMemo(()=>uQ(e,t),[e,t])}const PU=Y.createContext(null);PU.displayName="NavContext";const PM=PU,hQ=Y.createContext(null),av=(e,t=null)=>e!=null?String(e):t||null,Qh=hQ,fQ=Y.createContext(null),OU=fQ,dQ="data-rr-ui-",pQ="rrUi";function Up(e){return`${dQ}${e}`}function mQ(e){return`${pQ}${e}`}function gQ(e){const t=Y.useRef(e);return Y.useEffect(()=>{t.current=e},[e]),t}function qn(e){const t=gQ(e);return Y.useCallback(function(...r){return t.current&&t.current(...r)},[t])}const yQ=["as","disabled"];function vQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function _Q(e){return!e||e.trim()==="#"}function OM({tagName:e,disabled:t,href:r,target:n,rel:a,role:c,onClick:f,tabIndex:o=0,type:m}){e||(r!=null||n!=null||a!=null?e="a":e="button");const _={tagName:e};if(e==="button")return[{type:m||"button",disabled:t},_];const w=C=>{if((t||e==="a"&&_Q(r))&&C.preventDefault(),t){C.stopPropagation();return}f==null||f(C)},E=C=>{C.key===" "&&(C.preventDefault(),w(C))};return e==="a"&&(r||(r="#"),t&&(r=void 0)),[{role:c??"button",disabled:void 0,tabIndex:t?void 0:o,href:r,target:e==="a"?n:void 0,"aria-disabled":t||void 0,rel:e==="a"?a:void 0,onClick:w,onKeyDown:E},_]}const MM=Y.forwardRef((e,t)=>{let{as:r,disabled:n}=e,a=vQ(e,yQ);const[c,{tagName:f}]=OM(Object.assign({tagName:r,disabled:n},a));return j.jsx(f,Object.assign({},a,c,{ref:t}))});MM.displayName="Button";const xQ=["as","active","eventKey"];function bQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function MU({key:e,onClick:t,active:r,id:n,role:a,disabled:c}){const f=Y.useContext(Qh),o=Y.useContext(PM),m=Y.useContext(OU);let _=r;const w={role:a};if(o){!a&&o.role==="tablist"&&(w.role="tab");const E=o.getControllerId(e??null),C=o.getControlledId(e??null);w[Up("event-key")]=e,w.id=E||n,_=r==null&&e!=null?o.activeKey===e:r,(_||!(m!=null&&m.unmountOnExit)&&!(m!=null&&m.mountOnEnter))&&(w["aria-controls"]=C)}return w.role==="tab"&&(w["aria-selected"]=_,_||(w.tabIndex=-1),c&&(w.tabIndex=-1,w["aria-disabled"]=!0)),w.onClick=qn(E=>{c||(t==null||t(E),e!=null&&f&&!E.isPropagationStopped()&&f(e,E))}),[w,{isActive:_}]}const kU=Y.forwardRef((e,t)=>{let{as:r=MM,active:n,eventKey:a}=e,c=bQ(e,xQ);const[f,o]=MU(Object.assign({key:av(a,c.href),active:n},c));return f[Up("active")]=o.isActive,j.jsx(r,Object.assign({},c,f,{ref:t}))});kU.displayName="NavItem";const wQ=kU,SQ=["as","onSelect","activeKey","role","onKeyDown"];function EQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}const zj=()=>{},Bj=Up("event-key"),IU=Y.forwardRef((e,t)=>{let{as:r="div",onSelect:n,activeKey:a,role:c,onKeyDown:f}=e,o=EQ(e,SQ);const m=CU(),_=Y.useRef(!1),w=Y.useContext(Qh),E=Y.useContext(OU);let C,M;E&&(c=c||"tablist",a=E.activeKey,C=E.getControlledId,M=E.getControllerId);const I=Y.useRef(null),D=R=>{const U=I.current;if(!U)return null;const H=Il(U,`[${Bj}]:not([aria-disabled=true])`),X=U.querySelector("[aria-selected=true]");if(!X||X!==document.activeElement)return null;const ee=H.indexOf(X);if(ee===-1)return null;let oe=ee+R;return oe>=H.length&&(oe=0),oe<0&&(oe=H.length-1),H[oe]},$=(R,U)=>{R!=null&&(n==null||n(R,U),w==null||w(R,U))},B=R=>{if(f==null||f(R),!E)return;let U;switch(R.key){case"ArrowLeft":case"ArrowUp":U=D(-1);break;case"ArrowRight":case"ArrowDown":U=D(1);break;default:return}U&&(R.preventDefault(),$(U.dataset[mQ("EventKey")]||null,R),_.current=!0,m())};Y.useEffect(()=>{if(I.current&&_.current){const R=I.current.querySelector(`[${Bj}][aria-selected=true]`);R==null||R.focus()}_.current=!1});const F=uf(t,I);return j.jsx(Qh.Provider,{value:$,children:j.jsx(PM.Provider,{value:{role:c,activeKey:av(a),getControlledId:C||zj,getControllerId:M||zj},children:j.jsx(r,Object.assign({},o,{onKeyDown:B,ref:F,role:c}))})})});IU.displayName="Nav";const TQ=Object.assign(IU,{Item:wQ}),DU=Y.createContext(null);DU.displayName="NavbarContext";const hf=DU,RU=Y.createContext(null);RU.displayName="CardHeaderContext";const AQ=RU;var CQ=/-(.)/g;function PQ(e){return e.replace(CQ,function(t,r){return r.toUpperCase()})}const OQ=e=>e[0].toUpperCase()+PQ(e).slice(1);function nl(e,{displayName:t=OQ(e),Component:r,defaultProps:n}={}){const a=Y.forwardRef(({className:c,bsPrefix:f,as:o=r||"div",...m},_)=>{const w={...n,...m},E=ci(f,e);return j.jsx(o,{ref:_,className:Yt(c,E),...w})});return a.displayName=t,a}const MQ=nl("nav-item");function LU(){return Y.useState(null)}function kQ(e,t,r,n=!1){const a=qn(r);Y.useEffect(()=>{const c=typeof e=="function"?e():e;return c.addEventListener(t,a,n),()=>c.removeEventListener(t,a,n)},[e])}function jU(){const e=Y.useRef(!0),t=Y.useRef(()=>e.current);return Y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function $U(e){const t=Y.useRef(null);return Y.useEffect(()=>{t.current=e}),t.current}const IQ=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",DQ=typeof document<"u",q1=DQ||IQ?Y.useLayoutEffect:Y.useEffect,RQ=["onKeyDown"];function LQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function jQ(e){return!e||e.trim()==="#"}const NU=Y.forwardRef((e,t)=>{let{onKeyDown:r}=e,n=LQ(e,RQ);const[a]=OM(Object.assign({tagName:"a"},n)),c=qn(f=>{a.onKeyDown(f),r==null||r(f)});return jQ(n.href)||n.role==="button"?j.jsx("a",Object.assign({ref:t},n,a,{onKeyDown:c})):j.jsx("a",Object.assign({ref:t},n,{onKeyDown:r}))});NU.displayName="Anchor";const zU=NU,BU=Y.forwardRef(({bsPrefix:e,className:t,as:r=zU,active:n,eventKey:a,disabled:c=!1,...f},o)=>{e=ci(e,"nav-link");const[m,_]=MU({key:av(a,f.href),active:n,disabled:c,...f});return j.jsx(r,{...f,...m,ref:o,disabled:c,className:Yt(t,e,c&&"disabled",_.isActive&&"active")})});BU.displayName="NavLink";const $Q=BU,FU=Y.forwardRef((e,t)=>{const{as:r="div",bsPrefix:n,variant:a,fill:c=!1,justify:f=!1,navbar:o,navbarScroll:m,className:_,activeKey:w,...E}=CM(e,{activeKey:"onSelect"}),C=ci(n,"nav");let M,I,D=!1;const $=Y.useContext(hf),B=Y.useContext(AQ);return $?(M=$.bsPrefix,D=o??!0):B&&({cardHeaderBsPrefix:I}=B),j.jsx(TQ,{as:r,ref:t,activeKey:w,className:Yt(_,{[C]:!D,[`${M}-nav`]:D,[`${M}-nav-scroll`]:D&&m,[`${I}-${a}`]:!!I,[`${C}-${a}`]:!!a,[`${C}-fill`]:c,[`${C}-justified`]:f}),...E})});FU.displayName="Nav";const kM=Object.assign(FU,{Item:MQ,Link:$Q}),UU=Y.forwardRef(({bsPrefix:e,className:t,as:r,...n},a)=>{e=ci(e,"navbar-brand");const c=r||(n.href?"a":"span");return j.jsx(c,{...n,ref:a,className:Yt(t,e)})});UU.displayName="NavbarBrand";const NQ=UU;function r_(e){return e&&e.ownerDocument||document}function zQ(e){var t=r_(e);return t&&t.defaultView||window}function BQ(e,t){return zQ(e).getComputedStyle(e,t)}var FQ=/([A-Z])/g;function UQ(e){return e.replace(FQ,"-$1").toLowerCase()}var VQ=/^ms-/;function Ex(e){return UQ(e).replace(VQ,"-ms-")}var WQ=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function qQ(e){return!!(e&&WQ.test(e))}function Ul(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Ex(t))||BQ(e).getPropertyValue(Ex(t));Object.keys(t).forEach(function(a){var c=t[a];!c&&c!==0?e.style.removeProperty(Ex(a)):qQ(a)?n+=a+"("+c+") ":r+=Ex(a)+": "+c+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}var VU={exports:{}},GQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",HQ=GQ,ZQ=HQ;function WU(){}function qU(){}qU.resetWarningCache=WU;var XQ=function(){function e(n,a,c,f,o,m){if(m!==ZQ){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qU,resetWarningCache:WU};return r.PropTypes=r,r};VU.exports=XQ();var GU=VU.exports;const yr=Hr(GU),Fj={disabled:!1},HU=Se.createContext(null);var KQ=function(t){return t.scrollTop},py="unmounted",Hc="exited",gs="entering",Dl="entered",sv="exiting",nc=function(e){lQ(t,e);function t(n,a){var c;c=e.call(this,n,a)||this;var f=a,o=f&&!f.isMounting?n.enter:n.appear,m;return c.appearStatus=null,n.in?o?(m=Hc,c.appearStatus=gs):m=Dl:n.unmountOnExit||n.mountOnEnter?m=py:m=Hc,c.state={status:m},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var f=a.in;return f&&c.status===py?{status:Hc}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var c=null;if(a!==this.props){var f=this.state.status;this.props.in?f!==gs&&f!==Dl&&(c=gs):(f===gs||f===Dl)&&(c=sv)}this.updateStatus(!1,c)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,c,f,o;return c=f=o=a,a!=null&&typeof a!="number"&&(c=a.exit,f=a.enter,o=a.appear!==void 0?a.appear:f),{exit:c,enter:f,appear:o}},r.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===gs){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Bd.findDOMNode(this);f&&KQ(f)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Hc&&this.setState({status:py})},r.performEnter=function(a){var c=this,f=this.props.enter,o=this.context?this.context.isMounting:a,m=this.props.nodeRef?[o]:[Bd.findDOMNode(this),o],_=m[0],w=m[1],E=this.getTimeouts(),C=o?E.appear:E.enter;if(!a&&!f||Fj.disabled){this.safeSetState({status:Dl},function(){c.props.onEntered(_)});return}this.props.onEnter(_,w),this.safeSetState({status:gs},function(){c.props.onEntering(_,w),c.onTransitionEnd(C,function(){c.safeSetState({status:Dl},function(){c.props.onEntered(_,w)})})})},r.performExit=function(){var a=this,c=this.props.exit,f=this.getTimeouts(),o=this.props.nodeRef?void 0:Bd.findDOMNode(this);if(!c||Fj.disabled){this.safeSetState({status:Hc},function(){a.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:sv},function(){a.props.onExiting(o),a.onTransitionEnd(f.exit,function(){a.safeSetState({status:Hc},function(){a.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},r.setNextCallback=function(a){var c=this,f=!0;return this.nextCallback=function(o){f&&(f=!1,c.nextCallback=null,a(o))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},r.onTransitionEnd=function(a,c){this.setNextCallback(c);var f=this.props.nodeRef?this.props.nodeRef.current:Bd.findDOMNode(this),o=a==null&&!this.props.addEndListener;if(!f||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],_=m[0],w=m[1];this.props.addEndListener(_,w)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===py)return null;var c=this.props,f=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var o=x5(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Se.createElement(HU.Provider,{value:null},typeof f=="function"?f(a,o):Se.cloneElement(Se.Children.only(f),o))},t}(Se.Component);nc.contextType=HU;nc.propTypes={};function _d(){}nc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_d,onEntering:_d,onEntered:_d,onExit:_d,onExiting:_d,onExited:_d};nc.UNMOUNTED=py;nc.EXITED=Hc;nc.ENTERING=gs;nc.ENTERED=Dl;nc.EXITING=sv;const YQ=nc,Vp=!!(typeof window<"u"&&window.document&&window.document.createElement);var kC=!1,IC=!1;try{var E2={get passive(){return kC=!0},get once(){return IC=kC=!0}};Vp&&(window.addEventListener("test",E2,E2),window.removeEventListener("test",E2,!0))}catch{}function IM(e,t,r,n){if(n&&typeof n!="boolean"&&!IC){var a=n.once,c=n.capture,f=r;!IC&&a&&(f=r.__once||function o(m){this.removeEventListener(t,o,c),r.call(this,m)},r.__once=f),e.addEventListener(t,f,kC?n:c)}e.addEventListener(t,r,n)}function DC(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function iu(e,t,r,n){return IM(e,t,r,n),function(){DC(e,t,r,n)}}function JQ(e,t,r,n){if(r===void 0&&(r=!1),n===void 0&&(n=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,r,n),e.dispatchEvent(a)}}function QQ(e){var t=Ul(e,"transitionDuration")||"",r=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*r}function eee(e,t,r){r===void 0&&(r=5);var n=!1,a=setTimeout(function(){n||JQ(e,"transitionend",!0)},t+r),c=iu(e,"transitionend",function(){n=!0},{once:!0});return function(){clearTimeout(a),c()}}function ZU(e,t,r,n){r==null&&(r=QQ(e)||0);var a=eee(e,r,n),c=iu(e,"transitionend",t);return function(){a(),c()}}function Uj(e,t){const r=Ul(e,t)||"",n=r.indexOf("ms")===-1?1e3:1;return parseFloat(r)*n}function DM(e,t){const r=Uj(e,"transitionDuration"),n=Uj(e,"transitionDelay"),a=ZU(e,c=>{c.target===e&&(a(),t(c))},r+n)}function Gg(...e){return e.filter(t=>t!=null).reduce((t,r)=>{if(typeof r!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?r:function(...a){t.apply(this,a),r.apply(this,a)}},null)}function XU(e){e.offsetHeight}function tee(e){return e&&"setState"in e?Bd.findDOMNode(e):e??null}const ree=Se.forwardRef(({onEnter:e,onEntering:t,onEntered:r,onExit:n,onExiting:a,onExited:c,addEndListener:f,children:o,childRef:m,..._},w)=>{const E=Y.useRef(null),C=uf(E,m),M=X=>{C(tee(X))},I=X=>ee=>{X&&E.current&&X(E.current,ee)},D=Y.useCallback(I(e),[e]),$=Y.useCallback(I(t),[t]),B=Y.useCallback(I(r),[r]),F=Y.useCallback(I(n),[n]),R=Y.useCallback(I(a),[a]),U=Y.useCallback(I(c),[c]),H=Y.useCallback(I(f),[f]);return j.jsx(YQ,{ref:w,..._,onEnter:D,onEntered:B,onEntering:$,onExit:F,onExited:U,onExiting:R,addEndListener:H,nodeRef:E,children:typeof o=="function"?(X,ee)=>o(X,{...ee,ref:M}):Se.cloneElement(o,{ref:M})})}),RM=ree,nee={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function iee(e,t){const r=`offset${e[0].toUpperCase()}${e.slice(1)}`,n=t[r],a=nee[e];return n+parseInt(Ul(t,a[0]),10)+parseInt(Ul(t,a[1]),10)}const oee={[Hc]:"collapse",[sv]:"collapsing",[gs]:"collapsing",[Dl]:"collapse show"},aee=Se.forwardRef(({onEnter:e,onEntering:t,onEntered:r,onExit:n,onExiting:a,className:c,children:f,dimension:o="height",in:m=!1,timeout:_=300,mountOnEnter:w=!1,unmountOnExit:E=!1,appear:C=!1,getDimensionValue:M=iee,...I},D)=>{const $=typeof o=="function"?o():o,B=Y.useMemo(()=>Gg(X=>{X.style[$]="0"},e),[$,e]),F=Y.useMemo(()=>Gg(X=>{const ee=`scroll${$[0].toUpperCase()}${$.slice(1)}`;X.style[$]=`${X[ee]}px`},t),[$,t]),R=Y.useMemo(()=>Gg(X=>{X.style[$]=null},r),[$,r]),U=Y.useMemo(()=>Gg(X=>{X.style[$]=`${M($,X)}px`,XU(X)},n),[n,M,$]),H=Y.useMemo(()=>Gg(X=>{X.style[$]=null},a),[$,a]);return j.jsx(RM,{ref:D,addEndListener:DM,...I,"aria-expanded":I.role?m:null,onEnter:B,onEntering:F,onEntered:R,onExit:U,onExiting:H,childRef:f.ref,in:m,timeout:_,mountOnEnter:w,unmountOnExit:E,appear:C,children:(X,ee)=>Se.cloneElement(f,{...ee,className:Yt(c,f.props.className,oee[X],$==="width"&&"collapse-horizontal")})})}),see=aee,KU=Y.forwardRef(({children:e,bsPrefix:t,...r},n)=>{t=ci(t,"navbar-collapse");const a=Y.useContext(hf);return j.jsx(see,{in:!!(a&&a.expanded),...r,children:j.jsx("div",{ref:n,className:t,children:e})})});KU.displayName="NavbarCollapse";const lee=KU,YU=Y.forwardRef(({bsPrefix:e,className:t,children:r,label:n="Toggle navigation",as:a="button",onClick:c,...f},o)=>{e=ci(e,"navbar-toggler");const{onToggle:m,expanded:_}=Y.useContext(hf)||{},w=qn(E=>{c&&c(E),m&&m()});return a==="button"&&(f.type="button"),j.jsx(a,{...f,ref:o,onClick:w,"aria-label":n,className:Yt(t,e,!_&&"collapsed"),children:r||j.jsx("span",{className:`${e}-icon`})})});YU.displayName="NavbarToggle";const cee=YU,RC=new WeakMap,Vj=(e,t)=>{if(!e||!t)return;const r=RC.get(t)||new Map;RC.set(t,r);let n=r.get(e);return n||(n=t.matchMedia(e),n.refCount=0,r.set(n.media,n)),n};function uee(e,t=typeof window>"u"?void 0:window){const r=Vj(e,t),[n,a]=Y.useState(()=>r?r.matches:!1);return q1(()=>{let c=Vj(e,t);if(!c)return a(!1);let f=RC.get(t);const o=()=>{a(c.matches)};return c.refCount++,c.addListener(o),o(),()=>{c.removeListener(o),c.refCount--,c.refCount<=0&&(f==null||f.delete(c.media)),c=void 0}},[e]),n}function hee(e){const t=Object.keys(e);function r(o,m){return o===m?m:o?`${o} and ${m}`:m}function n(o){return t[Math.min(t.indexOf(o)+1,t.length-1)]}function a(o){const m=n(o);let _=e[m];return typeof _=="number"?_=`${_-.2}px`:_=`calc(${_} - 0.2px)`,`(max-width: ${_})`}function c(o){let m=e[o];return typeof m=="number"&&(m=`${m}px`),`(min-width: ${m})`}function f(o,m,_){let w;typeof o=="object"?(w=o,_=m,m=!0):(m=m||!0,w={[o]:m});let E=Y.useMemo(()=>Object.entries(w).reduce((C,[M,I])=>((I==="up"||I===!0)&&(C=r(C,c(M))),(I==="down"||I===!0)&&(C=r(C,a(M))),C),""),[JSON.stringify(w)]);return uee(E,_)}return f}const fee=hee({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function T2(e){e===void 0&&(e=r_());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function G1(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function dee(e){const t=Y.useRef(e);return t.current=e,t}function JU(e){const t=dee(e);Y.useEffect(()=>()=>t.current(),[])}function pee(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Wj=Up("modal-open");class mee{constructor({ownerDocument:t,handleContainerOverflow:r=!0,isRTL:n=!1}={}){this.handleContainerOverflow=r,this.isRTL=n,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return pee(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const r={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();t.style={overflow:a.style.overflow,[n]:a.style[n]},t.scrollBarWidth&&(r[n]=`${parseInt(Ul(a,n)||"0",10)+t.scrollBarWidth}px`),a.setAttribute(Wj,""),Ul(a,r)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const r=this.getElement();r.removeAttribute(Wj),Object.assign(r.style,t.style)}add(t){let r=this.modals.indexOf(t);return r!==-1||(r=this.modals.length,this.modals.push(t),this.setModalAttributes(t),r!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),r}remove(t){const r=this.modals.indexOf(t);r!==-1&&(this.modals.splice(r,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const LM=mee,QU=Y.createContext(Vp?window:void 0);QU.Provider;function Bw(){return Y.useContext(QU)}const A2=(e,t)=>Vp?e==null?(t||r_()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function gee(e,t){const r=Bw(),[n,a]=Y.useState(()=>A2(e,r==null?void 0:r.document));if(!n){const c=A2(e);c&&a(c)}return Y.useEffect(()=>{t&&n&&t(n)},[t,n]),Y.useEffect(()=>{const c=A2(e);c!==n&&a(c)},[e,n]),n}function yee({children:e,in:t,onExited:r,mountOnEnter:n,unmountOnExit:a}){const c=Y.useRef(null),f=Y.useRef(t),o=qn(r);Y.useEffect(()=>{t?f.current=!0:o(c.current)},[t,o]);const m=uf(c,e.ref),_=Y.cloneElement(e,{ref:m});return t?_:a||!f.current&&n?null:_}function vee({in:e,onTransition:t}){const r=Y.useRef(null),n=Y.useRef(!0),a=qn(t);return q1(()=>{if(!r.current)return;let c=!1;return a({in:e,element:r.current,initial:n.current,isStale:()=>c}),()=>{c=!0}},[e,a]),q1(()=>(n.current=!1,()=>{n.current=!0}),[]),r}function _ee({children:e,in:t,onExited:r,onEntered:n,transition:a}){const[c,f]=Y.useState(!t);t&&c&&f(!1);const o=vee({in:!!t,onTransition:_=>{const w=()=>{_.isStale()||(_.in?n==null||n(_.element,_.initial):(f(!0),r==null||r(_.element)))};Promise.resolve(a(_)).then(w,E=>{throw _.in||f(!0),E})}}),m=uf(o,e.ref);return c&&!t?null:Y.cloneElement(e,{ref:m})}function qj(e,t,r){return e?j.jsx(e,Object.assign({},r)):t?j.jsx(_ee,Object.assign({},r,{transition:t})):j.jsx(yee,Object.assign({},r))}function xee(e){return e.code==="Escape"||e.keyCode===27}const bee=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function wee(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let C2;function See(e){return C2||(C2=new LM({ownerDocument:e==null?void 0:e.document})),C2}function Eee(e){const t=Bw(),r=e||See(t),n=Y.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>r.add(n.current),remove:()=>r.remove(n.current),isTopModal:()=>r.isTopModal(n.current),setDialogRef:Y.useCallback(a=>{n.current.dialog=a},[]),setBackdropRef:Y.useCallback(a=>{n.current.backdrop=a},[])})}const e6=Y.forwardRef((e,t)=>{let{show:r=!1,role:n="dialog",className:a,style:c,children:f,backdrop:o=!0,keyboard:m=!0,onBackdropClick:_,onEscapeKeyDown:w,transition:E,runTransition:C,backdropTransition:M,runBackdropTransition:I,autoFocus:D=!0,enforceFocus:$=!0,restoreFocus:B=!0,restoreFocusOptions:F,renderDialog:R,renderBackdrop:U=Nt=>j.jsx("div",Object.assign({},Nt)),manager:H,container:X,onShow:ee,onHide:oe=()=>{},onExit:ae,onExited:ge,onExiting:he,onEnter:ve,onEntering:Ee,onEntered:Re}=e,Ne=wee(e,bee);const Ve=Bw(),Ke=gee(X),ke=Eee(H),Ge=jU(),Ye=$U(r),[_t,Ot]=Y.useState(!r),bt=Y.useRef(null);Y.useImperativeHandle(t,()=>ke,[ke]),Vp&&!Ye&&r&&(bt.current=T2(Ve==null?void 0:Ve.document)),r&&_t&&Ot(!1);const Zt=qn(()=>{if(ke.add(),Dt.current=iu(document,"keydown",$r),St.current=iu(document,"focus",()=>setTimeout(kt),!0),ee&&ee(),D){var Nt,vr;const nn=T2((Nt=(vr=ke.dialog)==null?void 0:vr.ownerDocument)!=null?Nt:Ve==null?void 0:Ve.document);ke.dialog&&nn&&!G1(ke.dialog,nn)&&(bt.current=nn,ke.dialog.focus())}}),Xt=qn(()=>{if(ke.remove(),Dt.current==null||Dt.current(),St.current==null||St.current(),B){var Nt;(Nt=bt.current)==null||Nt.focus==null||Nt.focus(F),bt.current=null}});Y.useEffect(()=>{!r||!Ke||Zt()},[r,Ke,Zt]),Y.useEffect(()=>{_t&&Xt()},[_t,Xt]),JU(()=>{Xt()});const kt=qn(()=>{if(!$||!Ge()||!ke.isTopModal())return;const Nt=T2(Ve==null?void 0:Ve.document);ke.dialog&&Nt&&!G1(ke.dialog,Nt)&&ke.dialog.focus()}),Mt=qn(Nt=>{Nt.target===Nt.currentTarget&&(_==null||_(Nt),o===!0&&oe())}),$r=qn(Nt=>{m&&xee(Nt)&&ke.isTopModal()&&(w==null||w(Nt),Nt.defaultPrevented||oe())}),St=Y.useRef(),Dt=Y.useRef(),xt=(...Nt)=>{Ot(!0),ge==null||ge(...Nt)};if(!Ke)return null;const dt=Object.assign({role:n,ref:ke.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},Ne,{style:c,className:a,tabIndex:-1});let er=R?R(dt):j.jsx("div",Object.assign({},dt,{children:Y.cloneElement(f,{role:"document"})}));er=qj(E,C,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:ae,onExiting:he,onExited:xt,onEnter:ve,onEntering:Ee,onEntered:Re,children:er});let Kt=null;return o&&(Kt=U({ref:ke.setBackdropRef,onClick:Mt}),Kt=qj(M,I,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Kt})),j.jsx(j.Fragment,{children:Bd.createPortal(j.jsxs(j.Fragment,{children:[Kt,er]}),Ke)})});e6.displayName="Modal";const t6=Object.assign(e6,{Manager:LM}),Tee={[gs]:"show",[Dl]:"show"},r6=Y.forwardRef(({className:e,children:t,transitionClasses:r={},onEnter:n,...a},c)=>{const f={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},o=Y.useCallback((m,_)=>{XU(m),n==null||n(m,_)},[n]);return j.jsx(RM,{ref:c,addEndListener:DM,...f,onEnter:o,childRef:t.ref,children:(m,_)=>Y.cloneElement(t,{..._,className:Yt("fade",e,t.props.className,Tee[m],r[m])})})});r6.displayName="Fade";const jM=r6,Aee=nl("offcanvas-body"),Cee={[gs]:"show",[Dl]:"show"},n6=Y.forwardRef(({bsPrefix:e,className:t,children:r,in:n=!1,mountOnEnter:a=!1,unmountOnExit:c=!1,appear:f=!1,...o},m)=>(e=ci(e,"offcanvas"),j.jsx(RM,{ref:m,addEndListener:DM,in:n,mountOnEnter:a,unmountOnExit:c,appear:f,...o,childRef:r.ref,children:(_,w)=>Y.cloneElement(r,{...w,className:Yt(t,r.props.className,(_===gs||_===sv)&&`${e}-toggling`,Cee[_])})})));n6.displayName="OffcanvasToggling";const Pee=n6,Oee=Y.createContext({onHide(){}}),$M=Oee,Mee={"aria-label":yr.string,onClick:yr.func,variant:yr.oneOf(["white"])},NM=Y.forwardRef(({className:e,variant:t,"aria-label":r="Close",...n},a)=>j.jsx("button",{ref:a,type:"button",className:Yt("btn-close",t&&`btn-close-${t}`,e),"aria-label":r,...n}));NM.displayName="CloseButton";NM.propTypes=Mee;const kee=NM,Iee=Y.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:r=!1,onHide:n,children:a,...c},f)=>{const o=Y.useContext($M),m=qn(()=>{o==null||o.onHide(),n==null||n()});return j.jsxs("div",{ref:f,...c,children:[a,r&&j.jsx(kee,{"aria-label":e,variant:t,onClick:m})]})}),i6=Iee,o6=Y.forwardRef(({bsPrefix:e,className:t,closeLabel:r="Close",closeButton:n=!1,...a},c)=>(e=ci(e,"offcanvas-header"),j.jsx(i6,{ref:c,...a,className:Yt(t,e),closeLabel:r,closeButton:n})));o6.displayName="OffcanvasHeader";const Dee=o6,a6=e=>Y.forwardRef((t,r)=>j.jsx("div",{...t,ref:r,className:Yt(t.className,e)})),Ree=a6("h5"),Lee=nl("offcanvas-title",{Component:Ree});function jee(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function $ee(e,t){e.classList?e.classList.add(t):jee(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Gj(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Nee(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Gj(e.className,t):e.setAttribute("class",Gj(e.className&&e.className.baseVal||"",t))}const xd={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class s6 extends LM{adjustAndStore(t,r,n){const a=r.style[t];r.dataset[t]=a,Ul(r,{[t]:`${parseFloat(Ul(r,t))+n}px`})}restore(t,r){const n=r.dataset[t];n!==void 0&&(delete r.dataset[t],Ul(r,{[t]:n}))}setContainerStyle(t){super.setContainerStyle(t);const r=this.getElement();if($ee(r,"modal-open"),!t.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Il(r,xd.FIXED_CONTENT).forEach(c=>this.adjustAndStore(n,c,t.scrollBarWidth)),Il(r,xd.STICKY_CONTENT).forEach(c=>this.adjustAndStore(a,c,-t.scrollBarWidth)),Il(r,xd.NAVBAR_TOGGLER).forEach(c=>this.adjustAndStore(a,c,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const r=this.getElement();Nee(r,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Il(r,xd.FIXED_CONTENT).forEach(c=>this.restore(n,c)),Il(r,xd.STICKY_CONTENT).forEach(c=>this.restore(a,c)),Il(r,xd.NAVBAR_TOGGLER).forEach(c=>this.restore(a,c))}}let P2;function l6(e){return P2||(P2=new s6(e)),P2}function zee(e){return j.jsx(Pee,{...e})}function Bee(e){return j.jsx(jM,{...e})}const c6=Y.forwardRef(({bsPrefix:e,className:t,children:r,"aria-labelledby":n,placement:a="start",responsive:c,show:f=!1,backdrop:o=!0,keyboard:m=!0,scroll:_=!1,onEscapeKeyDown:w,onShow:E,onHide:C,container:M,autoFocus:I=!0,enforceFocus:D=!0,restoreFocus:$=!0,restoreFocusOptions:B,onEntered:F,onExit:R,onExiting:U,onEnter:H,onEntering:X,onExited:ee,backdropClassName:oe,manager:ae,renderStaticNode:ge=!1,...he},ve)=>{const Ee=Y.useRef();e=ci(e,"offcanvas");const{onToggle:Re}=Y.useContext(hf)||{},[Ne,Ve]=Y.useState(!1),Ke=fee(c||"xs","up");Y.useEffect(()=>{Ve(c?f&&!Ke:f)},[f,c,Ke]);const ke=qn(()=>{Re==null||Re(),C==null||C()}),Ge=Y.useMemo(()=>({onHide:ke}),[ke]);function Ye(){return ae||(_?(Ee.current||(Ee.current=new s6({handleContainerOverflow:!1})),Ee.current):l6())}const _t=(Xt,...kt)=>{Xt&&(Xt.style.visibility="visible"),H==null||H(Xt,...kt)},Ot=(Xt,...kt)=>{Xt&&(Xt.style.visibility=""),ee==null||ee(...kt)},bt=Y.useCallback(Xt=>j.jsx("div",{...Xt,className:Yt(`${e}-backdrop`,oe)}),[oe,e]),Zt=Xt=>j.jsx("div",{...Xt,...he,className:Yt(t,c?`${e}-${c}`:e,`${e}-${a}`),"aria-labelledby":n,children:r});return j.jsxs(j.Fragment,{children:[!Ne&&(c||ge)&&Zt({}),j.jsx($M.Provider,{value:Ge,children:j.jsx(t6,{show:Ne,ref:ve,backdrop:o,container:M,keyboard:m,autoFocus:I,enforceFocus:D&&!_,restoreFocus:$,restoreFocusOptions:B,onEscapeKeyDown:w,onShow:E,onHide:ke,onEnter:_t,onEntering:X,onEntered:F,onExit:R,onExiting:U,onExited:Ot,manager:Ye(),transition:zee,backdropTransition:Bee,renderBackdrop:bt,renderDialog:Zt})})]})});c6.displayName="Offcanvas";const Fee=Object.assign(c6,{Body:Aee,Header:Dee,Title:Lee}),u6=Y.forwardRef((e,t)=>{const r=Y.useContext(hf);return j.jsx(Fee,{ref:t,show:!!(r!=null&&r.expanded),...e,renderStaticNode:!0})});u6.displayName="NavbarOffcanvas";const Uee=u6,Vee=nl("navbar-text",{Component:"span"}),h6=Y.forwardRef((e,t)=>{const{bsPrefix:r,expand:n=!0,variant:a="light",bg:c,fixed:f,sticky:o,className:m,as:_="nav",expanded:w,onToggle:E,onSelect:C,collapseOnSelect:M=!1,...I}=CM(e,{expanded:"onToggle"}),D=ci(r,"navbar"),$=Y.useCallback((...R)=>{C==null||C(...R),M&&w&&(E==null||E(!1))},[C,M,w,E]);I.role===void 0&&_!=="nav"&&(I.role="navigation");let B=`${D}-expand`;typeof n=="string"&&(B=`${B}-${n}`);const F=Y.useMemo(()=>({onToggle:()=>E==null?void 0:E(!w),bsPrefix:D,expanded:!!w,expand:n}),[D,w,n,E]);return j.jsx(hf.Provider,{value:F,children:j.jsx(Qh.Provider,{value:$,children:j.jsx(_,{ref:t,...I,className:Yt(m,D,n&&B,a&&`${D}-${a}`,c&&`bg-${c}`,o&&`sticky-${o}`,f&&`fixed-${f}`)})})})});h6.displayName="Navbar";const Pa=Object.assign(h6,{Brand:NQ,Collapse:lee,Offcanvas:Uee,Text:Vee,Toggle:cee});function n_(){const e=lf();return j.jsx("div",{className:"custom-nav",children:j.jsx(Pa,{collapseOnSelect:!0,expand:"md",bg:"dark",variant:"dark",className:"w-100",children:j.jsxs(nQ,{children:[j.jsx(Pa.Brand,{href:"#home",children:"velocity"}),j.jsx(Pa.Toggle,{"aria-controls":"responsive-navbar-nav"}),j.jsx(Pa.Collapse,{id:"responsive-navbar-nav",children:j.jsxs(kM,{className:"me-auto",children:[j.jsx(Ni,{to:"/dashboard",className:`nav-link-with-gap ${e.pathname==="/dashboard"?"active":""}`,children:"Dashboard"}),j.jsx(Ni,{to:"/users",className:`nav-link-with-gap ${e.pathname==="/users"?"active":""}`,children:"Users"}),j.jsx(Ni,{to:"/driver-verification",className:`nav-link-with-gap ${e.pathname==="/driver-verification"?"active":""}`,children:"Driver Verification"}),j.jsx(Ni,{to:"/verifiedDriver",className:`nav-link-with-gap ${e.pathname==="/verifiedDriver"?"active":""}`,children:"Drivers"})]})})]})})})}function Wee(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Mu=Wee;const Wp=Hr(Mu);var qee=typeof wn=="object"&&wn&&wn.Object===Object&&wn,f6=qee,Gee=f6,Hee=typeof self=="object"&&self&&self.Object===Object&&self,Zee=Gee||Hee||Function("return this")(),il=Zee,Xee=il,Kee=Xee.Symbol,i_=Kee,Hj=i_,d6=Object.prototype,Yee=d6.hasOwnProperty,Jee=d6.toString,Hg=Hj?Hj.toStringTag:void 0;function Qee(e){var t=Yee.call(e,Hg),r=e[Hg];try{e[Hg]=void 0;var n=!0}catch{}var a=Jee.call(e);return n&&(t?e[Hg]=r:delete e[Hg]),a}var ete=Qee,tte=Object.prototype,rte=tte.toString;function nte(e){return rte.call(e)}var ite=nte,Zj=i_,ote=ete,ate=ite,ste="[object Null]",lte="[object Undefined]",Xj=Zj?Zj.toStringTag:void 0;function cte(e){return e==null?e===void 0?lte:ste:Xj&&Xj in Object(e)?ote(e):ate(e)}var ic=cte,ute=ic,hte=Mu,fte="[object AsyncFunction]",dte="[object Function]",pte="[object GeneratorFunction]",mte="[object Proxy]";function gte(e){if(!hte(e))return!1;var t=ute(e);return t==dte||t==pte||t==fte||t==mte}var zM=gte;const dr=Hr(zM);var yte=Array.isArray,mo=yte;const zi=Hr(mo);function vte(e){return e!=null&&typeof e=="object"}var oc=vte,_te=ic,xte=mo,bte=oc,wte="[object String]";function Ste(e){return typeof e=="string"||!xte(e)&&bte(e)&&_te(e)==wte}var Ete=Ste;const o_=Hr(Ete);var Tte=ic,Ate=oc,Cte="[object Symbol]";function Pte(e){return typeof e=="symbol"||Ate(e)&&Tte(e)==Cte}var qp=Pte,Ote=mo,Mte=qp,kte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ite=/^\w*$/;function Dte(e,t){if(Ote(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Mte(e)?!0:Ite.test(e)||!kte.test(e)||t!=null&&e in Object(t)}var BM=Dte,Rte=il,Lte=Rte["__core-js_shared__"],jte=Lte,O2=jte,Kj=function(){var e=/[^.]+$/.exec(O2&&O2.keys&&O2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $te(e){return!!Kj&&Kj in e}var Nte=$te,zte=Function.prototype,Bte=zte.toString;function Fte(e){if(e!=null){try{return Bte.call(e)}catch{}try{return e+""}catch{}}return""}var p6=Fte,Ute=zM,Vte=Nte,Wte=Mu,qte=p6,Gte=/[\\^$.*+?()[\]{}|]/g,Hte=/^\[object .+?Constructor\]$/,Zte=Function.prototype,Xte=Object.prototype,Kte=Zte.toString,Yte=Xte.hasOwnProperty,Jte=RegExp("^"+Kte.call(Yte).replace(Gte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qte(e){if(!Wte(e)||Vte(e))return!1;var t=Ute(e)?Jte:Hte;return t.test(qte(e))}var ere=Qte;function tre(e,t){return e==null?void 0:e[t]}var rre=tre,nre=ere,ire=rre;function ore(e,t){var r=ire(e,t);return nre(r)?r:void 0}var ff=ore,are=ff,sre=are(Object,"create"),Fw=sre,Yj=Fw;function lre(){this.__data__=Yj?Yj(null):{},this.size=0}var cre=lre;function ure(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var hre=ure,fre=Fw,dre="__lodash_hash_undefined__",pre=Object.prototype,mre=pre.hasOwnProperty;function gre(e){var t=this.__data__;if(fre){var r=t[e];return r===dre?void 0:r}return mre.call(t,e)?t[e]:void 0}var yre=gre,vre=Fw,_re=Object.prototype,xre=_re.hasOwnProperty;function bre(e){var t=this.__data__;return vre?t[e]!==void 0:xre.call(t,e)}var wre=bre,Sre=Fw,Ere="__lodash_hash_undefined__";function Tre(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sre&&t===void 0?Ere:t,this}var Are=Tre,Cre=cre,Pre=hre,Ore=yre,Mre=wre,kre=Are;function Gp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gp.prototype.clear=Cre;Gp.prototype.delete=Pre;Gp.prototype.get=Ore;Gp.prototype.has=Mre;Gp.prototype.set=kre;var Ire=Gp;function Dre(){this.__data__=[],this.size=0}var Rre=Dre;function Lre(e,t){return e===t||e!==e&&t!==t}var FM=Lre,jre=FM;function $re(e,t){for(var r=e.length;r--;)if(jre(e[r][0],t))return r;return-1}var Uw=$re,Nre=Uw,zre=Array.prototype,Bre=zre.splice;function Fre(e){var t=this.__data__,r=Nre(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Bre.call(t,r,1),--this.size,!0}var Ure=Fre,Vre=Uw;function Wre(e){var t=this.__data__,r=Vre(t,e);return r<0?void 0:t[r][1]}var qre=Wre,Gre=Uw;function Hre(e){return Gre(this.__data__,e)>-1}var Zre=Hre,Xre=Uw;function Kre(e,t){var r=this.__data__,n=Xre(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Yre=Kre,Jre=Rre,Qre=Ure,ene=qre,tne=Zre,rne=Yre;function Hp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hp.prototype.clear=Jre;Hp.prototype.delete=Qre;Hp.prototype.get=ene;Hp.prototype.has=tne;Hp.prototype.set=rne;var Vw=Hp,nne=ff,ine=il,one=nne(ine,"Map"),UM=one,Jj=Ire,ane=Vw,sne=UM;function lne(){this.size=0,this.__data__={hash:new Jj,map:new(sne||ane),string:new Jj}}var cne=lne;function une(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hne=une,fne=hne;function dne(e,t){var r=e.__data__;return fne(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ww=dne,pne=Ww;function mne(e){var t=pne(this,e).delete(e);return this.size-=t?1:0,t}var gne=mne,yne=Ww;function vne(e){return yne(this,e).get(e)}var _ne=vne,xne=Ww;function bne(e){return xne(this,e).has(e)}var wne=bne,Sne=Ww;function Ene(e,t){var r=Sne(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Tne=Ene,Ane=cne,Cne=gne,Pne=_ne,One=wne,Mne=Tne;function Zp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zp.prototype.clear=Ane;Zp.prototype.delete=Cne;Zp.prototype.get=Pne;Zp.prototype.has=One;Zp.prototype.set=Mne;var VM=Zp,m6=VM,kne="Expected a function";function WM(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kne);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],c=r.cache;if(c.has(a))return c.get(a);var f=e.apply(this,n);return r.cache=c.set(a,f)||c,f};return r.cache=new(WM.Cache||m6),r}WM.Cache=m6;var Ine=WM,Dne=Ine,Rne=500;function Lne(e){var t=Dne(e,function(n){return r.size===Rne&&r.clear(),n}),r=t.cache;return t}var jne=Lne,$ne=jne,Nne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zne=/\\(\\)?/g,Bne=$ne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Nne,function(r,n,a,c){t.push(a?c.replace(zne,"$1"):n||r)}),t}),Fne=Bne;function Une(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var qM=Une,Qj=i_,Vne=qM,Wne=mo,qne=qp,Gne=1/0,e$=Qj?Qj.prototype:void 0,t$=e$?e$.toString:void 0;function g6(e){if(typeof e=="string")return e;if(Wne(e))return Vne(e,g6)+"";if(qne(e))return t$?t$.call(e):"";var t=e+"";return t=="0"&&1/e==-Gne?"-0":t}var Hne=g6,Zne=Hne;function Xne(e){return e==null?"":Zne(e)}var y6=Xne,Kne=mo,Yne=BM,Jne=Fne,Qne=y6;function eie(e,t){return Kne(e)?e:Yne(e,t)?[e]:Jne(Qne(e))}var v6=eie,tie=qp,rie=1/0;function nie(e){if(typeof e=="string"||tie(e))return e;var t=e+"";return t=="0"&&1/e==-rie?"-0":t}var qw=nie,iie=v6,oie=qw;function aie(e,t){t=iie(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[oie(t[r++])];return r&&r==n?e:void 0}var GM=aie,sie=GM;function lie(e,t,r){var n=e==null?void 0:sie(e,t);return n===void 0?r:n}var _6=lie;const Ia=Hr(_6);function cie(e){return e==null}var uie=cie;const cr=Hr(uie);var x6={exports:{}},rn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=typeof Symbol=="function"&&Symbol.for,HM=Ii?Symbol.for("react.element"):60103,ZM=Ii?Symbol.for("react.portal"):60106,Gw=Ii?Symbol.for("react.fragment"):60107,Hw=Ii?Symbol.for("react.strict_mode"):60108,Zw=Ii?Symbol.for("react.profiler"):60114,Xw=Ii?Symbol.for("react.provider"):60109,Kw=Ii?Symbol.for("react.context"):60110,XM=Ii?Symbol.for("react.async_mode"):60111,Yw=Ii?Symbol.for("react.concurrent_mode"):60111,Jw=Ii?Symbol.for("react.forward_ref"):60112,Qw=Ii?Symbol.for("react.suspense"):60113,hie=Ii?Symbol.for("react.suspense_list"):60120,eS=Ii?Symbol.for("react.memo"):60115,tS=Ii?Symbol.for("react.lazy"):60116,fie=Ii?Symbol.for("react.block"):60121,die=Ii?Symbol.for("react.fundamental"):60117,pie=Ii?Symbol.for("react.responder"):60118,mie=Ii?Symbol.for("react.scope"):60119;function oa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case HM:switch(e=e.type,e){case XM:case Yw:case Gw:case Zw:case Hw:case Qw:return e;default:switch(e=e&&e.$$typeof,e){case Kw:case Jw:case tS:case eS:case Xw:return e;default:return t}}case ZM:return t}}}function b6(e){return oa(e)===Yw}rn.AsyncMode=XM;rn.ConcurrentMode=Yw;rn.ContextConsumer=Kw;rn.ContextProvider=Xw;rn.Element=HM;rn.ForwardRef=Jw;rn.Fragment=Gw;rn.Lazy=tS;rn.Memo=eS;rn.Portal=ZM;rn.Profiler=Zw;rn.StrictMode=Hw;rn.Suspense=Qw;rn.isAsyncMode=function(e){return b6(e)||oa(e)===XM};rn.isConcurrentMode=b6;rn.isContextConsumer=function(e){return oa(e)===Kw};rn.isContextProvider=function(e){return oa(e)===Xw};rn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===HM};rn.isForwardRef=function(e){return oa(e)===Jw};rn.isFragment=function(e){return oa(e)===Gw};rn.isLazy=function(e){return oa(e)===tS};rn.isMemo=function(e){return oa(e)===eS};rn.isPortal=function(e){return oa(e)===ZM};rn.isProfiler=function(e){return oa(e)===Zw};rn.isStrictMode=function(e){return oa(e)===Hw};rn.isSuspense=function(e){return oa(e)===Qw};rn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Gw||e===Yw||e===Zw||e===Hw||e===Qw||e===hie||typeof e=="object"&&e!==null&&(e.$$typeof===tS||e.$$typeof===eS||e.$$typeof===Xw||e.$$typeof===Kw||e.$$typeof===Jw||e.$$typeof===die||e.$$typeof===pie||e.$$typeof===mie||e.$$typeof===fie)};rn.typeOf=oa;x6.exports=rn;var gie=x6.exports,yie=ic,vie=oc,_ie="[object Number]";function xie(e){return typeof e=="number"||vie(e)&&yie(e)==_ie}var w6=xie;const bie=Hr(w6);var wie=w6;function Sie(e){return wie(e)&&e!=+e}var Eie=Sie;const a_=Hr(Eie);var bs=function(t){return t===0?0:t>0?1:-1},jh=function(t){return o_(t)&&t.indexOf("%")===t.length-1},Lt=function(t){return bie(t)&&!a_(t)},yi=function(t){return Lt(t)||o_(t)},Tie=0,s_=function(t){var r=++Tie;return"".concat(t||"").concat(r)},hp=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Lt(t)&&!o_(t))return n;var c;if(jh(t)){var f=t.indexOf("%");c=r*parseFloat(t.slice(0,f))/100}else c=+t;return a_(c)&&(c=n),a&&c>r&&(c=r),c},Vc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Aie=function(t){if(!zi(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},ys=function(t,r){return Lt(t)&&Lt(r)?function(n){return t+n*(r-t)}:function(){return r}};function H1(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ia(n,t))===r})}function Jd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function LC(e){"@babel/helpers - typeof";return LC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LC(e)}var Cie=["viewBox","children"],Pie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],r$=["points","pathLength"],M2={svg:Cie,polygon:r$,polyline:r$},KM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Z1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Y.isValidElement(t)&&(n=t.props),!Wp(n))return null;var a={};return Object.keys(n).forEach(function(c){KM.includes(c)&&(a[c]=r||function(f){return n[c](n,f)})}),a},Oie=function(t,r,n){return function(a){return t(r,n,a),null}},X1=function(t,r,n){if(!Wp(t)||LC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(c){var f=t[c];KM.includes(c)&&typeof f=="function"&&(a||(a={}),a[c]=Oie(f,r,n))}),a},Mie=["children"],kie=["children"];function n$(e,t){if(e==null)return{};var r=Iie(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Iie(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function jC(e){"@babel/helpers - typeof";return jC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jC(e)}var i$={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_u=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},o$=null,k2=null,YM=function e(t){if(t===o$&&zi(k2))return k2;var r=[];return Y.Children.forEach(t,function(n){cr(n)||(gie.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),k2=r,o$=t,r};function Da(e,t){var r=[],n=[];return zi(t)?n=t.map(function(a){return _u(a)}):n=[_u(t)],YM(e).forEach(function(a){var c=Ia(a,"type.displayName")||Ia(a,"type.name");n.indexOf(c)!==-1&&r.push(a)}),r}function jl(e,t){var r=Da(e,t);return r&&r[0]}var a$=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Lt(n)||n<=0||!Lt(a)||a<=0)},Die=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rie=function(t){return t&&t.type&&o_(t.type)&&Die.indexOf(t.type)>=0},Lie=function(t){return t&&jC(t)==="object"&&"cx"in t&&"cy"in t&&"r"in t},jie=function(t,r,n,a){var c,f=(c=M2==null?void 0:M2[a])!==null&&c!==void 0?c:[];return!dr(t)&&(a&&f.includes(r)||Pie.includes(r))||n&&KM.includes(r)},Rr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(Y.isValidElement(t)&&(a=t.props),!Wp(a))return null;var c={};return Object.keys(a).forEach(function(f){var o;jie((o=a)===null||o===void 0?void 0:o[f],f,r,n)&&(c[f]=a[f])}),c},S6=function e(t,r){if(t===r)return!0;var n=Y.Children.count(t);if(n!==Y.Children.count(r))return!1;if(n===0)return!0;if(n===1)return s$(zi(t)?t[0]:t,zi(r)?r[0]:r);for(var a=0;a<n;a++){var c=t[a],f=r[a];if(zi(c)||zi(f)){if(!e(c,f))return!1}else if(!s$(c,f))return!1}return!0},s$=function(t,r){if(cr(t)&&cr(r))return!0;if(!cr(t)&&!cr(r)){var n=t.props||{},a=n.children,c=n$(n,Mie),f=r.props||{},o=f.children,m=n$(f,kie);return a&&o?Jd(c,m)&&S6(a,o):!a&&!o?Jd(c,m):!1}return!1},l$=function(t,r){var n=[],a={};return YM(t).forEach(function(c,f){if(Rie(c))n.push(c);else if(c){var o=_u(c.type),m=r[o]||{},_=m.handler,w=m.once;if(_&&(!w||!a[o])){var E=_(c,o,f);n.push(E),a[o]=!0}}}),n},$ie=function(t){var r=t&&t.type;return r&&i$[r]?i$[r]:null},Nie=function(t,r){return YM(r).indexOf(t)},zie=["children","width","height","viewBox","className","style"];function $C(){return $C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$C.apply(this,arguments)}function Bie(e,t){if(e==null)return{};var r=Fie(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fie(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function NC(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,c=e.className,f=e.style,o=Bie(e,zie),m=a||{width:r,height:n,x:0,y:0},_=Yt("recharts-surface",c);return Se.createElement("svg",$C({},Rr(o,!0,"svg"),{className:_,width:r,height:n,style:f,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),Se.createElement("title",null,e.title),Se.createElement("desc",null,e.desc),t)}var Uie=["children","className"];function zC(){return zC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zC.apply(this,arguments)}function Vie(e,t){if(e==null)return{};var r=Wie(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wie(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var Kn=Se.forwardRef(function(e,t){var r=e.children,n=e.className,a=Vie(e,Uie),c=Yt("recharts-layer",n);return Se.createElement("g",zC({className:c},Rr(a,!0),{ref:t}),r)}),qie=Vw;function Gie(){this.__data__=new qie,this.size=0}var Hie=Gie;function Zie(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Xie=Zie;function Kie(e){return this.__data__.get(e)}var Yie=Kie;function Jie(e){return this.__data__.has(e)}var Qie=Jie,eoe=Vw,toe=UM,roe=VM,noe=200;function ioe(e,t){var r=this.__data__;if(r instanceof eoe){var n=r.__data__;if(!toe||n.length<noe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new roe(n)}return r.set(e,t),this.size=r.size,this}var ooe=ioe,aoe=Vw,soe=Hie,loe=Xie,coe=Yie,uoe=Qie,hoe=ooe;function Xp(e){var t=this.__data__=new aoe(e);this.size=t.size}Xp.prototype.clear=soe;Xp.prototype.delete=loe;Xp.prototype.get=coe;Xp.prototype.has=uoe;Xp.prototype.set=hoe;var E6=Xp,foe="__lodash_hash_undefined__";function doe(e){return this.__data__.set(e,foe),this}var poe=doe;function moe(e){return this.__data__.has(e)}var goe=moe,yoe=VM,voe=poe,_oe=goe;function K1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new yoe;++t<r;)this.add(e[t])}K1.prototype.add=K1.prototype.push=voe;K1.prototype.has=_oe;var T6=K1;function xoe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var A6=xoe;function boe(e,t){return e.has(t)}var C6=boe,woe=T6,Soe=A6,Eoe=C6,Toe=1,Aoe=2;function Coe(e,t,r,n,a,c){var f=r&Toe,o=e.length,m=t.length;if(o!=m&&!(f&&m>o))return!1;var _=c.get(e),w=c.get(t);if(_&&w)return _==t&&w==e;var E=-1,C=!0,M=r&Aoe?new woe:void 0;for(c.set(e,t),c.set(t,e);++E<o;){var I=e[E],D=t[E];if(n)var $=f?n(D,I,E,t,e,c):n(I,D,E,e,t,c);if($!==void 0){if($)continue;C=!1;break}if(M){if(!Soe(t,function(B,F){if(!Eoe(M,F)&&(I===B||a(I,B,r,n,c)))return M.push(F)})){C=!1;break}}else if(!(I===D||a(I,D,r,n,c))){C=!1;break}}return c.delete(e),c.delete(t),C}var P6=Coe,Poe=il,Ooe=Poe.Uint8Array,Moe=Ooe;function koe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Ioe=koe;function Doe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var JM=Doe,c$=i_,u$=Moe,Roe=FM,Loe=P6,joe=Ioe,$oe=JM,Noe=1,zoe=2,Boe="[object Boolean]",Foe="[object Date]",Uoe="[object Error]",Voe="[object Map]",Woe="[object Number]",qoe="[object RegExp]",Goe="[object Set]",Hoe="[object String]",Zoe="[object Symbol]",Xoe="[object ArrayBuffer]",Koe="[object DataView]",h$=c$?c$.prototype:void 0,I2=h$?h$.valueOf:void 0;function Yoe(e,t,r,n,a,c,f){switch(r){case Koe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xoe:return!(e.byteLength!=t.byteLength||!c(new u$(e),new u$(t)));case Boe:case Foe:case Woe:return Roe(+e,+t);case Uoe:return e.name==t.name&&e.message==t.message;case qoe:case Hoe:return e==t+"";case Voe:var o=joe;case Goe:var m=n&Noe;if(o||(o=$oe),e.size!=t.size&&!m)return!1;var _=f.get(e);if(_)return _==t;n|=zoe,f.set(e,t);var w=Loe(o(e),o(t),n,a,c,f);return f.delete(e),w;case Zoe:if(I2)return I2.call(e)==I2.call(t)}return!1}var Joe=Yoe;function Qoe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var O6=Qoe,eae=O6,tae=mo;function rae(e,t,r){var n=t(e);return tae(e)?n:eae(n,r(e))}var nae=rae;function iae(e,t){for(var r=-1,n=e==null?0:e.length,a=0,c=[];++r<n;){var f=e[r];t(f,r,e)&&(c[a++]=f)}return c}var oae=iae;function aae(){return[]}var sae=aae,lae=oae,cae=sae,uae=Object.prototype,hae=uae.propertyIsEnumerable,f$=Object.getOwnPropertySymbols,fae=f$?function(e){return e==null?[]:(e=Object(e),lae(f$(e),function(t){return hae.call(e,t)}))}:cae,dae=fae;function pae(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var mae=pae,gae=ic,yae=oc,vae="[object Arguments]";function _ae(e){return yae(e)&&gae(e)==vae}var xae=_ae,d$=xae,bae=oc,M6=Object.prototype,wae=M6.hasOwnProperty,Sae=M6.propertyIsEnumerable,Eae=d$(function(){return arguments}())?d$:function(e){return bae(e)&&wae.call(e,"callee")&&!Sae.call(e,"callee")},QM=Eae,Y1={exports:{}};function Tae(){return!1}var Aae=Tae;Y1.exports;(function(e,t){var r=il,n=Aae,a=t&&!t.nodeType&&t,c=a&&!0&&e&&!e.nodeType&&e,f=c&&c.exports===a,o=f?r.Buffer:void 0,m=o?o.isBuffer:void 0,_=m||n;e.exports=_})(Y1,Y1.exports);var k6=Y1.exports,Cae=9007199254740991,Pae=/^(?:0|[1-9]\d*)$/;function Oae(e,t){var r=typeof e;return t=t??Cae,!!t&&(r=="number"||r!="symbol"&&Pae.test(e))&&e>-1&&e%1==0&&e<t}var ek=Oae,Mae=9007199254740991;function kae(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mae}var tk=kae,Iae=ic,Dae=tk,Rae=oc,Lae="[object Arguments]",jae="[object Array]",$ae="[object Boolean]",Nae="[object Date]",zae="[object Error]",Bae="[object Function]",Fae="[object Map]",Uae="[object Number]",Vae="[object Object]",Wae="[object RegExp]",qae="[object Set]",Gae="[object String]",Hae="[object WeakMap]",Zae="[object ArrayBuffer]",Xae="[object DataView]",Kae="[object Float32Array]",Yae="[object Float64Array]",Jae="[object Int8Array]",Qae="[object Int16Array]",ese="[object Int32Array]",tse="[object Uint8Array]",rse="[object Uint8ClampedArray]",nse="[object Uint16Array]",ise="[object Uint32Array]",xn={};xn[Kae]=xn[Yae]=xn[Jae]=xn[Qae]=xn[ese]=xn[tse]=xn[rse]=xn[nse]=xn[ise]=!0;xn[Lae]=xn[jae]=xn[Zae]=xn[$ae]=xn[Xae]=xn[Nae]=xn[zae]=xn[Bae]=xn[Fae]=xn[Uae]=xn[Vae]=xn[Wae]=xn[qae]=xn[Gae]=xn[Hae]=!1;function ose(e){return Rae(e)&&Dae(e.length)&&!!xn[Iae(e)]}var ase=ose;function sse(e){return function(t){return e(t)}}var I6=sse,J1={exports:{}};J1.exports;(function(e,t){var r=f6,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,c=a&&a.exports===n,f=c&&r.process,o=function(){try{var m=a&&a.require&&a.require("util").types;return m||f&&f.binding&&f.binding("util")}catch{}}();e.exports=o})(J1,J1.exports);var lse=J1.exports,cse=ase,use=I6,p$=lse,m$=p$&&p$.isTypedArray,hse=m$?use(m$):cse,D6=hse,fse=mae,dse=QM,pse=mo,mse=k6,gse=ek,yse=D6,vse=Object.prototype,_se=vse.hasOwnProperty;function xse(e,t){var r=pse(e),n=!r&&dse(e),a=!r&&!n&&mse(e),c=!r&&!n&&!a&&yse(e),f=r||n||a||c,o=f?fse(e.length,String):[],m=o.length;for(var _ in e)(t||_se.call(e,_))&&!(f&&(_=="length"||a&&(_=="offset"||_=="parent")||c&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||gse(_,m)))&&o.push(_);return o}var bse=xse,wse=Object.prototype;function Sse(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||wse;return e===r}var Ese=Sse;function Tse(e,t){return function(r){return e(t(r))}}var R6=Tse,Ase=R6,Cse=Ase(Object.keys,Object),Pse=Cse,Ose=Ese,Mse=Pse,kse=Object.prototype,Ise=kse.hasOwnProperty;function Dse(e){if(!Ose(e))return Mse(e);var t=[];for(var r in Object(e))Ise.call(e,r)&&r!="constructor"&&t.push(r);return t}var Rse=Dse,Lse=zM,jse=tk;function $se(e){return e!=null&&jse(e.length)&&!Lse(e)}var l_=$se,Nse=bse,zse=Rse,Bse=l_;function Fse(e){return Bse(e)?Nse(e):zse(e)}var rS=Fse,Use=nae,Vse=dae,Wse=rS;function qse(e){return Use(e,Wse,Vse)}var Gse=qse,g$=Gse,Hse=1,Zse=Object.prototype,Xse=Zse.hasOwnProperty;function Kse(e,t,r,n,a,c){var f=r&Hse,o=g$(e),m=o.length,_=g$(t),w=_.length;if(m!=w&&!f)return!1;for(var E=m;E--;){var C=o[E];if(!(f?C in t:Xse.call(t,C)))return!1}var M=c.get(e),I=c.get(t);if(M&&I)return M==t&&I==e;var D=!0;c.set(e,t),c.set(t,e);for(var $=f;++E<m;){C=o[E];var B=e[C],F=t[C];if(n)var R=f?n(F,B,C,t,e,c):n(B,F,C,e,t,c);if(!(R===void 0?B===F||a(B,F,r,n,c):R)){D=!1;break}$||($=C=="constructor")}if(D&&!$){var U=e.constructor,H=t.constructor;U!=H&&"constructor"in e&&"constructor"in t&&!(typeof U=="function"&&U instanceof U&&typeof H=="function"&&H instanceof H)&&(D=!1)}return c.delete(e),c.delete(t),D}var Yse=Kse,Jse=ff,Qse=il,ele=Jse(Qse,"DataView"),tle=ele,rle=ff,nle=il,ile=rle(nle,"Promise"),ole=ile,ale=ff,sle=il,lle=ale(sle,"Set"),L6=lle,cle=ff,ule=il,hle=cle(ule,"WeakMap"),fle=hle,BC=tle,FC=UM,UC=ole,VC=L6,WC=fle,j6=ic,Kp=p6,y$="[object Map]",dle="[object Object]",v$="[object Promise]",_$="[object Set]",x$="[object WeakMap]",b$="[object DataView]",ple=Kp(BC),mle=Kp(FC),gle=Kp(UC),yle=Kp(VC),vle=Kp(WC),Oh=j6;(BC&&Oh(new BC(new ArrayBuffer(1)))!=b$||FC&&Oh(new FC)!=y$||UC&&Oh(UC.resolve())!=v$||VC&&Oh(new VC)!=_$||WC&&Oh(new WC)!=x$)&&(Oh=function(e){var t=j6(e),r=t==dle?e.constructor:void 0,n=r?Kp(r):"";if(n)switch(n){case ple:return b$;case mle:return y$;case gle:return v$;case yle:return _$;case vle:return x$}return t});var _le=Oh,D2=E6,xle=P6,ble=Joe,wle=Yse,w$=_le,S$=mo,E$=k6,Sle=D6,Ele=1,T$="[object Arguments]",A$="[object Array]",Tx="[object Object]",Tle=Object.prototype,C$=Tle.hasOwnProperty;function Ale(e,t,r,n,a,c){var f=S$(e),o=S$(t),m=f?A$:w$(e),_=o?A$:w$(t);m=m==T$?Tx:m,_=_==T$?Tx:_;var w=m==Tx,E=_==Tx,C=m==_;if(C&&E$(e)){if(!E$(t))return!1;f=!0,w=!1}if(C&&!w)return c||(c=new D2),f||Sle(e)?xle(e,t,r,n,a,c):ble(e,t,m,r,n,a,c);if(!(r&Ele)){var M=w&&C$.call(e,"__wrapped__"),I=E&&C$.call(t,"__wrapped__");if(M||I){var D=M?e.value():e,$=I?t.value():t;return c||(c=new D2),a(D,$,r,n,c)}}return C?(c||(c=new D2),wle(e,t,r,n,a,c)):!1}var Cle=Ale,Ple=Cle,P$=oc;function $6(e,t,r,n,a){return e===t?!0:e==null||t==null||!P$(e)&&!P$(t)?e!==e&&t!==t:Ple(e,t,r,n,$6,a)}var rk=$6,Ole=E6,Mle=rk,kle=1,Ile=2;function Dle(e,t,r,n){var a=r.length,c=a,f=!n;if(e==null)return!c;for(e=Object(e);a--;){var o=r[a];if(f&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<c;){o=r[a];var m=o[0],_=e[m],w=o[1];if(f&&o[2]){if(_===void 0&&!(m in e))return!1}else{var E=new Ole;if(n)var C=n(_,w,m,e,t,E);if(!(C===void 0?Mle(w,_,kle|Ile,n,E):C))return!1}}return!0}var Rle=Dle,Lle=Mu;function jle(e){return e===e&&!Lle(e)}var N6=jle,$le=N6,Nle=rS;function zle(e){for(var t=Nle(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,$le(a)]}return t}var Ble=zle;function Fle(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var z6=Fle,Ule=Rle,Vle=Ble,Wle=z6;function qle(e){var t=Vle(e);return t.length==1&&t[0][2]?Wle(t[0][0],t[0][1]):function(r){return r===e||Ule(r,e,t)}}var Gle=qle;function Hle(e,t){return e!=null&&t in Object(e)}var Zle=Hle,Xle=v6,Kle=QM,Yle=mo,Jle=ek,Qle=tk,ece=qw;function tce(e,t,r){t=Xle(t,e);for(var n=-1,a=t.length,c=!1;++n<a;){var f=ece(t[n]);if(!(c=e!=null&&r(e,f)))break;e=e[f]}return c||++n!=a?c:(a=e==null?0:e.length,!!a&&Qle(a)&&Jle(f,a)&&(Yle(e)||Kle(e)))}var rce=tce,nce=Zle,ice=rce;function oce(e,t){return e!=null&&ice(e,t,nce)}var ace=oce,sce=rk,lce=_6,cce=ace,uce=BM,hce=N6,fce=z6,dce=qw,pce=1,mce=2;function gce(e,t){return uce(e)&&hce(t)?fce(dce(e),t):function(r){var n=lce(r,e);return n===void 0&&n===t?cce(r,e):sce(t,n,pce|mce)}}var yce=gce;function vce(e){return e}var Yp=vce;function _ce(e){return function(t){return t==null?void 0:t[e]}}var xce=_ce,bce=GM;function wce(e){return function(t){return bce(t,e)}}var Sce=wce,Ece=xce,Tce=Sce,Ace=BM,Cce=qw;function Pce(e){return Ace(e)?Ece(Cce(e)):Tce(e)}var Oce=Pce,Mce=Gle,kce=yce,Ice=Yp,Dce=mo,Rce=Oce;function Lce(e){return typeof e=="function"?e:e==null?Ice:typeof e=="object"?Dce(e)?kce(e[0],e[1]):Mce(e):Rce(e)}var ku=Lce;function jce(e,t,r,n){for(var a=e.length,c=r+(n?1:-1);n?c--:++c<a;)if(t(e[c],c,e))return c;return-1}var B6=jce;function $ce(e){return e!==e}var Nce=$ce;function zce(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Bce=zce,Fce=B6,Uce=Nce,Vce=Bce;function Wce(e,t,r){return t===t?Vce(e,t,r):Fce(e,Uce,r)}var qce=Wce,Gce=qce;function Hce(e,t){var r=e==null?0:e.length;return!!r&&Gce(e,t,0)>-1}var Zce=Hce;function Xce(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Kce=Xce;function Yce(){}var Jce=Yce,R2=L6,Qce=Jce,eue=JM,tue=1/0,rue=R2&&1/eue(new R2([,-0]))[1]==tue?function(e){return new R2(e)}:Qce,nue=rue,iue=T6,oue=Zce,aue=Kce,sue=C6,lue=nue,cue=JM,uue=200;function hue(e,t,r){var n=-1,a=oue,c=e.length,f=!0,o=[],m=o;if(r)f=!1,a=aue;else if(c>=uue){var _=t?null:lue(e);if(_)return cue(_);f=!1,a=sue,m=new iue}else m=t?[]:o;e:for(;++n<c;){var w=e[n],E=t?t(w):w;if(w=r||w!==0?w:0,f&&E===E){for(var C=m.length;C--;)if(m[C]===E)continue e;t&&m.push(E),o.push(w)}else a(m,E,r)||(m!==o&&m.push(E),o.push(w))}return o}var fue=hue,due=ku,pue=fue;function mue(e,t){return e&&e.length?pue(e,due(t)):[]}var gue=mue;const Q1=Hr(gue);var Uh=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),c=2;c<n;c++)a[c-2]=arguments[c]};function yue(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var c=Array(a);++n<a;)c[n]=e[n+t];return c}var vue=yue,_ue=vue;function xue(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:_ue(e,t,r)}var bue=xue,wue="\\ud800-\\udfff",Sue="\\u0300-\\u036f",Eue="\\ufe20-\\ufe2f",Tue="\\u20d0-\\u20ff",Aue=Sue+Eue+Tue,Cue="\\ufe0e\\ufe0f",Pue="\\u200d",Oue=RegExp("["+Pue+wue+Aue+Cue+"]");function Mue(e){return Oue.test(e)}var F6=Mue;function kue(e){return e.split("")}var Iue=kue,U6="\\ud800-\\udfff",Due="\\u0300-\\u036f",Rue="\\ufe20-\\ufe2f",Lue="\\u20d0-\\u20ff",jue=Due+Rue+Lue,$ue="\\ufe0e\\ufe0f",Nue="["+U6+"]",qC="["+jue+"]",GC="\\ud83c[\\udffb-\\udfff]",zue="(?:"+qC+"|"+GC+")",V6="[^"+U6+"]",W6="(?:\\ud83c[\\udde6-\\uddff]){2}",q6="[\\ud800-\\udbff][\\udc00-\\udfff]",Bue="\\u200d",G6=zue+"?",H6="["+$ue+"]?",Fue="(?:"+Bue+"(?:"+[V6,W6,q6].join("|")+")"+H6+G6+")*",Uue=H6+G6+Fue,Vue="(?:"+[V6+qC+"?",qC,W6,q6,Nue].join("|")+")",Wue=RegExp(GC+"(?="+GC+")|"+Vue+Uue,"g");function que(e){return e.match(Wue)||[]}var Gue=que,Hue=Iue,Zue=F6,Xue=Gue;function Kue(e){return Zue(e)?Xue(e):Hue(e)}var Yue=Kue,Jue=bue,Que=F6,ehe=Yue,the=y6;function rhe(e){return function(t){t=the(t);var r=Que(t)?ehe(t):void 0,n=r?r[0]:t.charAt(0),a=r?Jue(r,1).join(""):t.slice(1);return n[e]()+a}}var nhe=rhe,ihe=nhe,ohe=ihe("toUpperCase"),ahe=ohe;const nS=Hr(ahe);function dn(e){return function(){return e}}const Z6=Math.cos,eb=Math.sin,As=Math.sqrt,tb=Math.PI,iS=2*tb,HC=Math.PI,ZC=2*HC,Mh=1e-6,she=ZC-Mh;function X6(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function lhe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return X6;const r=10**t;return function(n){this._+=n[0];for(let a=1,c=n.length;a<c;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class che{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?X6:lhe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,c,f){this._append`C${+t},${+r},${+n},${+a},${this._x1=+c},${this._y1=+f}`}arcTo(t,r,n,a,c){if(t=+t,r=+r,n=+n,a=+a,c=+c,c<0)throw new Error(`negative radius: ${c}`);let f=this._x1,o=this._y1,m=n-t,_=a-r,w=f-t,E=o-r,C=w*w+E*E;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(C>Mh)if(!(Math.abs(E*m-_*w)>Mh)||!c)this._append`L${this._x1=t},${this._y1=r}`;else{let M=n-f,I=a-o,D=m*m+_*_,$=M*M+I*I,B=Math.sqrt(D),F=Math.sqrt(C),R=c*Math.tan((HC-Math.acos((D+C-$)/(2*B*F)))/2),U=R/F,H=R/B;Math.abs(U-1)>Mh&&this._append`L${t+U*w},${r+U*E}`,this._append`A${c},${c},0,0,${+(E*M>w*I)},${this._x1=t+H*m},${this._y1=r+H*_}`}}arc(t,r,n,a,c,f){if(t=+t,r=+r,n=+n,f=!!f,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),m=n*Math.sin(a),_=t+o,w=r+m,E=1^f,C=f?a-c:c-a;this._x1===null?this._append`M${_},${w}`:(Math.abs(this._x1-_)>Mh||Math.abs(this._y1-w)>Mh)&&this._append`L${_},${w}`,n&&(C<0&&(C=C%ZC+ZC),C>she?this._append`A${n},${n},0,1,${E},${t-o},${r-m}A${n},${n},0,1,${E},${this._x1=_},${this._y1=w}`:C>Mh&&this._append`A${n},${n},0,${+(C>=HC)},${E},${this._x1=t+n*Math.cos(c)},${this._y1=r+n*Math.sin(c)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function nk(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new che(t)}function ik(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function K6(e){this._context=e}K6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oS(e){return new K6(e)}function Y6(e){return e[0]}function J6(e){return e[1]}function Q6(e,t){var r=dn(!0),n=null,a=oS,c=null,f=nk(o);e=typeof e=="function"?e:e===void 0?Y6:dn(e),t=typeof t=="function"?t:t===void 0?J6:dn(t);function o(m){var _,w=(m=ik(m)).length,E,C=!1,M;for(n==null&&(c=a(M=f())),_=0;_<=w;++_)!(_<w&&r(E=m[_],_,m))===C&&((C=!C)?c.lineStart():c.lineEnd()),C&&c.point(+e(E,_,m),+t(E,_,m));if(M)return c=null,M+""||null}return o.x=function(m){return arguments.length?(e=typeof m=="function"?m:dn(+m),o):e},o.y=function(m){return arguments.length?(t=typeof m=="function"?m:dn(+m),o):t},o.defined=function(m){return arguments.length?(r=typeof m=="function"?m:dn(!!m),o):r},o.curve=function(m){return arguments.length?(a=m,n!=null&&(c=a(n)),o):a},o.context=function(m){return arguments.length?(m==null?n=c=null:c=a(n=m),o):n},o}function Ax(e,t,r){var n=null,a=dn(!0),c=null,f=oS,o=null,m=nk(_);e=typeof e=="function"?e:e===void 0?Y6:dn(+e),t=typeof t=="function"?t:dn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?J6:dn(+r);function _(E){var C,M,I,D=(E=ik(E)).length,$,B=!1,F,R=new Array(D),U=new Array(D);for(c==null&&(o=f(F=m())),C=0;C<=D;++C){if(!(C<D&&a($=E[C],C,E))===B)if(B=!B)M=C,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),I=C-1;I>=M;--I)o.point(R[I],U[I]);o.lineEnd(),o.areaEnd()}B&&(R[C]=+e($,C,E),U[C]=+t($,C,E),o.point(n?+n($,C,E):R[C],r?+r($,C,E):U[C]))}if(F)return o=null,F+""||null}function w(){return Q6().defined(a).curve(f).context(c)}return _.x=function(E){return arguments.length?(e=typeof E=="function"?E:dn(+E),n=null,_):e},_.x0=function(E){return arguments.length?(e=typeof E=="function"?E:dn(+E),_):e},_.x1=function(E){return arguments.length?(n=E==null?null:typeof E=="function"?E:dn(+E),_):n},_.y=function(E){return arguments.length?(t=typeof E=="function"?E:dn(+E),r=null,_):t},_.y0=function(E){return arguments.length?(t=typeof E=="function"?E:dn(+E),_):t},_.y1=function(E){return arguments.length?(r=E==null?null:typeof E=="function"?E:dn(+E),_):r},_.lineX0=_.lineY0=function(){return w().x(e).y(t)},_.lineY1=function(){return w().x(e).y(r)},_.lineX1=function(){return w().x(n).y(t)},_.defined=function(E){return arguments.length?(a=typeof E=="function"?E:dn(!!E),_):a},_.curve=function(E){return arguments.length?(f=E,c!=null&&(o=f(c)),_):f},_.context=function(E){return arguments.length?(E==null?c=o=null:o=f(c=E),_):c},_}class eV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function uhe(e){return new eV(e,!0)}function hhe(e){return new eV(e,!1)}const ok={draw(e,t){const r=As(t/tb);e.moveTo(r,0),e.arc(0,0,r,0,iS)}},fhe={draw(e,t){const r=As(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},tV=As(1/3),dhe=tV*2,phe={draw(e,t){const r=As(t/dhe),n=r*tV;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},mhe={draw(e,t){const r=As(t),n=-r/2;e.rect(n,n,r,r)}},ghe=.8908130915292852,rV=eb(tb/10)/eb(7*tb/10),yhe=eb(iS/10)*rV,vhe=-Z6(iS/10)*rV,_he={draw(e,t){const r=As(t*ghe),n=yhe*r,a=vhe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let c=1;c<5;++c){const f=iS*c/5,o=Z6(f),m=eb(f);e.lineTo(m*r,-o*r),e.lineTo(o*n-m*a,m*n+o*a)}e.closePath()}},L2=As(3),xhe={draw(e,t){const r=-As(t/(L2*3));e.moveTo(0,r*2),e.lineTo(-L2*r,-r),e.lineTo(L2*r,-r),e.closePath()}},ya=-.5,va=As(3)/2,XC=1/As(12),bhe=(XC/2+1)*3,whe={draw(e,t){const r=As(t/bhe),n=r/2,a=r*XC,c=n,f=r*XC+r,o=-c,m=f;e.moveTo(n,a),e.lineTo(c,f),e.lineTo(o,m),e.lineTo(ya*n-va*a,va*n+ya*a),e.lineTo(ya*c-va*f,va*c+ya*f),e.lineTo(ya*o-va*m,va*o+ya*m),e.lineTo(ya*n+va*a,ya*a-va*n),e.lineTo(ya*c+va*f,ya*f-va*c),e.lineTo(ya*o+va*m,ya*m-va*o),e.closePath()}};function She(e,t){let r=null,n=nk(a);e=typeof e=="function"?e:dn(e||ok),t=typeof t=="function"?t:dn(t===void 0?64:+t);function a(){let c;if(r||(r=c=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),c)return r=null,c+""||null}return a.type=function(c){return arguments.length?(e=typeof c=="function"?c:dn(c),a):e},a.size=function(c){return arguments.length?(t=typeof c=="function"?c:dn(+c),a):t},a.context=function(c){return arguments.length?(r=c??null,a):r},a}function rb(){}function nb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function nV(e){this._context=e}nV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ehe(e){return new nV(e)}function iV(e){this._context=e}iV.prototype={areaStart:rb,areaEnd:rb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function The(e){return new iV(e)}function oV(e){this._context=e}oV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:nb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ahe(e){return new oV(e)}function aV(e){this._context=e}aV.prototype={areaStart:rb,areaEnd:rb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Che(e){return new aV(e)}function O$(e){return e<0?-1:1}function M$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,c=(e._y1-e._y0)/(n||a<0&&-0),f=(r-e._y1)/(a||n<0&&-0),o=(c*a+f*n)/(n+a);return(O$(c)+O$(f))*Math.min(Math.abs(c),Math.abs(f),.5*Math.abs(o))||0}function k$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function j2(e,t,r){var n=e._x0,a=e._y0,c=e._x1,f=e._y1,o=(c-n)/3;e._context.bezierCurveTo(n+o,a+o*t,c-o,f-o*r,c,f)}function ib(e){this._context=e}ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:j2(this,this._t0,k$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,j2(this,k$(this,r=M$(this,e,t)),r);break;default:j2(this,this._t0,r=M$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function sV(e){this._context=new lV(e)}(sV.prototype=Object.create(ib.prototype)).point=function(e,t){ib.prototype.point.call(this,t,e)};function lV(e){this._context=e}lV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,c){this._context.bezierCurveTo(t,e,n,r,c,a)}};function Phe(e){return new ib(e)}function Ohe(e){return new sV(e)}function cV(e){this._context=e}cV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=I$(e),a=I$(t),c=0,f=1;f<r;++c,++f)this._context.bezierCurveTo(n[0][c],a[0][c],n[1][c],a[1][c],e[f],t[f]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function I$(e){var t,r=e.length-1,n,a=new Array(r),c=new Array(r),f=new Array(r);for(a[0]=0,c[0]=2,f[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,c[t]=4,f[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,c[r-1]=7,f[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/c[t-1],c[t]-=n,f[t]-=n*f[t-1];for(a[r-1]=f[r-1]/c[r-1],t=r-2;t>=0;--t)a[t]=(f[t]-a[t+1])/c[t];for(c[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)c[t]=2*e[t+1]-a[t+1];return[a,c]}function Mhe(e){return new cV(e)}function aS(e,t){this._context=e,this._t=t}aS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function khe(e){return new aS(e,.5)}function Ihe(e){return new aS(e,0)}function Dhe(e){return new aS(e,1)}function fp(e,t){if((f=e.length)>1)for(var r=1,n,a,c=e[t[0]],f,o=c.length;r<f;++r)for(a=c,c=e[t[r]],n=0;n<o;++n)c[n][1]+=c[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function KC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Rhe(e,t){return e[t]}function Lhe(e){const t=[];return t.key=e,t}function jhe(){var e=dn([]),t=KC,r=fp,n=Rhe;function a(c){var f=Array.from(e.apply(this,arguments),Lhe),o,m=f.length,_=-1,w;for(const E of c)for(o=0,++_;o<m;++o)(f[o][_]=[0,+n(E,f[o].key,_,c)]).data=E;for(o=0,w=ik(t(f));o<m;++o)f[w[o]].index=o;return r(f,w),f}return a.keys=function(c){return arguments.length?(e=typeof c=="function"?c:dn(Array.from(c)),a):e},a.value=function(c){return arguments.length?(n=typeof c=="function"?c:dn(+c),a):n},a.order=function(c){return arguments.length?(t=c==null?KC:typeof c=="function"?c:dn(Array.from(c)),a):t},a.offset=function(c){return arguments.length?(r=c??fp,a):r},a}function $he(e,t){if((n=e.length)>0){for(var r,n,a=0,c=e[0].length,f;a<c;++a){for(f=r=0;r<n;++r)f+=e[r][a][1]||0;if(f)for(r=0;r<n;++r)e[r][a][1]/=f}fp(e,t)}}function Nhe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,c=n.length;r<c;++r){for(var f=0,o=0;f<a;++f)o+=e[f][r][1]||0;n[r][1]+=n[r][0]=-o/2}fp(e,t)}}function zhe(e,t){if(!(!((f=e.length)>0)||!((c=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,c,f;n<c;++n){for(var o=0,m=0,_=0;o<f;++o){for(var w=e[t[o]],E=w[n][1]||0,C=w[n-1][1]||0,M=(E-C)/2,I=0;I<o;++I){var D=e[t[I]],$=D[n][1]||0,B=D[n-1][1]||0;M+=$-B}m+=E,_+=M*E}a[n-1][1]+=a[n-1][0]=r,m&&(r-=_/m)}a[n-1][1]+=a[n-1][0]=r,fp(e,t)}}function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}var Bhe=["type","size","sizeType"];function YC(){return YC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YC.apply(this,arguments)}function D$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(r),!0).forEach(function(n){Fhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fhe(e,t,r){return t=Uhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uhe(e){var t=Vhe(e,"string");return lv(t)==="symbol"?t:String(t)}function Vhe(e,t){if(lv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Whe(e,t){if(e==null)return{};var r=qhe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qhe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var uV={symbolCircle:ok,symbolCross:fhe,symbolDiamond:phe,symbolSquare:mhe,symbolStar:_he,symbolTriangle:xhe,symbolWye:whe},Ghe=Math.PI/180,Hhe=function(t){var r="symbol".concat(nS(t));return uV[r]||ok},Zhe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Ghe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Xhe=function(t,r){uV["symbol".concat(nS(t))]=r},ak=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,c=a===void 0?64:a,f=t.sizeType,o=f===void 0?"area":f,m=Whe(t,Bhe),_=R$(R$({},m),{},{type:n,size:c,sizeType:o}),w=function(){var $=Hhe(n),B=She().type($).size(Zhe(c,o,n));return B()},E=_.className,C=_.cx,M=_.cy,I=Rr(_,!0);return C===+C&&M===+M&&c===+c?Se.createElement("path",YC({},I,{className:Yt("recharts-symbols",E),transform:"translate(".concat(C,", ").concat(M,")"),d:w()})):null};ak.registerSymbol=Xhe;function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function JC(){return JC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JC.apply(this,arguments)}function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Khe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){cv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hV(n.key),n)}}function Jhe(e,t,r){return t&&j$(e.prototype,t),r&&j$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}function QC(e,t){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QC(e,t)}function efe(e){var t=nfe();return function(){var n=ob(e),a;if(t){var c=ob(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return tfe(this,a)}}function tfe(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rfe(e)}function rfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(e)}function cv(e,t,r){return t=hV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hV(e){var t=ife(e,"string");return dp(t)==="symbol"?t:String(t)}function ife(e,t){if(dp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _a=32,sk=function(e){Qhe(r,e);var t=efe(r);function r(){return Yhe(this,r),t.apply(this,arguments)}return Jhe(r,[{key:"renderIcon",value:function(a){var c=this.props.inactiveColor,f=_a/2,o=_a/6,m=_a/3,_=a.inactive?c:a.color;if(a.type==="plainline")return Se.createElement("line",{strokeWidth:4,fill:"none",stroke:_,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:f,x2:_a,y2:f,className:"recharts-legend-icon"});if(a.type==="line")return Se.createElement("path",{strokeWidth:4,fill:"none",stroke:_,d:"M0,".concat(f,"h").concat(m,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*m,",").concat(f,`
            H`).concat(_a,"M").concat(2*m,",").concat(f,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(m,",").concat(f),className:"recharts-legend-icon"});if(a.type==="rect")return Se.createElement("path",{stroke:"none",fill:_,d:"M0,".concat(_a/8,"h").concat(_a,"v").concat(_a*3/4,"h").concat(-_a,"z"),className:"recharts-legend-icon"});if(Se.isValidElement(a.legendIcon)){var w=Khe({},a);return delete w.legendIcon,Se.cloneElement(a.legendIcon,w)}return Se.createElement(ak,{fill:_,cx:f,cy:f,size:_a,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,c=this.props,f=c.payload,o=c.iconSize,m=c.layout,_=c.formatter,w=c.inactiveColor,E={x:0,y:0,width:_a,height:_a},C={display:m==="horizontal"?"inline-block":"block",marginRight:10},M={display:"inline-block",verticalAlign:"middle",marginRight:4};return f.map(function(I,D){var $,B=I.formatter||_,F=Yt(($={"recharts-legend-item":!0},cv($,"legend-item-".concat(D),!0),cv($,"inactive",I.inactive),$));if(I.type==="none")return null;var R=dr(I.value)?null:I.value;Uh(!dr(I.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var U=I.inactive?w:I.color;return Se.createElement("li",JC({className:F,style:C,key:"legend-item-".concat(D)},X1(a.props,I,D)),Se.createElement(NC,{width:o,height:o,viewBox:E,style:M},a.renderIcon(I)),Se.createElement("span",{className:"recharts-legend-item-text",style:{color:U}},B?B(R,I,D):R))})}},{key:"render",value:function(){var a=this.props,c=a.payload,f=a.layout,o=a.align;if(!c||!c.length)return null;var m={padding:0,margin:0,textAlign:f==="horizontal"?o:"left"};return Se.createElement("ul",{className:"recharts-default-legend",style:m},this.renderItems())}}]),r}(Y.PureComponent);cv(sk,"displayName","Legend");cv(sk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}var ofe=["ref"];function $$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(r),!0).forEach(function(n){sS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function afe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dV(n.key),n)}}function sfe(e,t,r){return t&&N$(e.prototype,t),r&&N$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eP(e,t)}function eP(e,t){return eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eP(e,t)}function cfe(e){var t=hfe();return function(){var n=ab(e),a;if(t){var c=ab(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return ufe(this,a)}}function ufe(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fV(e)}function fV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(e)}function sS(e,t,r){return t=dV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dV(e){var t=ffe(e,"string");return pp(t)==="symbol"?t:String(t)}function ffe(e,t){if(pp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dfe(e,t){if(e==null)return{};var r=pfe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pfe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function mfe(e){return e.value}function gfe(e,t){return e===!0?Q1(t,mfe):dr(e)?Q1(t,e):t}function yfe(e,t){if(Se.isValidElement(e))return Se.cloneElement(e,t);if(dr(e))return Se.createElement(e,t);t.ref;var r=dfe(t,ofe);return Se.createElement(sk,r)}var z$=1,ef=function(e){lfe(r,e);var t=cfe(r);function r(){var n;afe(this,r);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=t.call.apply(t,[this].concat(c)),sS(fV(n),"state",{boxWidth:-1,boxHeight:-1}),n}return sfe(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var a=this.state,c=a.boxWidth,f=a.boxHeight;return c>=0&&f>=0?{width:c,height:f}:null}},{key:"getDefaultPosition",value:function(a){var c=this.props,f=c.layout,o=c.align,m=c.verticalAlign,_=c.margin,w=c.chartWidth,E=c.chartHeight,C,M;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&f==="vertical"){var I=this.getBBoxSnapshot()||{width:0};C={left:((w||0)-I.width)/2}}else C=o==="right"?{right:_&&_.right||0}:{left:_&&_.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(m==="middle"){var D=this.getBBoxSnapshot()||{height:0};M={top:((E||0)-D.height)/2}}else M=m==="bottom"?{bottom:_&&_.bottom||0}:{top:_&&_.top||0};return bd(bd({},C),M)}},{key:"updateBBox",value:function(){var a=this.state,c=a.boxWidth,f=a.boxHeight,o=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var m=this.wrapperNode.getBoundingClientRect();(Math.abs(m.width-c)>z$||Math.abs(m.height-f)>z$)&&this.setState({boxWidth:m.width,boxHeight:m.height},function(){o&&o(m)})}else(c!==-1||f!==-1)&&this.setState({boxWidth:-1,boxHeight:-1},function(){o&&o(null)})}},{key:"render",value:function(){var a=this,c=this.props,f=c.content,o=c.width,m=c.height,_=c.wrapperStyle,w=c.payloadUniqBy,E=c.payload,C=bd(bd({position:"absolute",width:o||"auto",height:m||"auto"},this.getDefaultPosition(_)),_);return Se.createElement("div",{className:"recharts-legend-wrapper",style:C,ref:function(I){a.wrapperNode=I}},yfe(f,bd(bd({},this.props),{},{payload:gfe(w,E)})))}}],[{key:"getWithHeight",value:function(a,c){var f=a.props.layout;return f==="vertical"&&Lt(a.props.height)?{height:a.props.height}:f==="horizontal"?{width:a.props.width||c}:null}}]),r}(Y.PureComponent);sS(ef,"displayName","Legend");sS(ef,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vfe=Object.getOwnPropertyNames,_fe=Object.getOwnPropertySymbols,xfe=Object.prototype.hasOwnProperty;function B$(e,t){return function(n,a,c){return e(n,a,c)&&t(n,a,c)}}function Cx(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var c=a.cache,f=c.get(r),o=c.get(n);if(f&&o)return f===n&&o===r;c.set(r,n),c.set(n,r);var m=e(r,n,a);return c.delete(r),c.delete(n),m}}function F$(e){return vfe(e).concat(_fe(e))}var pV=Object.hasOwn||function(e,t){return xfe.call(e,t)};function Jp(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var mV="_owner",U$=Object.getOwnPropertyDescriptor,V$=Object.keys;function bfe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function wfe(e,t){return Jp(e.getTime(),t.getTime())}function W$(e,t,r){if(e.size!==t.size)return!1;for(var n={},a=e.entries(),c=0,f,o;(f=a.next())&&!f.done;){for(var m=t.entries(),_=!1,w=0;(o=m.next())&&!o.done;){var E=f.value,C=E[0],M=E[1],I=o.value,D=I[0],$=I[1];!_&&!n[w]&&(_=r.equals(C,D,c,w,e,t,r)&&r.equals(M,$,C,D,e,t,r))&&(n[w]=!0),w++}if(!_)return!1;c++}return!0}function Sfe(e,t,r){var n=V$(e),a=n.length;if(V$(t).length!==a)return!1;for(var c;a-- >0;)if(c=n[a],c===mV&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!pV(t,c)||!r.equals(e[c],t[c],c,c,e,t,r))return!1;return!0}function Zg(e,t,r){var n=F$(e),a=n.length;if(F$(t).length!==a)return!1;for(var c,f,o;a-- >0;)if(c=n[a],c===mV&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!pV(t,c)||!r.equals(e[c],t[c],c,c,e,t,r)||(f=U$(e,c),o=U$(t,c),(f||o)&&(!f||!o||f.configurable!==o.configurable||f.enumerable!==o.enumerable||f.writable!==o.writable)))return!1;return!0}function Efe(e,t){return Jp(e.valueOf(),t.valueOf())}function Tfe(e,t){return e.source===t.source&&e.flags===t.flags}function q$(e,t,r){if(e.size!==t.size)return!1;for(var n={},a=e.values(),c,f;(c=a.next())&&!c.done;){for(var o=t.values(),m=!1,_=0;(f=o.next())&&!f.done;)!m&&!n[_]&&(m=r.equals(c.value,f.value,c.value,f.value,e,t,r))&&(n[_]=!0),_++;if(!m)return!1}return!0}function Afe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Cfe="[object Arguments]",Pfe="[object Boolean]",Ofe="[object Date]",Mfe="[object Map]",kfe="[object Number]",Ife="[object Object]",Dfe="[object RegExp]",Rfe="[object Set]",Lfe="[object String]",jfe=Array.isArray,G$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,H$=Object.assign,$fe=Object.prototype.toString.call.bind(Object.prototype.toString);function Nfe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,a=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,f=e.areRegExpsEqual,o=e.areSetsEqual,m=e.areTypedArraysEqual;return function(w,E,C){if(w===E)return!0;if(w==null||E==null||typeof w!="object"||typeof E!="object")return w!==w&&E!==E;var M=w.constructor;if(M!==E.constructor)return!1;if(M===Object)return a(w,E,C);if(jfe(w))return t(w,E,C);if(G$!=null&&G$(w))return m(w,E,C);if(M===Date)return r(w,E,C);if(M===RegExp)return f(w,E,C);if(M===Map)return n(w,E,C);if(M===Set)return o(w,E,C);var I=$fe(w);return I===Ofe?r(w,E,C):I===Dfe?f(w,E,C):I===Mfe?n(w,E,C):I===Rfe?o(w,E,C):I===Ife?typeof w.then!="function"&&typeof E.then!="function"&&a(w,E,C):I===Cfe?a(w,E,C):I===Pfe||I===kfe||I===Lfe?c(w,E,C):!1}}function zfe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Zg:bfe,areDatesEqual:wfe,areMapsEqual:n?B$(W$,Zg):W$,areObjectsEqual:n?Zg:Sfe,arePrimitiveWrappersEqual:Efe,areRegExpsEqual:Tfe,areSetsEqual:n?B$(q$,Zg):q$,areTypedArraysEqual:n?Zg:Afe};if(r&&(a=H$({},a,r(a))),t){var c=Cx(a.areArraysEqual),f=Cx(a.areMapsEqual),o=Cx(a.areObjectsEqual),m=Cx(a.areSetsEqual);a=H$({},a,{areArraysEqual:c,areMapsEqual:f,areObjectsEqual:o,areSetsEqual:m})}return a}function Bfe(e){return function(t,r,n,a,c,f,o){return e(t,r,o)}}function Ffe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,c=e.strict;if(n)return function(m,_){var w=n(),E=w.cache,C=E===void 0?t?new WeakMap:void 0:E,M=w.meta;return r(m,_,{cache:C,equals:a,meta:M,strict:c})};if(t)return function(m,_){return r(m,_,{cache:new WeakMap,equals:a,meta:void 0,strict:c})};var f={cache:void 0,equals:a,meta:void 0,strict:c};return function(m,_){return r(m,_,f)}}var Ufe=Iu();Iu({strict:!0});Iu({circular:!0});Iu({circular:!0,strict:!0});Iu({createInternalComparator:function(){return Jp}});Iu({strict:!0,createInternalComparator:function(){return Jp}});Iu({circular:!0,createInternalComparator:function(){return Jp}});Iu({circular:!0,createInternalComparator:function(){return Jp},strict:!0});function Iu(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,c=e.strict,f=c===void 0?!1:c,o=zfe(e),m=Nfe(o),_=n?n(m):Bfe(m);return Ffe({circular:r,comparator:m,createState:a,equals:_,strict:f})}function Vfe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Z$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(c){r<0&&(r=c),c-r>t?(e(c),r=-1):Vfe(a)};requestAnimationFrame(n)}function tP(e){"@babel/helpers - typeof";return tP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tP(e)}function Wfe(e){return Zfe(e)||Hfe(e)||Gfe(e)||qfe()}function qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gfe(e,t){if(e){if(typeof e=="string")return X$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X$(e,t)}}function X$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zfe(e){if(Array.isArray(e))return e}function Xfe(){var e={},t=function(){return null},r=!1,n=function a(c){if(!r){if(Array.isArray(c)){if(!c.length)return;var f=c,o=Wfe(f),m=o[0],_=o.slice(1);if(typeof m=="number"){Z$(a.bind(null,_),m);return}a(m),Z$(a.bind(null,_));return}tP(c)==="object"&&(e=c,t(e)),typeof c=="function"&&c()}};return{stop:function(){r=!0},start:function(c){r=!1,n(c)},subscribe:function(c){return t=c,function(){t=function(){return null}}}}}function uv(e){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){sb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sb(e,t,r){return t=Kfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kfe(e){var t=Yfe(e,"string");return uv(t)==="symbol"?t:String(t)}function Yfe(e,t){if(uv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jfe=["Webkit","Moz","O","ms"],Qfe=["-webkit-","-moz-","-o-","-ms-"],ede=["transform","transformOrigin","transition"],tde=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(c){return a.includes(c)})})},rde=function(t){return t},nde=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ide=function(t,r){if(ede.indexOf(t)===-1)return sb({},t,Number.isNaN(r)?0:r);var n=t==="transition",a=t.replace(/(\w)/,function(f){return f.toUpperCase()}),c=r;return Jfe.reduce(function(f,o,m){return n&&(c=r.replace(/(transform|transform-origin)/gim,"".concat(Qfe[m],"$1"))),mp(mp({},f),{},sb({},o+a,c))},{})},Oy=function(t,r){return Object.keys(r).reduce(function(n,a){return mp(mp({},n),{},sb({},a,t(a,r[a])))},{})},rP=function(t){return Object.keys(t).reduce(function(r,n){return mp(mp({},r),ide(n,r[n]))},t)},Y$=function(t,r,n){return t.map(function(a){return"".concat(nde(a)," ").concat(r,"ms ").concat(n)}).join(",")};function ode(e,t){return lde(e)||sde(e,t)||gV(e,t)||ade()}function ade(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function lde(e){if(Array.isArray(e))return e}function cde(e){return fde(e)||hde(e)||gV(e)||ude()}function ude(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(e,t){if(e){if(typeof e=="string")return nP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nP(e,t)}}function hde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fde(e){if(Array.isArray(e))return nP(e)}function nP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lb=1e-4,yV=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},vV=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},J$=function(t,r){return function(n){var a=yV(t,r);return vV(a,n)}},dde=function(t,r){return function(n){var a=yV(t,r),c=[].concat(cde(a.map(function(f,o){return f*o}).slice(1)),[0]);return vV(c,n)}},Q$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],c=r[1],f=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,c=0,f=1,o=1;break;case"ease":a=.25,c=.1,f=.25,o=1;break;case"ease-in":a=.42,c=0,f=1,o=1;break;case"ease-out":a=.42,c=0,f=.58,o=1;break;case"ease-in-out":a=0,c=0,f=.58,o=1;break;default:{var m=r[0].split("(");if(m[0]==="cubic-bezier"&&m[1].split(")")[0].split(",").length===4){var _=m[1].split(")")[0].split(",").map(function($){return parseFloat($)}),w=ode(_,4);a=w[0],c=w[1],f=w[2],o=w[3]}}}var E=J$(a,f),C=J$(c,o),M=dde(a,f),I=function(B){return B>1?1:B<0?0:B},D=function(B){for(var F=B>1?1:B,R=F,U=0;U<8;++U){var H=E(R)-F,X=M(R);if(Math.abs(H-F)<lb||X<lb)return C(R);R=I(R-H/X)}return C(R)};return D.isStepper=!1,D},pde=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,c=a===void 0?8:a,f=t.dt,o=f===void 0?17:f,m=function(w,E,C){var M=-(w-E)*n,I=C*c,D=C+(M-I)*o/1e3,$=C*o/1e3+w;return Math.abs($-E)<lb&&Math.abs(D)<lb?[E,0]:[$,D]};return m.isStepper=!0,m.dt=o,m},mde=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q$(a);case"spring":return pde();default:if(a.split("(")[0]==="cubic-bezier")return Q$(a)}return typeof a=="function"?a:null};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function eN(e){return vde(e)||yde(e)||_V(e)||gde()}function gde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vde(e){if(Array.isArray(e))return oP(e)}function tN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tN(Object(r),!0).forEach(function(n){iP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iP(e,t,r){return t=_de(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _de(e){var t=xde(e,"string");return hv(t)==="symbol"?t:String(t)}function xde(e,t){if(hv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bde(e,t){return Ede(e)||Sde(e,t)||_V(e,t)||wde()}function wde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _V(e,t){if(e){if(typeof e=="string")return oP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oP(e,t)}}function oP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function Ede(e){if(Array.isArray(e))return e}var cb=function(t,r,n){return t+(r-t)*n},aP=function(t){var r=t.from,n=t.to;return r!==n},Tde=function e(t,r,n){var a=Oy(function(c,f){if(aP(f)){var o=t(f.from,f.to,f.velocity),m=bde(o,2),_=m[0],w=m[1];return ji(ji({},f),{},{from:_,velocity:w})}return f},r);return n<1?Oy(function(c,f){return aP(f)?ji(ji({},f),{},{velocity:cb(f.velocity,a[c].velocity,n),from:cb(f.from,a[c].from,n)}):f},r):e(t,a,n-1)};const Ade=function(e,t,r,n,a){var c=tde(e,t),f=c.reduce(function($,B){return ji(ji({},$),{},iP({},B,[e[B],t[B]]))},{}),o=c.reduce(function($,B){return ji(ji({},$),{},iP({},B,{from:e[B],velocity:0,to:t[B]}))},{}),m=-1,_,w,E=function(){return null},C=function(){return Oy(function(B,F){return F.from},o)},M=function(){return!Object.values(o).filter(aP).length},I=function(B){_||(_=B);var F=B-_,R=F/r.dt;o=Tde(r,o,R),a(ji(ji(ji({},e),t),C())),_=B,M()||(m=requestAnimationFrame(E))},D=function(B){w||(w=B);var F=(B-w)/n,R=Oy(function(H,X){return cb.apply(void 0,eN(X).concat([r(F)]))},f);if(a(ji(ji(ji({},e),t),R)),F<1)m=requestAnimationFrame(E);else{var U=Oy(function(H,X){return cb.apply(void 0,eN(X).concat([r(1)]))},f);a(ji(ji(ji({},e),t),U))}};return E=r.isStepper?I:D,function(){return requestAnimationFrame(E),function(){cancelAnimationFrame(m)}}};function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}var Cde=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Pde(e,t){if(e==null)return{};var r=Ode(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ode(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $2(e){return Dde(e)||Ide(e)||kde(e)||Mde()}function Mde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kde(e,t){if(e){if(typeof e=="string")return sP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sP(e,t)}}function Ide(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dde(e){if(Array.isArray(e))return sP(e)}function sP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rN(Object(r),!0).forEach(function(n){my(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function my(e,t,r){return t=xV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xV(n.key),n)}}function Lde(e,t,r){return t&&nN(e.prototype,t),r&&nN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xV(e){var t=jde(e,"string");return gp(t)==="symbol"?t:String(t)}function jde(e,t){if(gp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $de(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}function lP(e,t){return lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lP(e,t)}function Nde(e){var t=zde();return function(){var n=ub(e),a;if(t){var c=ub(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return cP(this,a)}}function cP(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uP(e)}function uP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ub(e){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ub(e)}var Yl=function(e){$de(r,e);var t=Nde(r);function r(n,a){var c;Rde(this,r),c=t.call(this,n,a);var f=c.props,o=f.isActive,m=f.attributeName,_=f.from,w=f.to,E=f.steps,C=f.children,M=f.duration;if(c.handleStyleChange=c.handleStyleChange.bind(uP(c)),c.changeStyle=c.changeStyle.bind(uP(c)),!o||M<=0)return c.state={style:{}},typeof C=="function"&&(c.state={style:w}),cP(c);if(E&&E.length)c.state={style:E[0].style};else if(_){if(typeof C=="function")return c.state={style:_},cP(c);c.state={style:m?my({},m,_):_}}else c.state={style:{}};return c}return Lde(r,[{key:"componentDidMount",value:function(){var a=this.props,c=a.isActive,f=a.canBegin;this.mounted=!0,!(!c||!f)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var c=this.props,f=c.isActive,o=c.canBegin,m=c.attributeName,_=c.shouldReAnimate,w=c.to,E=c.from,C=this.state.style;if(o){if(!f){var M={style:m?my({},m,w):w};this.state&&C&&(m&&C[m]!==w||!m&&C!==w)&&this.setState(M);return}if(!(Ufe(a.to,w)&&a.canBegin&&a.isActive)){var I=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var D=I||_?E:a.to;if(this.state&&C){var $={style:m?my({},m,D):D};(m&&[m]!==D||!m&&C!==D)&&this.setState($)}this.runAnimation(cs(cs({},this.props),{},{from:D,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var c=this,f=a.from,o=a.to,m=a.duration,_=a.easing,w=a.begin,E=a.onAnimationEnd,C=a.onAnimationStart,M=Ade(f,o,mde(_),m,this.changeStyle),I=function(){c.stopJSAnimation=M()};this.manager.start([C,w,I,m,E])}},{key:"runStepAnimation",value:function(a){var c=this,f=a.steps,o=a.begin,m=a.onAnimationStart,_=f[0],w=_.style,E=_.duration,C=E===void 0?0:E,M=function(D,$,B){if(B===0)return D;var F=$.duration,R=$.easing,U=R===void 0?"ease":R,H=$.style,X=$.properties,ee=$.onAnimationEnd,oe=B>0?f[B-1]:$,ae=X||Object.keys(H);if(typeof U=="function"||U==="spring")return[].concat($2(D),[c.runJSAnimation.bind(c,{from:oe.style,to:H,duration:F,easing:U}),F]);var ge=Y$(ae,F,U),he=cs(cs(cs({},oe.style),H),{},{transition:ge});return[].concat($2(D),[he,F,ee]).filter(rde)};return this.manager.start([m].concat($2(f.reduce(M,[w,Math.max(C,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Xfe());var c=a.begin,f=a.duration,o=a.attributeName,m=a.to,_=a.easing,w=a.onAnimationStart,E=a.onAnimationEnd,C=a.steps,M=a.children,I=this.manager;if(this.unSubscribe=I.subscribe(this.handleStyleChange),typeof _=="function"||typeof M=="function"||_==="spring"){this.runJSAnimation(a);return}if(C.length>1){this.runStepAnimation(a);return}var D=o?my({},o,m):m,$=Y$(Object.keys(D),f,_);I.start([w,c,cs(cs({},D),{},{transition:$}),f,E])}},{key:"render",value:function(){var a=this.props,c=a.children;a.begin;var f=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var m=Pde(a,Cde),_=Y.Children.count(c),w=rP(this.state.style);if(typeof c=="function")return c(w);if(!o||_===0||f<=0)return c;var E=function(M){var I=M.props,D=I.style,$=D===void 0?{}:D,B=I.className,F=Y.cloneElement(M,cs(cs({},m),{},{style:cs(cs({},$),w),className:B}));return F};return _===1?E(Y.Children.only(c)):Se.createElement("div",null,Y.Children.map(c,function(C){return E(C)}))}}]),r}(Y.PureComponent);Yl.displayName="Animate";Yl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yl.propTypes={from:yr.oneOfType([yr.object,yr.string]),to:yr.oneOfType([yr.object,yr.string]),attributeName:yr.string,duration:yr.number,begin:yr.number,easing:yr.oneOfType([yr.string,yr.func]),steps:yr.arrayOf(yr.shape({duration:yr.number.isRequired,style:yr.object.isRequired,easing:yr.oneOfType([yr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),yr.func]),properties:yr.arrayOf("string"),onAnimationEnd:yr.func})),children:yr.oneOfType([yr.node,yr.func]),isActive:yr.bool,canBegin:yr.bool,onAnimationEnd:yr.func,shouldReAnimate:yr.bool,onAnimationStart:yr.func,onAnimationReStart:yr.func};Number.isFinite===void 0&&(Number.isFinite=function(e){return typeof e=="number"&&isFinite(e)});yr.object,yr.object,yr.object,yr.element;yr.object,yr.object,yr.object,yr.oneOfType([yr.array,yr.element]),yr.any;var iN=i_,Bde=QM,Fde=mo,oN=iN?iN.isConcatSpreadable:void 0;function Ude(e){return Fde(e)||Bde(e)||!!(oN&&e&&e[oN])}var Vde=Ude,Wde=O6,qde=Vde;function bV(e,t,r,n,a){var c=-1,f=e.length;for(r||(r=qde),a||(a=[]);++c<f;){var o=e[c];t>0&&r(o)?t>1?bV(o,t-1,r,n,a):Wde(a,o):n||(a[a.length]=o)}return a}var wV=bV;function Gde(e){return function(t,r,n){for(var a=-1,c=Object(t),f=n(t),o=f.length;o--;){var m=f[e?o:++a];if(r(c[m],m,c)===!1)break}return t}}var Hde=Gde,Zde=Hde,Xde=Zde(),Kde=Xde,Yde=Kde,Jde=rS;function Qde(e,t){return e&&Yde(e,t,Jde)}var SV=Qde,epe=l_;function tpe(e,t){return function(r,n){if(r==null)return r;if(!epe(r))return e(r,n);for(var a=r.length,c=t?a:-1,f=Object(r);(t?c--:++c<a)&&n(f[c],c,f)!==!1;);return r}}var rpe=tpe,npe=SV,ipe=rpe,ope=ipe(npe),lk=ope,ape=lk,spe=l_;function lpe(e,t){var r=-1,n=spe(e)?Array(e.length):[];return ape(e,function(a,c,f){n[++r]=t(a,c,f)}),n}var EV=lpe;function cpe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var upe=cpe,aN=qp;function hpe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,c=aN(e),f=t!==void 0,o=t===null,m=t===t,_=aN(t);if(!o&&!_&&!c&&e>t||c&&f&&m&&!o&&!_||n&&f&&m||!r&&m||!a)return 1;if(!n&&!c&&!_&&e<t||_&&r&&a&&!n&&!c||o&&r&&a||!f&&a||!m)return-1}return 0}var fpe=hpe,dpe=fpe;function ppe(e,t,r){for(var n=-1,a=e.criteria,c=t.criteria,f=a.length,o=r.length;++n<f;){var m=dpe(a[n],c[n]);if(m){if(n>=o)return m;var _=r[n];return m*(_=="desc"?-1:1)}}return e.index-t.index}var mpe=ppe,N2=qM,gpe=GM,ype=ku,vpe=EV,_pe=upe,xpe=I6,bpe=mpe,wpe=Yp,Spe=mo;function Epe(e,t,r){t.length?t=N2(t,function(c){return Spe(c)?function(f){return gpe(f,c.length===1?c[0]:c)}:c}):t=[wpe];var n=-1;t=N2(t,xpe(ype));var a=vpe(e,function(c,f,o){var m=N2(t,function(_){return _(c)});return{criteria:m,index:++n,value:c}});return _pe(a,function(c,f){return bpe(c,f,r)})}var Tpe=Epe;function Ape(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Cpe=Ape,Ppe=Cpe,sN=Math.max;function Ope(e,t,r){return t=sN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,c=sN(n.length-t,0),f=Array(c);++a<c;)f[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(f),Ppe(e,this,o)}}var Mpe=Ope;function kpe(e){return function(){return e}}var Ipe=kpe,Dpe=ff,Rpe=function(){try{var e=Dpe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),TV=Rpe,Lpe=Ipe,lN=TV,jpe=Yp,$pe=lN?function(e,t){return lN(e,"toString",{configurable:!0,enumerable:!1,value:Lpe(t),writable:!0})}:jpe,Npe=$pe,zpe=800,Bpe=16,Fpe=Date.now;function Upe(e){var t=0,r=0;return function(){var n=Fpe(),a=Bpe-(n-r);if(r=n,a>0){if(++t>=zpe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Vpe=Upe,Wpe=Npe,qpe=Vpe,Gpe=qpe(Wpe),Hpe=Gpe,Zpe=Yp,Xpe=Mpe,Kpe=Hpe;function Ype(e,t){return Kpe(Xpe(e,t,Zpe),e+"")}var Jpe=Ype,Qpe=FM,eme=l_,tme=ek,rme=Mu;function nme(e,t,r){if(!rme(r))return!1;var n=typeof t;return(n=="number"?eme(r)&&tme(t,r.length):n=="string"&&t in r)?Qpe(r[t],e):!1}var lS=nme,ime=wV,ome=Tpe,ame=Jpe,cN=lS,sme=ame(function(e,t){if(e==null)return[];var r=t.length;return r>1&&cN(e,t[0],t[1])?t=[]:r>2&&cN(t[0],t[1],t[2])&&(t=[t[0]]),ome(e,ime(t,1),[])}),lme=sme;const ck=Hr(lme);function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function cme(e,t){return dme(e)||fme(e,t)||hme(e,t)||ume()}function ume(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hme(e,t){if(e){if(typeof e=="string")return uN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uN(e,t)}}function uN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function dme(e){if(Array.isArray(e))return e}function hN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(r),!0).forEach(function(n){pme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pme(e,t,r){return t=mme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mme(e){var t=gme(e,"string");return fv(t)==="symbol"?t:String(t)}function gme(e,t){if(fv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yme(e){return zi(e)&&yi(e[0])&&yi(e[1])?e.join(" ~ "):e}var vme=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,c=a===void 0?{}:a,f=t.itemStyle,o=f===void 0?{}:f,m=t.labelStyle,_=m===void 0?{}:m,w=t.payload,E=t.formatter,C=t.itemSorter,M=t.wrapperClassName,I=t.labelClassName,D=t.label,$=t.labelFormatter,B=function(){if(w&&w.length){var ae={padding:0,margin:0},ge=(C?ck(w,C):w).map(function(he,ve){if(he.type==="none")return null;var Ee=z2({display:"block",paddingTop:4,paddingBottom:4,color:he.color||"#000"},o),Re=he.formatter||E||yme,Ne=he.value,Ve=he.name,Ke=Ne,ke=Ve;if(Re&&Ke!=null&&ke!=null){var Ge=Re(Ne,Ve,he,ve,w);if(Array.isArray(Ge)){var Ye=cme(Ge,2);Ke=Ye[0],ke=Ye[1]}else Ke=Ge}return Se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ve),style:Ee},yi(ke)?Se.createElement("span",{className:"recharts-tooltip-item-name"},ke):null,yi(ke)?Se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Se.createElement("span",{className:"recharts-tooltip-item-value"},Ke),Se.createElement("span",{className:"recharts-tooltip-item-unit"},he.unit||""))});return Se.createElement("ul",{className:"recharts-tooltip-item-list",style:ae},ge)}return null},F=z2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},c),R=z2({margin:0},_),U=!cr(D),H=U?D:"",X=Yt("recharts-default-tooltip",M),ee=Yt("recharts-tooltip-label",I);return U&&$&&w!==void 0&&w!==null&&(H=$(D,w)),Se.createElement("div",{className:X,style:F},Se.createElement("p",{className:ee,style:R},Se.isValidElement(H)?H:"".concat(H)),B())},_me=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vl={isSsr:_me(),get:function(t){return Vl[t]},set:function(t,r){if(typeof t=="string")Vl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Vl[a]=t[a]})}}};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function fN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fN(Object(r),!0).forEach(function(n){Us(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AV(n.key),n)}}function bme(e,t,r){return t&&dN(e.prototype,t),r&&dN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hP(e,t)}function hP(e,t){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hP(e,t)}function Sme(e){var t=Tme();return function(){var n=hb(e),a;if(t){var c=hb(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Eme(this,a)}}function Eme(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s1(e)}function s1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hb(e){return hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hb(e)}function Us(e,t,r){return t=AV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AV(e){var t=Ame(e,"string");return yp(t)==="symbol"?t:String(t)}function Ame(e,t){if(yp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xg="recharts-tooltip-wrapper",pN=1;function Cme(e){return e.dataKey}function Pme(e,t){return e===!0?Q1(t,Cme):dr(e)?Q1(t,e):t}function Ome(e,t){return Se.isValidElement(e)?Se.cloneElement(e,t):dr(e)?Se.createElement(e,t):Se.createElement(vme,t)}var ou=function(e){wme(r,e);var t=Sme(r);function r(){var n;xme(this,r);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=t.call.apply(t,[this].concat(c)),Us(s1(n),"state",{boxWidth:-1,boxHeight:-1,dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Us(s1(n),"handleKeyDown",function(o){o.key==="Escape"&&n.setState({dismissed:!0,dismissedAtCoordinate:Pl(Pl({},n.state.dismissedAtCoordinate),{},{x:n.props.coordinate.x,y:n.props.coordinate.y})})}),Us(s1(n),"getTranslate",function(o){var m=o.key,_=o.tooltipDimension,w=o.viewBoxDimension,E=n.props,C=E.allowEscapeViewBox,M=E.reverseDirection,I=E.coordinate,D=E.offset,$=E.position,B=E.viewBox;if($&&Lt($[m]))return $[m];var F=I[m]-_-D,R=I[m]+D;if(C[m])return M[m]?F:R;if(M[m]){var U=F,H=B[m];return U<H?Math.max(R,B[m]):Math.max(F,B[m])}var X=R+_,ee=B[m]+w;return X>ee?Math.max(F,B[m]):Math.max(R,B[m])}),n}return bme(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var a=this.state,c=a.boxWidth,f=a.boxHeight,o=a.dismissed;if(o?(document.removeEventListener("keydown",this.handleKeyDown),(this.props.coordinate.x!==this.state.dismissedAtCoordinate.x||this.props.coordinate.y!==this.state.dismissedAtCoordinate.y)&&this.setState({dismissed:!1})):document.addEventListener("keydown",this.handleKeyDown),this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var m=this.wrapperNode.getBoundingClientRect();(Math.abs(m.width-c)>pN||Math.abs(m.height-f)>pN)&&this.setState({boxWidth:m.width,boxHeight:m.height})}else(c!==-1||f!==-1)&&this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var a,c=this,f=this.props,o=f.payload,m=f.isAnimationActive,_=f.animationDuration,w=f.animationEasing,E=f.filterNull,C=f.payloadUniqBy,M=Pme(C,E&&o&&o.length?o.filter(function(Ee){return!cr(Ee.value)}):o),I=M&&M.length,D=this.props,$=D.content,B=D.viewBox,F=D.coordinate,R=D.position,U=D.active,H=D.wrapperStyle,X=Pl({pointerEvents:"none",visibility:!this.state.dismissed&&U&&I?"visible":"hidden",position:"absolute",top:0,left:0},H),ee,oe;if(R&&Lt(R.x)&&Lt(R.y))ee=R.x,oe=R.y;else{var ae=this.state,ge=ae.boxWidth,he=ae.boxHeight;ge>0&&he>0&&F?(ee=this.getTranslate({key:"x",tooltipDimension:ge,viewBoxDimension:B.width}),oe=this.getTranslate({key:"y",tooltipDimension:he,viewBoxDimension:B.height})):X.visibility="hidden"}X=Pl(Pl({},rP({transform:this.props.useTranslate3d?"translate3d(".concat(ee,"px, ").concat(oe,"px, 0)"):"translate(".concat(ee,"px, ").concat(oe,"px)")})),X),m&&U&&(X=Pl(Pl({},rP({transition:"transform ".concat(_,"ms ").concat(w)})),X));var ve=Yt(Xg,(a={},Us(a,"".concat(Xg,"-right"),Lt(ee)&&F&&Lt(F.x)&&ee>=F.x),Us(a,"".concat(Xg,"-left"),Lt(ee)&&F&&Lt(F.x)&&ee<F.x),Us(a,"".concat(Xg,"-bottom"),Lt(oe)&&F&&Lt(F.y)&&oe>=F.y),Us(a,"".concat(Xg,"-top"),Lt(oe)&&F&&Lt(F.y)&&oe<F.y),a));return Se.createElement("div",{tabIndex:-1,role:"dialog",className:ve,style:X,ref:function(Re){c.wrapperNode=Re}},Ome($,Pl(Pl({},this.props),{},{payload:M})))}}]),r}(Y.PureComponent);Us(ou,"displayName","Tooltip");Us(ou,"defaultProps",{active:!1,allowEscapeViewBox:{x:!1,y:!1},reverseDirection:{x:!1,y:!1},offset:10,viewBox:{x:0,y:0,height:0,width:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!Vl.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1});var Mme=il,kme=function(){return Mme.Date.now()},Ime=kme,Dme=/\s/;function Rme(e){for(var t=e.length;t--&&Dme.test(e.charAt(t)););return t}var Lme=Rme,jme=Lme,$me=/^\s+/;function Nme(e){return e&&e.slice(0,jme(e)+1).replace($me,"")}var zme=Nme,Bme=zme,mN=Mu,Fme=qp,gN=0/0,Ume=/^[-+]0x[0-9a-f]+$/i,Vme=/^0b[01]+$/i,Wme=/^0o[0-7]+$/i,qme=parseInt;function Gme(e){if(typeof e=="number")return e;if(Fme(e))return gN;if(mN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Bme(e);var r=Vme.test(e);return r||Wme.test(e)?qme(e.slice(2),r?2:8):Ume.test(e)?gN:+e}var CV=Gme,Hme=Mu,B2=Ime,yN=CV,Zme="Expected a function",Xme=Math.max,Kme=Math.min;function Yme(e,t,r){var n,a,c,f,o,m,_=0,w=!1,E=!1,C=!0;if(typeof e!="function")throw new TypeError(Zme);t=yN(t)||0,Hme(r)&&(w=!!r.leading,E="maxWait"in r,c=E?Xme(yN(r.maxWait)||0,t):c,C="trailing"in r?!!r.trailing:C);function M(X){var ee=n,oe=a;return n=a=void 0,_=X,f=e.apply(oe,ee),f}function I(X){return _=X,o=setTimeout(B,t),w?M(X):f}function D(X){var ee=X-m,oe=X-_,ae=t-ee;return E?Kme(ae,c-oe):ae}function $(X){var ee=X-m,oe=X-_;return m===void 0||ee>=t||ee<0||E&&oe>=c}function B(){var X=B2();if($(X))return F(X);o=setTimeout(B,D(X))}function F(X){return o=void 0,C&&n?M(X):(n=a=void 0,f)}function R(){o!==void 0&&clearTimeout(o),_=0,n=m=a=o=void 0}function U(){return o===void 0?f:F(B2())}function H(){var X=B2(),ee=$(X);if(n=arguments,a=this,m=X,ee){if(o===void 0)return I(m);if(E)return clearTimeout(o),o=setTimeout(B,t),M(m)}return o===void 0&&(o=setTimeout(B,t)),f}return H.cancel=R,H.flush=U,H}var PV=Yme;const Jme=Hr(PV);var Qme=PV,ege=Mu,tge="Expected a function";function rge(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(tge);return ege(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Qme(e,t,{leading:n,maxWait:t,trailing:a})}var nge=rge;const OV=Hr(nge);var fP=function(e,t){return fP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},fP(e,t)};function ige(e,t){fP(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function oge(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var age=function(e,t,r,n){switch(t){case"debounce":return Jme(e,r,n);case"throttle":return OV(e,r,n);default:return e}},vN=function(e){return typeof e=="function"},Kg=function(){return typeof window>"u"},_N=function(e){return e instanceof Element||e instanceof HTMLDocument},sge=function(e,t,r){return function(n){var a=n.width,c=n.height;e(function(f){return f.width===a&&f.height===c||f.width===a&&!r||f.height===c&&!t?f:{width:a,height:c}})}},lge=function(e){ige(t,e);function t(r){var n=e.call(this,r)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var _=n.props,w=_.targetRef,E=_.observerOptions;if(!Kg()){w&&w.current&&(n.targetRef.current=w.current);var C=n.getElement();C&&(n.observableElement&&n.observableElement===C||(n.observableElement=C,n.resizeObserver.observe(C,E)))}},n.getElement=function(){var _=n.props,w=_.querySelector,E=_.targetDomEl;if(Kg())return null;if(w)return document.querySelector(w);if(E&&_N(E))return E;if(n.targetRef&&_N(n.targetRef.current))return n.targetRef.current;var C=lw.findDOMNode(n);if(!C)return null;var M=n.getRenderType();switch(M){case"renderProp":return C;case"childFunction":return C;case"child":return C;case"childArray":return C;default:return C.parentElement}},n.createResizeHandler=function(_){var w=n.props,E=w.handleWidth,C=E===void 0?!0:E,M=w.handleHeight,I=M===void 0?!0:M,D=w.onResize;if(!(!C&&!I)){var $=sge(function(B){return n.setState(B,function(){return D==null?void 0:D(n.state.width,n.state.height)})},C,I);_.forEach(function(B){var F=B&&B.contentRect||{},R=F.width,U=F.height,H=!n.skipOnMount&&!Kg();H&&$({width:R,height:U}),n.skipOnMount=!1})}},n.getRenderType=function(){var _=n.props,w=_.render,E=_.children;return vN(w)?"renderProp":vN(E)?"childFunction":Y.isValidElement(E)?"child":Array.isArray(E)?"childArray":"parent"};var a=r.skipOnMount,c=r.refreshMode,f=r.refreshRate,o=f===void 0?1e3:f,m=r.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=a,n.targetRef=Y.createRef(),n.observableElement=null,Kg()||(n.resizeHandler=age(n.createResizeHandler,c,o,m),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}return t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){Kg()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var r=this.props,n=r.render,a=r.children,c=r.nodeType,f=c===void 0?"div":c,o=this.state,m=o.width,_=o.height,w={width:m,height:_,targetRef:this.targetRef},E=this.getRenderType();switch(E){case"renderProp":return n==null?void 0:n(w);case"childFunction":{var C=a;return C==null?void 0:C(w)}case"child":{var M=a;if(M.type&&typeof M.type=="string"){w.targetRef;var I=oge(w,["targetRef"]);return Y.cloneElement(M,I)}return Y.cloneElement(M,w)}case"childArray":{var D=a;return D.map(function($){return!!$&&Y.cloneElement($,w)})}default:return Se.createElement(f,null)}},t}(Y.PureComponent);function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function dP(){return dP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dP.apply(this,arguments)}function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){cge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cge(e,t,r){return t=uge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uge(e){var t=hge(e,"string");return dv(t)==="symbol"?t:String(t)}function hge(e,t){if(dv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fge(e,t){return gge(e)||mge(e,t)||pge(e,t)||dge()}function dge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pge(e,t){if(e){if(typeof e=="string")return wN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wN(e,t)}}function wN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function gge(e){if(Array.isArray(e))return e}var SN=Y.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,c=e.width,f=c===void 0?"100%":c,o=e.height,m=o===void 0?"100%":o,_=e.minWidth,w=_===void 0?0:_,E=e.minHeight,C=e.maxHeight,M=e.children,I=e.debounce,D=I===void 0?0:I,$=e.id,B=e.className,F=e.onResize,R=e.style,U=R===void 0?{}:R,H=Y.useState({containerWidth:a.width,containerHeight:a.height}),X=fge(H,2),ee=X[0],oe=X[1],ae=Y.useRef(null);Y.useImperativeHandle(t,function(){return ae},[ae]);var ge=Y.useCallback(function(){return ae.current?{containerWidth:ae.current.clientWidth,containerHeight:ae.current.clientHeight}:null},[]),he=Y.useCallback(function(){var Re=ge();if(Re){var Ne=Re.containerWidth,Ve=Re.containerHeight;F&&F(Ne,Ve),oe(function(Ke){var ke=Ke.containerWidth,Ge=Ke.containerHeight;return Ne!==ke||Ve!==Ge?{containerWidth:Ne,containerHeight:Ve}:Ke})}},[ge,F]),ve=Y.useMemo(function(){var Re=ee.containerWidth,Ne=ee.containerHeight;if(Re<0||Ne<0)return null;Uh(jh(f)||jh(m),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,f,m),Uh(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Ve=jh(f)?Re:f,Ke=jh(m)?Ne:m;return r&&r>0&&(Ve?Ke=Ve/r:Ke&&(Ve=Ke*r),C&&Ke>C&&(Ke=C)),Uh(Ve>0||Ke>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ve,Ke,f,m,w,E,r),Y.cloneElement(M,{width:Ve,height:Ke})},[r,M,m,C,E,w,ee,f]);Y.useEffect(function(){var Re=ge();Re&&oe(Re)},[ge]);var Ee=bN(bN({},U),{},{width:f,height:m,minWidth:w,minHeight:E,maxHeight:C});return Se.createElement(lge,{handleWidth:!0,handleHeight:!0,onResize:he,targetRef:ae,refreshMode:D>0?"debounce":void 0,refreshRate:D},Se.createElement("div",dP({},$!=null?{id:"".concat($)}:{},{className:Yt("recharts-responsive-container",B),style:Ee,ref:ae}),ve))}),MV=function(t){return null};MV.displayName="Cell";function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(r),!0).forEach(function(n){yge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yge(e,t,r){return t=vge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vge(e){var t=_ge(e,"string");return pv(t)==="symbol"?t:String(t)}function _ge(e,t){if(pv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AN(e){return Sge(e)||wge(e)||bge(e)||xge()}function xge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(e,t){if(e){if(typeof e=="string")return pP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pP(e,t)}}function wge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sge(e){if(Array.isArray(e))return pP(e)}function pP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wd={widthCache:{},cacheCount:0},Ege=2e3,Tge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Age=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],CN="recharts_measurement_span";function Cge(e,t){return Age.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}function Pge(e){var t=e.split(""),r=t.reduce(function(n,a){return a===a.toUpperCase()?[].concat(AN(n),["-",a.toLowerCase()]):[].concat(AN(n),[a])},[]);return r.join("")}var Oge=function(t){return Object.keys(t).reduce(function(r,n){return"".concat(r).concat(Pge(n),":").concat(Cge(n,t[n]),";")},"")},My=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Vl.isSsr)return{width:0,height:0};var n="".concat(t),a=Oge(r),c="".concat(n,"-").concat(a);if(wd.widthCache[c])return wd.widthCache[c];try{var f=document.getElementById(CN);f||(f=document.createElement("span"),f.setAttribute("id",CN),f.setAttribute("aria-hidden","true"),document.body.appendChild(f));var o=TN(TN({},Tge),r);Object.keys(o).map(function(w){return f.style[w]=o[w],w}),f.textContent=n;var m=f.getBoundingClientRect(),_={width:m.width,height:m.height};return wd.widthCache[c]=_,++wd.cacheCount>Ege&&(wd.cacheCount=0,wd.widthCache={}),_}catch{return{width:0,height:0}}},Mge=function(t){var r=t.ownerDocument.documentElement,n={top:0,left:0};return typeof t.getBoundingClientRect<"u"&&(n=t.getBoundingClientRect()),{top:n.top+window.pageYOffset-r.clientTop,left:n.left+window.pageXOffset-r.clientLeft}},kge=function(t,r){return{chartX:Math.round(t.pageX-r.left),chartY:Math.round(t.pageY-r.top)}};function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function fb(e,t){return Lge(e)||Rge(e,t)||Dge(e,t)||Ige()}function Ige(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dge(e,t){if(e){if(typeof e=="string")return PN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PN(e,t)}}function PN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function Lge(e){if(Array.isArray(e))return e}function jge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ON(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nge(n.key),n)}}function $ge(e,t,r){return t&&ON(e.prototype,t),r&&ON(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nge(e){var t=zge(e,"string");return mv(t)==="symbol"?t:String(t)}function zge(e,t){if(mv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Fge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uge=Object.keys(kV),Fd="NaN";function Vge(e,t){return e*kV[t]}var Px=function(){function e(t,r){jge(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Bge.test(r)&&(this.num=NaN,this.unit=""),Uge.includes(r)&&(this.num=Vge(t,r),this.unit="px")}return $ge(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Fge.exec(r))!==null&&n!==void 0?n:[],c=fb(a,3),f=c[1],o=c[2];return new e(parseFloat(f),o??"")}}]),e}();function IV(e){if(e.includes(Fd))return Fd;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=MN.exec(t))!==null&&r!==void 0?r:[],a=fb(n,4),c=a[1],f=a[2],o=a[3],m=Px.parse(c??""),_=Px.parse(o??""),w=f==="*"?m.multiply(_):m.divide(_);if(w.isNaN())return Fd;t=t.replace(MN,w.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var E,C=(E=kN.exec(t))!==null&&E!==void 0?E:[],M=fb(C,4),I=M[1],D=M[2],$=M[3],B=Px.parse(I??""),F=Px.parse($??""),R=D==="+"?B.add(F):B.subtract(F);if(R.isNaN())return Fd;t=t.replace(kN,R.toString())}return t}var IN=/\(([^()]*)\)/;function Wge(e){for(var t=e;t.includes("(");){var r=IN.exec(t),n=fb(r,2),a=n[1];t=t.replace(IN,IV(a))}return t}function qge(e){var t=e.replace(/\s+/g,"");return t=Wge(t),t=IV(t),t}function Gge(e){try{return qge(e)}catch{return Fd}}function F2(e){var t=Gge(e.slice(5,-1));return t===Fd?"":t}var Hge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Zge=["dx","dy","angle","className","breakAll"];function mP(){return mP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mP.apply(this,arguments)}function DN(e,t){if(e==null)return{};var r=Xge(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xge(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function RN(e,t){return Qge(e)||Jge(e,t)||Yge(e,t)||Kge()}function Kge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yge(e,t){if(e){if(typeof e=="string")return LN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LN(e,t)}}function LN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function Qge(e){if(Array.isArray(e))return e}var DV=/[ \f\n\r\t\v\u2028\u2029]+/,RV=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var c=[];cr(r)||(n?c=r.toString().split(""):c=r.toString().split(DV));var f=c.map(function(m){return{word:m,width:My(m,a).width}}),o=n?0:My(" ",a).width;return{wordsWithComputedWidth:f,spaceWidth:o}}catch{return null}},eye=function(t,r,n,a,c){var f=t.maxLines,o=t.children,m=t.style,_=t.breakAll,w=Lt(f),E=o,C=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ne.reduce(function(Ve,Ke){var ke=Ke.word,Ge=Ke.width,Ye=Ve[Ve.length-1];if(Ye&&(a==null||c||Ye.width+Ge+n<Number(a)))Ye.words.push(ke),Ye.width+=Ge+n;else{var _t={words:[ke],width:Ge};Ve.push(_t)}return Ve},[])},M=C(r),I=function(Ne){return Ne.reduce(function(Ve,Ke){return Ve.width>Ke.width?Ve:Ke})};if(!w)return M;for(var D="…",$=function(Ne){var Ve=E.slice(0,Ne),Ke=RV({breakAll:_,style:m,children:Ve+D}).wordsWithComputedWidth,ke=C(Ke),Ge=ke.length>f||I(ke).width>Number(a);return[Ge,ke]},B=0,F=E.length-1,R=0,U;B<=F&&R<=E.length-1;){var H=Math.floor((B+F)/2),X=H-1,ee=$(X),oe=RN(ee,2),ae=oe[0],ge=oe[1],he=$(H),ve=RN(he,1),Ee=ve[0];if(!ae&&!Ee&&(B=H+1),ae&&Ee&&(F=H-1),!ae&&Ee){U=ge;break}R++}return U||M},jN=function(t){var r=cr(t)?[]:t.toString().split(DV);return[{words:r}]},tye=function(t){var r=t.width,n=t.scaleToFit,a=t.children,c=t.style,f=t.breakAll,o=t.maxLines;if((r||n)&&!Vl.isSsr){var m,_,w=RV({breakAll:f,children:a,style:c});if(w){var E=w.wordsWithComputedWidth,C=w.spaceWidth;m=E,_=C}else return jN(a);return eye({breakAll:f,children:a,maxLines:o,style:c},m,_,r,n)}return jN(a)},$N="#808080",db=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,c=a===void 0?0:a,f=t.lineHeight,o=f===void 0?"1em":f,m=t.capHeight,_=m===void 0?"0.71em":m,w=t.scaleToFit,E=w===void 0?!1:w,C=t.textAnchor,M=C===void 0?"start":C,I=t.verticalAnchor,D=I===void 0?"end":I,$=t.fill,B=$===void 0?$N:$,F=DN(t,Hge),R=Y.useMemo(function(){return tye({breakAll:F.breakAll,children:F.children,maxLines:F.maxLines,scaleToFit:E,style:F.style,width:F.width})},[F.breakAll,F.children,F.maxLines,E,F.style,F.width]),U=F.dx,H=F.dy,X=F.angle,ee=F.className,oe=F.breakAll,ae=DN(F,Zge);if(!yi(n)||!yi(c))return null;var ge=n+(Lt(U)?U:0),he=c+(Lt(H)?H:0),ve;switch(D){case"start":ve=F2("calc(".concat(_,")"));break;case"middle":ve=F2("calc(".concat((R.length-1)/2," * -").concat(o," + (").concat(_," / 2))"));break;default:ve=F2("calc(".concat(R.length-1," * -").concat(o,")"));break}var Ee=[];if(E){var Re=R[0].width,Ne=F.width;Ee.push("scale(".concat((Lt(Ne)?Ne/Re:1)/Re,")"))}return X&&Ee.push("rotate(".concat(X,", ").concat(ge,", ").concat(he,")")),Ee.length&&(ae.transform=Ee.join(" ")),Se.createElement("text",mP({},Rr(ae,!0),{x:ge,y:he,className:Yt("recharts-text",ee),textAnchor:M,fill:B.includes("url")?$N:B}),R.map(function(Ve,Ke){return Se.createElement("tspan",{x:ge,dy:Ke===0?ve:o,key:Ke},Ve.words.join(oe?"":" "))}))},rye=rk;function nye(e,t){return rye(e,t)}var iye=nye;const cS=Hr(iye);var oye=qp;function aye(e,t,r){for(var n=-1,a=e.length;++n<a;){var c=e[n],f=t(c);if(f!=null&&(o===void 0?f===f&&!oye(f):r(f,o)))var o=f,m=c}return m}var LV=aye;function sye(e,t){return e>t}var lye=sye,cye=LV,uye=lye,hye=Yp;function fye(e){return e&&e.length?cye(e,hye,uye):void 0}var dye=fye;const uS=Hr(dye);function pye(e,t){return e<t}var mye=pye,gye=LV,yye=mye,vye=Yp;function _ye(e){return e&&e.length?gye(e,vye,yye):void 0}var xye=_ye;const hS=Hr(xye);var bye=qM,wye=ku,Sye=EV,Eye=mo;function Tye(e,t){var r=Eye(e)?bye:Sye;return r(e,wye(t))}var Aye=Tye,Cye=wV,Pye=Aye;function Oye(e,t){return Cye(Pye(e,t),1)}var Mye=Oye;const kye=Hr(Mye);function xu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Iye(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jV(e){let t,r,n;e.length!==2?(t=xu,r=(o,m)=>xu(e(o),m),n=(o,m)=>e(o)-m):(t=e===xu||e===Iye?e:Dye,r=e,n=e);function a(o,m,_=0,w=o.length){if(_<w){if(t(m,m)!==0)return w;do{const E=_+w>>>1;r(o[E],m)<0?_=E+1:w=E}while(_<w)}return _}function c(o,m,_=0,w=o.length){if(_<w){if(t(m,m)!==0)return w;do{const E=_+w>>>1;r(o[E],m)<=0?_=E+1:w=E}while(_<w)}return _}function f(o,m,_=0,w=o.length){const E=a(o,m,_,w-1);return E>_&&n(o[E-1],m)>-n(o[E],m)?E-1:E}return{left:a,center:f,right:c}}function Dye(){return 0}function $V(e){return e===null?NaN:+e}function*Rye(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const Lye=jV(xu),jye=Lye.right;jV($V).center;const c_=jye;class NN extends Map{constructor(t,r=zye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(zN(this,t))}has(t){return super.has(zN(this,t))}set(t,r){return super.set($ye(this,t),r)}delete(t){return super.delete(Nye(this,t))}}function zN({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function $ye({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Nye({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function zye(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bye(e=xu){if(e===xu)return NV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function NV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Fye=Math.sqrt(50),Uye=Math.sqrt(10),Vye=Math.sqrt(2);function pb(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),c=n/Math.pow(10,a),f=c>=Fye?10:c>=Uye?5:c>=Vye?2:1;let o,m,_;return a<0?(_=Math.pow(10,-a)/f,o=Math.round(e*_),m=Math.round(t*_),o/_<e&&++o,m/_>t&&--m,_=-_):(_=Math.pow(10,a)*f,o=Math.round(e/_),m=Math.round(t/_),o*_<e&&++o,m*_>t&&--m),m<o&&.5<=r&&r<2?pb(e,t,r*2):[o,m,_]}function gP(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,c,f]=n?pb(t,e,r):pb(e,t,r);if(!(c>=a))return[];const o=c-a+1,m=new Array(o);if(n)if(f<0)for(let _=0;_<o;++_)m[_]=(c-_)/-f;else for(let _=0;_<o;++_)m[_]=(c-_)*f;else if(f<0)for(let _=0;_<o;++_)m[_]=(a+_)/-f;else for(let _=0;_<o;++_)m[_]=(a+_)*f;return m}function yP(e,t,r){return t=+t,e=+e,r=+r,pb(e,t,r)[2]}function Wye(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?yP(t,e,r):yP(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function BN(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function FN(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function zV(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?NV:Bye(a);n>r;){if(n-r>600){const m=n-r+1,_=t-r+1,w=Math.log(m),E=.5*Math.exp(2*w/3),C=.5*Math.sqrt(w*E*(m-E)/m)*(_-m/2<0?-1:1),M=Math.max(r,Math.floor(t-_*E/m+C)),I=Math.min(n,Math.floor(t+(m-_)*E/m+C));zV(e,t,M,I,a)}const c=e[t];let f=r,o=n;for(Yg(e,r,t),a(e[n],c)>0&&Yg(e,r,n);f<o;){for(Yg(e,f,o),++f,--o;a(e[f],c)<0;)++f;for(;a(e[o],c)>0;)--o}a(e[r],c)===0?Yg(e,r,o):(++o,Yg(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Yg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qye(e,t,r){if(e=Float64Array.from(Rye(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return FN(e);if(t>=1)return BN(e);var n,a=(n-1)*t,c=Math.floor(a),f=BN(zV(e,c).subarray(0,c+1)),o=FN(e.subarray(c+1));return f+(o-f)*(a-c)}}function Gye(e,t,r=$V){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,c=Math.floor(a),f=+r(e[c],c,e),o=+r(e[c+1],c+1,e);return f+(o-f)*(a-c)}}function Hye(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,c=new Array(a);++n<a;)c[n]=e+n*r;return c}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ac(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vP=Symbol("implicit");function uk(){var e=new NN,t=[],r=[],n=vP;function a(c){let f=e.get(c);if(f===void 0){if(n!==vP)return n;e.set(c,f=t.push(c)-1)}return r[f%r.length]}return a.domain=function(c){if(!arguments.length)return t.slice();t=[],e=new NN;for(const f of c)e.has(f)||e.set(f,t.push(f)-1);return a},a.range=function(c){return arguments.length?(r=Array.from(c),a):r.slice()},a.unknown=function(c){return arguments.length?(n=c,a):n},a.copy=function(){return uk(t,r).unknown(n)},Ba.apply(a,arguments),a}function gv(){var e=uk().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,c,f,o=!1,m=0,_=0,w=.5;delete e.unknown;function E(){var C=t().length,M=a<n,I=M?a:n,D=M?n:a;c=(D-I)/Math.max(1,C-m+_*2),o&&(c=Math.floor(c)),I+=(D-I-c*(C-m))*w,f=c*(1-m),o&&(I=Math.round(I),f=Math.round(f));var $=Hye(C).map(function(B){return I+c*B});return r(M?$.reverse():$)}return e.domain=function(C){return arguments.length?(t(C),E()):t()},e.range=function(C){return arguments.length?([n,a]=C,n=+n,a=+a,E()):[n,a]},e.rangeRound=function(C){return[n,a]=C,n=+n,a=+a,o=!0,E()},e.bandwidth=function(){return f},e.step=function(){return c},e.round=function(C){return arguments.length?(o=!!C,E()):o},e.padding=function(C){return arguments.length?(m=Math.min(1,_=+C),E()):m},e.paddingInner=function(C){return arguments.length?(m=Math.min(1,C),E()):m},e.paddingOuter=function(C){return arguments.length?(_=+C,E()):_},e.align=function(C){return arguments.length?(w=Math.max(0,Math.min(1,C)),E()):w},e.copy=function(){return gv(t(),[n,a]).round(o).paddingInner(m).paddingOuter(_).align(w)},Ba.apply(E(),arguments)}function BV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BV(t())},e}function ky(){return BV(gv.apply(null,arguments).paddingInner(1))}function hk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function FV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function u_(){}var yv=.7,mb=1/yv,Qd="\\s*([+-]?\\d+)\\s*",vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zye=/^#([0-9a-f]{3,8})$/,Xye=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),Kye=new RegExp(`^rgb\\(${Ks},${Ks},${Ks}\\)$`),Yye=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${vv}\\)$`),Jye=new RegExp(`^rgba\\(${Ks},${Ks},${Ks},${vv}\\)$`),Qye=new RegExp(`^hsl\\(${vv},${Ks},${Ks}\\)$`),eve=new RegExp(`^hsla\\(${vv},${Ks},${Ks},${vv}\\)$`),UN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hk(u_,_v,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VN,formatHex:VN,formatHex8:tve,formatHsl:rve,formatRgb:WN,toString:WN});function VN(){return this.rgb().formatHex()}function tve(){return this.rgb().formatHex8()}function rve(){return UV(this).formatHsl()}function WN(){return this.rgb().formatRgb()}function _v(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Zye.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qN(t):r===3?new Po(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ox(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ox(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xye.exec(e))?new Po(t[1],t[2],t[3],1):(t=Kye.exec(e))?new Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yye.exec(e))?Ox(t[1],t[2],t[3],t[4]):(t=Jye.exec(e))?Ox(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qye.exec(e))?ZN(t[1],t[2]/100,t[3]/100,1):(t=eve.exec(e))?ZN(t[1],t[2]/100,t[3]/100,t[4]):UN.hasOwnProperty(e)?qN(UN[e]):e==="transparent"?new Po(NaN,NaN,NaN,0):null}function qN(e){return new Po(e>>16&255,e>>8&255,e&255,1)}function Ox(e,t,r,n){return n<=0&&(e=t=r=NaN),new Po(e,t,r,n)}function nve(e){return e instanceof u_||(e=_v(e)),e?(e=e.rgb(),new Po(e.r,e.g,e.b,e.opacity)):new Po}function _P(e,t,r,n){return arguments.length===1?nve(e):new Po(e,t,r,n??1)}function Po(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}hk(Po,_P,FV(u_,{brighter(e){return e=e==null?mb:Math.pow(mb,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yv:Math.pow(yv,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Po(Vh(this.r),Vh(this.g),Vh(this.b),gb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GN,formatHex:GN,formatHex8:ive,formatRgb:HN,toString:HN}));function GN(){return`#${$h(this.r)}${$h(this.g)}${$h(this.b)}`}function ive(){return`#${$h(this.r)}${$h(this.g)}${$h(this.b)}${$h((isNaN(this.opacity)?1:this.opacity)*255)}`}function HN(){const e=gb(this.opacity);return`${e===1?"rgb(":"rgba("}${Vh(this.r)}, ${Vh(this.g)}, ${Vh(this.b)}${e===1?")":`, ${e})`}`}function gb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $h(e){return e=Vh(e),(e<16?"0":"")+e.toString(16)}function ZN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _s(e,t,r,n)}function UV(e){if(e instanceof _s)return new _s(e.h,e.s,e.l,e.opacity);if(e instanceof u_||(e=_v(e)),!e)return new _s;if(e instanceof _s)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),c=Math.max(t,r,n),f=NaN,o=c-a,m=(c+a)/2;return o?(t===c?f=(r-n)/o+(r<n)*6:r===c?f=(n-t)/o+2:f=(t-r)/o+4,o/=m<.5?c+a:2-c-a,f*=60):o=m>0&&m<1?0:f,new _s(f,o,m,e.opacity)}function ove(e,t,r,n){return arguments.length===1?UV(e):new _s(e,t,r,n??1)}function _s(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}hk(_s,ove,FV(u_,{brighter(e){return e=e==null?mb:Math.pow(mb,e),new _s(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yv:Math.pow(yv,e),new _s(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Po(U2(e>=240?e-240:e+120,a,n),U2(e,a,n),U2(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new _s(XN(this.h),Mx(this.s),Mx(this.l),gb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gb(this.opacity);return`${e===1?"hsl(":"hsla("}${XN(this.h)}, ${Mx(this.s)*100}%, ${Mx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XN(e){return e=(e||0)%360,e<0?e+360:e}function Mx(e){return Math.max(0,Math.min(1,e||0))}function U2(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fk=e=>()=>e;function ave(e,t){return function(r){return e+r*t}}function sve(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function lve(e){return(e=+e)==1?VV:function(t,r){return r-t?sve(t,r,e):fk(isNaN(t)?r:t)}}function VV(e,t){var r=t-e;return r?ave(e,r):fk(isNaN(e)?t:e)}const KN=function e(t){var r=lve(t);function n(a,c){var f=r((a=_P(a)).r,(c=_P(c)).r),o=r(a.g,c.g),m=r(a.b,c.b),_=VV(a.opacity,c.opacity);return function(w){return a.r=f(w),a.g=o(w),a.b=m(w),a.opacity=_(w),a+""}}return n.gamma=e,n}(1);function cve(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(c){for(a=0;a<r;++a)n[a]=e[a]*(1-c)+t[a]*c;return n}}function uve(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hve(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),c=new Array(r),f;for(f=0;f<n;++f)a[f]=Qp(e[f],t[f]);for(;f<r;++f)c[f]=t[f];return function(o){for(f=0;f<n;++f)c[f]=a[f](o);return c}}function fve(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function yb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dve(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Qp(e[a],t[a]):n[a]=t[a];return function(c){for(a in r)n[a]=r[a](c);return n}}var xP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,V2=new RegExp(xP.source,"g");function pve(e){return function(){return e}}function mve(e){return function(t){return e(t)+""}}function gve(e,t){var r=xP.lastIndex=V2.lastIndex=0,n,a,c,f=-1,o=[],m=[];for(e=e+"",t=t+"";(n=xP.exec(e))&&(a=V2.exec(t));)(c=a.index)>r&&(c=t.slice(r,c),o[f]?o[f]+=c:o[++f]=c),(n=n[0])===(a=a[0])?o[f]?o[f]+=a:o[++f]=a:(o[++f]=null,m.push({i:f,x:yb(n,a)})),r=V2.lastIndex;return r<t.length&&(c=t.slice(r),o[f]?o[f]+=c:o[++f]=c),o.length<2?m[0]?mve(m[0].x):pve(t):(t=m.length,function(_){for(var w=0,E;w<t;++w)o[(E=m[w]).i]=E.x(_);return o.join("")})}function Qp(e,t){var r=typeof t,n;return t==null||r==="boolean"?fk(t):(r==="number"?yb:r==="string"?(n=_v(t))?(t=n,KN):gve:t instanceof _v?KN:t instanceof Date?fve:uve(t)?cve:Array.isArray(t)?hve:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dve:yb)(e,t)}function dk(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function yve(e,t){t===void 0&&(t=e,e=Qp);for(var r=0,n=t.length-1,a=t[0],c=new Array(n<0?0:n);r<n;)c[r]=e(a,a=t[++r]);return function(f){var o=Math.max(0,Math.min(n-1,Math.floor(f*=n)));return c[o](f-o)}}function vve(e){return function(){return e}}function vb(e){return+e}var YN=[0,1];function uo(e){return e}function bP(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:vve(isNaN(t)?NaN:.5)}function _ve(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function xve(e,t,r){var n=e[0],a=e[1],c=t[0],f=t[1];return a<n?(n=bP(a,n),c=r(f,c)):(n=bP(n,a),c=r(c,f)),function(o){return c(n(o))}}function bve(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),c=new Array(n),f=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<n;)a[f]=bP(e[f],e[f+1]),c[f]=r(t[f],t[f+1]);return function(o){var m=c_(e,o,1,n)-1;return c[m](a[m](o))}}function h_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fS(){var e=YN,t=YN,r=Qp,n,a,c,f=uo,o,m,_;function w(){var C=Math.min(e.length,t.length);return f!==uo&&(f=_ve(e[0],e[C-1])),o=C>2?bve:xve,m=_=null,E}function E(C){return C==null||isNaN(C=+C)?c:(m||(m=o(e.map(n),t,r)))(n(f(C)))}return E.invert=function(C){return f(a((_||(_=o(t,e.map(n),yb)))(C)))},E.domain=function(C){return arguments.length?(e=Array.from(C,vb),w()):e.slice()},E.range=function(C){return arguments.length?(t=Array.from(C),w()):t.slice()},E.rangeRound=function(C){return t=Array.from(C),r=dk,w()},E.clamp=function(C){return arguments.length?(f=C?!0:uo,w()):f!==uo},E.interpolate=function(C){return arguments.length?(r=C,w()):r},E.unknown=function(C){return arguments.length?(c=C,E):c},function(C,M){return n=C,a=M,w()}}function pk(){return fS()(uo,uo)}function wve(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _b(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function vp(e){return e=_b(Math.abs(e)),e?e[1]:NaN}function Sve(e,t){return function(r,n){for(var a=r.length,c=[],f=0,o=e[0],m=0;a>0&&o>0&&(m+o+1>n&&(o=Math.max(1,n-m)),c.push(r.substring(a-=o,a+o)),!((m+=o+1)>n));)o=e[f=(f+1)%e.length];return c.reverse().join(t)}}function Eve(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xv(e){if(!(t=Tve.exec(e)))throw new Error("invalid format: "+e);var t;return new mk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xv.prototype=mk.prototype;function mk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ave(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var WV;function Cve(e,t){var r=_b(e,t);if(!r)return e+"";var n=r[0],a=r[1],c=a-(WV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,f=n.length;return c===f?n:c>f?n+new Array(c-f+1).join("0"):c>0?n.slice(0,c)+"."+n.slice(c):"0."+new Array(1-c).join("0")+_b(e,Math.max(0,t+c-1))[0]}function JN(e,t){var r=_b(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const QN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wve,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>JN(e*100,t),r:JN,s:Cve,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ez(e){return e}var tz=Array.prototype.map,rz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pve(e){var t=e.grouping===void 0||e.thousands===void 0?ez:Sve(tz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?ez:Eve(tz.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function _(E){E=xv(E);var C=E.fill,M=E.align,I=E.sign,D=E.symbol,$=E.zero,B=E.width,F=E.comma,R=E.precision,U=E.trim,H=E.type;H==="n"?(F=!0,H="g"):QN[H]||(R===void 0&&(R=12),U=!0,H="g"),($||C==="0"&&M==="=")&&($=!0,C="0",M="=");var X=D==="$"?r:D==="#"&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",ee=D==="$"?n:/[%p]/.test(H)?f:"",oe=QN[H],ae=/[defgprs%]/.test(H);R=R===void 0?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function ge(he){var ve=X,Ee=ee,Re,Ne,Ve;if(H==="c")Ee=oe(he)+Ee,he="";else{he=+he;var Ke=he<0||1/he<0;if(he=isNaN(he)?m:oe(Math.abs(he),R),U&&(he=Ave(he)),Ke&&+he==0&&I!=="+"&&(Ke=!1),ve=(Ke?I==="("?I:o:I==="-"||I==="("?"":I)+ve,Ee=(H==="s"?rz[8+WV/3]:"")+Ee+(Ke&&I==="("?")":""),ae){for(Re=-1,Ne=he.length;++Re<Ne;)if(Ve=he.charCodeAt(Re),48>Ve||Ve>57){Ee=(Ve===46?a+he.slice(Re+1):he.slice(Re))+Ee,he=he.slice(0,Re);break}}}F&&!$&&(he=t(he,1/0));var ke=ve.length+he.length+Ee.length,Ge=ke<B?new Array(B-ke+1).join(C):"";switch(F&&$&&(he=t(Ge+he,Ge.length?B-Ee.length:1/0),Ge=""),M){case"<":he=ve+he+Ee+Ge;break;case"=":he=ve+Ge+he+Ee;break;case"^":he=Ge.slice(0,ke=Ge.length>>1)+ve+he+Ee+Ge.slice(ke);break;default:he=Ge+ve+he+Ee;break}return c(he)}return ge.toString=function(){return E+""},ge}function w(E,C){var M=_((E=xv(E),E.type="f",E)),I=Math.max(-8,Math.min(8,Math.floor(vp(C)/3)))*3,D=Math.pow(10,-I),$=rz[8+I/3];return function(B){return M(D*B)+$}}return{format:_,formatPrefix:w}}var kx,gk,qV;Ove({thousands:",",grouping:[3],currency:["$",""]});function Ove(e){return kx=Pve(e),gk=kx.format,qV=kx.formatPrefix,kx}function Mve(e){return Math.max(0,-vp(Math.abs(e)))}function kve(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vp(t)/3)))*3-vp(Math.abs(e)))}function Ive(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vp(t)-vp(e))+1}function GV(e,t,r,n){var a=Wye(e,t,r),c;switch(n=xv(n??",f"),n.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(c=kve(a,f))&&(n.precision=c),qV(n,f)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(c=Ive(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=c-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(c=Mve(a))&&(n.precision=c-(n.type==="%")*2);break}}return gk(n)}function Du(e){var t=e.domain;return e.ticks=function(r){var n=t();return gP(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return GV(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,c=n.length-1,f=n[a],o=n[c],m,_,w=10;for(o<f&&(_=f,f=o,o=_,_=a,a=c,c=_);w-- >0;){if(_=yP(f,o,r),_===m)return n[a]=f,n[c]=o,t(n);if(_>0)f=Math.floor(f/_)*_,o=Math.ceil(o/_)*_;else if(_<0)f=Math.ceil(f*_)/_,o=Math.floor(o*_)/_;else break;m=_}return e},e}function xb(){var e=pk();return e.copy=function(){return h_(e,xb())},Ba.apply(e,arguments),Du(e)}function HV(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,vb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return HV(e).unknown(t)},e=arguments.length?Array.from(e,vb):[0,1],Du(r)}function ZV(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],c=e[n],f;return c<a&&(f=r,r=n,n=f,f=a,a=c,c=f),e[r]=t.floor(a),e[n]=t.ceil(c),e}function nz(e){return Math.log(e)}function iz(e){return Math.exp(e)}function Dve(e){return-Math.log(-e)}function Rve(e){return-Math.exp(-e)}function Lve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jve(e){return e===10?Lve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $ve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oz(e){return(t,r)=>-e(-t,r)}function yk(e){const t=e(nz,iz),r=t.domain;let n=10,a,c;function f(){return a=$ve(n),c=jve(n),r()[0]<0?(a=oz(a),c=oz(c),e(Dve,Rve)):e(nz,iz),t}return t.base=function(o){return arguments.length?(n=+o,f()):n},t.domain=function(o){return arguments.length?(r(o),f()):r()},t.ticks=o=>{const m=r();let _=m[0],w=m[m.length-1];const E=w<_;E&&([_,w]=[w,_]);let C=a(_),M=a(w),I,D;const $=o==null?10:+o;let B=[];if(!(n%1)&&M-C<$){if(C=Math.floor(C),M=Math.ceil(M),_>0){for(;C<=M;++C)for(I=1;I<n;++I)if(D=C<0?I/c(-C):I*c(C),!(D<_)){if(D>w)break;B.push(D)}}else for(;C<=M;++C)for(I=n-1;I>=1;--I)if(D=C>0?I/c(-C):I*c(C),!(D<_)){if(D>w)break;B.push(D)}B.length*2<$&&(B=gP(_,w,$))}else B=gP(C,M,Math.min(M-C,$)).map(c);return E?B.reverse():B},t.tickFormat=(o,m)=>{if(o==null&&(o=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=xv(m)).precision==null&&(m.trim=!0),m=gk(m)),o===1/0)return m;const _=Math.max(1,n*o/t.ticks().length);return w=>{let E=w/c(Math.round(a(w)));return E*n<n-.5&&(E*=n),E<=_?m(w):""}},t.nice=()=>r(ZV(r(),{floor:o=>c(Math.floor(a(o))),ceil:o=>c(Math.ceil(a(o)))})),t}function XV(){const e=yk(fS()).domain([1,10]);return e.copy=()=>h_(e,XV()).base(e.base()),Ba.apply(e,arguments),e}function az(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vk(e){var t=1,r=e(az(t),sz(t));return r.constant=function(n){return arguments.length?e(az(t=+n),sz(t)):t},Du(r)}function KV(){var e=vk(fS());return e.copy=function(){return h_(e,KV()).constant(e.constant())},Ba.apply(e,arguments)}function lz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Nve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zve(e){return e<0?-e*e:e*e}function _k(e){var t=e(uo,uo),r=1;function n(){return r===1?e(uo,uo):r===.5?e(Nve,zve):e(lz(r),lz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Du(t)}function xk(){var e=_k(fS());return e.copy=function(){return h_(e,xk()).exponent(e.exponent())},Ba.apply(e,arguments),e}function Bve(){return xk.apply(null,arguments).exponent(.5)}function cz(e){return Math.sign(e)*e*e}function Fve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function YV(){var e=pk(),t=[0,1],r=!1,n;function a(c){var f=Fve(e(c));return isNaN(f)?n:r?Math.round(f):f}return a.invert=function(c){return e.invert(cz(c))},a.domain=function(c){return arguments.length?(e.domain(c),a):e.domain()},a.range=function(c){return arguments.length?(e.range((t=Array.from(c,vb)).map(cz)),a):t.slice()},a.rangeRound=function(c){return a.range(c).round(!0)},a.round=function(c){return arguments.length?(r=!!c,a):r},a.clamp=function(c){return arguments.length?(e.clamp(c),a):e.clamp()},a.unknown=function(c){return arguments.length?(n=c,a):n},a.copy=function(){return YV(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ba.apply(a,arguments),Du(a)}function JV(){var e=[],t=[],r=[],n;function a(){var f=0,o=Math.max(1,t.length);for(r=new Array(o-1);++f<o;)r[f-1]=Gye(e,f/o);return c}function c(f){return f==null||isNaN(f=+f)?n:t[c_(r,f)]}return c.invertExtent=function(f){var o=t.indexOf(f);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},c.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let o of f)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(xu),a()},c.range=function(f){return arguments.length?(t=Array.from(f),a()):t.slice()},c.unknown=function(f){return arguments.length?(n=f,c):n},c.quantiles=function(){return r.slice()},c.copy=function(){return JV().domain(e).range(t).unknown(n)},Ba.apply(c,arguments)}function QV(){var e=0,t=1,r=1,n=[.5],a=[0,1],c;function f(m){return m!=null&&m<=m?a[c_(n,m,0,r)]:c}function o(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return f}return f.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,o()):[e,t]},f.range=function(m){return arguments.length?(r=(a=Array.from(m)).length-1,o()):a.slice()},f.invertExtent=function(m){var _=a.indexOf(m);return _<0?[NaN,NaN]:_<1?[e,n[0]]:_>=r?[n[r-1],t]:[n[_-1],n[_]]},f.unknown=function(m){return arguments.length&&(c=m),f},f.thresholds=function(){return n.slice()},f.copy=function(){return QV().domain([e,t]).range(a).unknown(c)},Ba.apply(Du(f),arguments)}function e8(){var e=[.5],t=[0,1],r,n=1;function a(c){return c!=null&&c<=c?t[c_(e,c,0,n)]:r}return a.domain=function(c){return arguments.length?(e=Array.from(c),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(c){return arguments.length?(t=Array.from(c),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(c){var f=t.indexOf(c);return[e[f-1],e[f]]},a.unknown=function(c){return arguments.length?(r=c,a):r},a.copy=function(){return e8().domain(e).range(t).unknown(r)},Ba.apply(a,arguments)}const W2=new Date,q2=new Date;function _i(e,t,r,n){function a(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return a.floor=c=>(e(c=new Date(+c)),c),a.ceil=c=>(e(c=new Date(c-1)),t(c,1),e(c),c),a.round=c=>{const f=a(c),o=a.ceil(c);return c-f<o-c?f:o},a.offset=(c,f)=>(t(c=new Date(+c),f==null?1:Math.floor(f)),c),a.range=(c,f,o)=>{const m=[];if(c=a.ceil(c),o=o==null?1:Math.floor(o),!(c<f)||!(o>0))return m;let _;do m.push(_=new Date(+c)),t(c,o),e(c);while(_<c&&c<f);return m},a.filter=c=>_i(f=>{if(f>=f)for(;e(f),!c(f);)f.setTime(f-1)},(f,o)=>{if(f>=f)if(o<0)for(;++o<=0;)for(;t(f,-1),!c(f););else for(;--o>=0;)for(;t(f,1),!c(f););}),r&&(a.count=(c,f)=>(W2.setTime(+c),q2.setTime(+f),e(W2),e(q2),Math.floor(r(W2,q2))),a.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?a.filter(n?f=>n(f)%c===0:f=>a.count(0,f)%c===0):a)),a}const bb=_i(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_i(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):bb);bb.range;const $l=1e3,Oa=$l*60,Nl=Oa*60,Jl=Nl*24,bk=Jl*7,uz=Jl*30,G2=Jl*365,Nh=_i(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$l)},(e,t)=>(t-e)/$l,e=>e.getUTCSeconds());Nh.range;const wk=_i(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$l)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getMinutes());wk.range;const Sk=_i(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Oa)},(e,t)=>(t-e)/Oa,e=>e.getUTCMinutes());Sk.range;const Ek=_i(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$l-e.getMinutes()*Oa)},(e,t)=>{e.setTime(+e+t*Nl)},(e,t)=>(t-e)/Nl,e=>e.getHours());Ek.range;const Tk=_i(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Nl)},(e,t)=>(t-e)/Nl,e=>e.getUTCHours());Tk.range;const f_=_i(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Oa)/Jl,e=>e.getDate()-1);f_.range;const dS=_i(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jl,e=>e.getUTCDate()-1);dS.range;const t8=_i(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jl,e=>Math.floor(e/Jl));t8.range;function df(e){return _i(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Oa)/bk)}const pS=df(0),wb=df(1),Uve=df(2),Vve=df(3),_p=df(4),Wve=df(5),qve=df(6);pS.range;wb.range;Uve.range;Vve.range;_p.range;Wve.range;qve.range;function pf(e){return _i(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/bk)}const mS=pf(0),Sb=pf(1),Gve=pf(2),Hve=pf(3),xp=pf(4),Zve=pf(5),Xve=pf(6);mS.range;Sb.range;Gve.range;Hve.range;xp.range;Zve.range;Xve.range;const Ak=_i(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ak.range;const Ck=_i(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ck.range;const Ql=_i(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_i(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ql.range;const ec=_i(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ec.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_i(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ec.range;function H2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kve(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yve(e){let t,r,n;e.length!==2?(t=H2,r=(o,m)=>H2(e(o),m),n=(o,m)=>e(o)-m):(t=e===H2||e===Kve?e:Jve,r=e,n=e);function a(o,m,_=0,w=o.length){if(_<w){if(t(m,m)!==0)return w;do{const E=_+w>>>1;r(o[E],m)<0?_=E+1:w=E}while(_<w)}return _}function c(o,m,_=0,w=o.length){if(_<w){if(t(m,m)!==0)return w;do{const E=_+w>>>1;r(o[E],m)<=0?_=E+1:w=E}while(_<w)}return _}function f(o,m,_=0,w=o.length){const E=a(o,m,_,w-1);return E>_&&n(o[E-1],m)>-n(o[E],m)?E-1:E}return{left:a,center:f,right:c}}function Jve(){return 0}const Qve=Math.sqrt(50),e_e=Math.sqrt(10),t_e=Math.sqrt(2);function r8(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),c=n/Math.pow(10,a),f=c>=Qve?10:c>=e_e?5:c>=t_e?2:1;let o,m,_;return a<0?(_=Math.pow(10,-a)/f,o=Math.round(e*_),m=Math.round(t*_),o/_<e&&++o,m/_>t&&--m,_=-_):(_=Math.pow(10,a)*f,o=Math.round(e/_),m=Math.round(t/_),o*_<e&&++o,m*_>t&&--m),m<o&&.5<=r&&r<2?r8(e,t,r*2):[o,m,_]}function hz(e,t,r){return t=+t,e=+e,r=+r,r8(e,t,r)[2]}function fz(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?hz(t,e,r):hz(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function n8(e,t,r,n,a,c){const f=[[Nh,1,$l],[Nh,5,5*$l],[Nh,15,15*$l],[Nh,30,30*$l],[c,1,Oa],[c,5,5*Oa],[c,15,15*Oa],[c,30,30*Oa],[a,1,Nl],[a,3,3*Nl],[a,6,6*Nl],[a,12,12*Nl],[n,1,Jl],[n,2,2*Jl],[r,1,bk],[t,1,uz],[t,3,3*uz],[e,1,G2]];function o(_,w,E){const C=w<_;C&&([_,w]=[w,_]);const M=E&&typeof E.range=="function"?E:m(_,w,E),I=M?M.range(_,+w+1):[];return C?I.reverse():I}function m(_,w,E){const C=Math.abs(w-_)/E,M=Yve(([,,$])=>$).right(f,C);if(M===f.length)return e.every(fz(_/G2,w/G2,E));if(M===0)return bb.every(Math.max(fz(_,w,E),1));const[I,D]=f[C/f[M-1][2]<f[M][2]/C?M-1:M];return I.every(D)}return[o,m]}const[r_e,n_e]=n8(ec,Ck,mS,t8,Tk,Sk),[i_e,o_e]=n8(Ql,Ak,pS,f_,Ek,wk);function Z2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function X2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function a_e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,c=e.days,f=e.shortDays,o=e.months,m=e.shortMonths,_=Qg(a),w=ey(a),E=Qg(c),C=ey(c),M=Qg(f),I=ey(f),D=Qg(o),$=ey(o),B=Qg(m),F=ey(m),R={a:Ke,A:ke,b:Ge,B:Ye,c:null,d:vz,e:vz,f:O_e,g:z_e,G:F_e,H:A_e,I:C_e,j:P_e,L:i8,m:M_e,M:k_e,p:_t,q:Ot,Q:bz,s:wz,S:I_e,u:D_e,U:R_e,V:L_e,w:j_e,W:$_e,x:null,X:null,y:N_e,Y:B_e,Z:U_e,"%":xz},U={a:bt,A:Zt,b:Xt,B:kt,c:null,d:_z,e:_z,f:G_e,g:r0e,G:i0e,H:V_e,I:W_e,j:q_e,L:a8,m:H_e,M:Z_e,p:Mt,q:$r,Q:bz,s:wz,S:X_e,u:K_e,U:Y_e,V:J_e,w:Q_e,W:e0e,x:null,X:null,y:t0e,Y:n0e,Z:o0e,"%":xz},H={a:ge,A:he,b:ve,B:Ee,c:Re,d:gz,e:gz,f:w_e,g:mz,G:pz,H:yz,I:yz,j:v_e,L:b_e,m:y_e,M:__e,p:ae,q:g_e,Q:E_e,s:T_e,S:x_e,u:h_e,U:f_e,V:d_e,w:u_e,W:p_e,x:Ne,X:Ve,y:mz,Y:pz,Z:m_e,"%":S_e};R.x=X(r,R),R.X=X(n,R),R.c=X(t,R),U.x=X(r,U),U.X=X(n,U),U.c=X(t,U);function X(St,Dt){return function(xt){var dt=[],er=-1,Kt=0,Nt=St.length,vr,nn,mn;for(xt instanceof Date||(xt=new Date(+xt));++er<Nt;)St.charCodeAt(er)===37&&(dt.push(St.slice(Kt,er)),(nn=dz[vr=St.charAt(++er)])!=null?vr=St.charAt(++er):nn=vr==="e"?" ":"0",(mn=Dt[vr])&&(vr=mn(xt,nn)),dt.push(vr),Kt=er+1);return dt.push(St.slice(Kt,er)),dt.join("")}}function ee(St,Dt){return function(xt){var dt=Jg(1900,void 0,1),er=oe(dt,St,xt+="",0),Kt,Nt;if(er!=xt.length)return null;if("Q"in dt)return new Date(dt.Q);if("s"in dt)return new Date(dt.s*1e3+("L"in dt?dt.L:0));if(Dt&&!("Z"in dt)&&(dt.Z=0),"p"in dt&&(dt.H=dt.H%12+dt.p*12),dt.m===void 0&&(dt.m="q"in dt?dt.q:0),"V"in dt){if(dt.V<1||dt.V>53)return null;"w"in dt||(dt.w=1),"Z"in dt?(Kt=X2(Jg(dt.y,0,1)),Nt=Kt.getUTCDay(),Kt=Nt>4||Nt===0?Sb.ceil(Kt):Sb(Kt),Kt=dS.offset(Kt,(dt.V-1)*7),dt.y=Kt.getUTCFullYear(),dt.m=Kt.getUTCMonth(),dt.d=Kt.getUTCDate()+(dt.w+6)%7):(Kt=Z2(Jg(dt.y,0,1)),Nt=Kt.getDay(),Kt=Nt>4||Nt===0?wb.ceil(Kt):wb(Kt),Kt=f_.offset(Kt,(dt.V-1)*7),dt.y=Kt.getFullYear(),dt.m=Kt.getMonth(),dt.d=Kt.getDate()+(dt.w+6)%7)}else("W"in dt||"U"in dt)&&("w"in dt||(dt.w="u"in dt?dt.u%7:"W"in dt?1:0),Nt="Z"in dt?X2(Jg(dt.y,0,1)).getUTCDay():Z2(Jg(dt.y,0,1)).getDay(),dt.m=0,dt.d="W"in dt?(dt.w+6)%7+dt.W*7-(Nt+5)%7:dt.w+dt.U*7-(Nt+6)%7);return"Z"in dt?(dt.H+=dt.Z/100|0,dt.M+=dt.Z%100,X2(dt)):Z2(dt)}}function oe(St,Dt,xt,dt){for(var er=0,Kt=Dt.length,Nt=xt.length,vr,nn;er<Kt;){if(dt>=Nt)return-1;if(vr=Dt.charCodeAt(er++),vr===37){if(vr=Dt.charAt(er++),nn=H[vr in dz?Dt.charAt(er++):vr],!nn||(dt=nn(St,xt,dt))<0)return-1}else if(vr!=xt.charCodeAt(dt++))return-1}return dt}function ae(St,Dt,xt){var dt=_.exec(Dt.slice(xt));return dt?(St.p=w.get(dt[0].toLowerCase()),xt+dt[0].length):-1}function ge(St,Dt,xt){var dt=M.exec(Dt.slice(xt));return dt?(St.w=I.get(dt[0].toLowerCase()),xt+dt[0].length):-1}function he(St,Dt,xt){var dt=E.exec(Dt.slice(xt));return dt?(St.w=C.get(dt[0].toLowerCase()),xt+dt[0].length):-1}function ve(St,Dt,xt){var dt=B.exec(Dt.slice(xt));return dt?(St.m=F.get(dt[0].toLowerCase()),xt+dt[0].length):-1}function Ee(St,Dt,xt){var dt=D.exec(Dt.slice(xt));return dt?(St.m=$.get(dt[0].toLowerCase()),xt+dt[0].length):-1}function Re(St,Dt,xt){return oe(St,t,Dt,xt)}function Ne(St,Dt,xt){return oe(St,r,Dt,xt)}function Ve(St,Dt,xt){return oe(St,n,Dt,xt)}function Ke(St){return f[St.getDay()]}function ke(St){return c[St.getDay()]}function Ge(St){return m[St.getMonth()]}function Ye(St){return o[St.getMonth()]}function _t(St){return a[+(St.getHours()>=12)]}function Ot(St){return 1+~~(St.getMonth()/3)}function bt(St){return f[St.getUTCDay()]}function Zt(St){return c[St.getUTCDay()]}function Xt(St){return m[St.getUTCMonth()]}function kt(St){return o[St.getUTCMonth()]}function Mt(St){return a[+(St.getUTCHours()>=12)]}function $r(St){return 1+~~(St.getUTCMonth()/3)}return{format:function(St){var Dt=X(St+="",R);return Dt.toString=function(){return St},Dt},parse:function(St){var Dt=ee(St+="",!1);return Dt.toString=function(){return St},Dt},utcFormat:function(St){var Dt=X(St+="",U);return Dt.toString=function(){return St},Dt},utcParse:function(St){var Dt=ee(St+="",!0);return Dt.toString=function(){return St},Dt}}}var dz={"-":"",_:" ",0:"0"},Di=/^\s*\d+/,s_e=/^%/,l_e=/[\\^$*+?|[\]().{}]/g;function Gr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",c=a.length;return n+(c<r?new Array(r-c+1).join(t)+a:a)}function c_e(e){return e.replace(l_e,"\\$&")}function Qg(e){return new RegExp("^(?:"+e.map(c_e).join("|")+")","i")}function ey(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function u_e(e,t,r){var n=Di.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function h_e(e,t,r){var n=Di.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function f_e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function d_e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function p_e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pz(e,t,r){var n=Di.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function mz(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function m_e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function g_e(e,t,r){var n=Di.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function y_e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function gz(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function v_e(e,t,r){var n=Di.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function yz(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function __e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function x_e(e,t,r){var n=Di.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function b_e(e,t,r){var n=Di.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function w_e(e,t,r){var n=Di.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function S_e(e,t,r){var n=s_e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function E_e(e,t,r){var n=Di.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function T_e(e,t,r){var n=Di.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function vz(e,t){return Gr(e.getDate(),t,2)}function A_e(e,t){return Gr(e.getHours(),t,2)}function C_e(e,t){return Gr(e.getHours()%12||12,t,2)}function P_e(e,t){return Gr(1+f_.count(Ql(e),e),t,3)}function i8(e,t){return Gr(e.getMilliseconds(),t,3)}function O_e(e,t){return i8(e,t)+"000"}function M_e(e,t){return Gr(e.getMonth()+1,t,2)}function k_e(e,t){return Gr(e.getMinutes(),t,2)}function I_e(e,t){return Gr(e.getSeconds(),t,2)}function D_e(e){var t=e.getDay();return t===0?7:t}function R_e(e,t){return Gr(pS.count(Ql(e)-1,e),t,2)}function o8(e){var t=e.getDay();return t>=4||t===0?_p(e):_p.ceil(e)}function L_e(e,t){return e=o8(e),Gr(_p.count(Ql(e),e)+(Ql(e).getDay()===4),t,2)}function j_e(e){return e.getDay()}function $_e(e,t){return Gr(wb.count(Ql(e)-1,e),t,2)}function N_e(e,t){return Gr(e.getFullYear()%100,t,2)}function z_e(e,t){return e=o8(e),Gr(e.getFullYear()%100,t,2)}function B_e(e,t){return Gr(e.getFullYear()%1e4,t,4)}function F_e(e,t){var r=e.getDay();return e=r>=4||r===0?_p(e):_p.ceil(e),Gr(e.getFullYear()%1e4,t,4)}function U_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Gr(t/60|0,"0",2)+Gr(t%60,"0",2)}function _z(e,t){return Gr(e.getUTCDate(),t,2)}function V_e(e,t){return Gr(e.getUTCHours(),t,2)}function W_e(e,t){return Gr(e.getUTCHours()%12||12,t,2)}function q_e(e,t){return Gr(1+dS.count(ec(e),e),t,3)}function a8(e,t){return Gr(e.getUTCMilliseconds(),t,3)}function G_e(e,t){return a8(e,t)+"000"}function H_e(e,t){return Gr(e.getUTCMonth()+1,t,2)}function Z_e(e,t){return Gr(e.getUTCMinutes(),t,2)}function X_e(e,t){return Gr(e.getUTCSeconds(),t,2)}function K_e(e){var t=e.getUTCDay();return t===0?7:t}function Y_e(e,t){return Gr(mS.count(ec(e)-1,e),t,2)}function s8(e){var t=e.getUTCDay();return t>=4||t===0?xp(e):xp.ceil(e)}function J_e(e,t){return e=s8(e),Gr(xp.count(ec(e),e)+(ec(e).getUTCDay()===4),t,2)}function Q_e(e){return e.getUTCDay()}function e0e(e,t){return Gr(Sb.count(ec(e)-1,e),t,2)}function t0e(e,t){return Gr(e.getUTCFullYear()%100,t,2)}function r0e(e,t){return e=s8(e),Gr(e.getUTCFullYear()%100,t,2)}function n0e(e,t){return Gr(e.getUTCFullYear()%1e4,t,4)}function i0e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?xp(e):xp.ceil(e),Gr(e.getUTCFullYear()%1e4,t,4)}function o0e(){return"+0000"}function xz(){return"%"}function bz(e){return+e}function wz(e){return Math.floor(+e/1e3)}var Sd,l8,c8;a0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function a0e(e){return Sd=a_e(e),l8=Sd.format,Sd.parse,c8=Sd.utcFormat,Sd.utcParse,Sd}function s0e(e){return new Date(e)}function l0e(e){return e instanceof Date?+e:+new Date(+e)}function Pk(e,t,r,n,a,c,f,o,m,_){var w=pk(),E=w.invert,C=w.domain,M=_(".%L"),I=_(":%S"),D=_("%I:%M"),$=_("%I %p"),B=_("%a %d"),F=_("%b %d"),R=_("%B"),U=_("%Y");function H(X){return(m(X)<X?M:o(X)<X?I:f(X)<X?D:c(X)<X?$:n(X)<X?a(X)<X?B:F:r(X)<X?R:U)(X)}return w.invert=function(X){return new Date(E(X))},w.domain=function(X){return arguments.length?C(Array.from(X,l0e)):C().map(s0e)},w.ticks=function(X){var ee=C();return e(ee[0],ee[ee.length-1],X??10)},w.tickFormat=function(X,ee){return ee==null?H:_(ee)},w.nice=function(X){var ee=C();return(!X||typeof X.range!="function")&&(X=t(ee[0],ee[ee.length-1],X??10)),X?C(ZV(ee,X)):w},w.copy=function(){return h_(w,Pk(e,t,r,n,a,c,f,o,m,_))},w}function c0e(){return Ba.apply(Pk(i_e,o_e,Ql,Ak,pS,f_,Ek,wk,Nh,l8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function u0e(){return Ba.apply(Pk(r_e,n_e,ec,Ck,mS,dS,Tk,Sk,Nh,c8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gS(){var e=0,t=1,r,n,a,c,f=uo,o=!1,m;function _(E){return E==null||isNaN(E=+E)?m:f(a===0?.5:(E=(c(E)-r)*a,o?Math.max(0,Math.min(1,E)):E))}_.domain=function(E){return arguments.length?([e,t]=E,r=c(e=+e),n=c(t=+t),a=r===n?0:1/(n-r),_):[e,t]},_.clamp=function(E){return arguments.length?(o=!!E,_):o},_.interpolator=function(E){return arguments.length?(f=E,_):f};function w(E){return function(C){var M,I;return arguments.length?([M,I]=C,f=E(M,I),_):[f(0),f(1)]}}return _.range=w(Qp),_.rangeRound=w(dk),_.unknown=function(E){return arguments.length?(m=E,_):m},function(E){return c=E,r=E(e),n=E(t),a=r===n?0:1/(n-r),_}}function Ru(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function u8(){var e=Du(gS()(uo));return e.copy=function(){return Ru(e,u8())},ac.apply(e,arguments)}function h8(){var e=yk(gS()).domain([1,10]);return e.copy=function(){return Ru(e,h8()).base(e.base())},ac.apply(e,arguments)}function f8(){var e=vk(gS());return e.copy=function(){return Ru(e,f8()).constant(e.constant())},ac.apply(e,arguments)}function Ok(){var e=_k(gS());return e.copy=function(){return Ru(e,Ok()).exponent(e.exponent())},ac.apply(e,arguments)}function h0e(){return Ok.apply(null,arguments).exponent(.5)}function d8(){var e=[],t=uo;function r(n){if(n!=null&&!isNaN(n=+n))return t((c_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,c)=>qye(e,c/n))},r.copy=function(){return d8(t).domain(e)},ac.apply(r,arguments)}function yS(){var e=0,t=.5,r=1,n=1,a,c,f,o,m,_=uo,w,E=!1,C;function M(D){return isNaN(D=+D)?C:(D=.5+((D=+w(D))-c)*(n*D<n*c?o:m),_(E?Math.max(0,Math.min(1,D)):D))}M.domain=function(D){return arguments.length?([e,t,r]=D,a=w(e=+e),c=w(t=+t),f=w(r=+r),o=a===c?0:.5/(c-a),m=c===f?0:.5/(f-c),n=c<a?-1:1,M):[e,t,r]},M.clamp=function(D){return arguments.length?(E=!!D,M):E},M.interpolator=function(D){return arguments.length?(_=D,M):_};function I(D){return function($){var B,F,R;return arguments.length?([B,F,R]=$,_=yve(D,[B,F,R]),M):[_(0),_(.5),_(1)]}}return M.range=I(Qp),M.rangeRound=I(dk),M.unknown=function(D){return arguments.length?(C=D,M):C},function(D){return w=D,a=D(e),c=D(t),f=D(r),o=a===c?0:.5/(c-a),m=c===f?0:.5/(f-c),n=c<a?-1:1,M}}function p8(){var e=Du(yS()(uo));return e.copy=function(){return Ru(e,p8())},ac.apply(e,arguments)}function m8(){var e=yk(yS()).domain([.1,1,10]);return e.copy=function(){return Ru(e,m8()).base(e.base())},ac.apply(e,arguments)}function g8(){var e=vk(yS());return e.copy=function(){return Ru(e,g8()).constant(e.constant())},ac.apply(e,arguments)}function Mk(){var e=_k(yS());return e.copy=function(){return Ru(e,Mk()).exponent(e.exponent())},ac.apply(e,arguments)}function f0e(){return Mk.apply(null,arguments).exponent(.5)}const Sz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gv,scaleDiverging:p8,scaleDivergingLog:m8,scaleDivergingPow:Mk,scaleDivergingSqrt:f0e,scaleDivergingSymlog:g8,scaleIdentity:HV,scaleImplicit:vP,scaleLinear:xb,scaleLog:XV,scaleOrdinal:uk,scalePoint:ky,scalePow:xk,scaleQuantile:JV,scaleQuantize:QV,scaleRadial:YV,scaleSequential:u8,scaleSequentialLog:h8,scaleSequentialPow:Ok,scaleSequentialQuantile:d8,scaleSequentialSqrt:h0e,scaleSequentialSymlog:f8,scaleSqrt:Bve,scaleSymlog:KV,scaleThreshold:e8,scaleTime:c0e,scaleUtc:u0e,tickFormat:GV},Symbol.toStringTag,{value:"Module"}));var em=1e9,d0e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ik,On=!0,ja="[DecimalError] ",Wh=ja+"Invalid argument: ",kk=ja+"Exponent out of range: ",tm=Math.floor,kh=Math.pow,p0e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xo,Pi=1e7,bn=7,y8=9007199254740991,Eb=tm(y8/bn),Vt={};Vt.absoluteValue=Vt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Vt.comparedTo=Vt.cmp=function(e){var t,r,n,a,c=this;if(e=new c.constructor(e),c.s!==e.s)return c.s||-e.s;if(c.e!==e.e)return c.e>e.e^c.s<0?1:-1;for(n=c.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(c.d[t]!==e.d[t])return c.d[t]>e.d[t]^c.s<0?1:-1;return n===a?0:n>a^c.s<0?1:-1};Vt.decimalPlaces=Vt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*bn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Vt.dividedBy=Vt.div=function(e){return Wl(this,new this.constructor(e))};Vt.dividedToIntegerBy=Vt.idiv=function(e){var t=this,r=t.constructor;return hn(Wl(t,new r(e),0,1),r.precision)};Vt.equals=Vt.eq=function(e){return!this.cmp(e)};Vt.exponent=function(){return si(this)};Vt.greaterThan=Vt.gt=function(e){return this.cmp(e)>0};Vt.greaterThanOrEqualTo=Vt.gte=function(e){return this.cmp(e)>=0};Vt.isInteger=Vt.isint=function(){return this.e>this.d.length-2};Vt.isNegative=Vt.isneg=function(){return this.s<0};Vt.isPositive=Vt.ispos=function(){return this.s>0};Vt.isZero=function(){return this.s===0};Vt.lessThan=Vt.lt=function(e){return this.cmp(e)<0};Vt.lessThanOrEqualTo=Vt.lte=function(e){return this.cmp(e)<1};Vt.logarithm=Vt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,c=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xo))throw Error(ja+"NaN");if(r.s<1)throw Error(ja+(r.s?"NaN":"-Infinity"));return r.eq(Xo)?new n(0):(On=!1,t=Wl(bv(r,c),bv(e,c),c),On=!0,hn(t,a))};Vt.minus=Vt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x8(t,e):v8(t,(e.s=-e.s,e))};Vt.modulo=Vt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ja+"NaN");return r.s?(On=!1,t=Wl(r,e,0,1).times(e),On=!0,r.minus(t)):hn(new n(r),a)};Vt.naturalExponential=Vt.exp=function(){return _8(this)};Vt.naturalLogarithm=Vt.ln=function(){return bv(this)};Vt.negated=Vt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Vt.plus=Vt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v8(t,e):x8(t,(e.s=-e.s,e))};Vt.precision=Vt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Wh+e);if(t=si(a)+1,n=a.d.length-1,r=n*bn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Vt.squareRoot=Vt.sqrt=function(){var e,t,r,n,a,c,f,o=this,m=o.constructor;if(o.s<1){if(!o.s)return new m(0);throw Error(ja+"NaN")}for(e=si(o),On=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=qs(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=tm((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(a.toString()),r=m.precision,a=f=r+3;;)if(c=n,n=c.plus(Wl(o,c,f+2)).times(.5),qs(c.d).slice(0,f)===(t=qs(n.d)).slice(0,f)){if(t=t.slice(f-3,f+1),a==f&&t=="4999"){if(hn(c,r+1,0),c.times(c).eq(o)){n=c;break}}else if(t!="9999")break;f+=4}return On=!0,hn(n,r)};Vt.times=Vt.mul=function(e){var t,r,n,a,c,f,o,m,_,w=this,E=w.constructor,C=w.d,M=(e=new E(e)).d;if(!w.s||!e.s)return new E(0);for(e.s*=w.s,r=w.e+e.e,m=C.length,_=M.length,m<_&&(c=C,C=M,M=c,f=m,m=_,_=f),c=[],f=m+_,n=f;n--;)c.push(0);for(n=_;--n>=0;){for(t=0,a=m+n;a>n;)o=c[a]+M[n]*C[a-n-1]+t,c[a--]=o%Pi|0,t=o/Pi|0;c[a]=(c[a]+t)%Pi|0}for(;!c[--f];)c.pop();return t?++r:c.shift(),e.d=c,e.e=r,On?hn(e,E.precision):e};Vt.toDecimalPlaces=Vt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(tl(e,0,em),t===void 0?t=n.rounding:tl(t,0,8),hn(r,e+si(r)+1,t))};Vt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=tf(n,!0):(tl(e,0,em),t===void 0?t=a.rounding:tl(t,0,8),n=hn(new a(n),e+1,t),r=tf(n,!0,e+1)),r};Vt.toFixed=function(e,t){var r,n,a=this,c=a.constructor;return e===void 0?tf(a):(tl(e,0,em),t===void 0?t=c.rounding:tl(t,0,8),n=hn(new c(a),e+si(a)+1,t),r=tf(n.abs(),!1,e+si(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Vt.toInteger=Vt.toint=function(){var e=this,t=e.constructor;return hn(new t(e),si(e)+1,t.rounding)};Vt.toNumber=function(){return+this};Vt.toPower=Vt.pow=function(e){var t,r,n,a,c,f,o=this,m=o.constructor,_=12,w=+(e=new m(e));if(!e.s)return new m(Xo);if(o=new m(o),!o.s){if(e.s<1)throw Error(ja+"Infinity");return o}if(o.eq(Xo))return o;if(n=m.precision,e.eq(Xo))return hn(o,n);if(t=e.e,r=e.d.length-1,f=t>=r,c=o.s,f){if((r=w<0?-w:w)<=y8){for(a=new m(Xo),t=Math.ceil(n/bn+4),On=!1;r%2&&(a=a.times(o),Tz(a.d,t)),r=tm(r/2),r!==0;)o=o.times(o),Tz(o.d,t);return On=!0,e.s<0?new m(Xo).div(a):hn(a,n)}}else if(c<0)throw Error(ja+"NaN");return c=c<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,On=!1,a=e.times(bv(o,n+_)),On=!0,a=_8(a),a.s=c,a};Vt.toPrecision=function(e,t){var r,n,a=this,c=a.constructor;return e===void 0?(r=si(a),n=tf(a,r<=c.toExpNeg||r>=c.toExpPos)):(tl(e,1,em),t===void 0?t=c.rounding:tl(t,0,8),a=hn(new c(a),e,t),r=si(a),n=tf(a,e<=r||r<=c.toExpNeg,e)),n};Vt.toSignificantDigits=Vt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(tl(e,1,em),t===void 0?t=n.rounding:tl(t,0,8)),hn(new n(r),e,t)};Vt.toString=Vt.valueOf=Vt.val=Vt.toJSON=Vt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=si(e),r=e.constructor;return tf(e,t<=r.toExpNeg||t>=r.toExpPos)};function v8(e,t){var r,n,a,c,f,o,m,_,w=e.constructor,E=w.precision;if(!e.s||!t.s)return t.s||(t=new w(e)),On?hn(t,E):t;if(m=e.d,_=t.d,f=e.e,a=t.e,m=m.slice(),c=f-a,c){for(c<0?(n=m,c=-c,o=_.length):(n=_,a=f,o=m.length),f=Math.ceil(E/bn),o=f>o?f+1:o+1,c>o&&(c=o,n.length=1),n.reverse();c--;)n.push(0);n.reverse()}for(o=m.length,c=_.length,o-c<0&&(c=o,n=_,_=m,m=n),r=0;c;)r=(m[--c]=m[c]+_[c]+r)/Pi|0,m[c]%=Pi;for(r&&(m.unshift(r),++a),o=m.length;m[--o]==0;)m.pop();return t.d=m,t.e=a,On?hn(t,E):t}function tl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Wh+e)}function qs(e){var t,r,n,a=e.length-1,c="",f=e[0];if(a>0){for(c+=f,t=1;t<a;t++)n=e[t]+"",r=bn-n.length,r&&(c+=Zc(r)),c+=n;f=e[t],n=f+"",r=bn-n.length,r&&(c+=Zc(r))}else if(f===0)return"0";for(;f%10===0;)f/=10;return c+f}var Wl=function(){function e(n,a){var c,f=0,o=n.length;for(n=n.slice();o--;)c=n[o]*a+f,n[o]=c%Pi|0,f=c/Pi|0;return f&&n.unshift(f),n}function t(n,a,c,f){var o,m;if(c!=f)m=c>f?1:-1;else for(o=m=0;o<c;o++)if(n[o]!=a[o]){m=n[o]>a[o]?1:-1;break}return m}function r(n,a,c){for(var f=0;c--;)n[c]-=f,f=n[c]<a[c]?1:0,n[c]=f*Pi+n[c]-a[c];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,c,f){var o,m,_,w,E,C,M,I,D,$,B,F,R,U,H,X,ee,oe,ae=n.constructor,ge=n.s==a.s?1:-1,he=n.d,ve=a.d;if(!n.s)return new ae(n);if(!a.s)throw Error(ja+"Division by zero");for(m=n.e-a.e,ee=ve.length,H=he.length,M=new ae(ge),I=M.d=[],_=0;ve[_]==(he[_]||0);)++_;if(ve[_]>(he[_]||0)&&--m,c==null?F=c=ae.precision:f?F=c+(si(n)-si(a))+1:F=c,F<0)return new ae(0);if(F=F/bn+2|0,_=0,ee==1)for(w=0,ve=ve[0],F++;(_<H||w)&&F--;_++)R=w*Pi+(he[_]||0),I[_]=R/ve|0,w=R%ve|0;else{for(w=Pi/(ve[0]+1)|0,w>1&&(ve=e(ve,w),he=e(he,w),ee=ve.length,H=he.length),U=ee,D=he.slice(0,ee),$=D.length;$<ee;)D[$++]=0;oe=ve.slice(),oe.unshift(0),X=ve[0],ve[1]>=Pi/2&&++X;do w=0,o=t(ve,D,ee,$),o<0?(B=D[0],ee!=$&&(B=B*Pi+(D[1]||0)),w=B/X|0,w>1?(w>=Pi&&(w=Pi-1),E=e(ve,w),C=E.length,$=D.length,o=t(E,D,C,$),o==1&&(w--,r(E,ee<C?oe:ve,C))):(w==0&&(o=w=1),E=ve.slice()),C=E.length,C<$&&E.unshift(0),r(D,E,$),o==-1&&($=D.length,o=t(ve,D,ee,$),o<1&&(w++,r(D,ee<$?oe:ve,$))),$=D.length):o===0&&(w++,D=[0]),I[_++]=w,o&&D[0]?D[$++]=he[U]||0:(D=[he[U]],$=1);while((U++<H||D[0]!==void 0)&&F--)}return I[0]||I.shift(),M.e=m,hn(M,f?c+si(M)+1:c)}}();function _8(e,t){var r,n,a,c,f,o,m=0,_=0,w=e.constructor,E=w.precision;if(si(e)>16)throw Error(kk+si(e));if(!e.s)return new w(Xo);for(t==null?(On=!1,o=E):o=t,f=new w(.03125);e.abs().gte(.1);)e=e.times(f),_+=5;for(n=Math.log(kh(2,_))/Math.LN10*2+5|0,o+=n,r=a=c=new w(Xo),w.precision=o;;){if(a=hn(a.times(e),o),r=r.times(++m),f=c.plus(Wl(a,r,o)),qs(f.d).slice(0,o)===qs(c.d).slice(0,o)){for(;_--;)c=hn(c.times(c),o);return w.precision=E,t==null?(On=!0,hn(c,E)):c}c=f}}function si(e){for(var t=e.e*bn,r=e.d[0];r>=10;r/=10)t++;return t}function K2(e,t,r){if(t>e.LN10.sd())throw On=!0,r&&(e.precision=r),Error(ja+"LN10 precision limit exceeded");return hn(new e(e.LN10),t)}function Zc(e){for(var t="";e--;)t+="0";return t}function bv(e,t){var r,n,a,c,f,o,m,_,w,E=1,C=10,M=e,I=M.d,D=M.constructor,$=D.precision;if(M.s<1)throw Error(ja+(M.s?"NaN":"-Infinity"));if(M.eq(Xo))return new D(0);if(t==null?(On=!1,_=$):_=t,M.eq(10))return t==null&&(On=!0),K2(D,_);if(_+=C,D.precision=_,r=qs(I),n=r.charAt(0),c=si(M),Math.abs(c)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)M=M.times(e),r=qs(M.d),n=r.charAt(0),E++;c=si(M),n>1?(M=new D("0."+r),c++):M=new D(n+"."+r.slice(1))}else return m=K2(D,_+2,$).times(c+""),M=bv(new D(n+"."+r.slice(1)),_-C).plus(m),D.precision=$,t==null?(On=!0,hn(M,$)):M;for(o=f=M=Wl(M.minus(Xo),M.plus(Xo),_),w=hn(M.times(M),_),a=3;;){if(f=hn(f.times(w),_),m=o.plus(Wl(f,new D(a),_)),qs(m.d).slice(0,_)===qs(o.d).slice(0,_))return o=o.times(2),c!==0&&(o=o.plus(K2(D,_+2,$).times(c+""))),o=Wl(o,new D(E),_),D.precision=$,t==null?(On=!0,hn(o,$)):o;o=m,a+=2}}function Ez(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=tm(r/bn),e.d=[],n=(r+1)%bn,r<0&&(n+=bn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=bn;n<a;)e.d.push(+t.slice(n,n+=bn));t=t.slice(n),n=bn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),On&&(e.e>Eb||e.e<-Eb))throw Error(kk+r)}else e.s=0,e.e=0,e.d=[0];return e}function hn(e,t,r){var n,a,c,f,o,m,_,w,E=e.d;for(f=1,c=E[0];c>=10;c/=10)f++;if(n=t-f,n<0)n+=bn,a=t,_=E[w=0];else{if(w=Math.ceil((n+1)/bn),c=E.length,w>=c)return e;for(_=c=E[w],f=1;c>=10;c/=10)f++;n%=bn,a=n-bn+f}if(r!==void 0&&(c=kh(10,f-a-1),o=_/c%10|0,m=t<0||E[w+1]!==void 0||_%c,m=r<4?(o||m)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||m||r==6&&(n>0?a>0?_/kh(10,f-a):0:E[w-1])%10&1||r==(e.s<0?8:7))),t<1||!E[0])return m?(c=si(e),E.length=1,t=t-c-1,E[0]=kh(10,(bn-t%bn)%bn),e.e=tm(-t/bn)||0):(E.length=1,E[0]=e.e=e.s=0),e;if(n==0?(E.length=w,c=1,w--):(E.length=w+1,c=kh(10,bn-n),E[w]=a>0?(_/kh(10,f-a)%kh(10,a)|0)*c:0),m)for(;;)if(w==0){(E[0]+=c)==Pi&&(E[0]=1,++e.e);break}else{if(E[w]+=c,E[w]!=Pi)break;E[w--]=0,c=1}for(n=E.length;E[--n]===0;)E.pop();if(On&&(e.e>Eb||e.e<-Eb))throw Error(kk+si(e));return e}function x8(e,t){var r,n,a,c,f,o,m,_,w,E,C=e.constructor,M=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),On?hn(t,M):t;if(m=e.d,E=t.d,n=t.e,_=e.e,m=m.slice(),f=_-n,f){for(w=f<0,w?(r=m,f=-f,o=E.length):(r=E,n=_,o=m.length),a=Math.max(Math.ceil(M/bn),o)+2,f>a&&(f=a,r.length=1),r.reverse(),a=f;a--;)r.push(0);r.reverse()}else{for(a=m.length,o=E.length,w=a<o,w&&(o=a),a=0;a<o;a++)if(m[a]!=E[a]){w=m[a]<E[a];break}f=0}for(w&&(r=m,m=E,E=r,t.s=-t.s),o=m.length,a=E.length-o;a>0;--a)m[o++]=0;for(a=E.length;a>f;){if(m[--a]<E[a]){for(c=a;c&&m[--c]===0;)m[c]=Pi-1;--m[c],m[a]+=Pi}m[a]-=E[a]}for(;m[--o]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,On?hn(t,M):t):new C(0)}function tf(e,t,r){var n,a=si(e),c=qs(e.d),f=c.length;return t?(r&&(n=r-f)>0?c=c.charAt(0)+"."+c.slice(1)+Zc(n):f>1&&(c=c.charAt(0)+"."+c.slice(1)),c=c+(a<0?"e":"e+")+a):a<0?(c="0."+Zc(-a-1)+c,r&&(n=r-f)>0&&(c+=Zc(n))):a>=f?(c+=Zc(a+1-f),r&&(n=r-a-1)>0&&(c=c+"."+Zc(n))):((n=a+1)<f&&(c=c.slice(0,n)+"."+c.slice(n)),r&&(n=r-f)>0&&(a+1===f&&(c+="."),c+=Zc(n))),e.s<0?"-"+c:c}function Tz(e,t){if(e.length>t)return e.length=t,!0}function b8(e){var t,r,n;function a(c){var f=this;if(!(f instanceof a))return new a(c);if(f.constructor=a,c instanceof a){f.s=c.s,f.e=c.e,f.d=(c=c.d)?c.slice():c;return}if(typeof c=="number"){if(c*0!==0)throw Error(Wh+c);if(c>0)f.s=1;else if(c<0)c=-c,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(c===~~c&&c<1e7){f.e=0,f.d=[c];return}return Ez(f,c.toString())}else if(typeof c!="string")throw Error(Wh+c);if(c.charCodeAt(0)===45?(c=c.slice(1),f.s=-1):f.s=1,p0e.test(c))Ez(f,c);else throw Error(Wh+c)}if(a.prototype=Vt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=b8,a.config=a.set=m0e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function m0e(e){if(!e||typeof e!="object")throw Error(ja+"Object expected");var t,r,n,a=["precision",1,em,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(tm(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Wh+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Wh+r+": "+n);return this}var Ik=b8(d0e);Xo=new Ik(1);const sn=Ik;function g0e(e){return x0e(e)||_0e(e)||v0e(e)||y0e()}function y0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v0e(e,t){if(e){if(typeof e=="string")return wP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wP(e,t)}}function _0e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function x0e(e){if(Array.isArray(e))return wP(e)}function wP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b0e=function(t){return t},w8={"@@functional/placeholder":!0},S8=function(t){return t===w8},Az=function(t){return function r(){return arguments.length===0||arguments.length===1&&S8(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},w0e=function e(t,r){return t===1?r:Az(function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];var f=a.filter(function(o){return o!==w8}).length;return f>=t?r.apply(void 0,a):e(t-f,Az(function(){for(var o=arguments.length,m=new Array(o),_=0;_<o;_++)m[_]=arguments[_];var w=a.map(function(E){return S8(E)?m.shift():E});return r.apply(void 0,g0e(w).concat(m))}))})},vS=function(t){return w0e(t.length,t)},SP=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},S0e=vS(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),E0e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return b0e;var a=r.reverse(),c=a[0],f=a.slice(1);return function(){return f.reduce(function(o,m){return m(o)},c.apply(void 0,arguments))}},EP=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},E8=function(t){var r=null,n=null;return function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return r&&c.every(function(o,m){return o===r[m]})||(r=c,n=t.apply(void 0,c)),n}};function T0e(e){var t;return e===0?t=1:t=Math.floor(new sn(e).abs().log(10).toNumber())+1,t}function A0e(e,t,r){for(var n=new sn(e),a=0,c=[];n.lt(t)&&a<1e5;)c.push(n.toNumber()),n=n.add(r),a++;return c}var C0e=vS(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),P0e=vS(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),O0e=vS(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const _S={rangeStep:A0e,getDigitCount:T0e,interpolateNumber:C0e,uninterpolateNumber:P0e,uninterpolateTruncation:O0e};function TP(e){return I0e(e)||k0e(e)||T8(e)||M0e()}function M0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k0e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function I0e(e){if(Array.isArray(e))return AP(e)}function wv(e,t){return L0e(e)||R0e(e,t)||T8(e,t)||D0e()}function D0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8(e,t){if(e){if(typeof e=="string")return AP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(e,t)}}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R0e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,c=void 0;try{for(var f=e[Symbol.iterator](),o;!(n=(o=f.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(m){a=!0,c=m}finally{try{!n&&f.return!=null&&f.return()}finally{if(a)throw c}}return r}}function L0e(e){if(Array.isArray(e))return e}function A8(e){var t=wv(e,2),r=t[0],n=t[1],a=r,c=n;return r>n&&(a=n,c=r),[a,c]}function C8(e,t,r){if(e.lte(0))return new sn(0);var n=_S.getDigitCount(e.toNumber()),a=new sn(10).pow(n),c=e.div(a),f=n!==1?.05:.1,o=new sn(Math.ceil(c.div(f).toNumber())).add(r).mul(f),m=o.mul(a);return t?m:new sn(Math.ceil(m))}function j0e(e,t,r){var n=1,a=new sn(e);if(!a.isint()&&r){var c=Math.abs(e);c<1?(n=new sn(10).pow(_S.getDigitCount(e)-1),a=new sn(Math.floor(a.div(n).toNumber())).mul(n)):c>1&&(a=new sn(Math.floor(e)))}else e===0?a=new sn(Math.floor((t-1)/2)):r||(a=new sn(Math.floor(e)));var f=Math.floor((t-1)/2),o=E0e(S0e(function(m){return a.add(new sn(m-f).mul(n)).toNumber()}),SP);return o(0,t)}function P8(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new sn(0),tickMin:new sn(0),tickMax:new sn(0)};var c=C8(new sn(t).sub(e).div(r-1),n,a),f;e<=0&&t>=0?f=new sn(0):(f=new sn(e).add(t).div(2),f=f.sub(new sn(f).mod(c)));var o=Math.ceil(f.sub(e).div(c).toNumber()),m=Math.ceil(new sn(t).sub(f).div(c).toNumber()),_=o+m+1;return _>r?P8(e,t,r,n,a+1):(_<r&&(m=t>0?m+(r-_):m,o=t>0?o:o+(r-_)),{step:c,tickMin:f.sub(new sn(o).mul(c)),tickMax:f.add(new sn(m).mul(c))})}function $0e(e){var t=wv(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=Math.max(a,2),o=A8([r,n]),m=wv(o,2),_=m[0],w=m[1];if(_===-1/0||w===1/0){var E=w===1/0?[_].concat(TP(SP(0,a-1).map(function(){return 1/0}))):[].concat(TP(SP(0,a-1).map(function(){return-1/0})),[w]);return r>n?EP(E):E}if(_===w)return j0e(_,a,c);var C=P8(_,w,f,c),M=C.step,I=C.tickMin,D=C.tickMax,$=_S.rangeStep(I,D.add(new sn(.1).mul(M)),M);return r>n?EP($):$}function N0e(e,t){var r=wv(e,2),n=r[0],a=r[1],c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=A8([n,a]),o=wv(f,2),m=o[0],_=o[1];if(m===-1/0||_===1/0)return[n,a];if(m===_)return[m];var w=Math.max(t,2),E=C8(new sn(_).sub(m).div(w-1),c,0),C=[].concat(TP(_S.rangeStep(new sn(m),new sn(_).sub(new sn(.99).mul(E)),E)),[_]);return n>a?EP(C):C}var z0e=E8($0e),B0e=E8(N0e),F0e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tb.apply(this,arguments)}function U0e(e,t){return G0e(e)||q0e(e,t)||W0e(e,t)||V0e()}function V0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W0e(e,t){if(e){if(typeof e=="string")return Cz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cz(e,t)}}function Cz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function G0e(e){if(Array.isArray(e))return e}function H0e(e,t){if(e==null)return{};var r=Z0e(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z0e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function d_(e){var t=e.offset,r=e.layout,n=e.width,a=e.dataKey,c=e.data,f=e.dataPointFormatter,o=e.xAxis,m=e.yAxis,_=H0e(e,F0e),w=Rr(_),E=c.map(function(C,M){var I=f(C,a),D=I.x,$=I.y,B=I.value,F=I.errorVal;if(!F)return null;var R=[],U,H;if(Array.isArray(F)){var X=U0e(F,2);U=X[0],H=X[1]}else U=H=F;if(r==="vertical"){var ee=o.scale,oe=$+t,ae=oe+n,ge=oe-n,he=ee(B-U),ve=ee(B+H);R.push({x1:ve,y1:ae,x2:ve,y2:ge}),R.push({x1:he,y1:oe,x2:ve,y2:oe}),R.push({x1:he,y1:ae,x2:he,y2:ge})}else if(r==="horizontal"){var Ee=m.scale,Re=D+t,Ne=Re-n,Ve=Re+n,Ke=Ee(B-U),ke=Ee(B+H);R.push({x1:Ne,y1:ke,x2:Ve,y2:ke}),R.push({x1:Re,y1:Ke,x2:Re,y2:ke}),R.push({x1:Ne,y1:Ke,x2:Ve,y2:Ke})}return Se.createElement(Kn,Tb({className:"recharts-errorBar",key:"bar-".concat(M)},w),R.map(function(Ge,Ye){return Se.createElement("line",Tb({},Ge,{key:"line-".concat(Ye)}))}))});return Se.createElement(Kn,{className:"recharts-errorBars"},E)}d_.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};d_.displayName="ErrorBar";function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function Pz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pz(Object(r),!0).forEach(function(n){X0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X0e(e,t,r){return t=K0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K0e(e){var t=Y0e(e,"string");return Sv(t)==="symbol"?t:String(t)}function Y0e(e,t){if(Sv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O8=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,c=t.legendContent,f=jl(r,ef);if(!f)return null;var o;return f.props&&f.props.payload?o=f.props&&f.props.payload:c==="children"?o=(n||[]).reduce(function(m,_){var w=_.item,E=_.props,C=E.sectors||E.data||[];return m.concat(C.map(function(M){return{type:f.props.iconType||w.props.legendType,value:M.name,color:M.fill,payload:M}}))},[]):o=(n||[]).map(function(m){var _=m.item,w=_.props,E=w.dataKey,C=w.name,M=w.legendType,I=w.hide;return{inactive:I,dataKey:E,type:f.props.iconType||M||"square",color:Dk(_),value:C||E,payload:_.props}}),Y2(Y2(Y2({},f.props),ef.getWithHeight(f,a)),{},{payload:o,item:f})};function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function Oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oz(Object(r),!0).forEach(function(n){ep(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ep(e,t,r){return t=J0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J0e(e){var t=Q0e(e,"string");return Ev(t)==="symbol"?t:String(t)}function Q0e(e,t){if(Ev(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ev(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mz(e){return nxe(e)||rxe(e)||txe(e)||exe()}function exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function txe(e,t){if(e){if(typeof e=="string")return CP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CP(e,t)}}function rxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nxe(e){if(Array.isArray(e))return CP(e)}function CP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r){return cr(e)||cr(t)?r:yi(t)?Ia(e,t,r):dr(t)?t(e):r}function Iy(e,t,r,n){var a=kye(e,function(o){return ea(o,t)});if(r==="number"){var c=a.filter(function(o){return Lt(o)||parseFloat(o)});return c.length?[hS(c),uS(c)]:[1/0,-1/0]}var f=n?a.filter(function(o){return!cr(o)}):a;return f.map(function(o){return yi(o)||o instanceof Date?o:""})}var ixe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,f=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(c&&c.axisType==="angleAxis"&&Math.abs(Math.abs(c.range[1]-c.range[0])-360)<=1e-6)for(var m=c.range,_=0;_<o;_++){var w=_>0?a[_-1].coordinate:a[o-1].coordinate,E=a[_].coordinate,C=_>=o-1?a[0].coordinate:a[_+1].coordinate,M=void 0;if(bs(E-w)!==bs(C-E)){var I=[];if(bs(C-E)===bs(m[1]-m[0])){M=C;var D=E+m[1]-m[0];I[0]=Math.min(D,(D+w)/2),I[1]=Math.max(D,(D+w)/2)}else{M=w;var $=C+m[1]-m[0];I[0]=Math.min(E,($+E)/2),I[1]=Math.max(E,($+E)/2)}var B=[Math.min(E,(M+E)/2),Math.max(E,(M+E)/2)];if(t>B[0]&&t<=B[1]||t>=I[0]&&t<=I[1]){f=a[_].index;break}}else{var F=Math.min(w,C),R=Math.max(w,C);if(t>(F+E)/2&&t<=(R+E)/2){f=a[_].index;break}}}else for(var U=0;U<o;U++)if(U===0&&t<=(n[U].coordinate+n[U+1].coordinate)/2||U>0&&U<o-1&&t>(n[U].coordinate+n[U-1].coordinate)/2&&t<=(n[U].coordinate+n[U+1].coordinate)/2||U===o-1&&t>(n[U].coordinate+n[U-1].coordinate)/2){f=n[U].index;break}return f},Dk=function(t){var r=t,n=r.type.displayName,a=t.props,c=a.stroke,f=a.fill,o;switch(n){case"Line":o=c;break;case"Area":case"Radar":o=c&&c!=="none"?c:f;break;default:o=f;break}return o},oxe=function(t){var r=t.barSize,n=t.stackGroups,a=n===void 0?{}:n;if(!a)return{};for(var c={},f=Object.keys(a),o=0,m=f.length;o<m;o++)for(var _=a[f[o]].stackGroups,w=Object.keys(_),E=0,C=w.length;E<C;E++){var M=_[w[E]],I=M.items,D=M.cateAxisId,$=I.filter(function(R){return _u(R.type).indexOf("Bar")>=0});if($&&$.length){var B=$[0].props.barSize,F=$[0].props[D];c[F]||(c[F]=[]),c[F].push({item:$[0],stackList:$.slice(1),barSize:cr(B)?r:B})}}return c},axe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,c=t.sizeList,f=c===void 0?[]:c,o=t.maxBarSize,m=f.length;if(m<1)return null;var _=hp(r,a,0,!0),w,E=[];if(f[0].barSize===+f[0].barSize){var C=!1,M=a/m,I=f.reduce(function(U,H){return U+H.barSize||0},0);I+=(m-1)*_,I>=a&&(I-=(m-1)*_,_=0),I>=a&&M>0&&(C=!0,M*=.9,I=m*M);var D=(a-I)/2>>0,$={offset:D-_,size:0};w=f.reduce(function(U,H){var X={item:H.item,position:{offset:$.offset+$.size+_,size:C?M:H.barSize}},ee=[].concat(Mz(U),[X]);return $=ee[ee.length-1].position,H.stackList&&H.stackList.length&&H.stackList.forEach(function(oe){ee.push({item:oe,position:$})}),ee},E)}else{var B=hp(n,a,0,!0);a-2*B-(m-1)*_<=0&&(_=0);var F=(a-2*B-(m-1)*_)/m;F>1&&(F>>=0);var R=o===+o?Math.min(F,o):F;w=f.reduce(function(U,H,X){var ee=[].concat(Mz(U),[{item:H.item,position:{offset:B+(F+_)*X+(F-R)/2,size:R}}]);return H.stackList&&H.stackList.length&&H.stackList.forEach(function(oe){ee.push({item:oe,position:ee[ee.length-1].position})}),ee},E)}return w},sxe=function(t,r,n,a){var c=n.children,f=n.width,o=n.margin,m=f-(o.left||0)-(o.right||0),_=O8({children:c,legendWidth:m});if(_){var w=a||{},E=w.width,C=w.height,M=_.align,I=_.verticalAlign,D=_.layout;if((D==="vertical"||D==="horizontal"&&I==="middle")&&M!=="center"&&Lt(t[M]))return Ta(Ta({},t),{},ep({},M,t[M]+(E||0)));if((D==="horizontal"||D==="vertical"&&M==="center")&&I!=="middle"&&Lt(t[I]))return Ta(Ta({},t),{},ep({},I,t[I]+(C||0)))}return t},lxe=function(t,r,n){return cr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},M8=function(t,r,n,a,c){var f=r.props.children,o=Da(f,d_).filter(function(_){return lxe(a,c,_.props.direction)});if(o&&o.length){var m=o.map(function(_){return _.props.dataKey});return t.reduce(function(_,w){var E=ea(w,n,0),C=zi(E)?[hS(E),uS(E)]:[E,E],M=m.reduce(function(I,D){var $=ea(w,D,0),B=C[0]-Math.abs(zi($)?$[0]:$),F=C[1]+Math.abs(zi($)?$[1]:$);return[Math.min(B,I[0]),Math.max(F,I[1])]},[1/0,-1/0]);return[Math.min(M[0],_[0]),Math.max(M[1],_[1])]},[1/0,-1/0])}return null},cxe=function(t,r,n,a,c){var f=r.map(function(o){return M8(t,o,n,c,a)}).filter(function(o){return!cr(o)});return f&&f.length?f.reduce(function(o,m){return[Math.min(o[0],m[0]),Math.max(o[1],m[1])]},[1/0,-1/0]):null},k8=function(t,r,n,a,c){var f=r.map(function(m){var _=m.props.dataKey;return n==="number"&&_&&M8(t,m,_,a)||Iy(t,_,n,c)});if(n==="number")return f.reduce(function(m,_){return[Math.min(m[0],_[0]),Math.max(m[1],_[1])]},[1/0,-1/0]);var o={};return f.reduce(function(m,_){for(var w=0,E=_.length;w<E;w++)o[_[w]]||(o[_[w]]=!0,m.push(_[w]));return m},[])},I8=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},kz=function(t,r,n,a){if(a)return t.map(function(m){return m.coordinate});var c,f,o=t.map(function(m){return m.coordinate===r&&(c=!0),m.coordinate===n&&(f=!0),m.coordinate});return c||o.push(r),f||o.push(n),o},Wc=function(t,r,n){if(!t)return null;var a=t.scale,c=t.duplicateDomain,f=t.type,o=t.range,m=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,_=(r||n)&&f==="category"&&a.bandwidth?a.bandwidth()/m:0;if(_=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?bs(o[0]-o[1])*2*_:_,r&&(t.ticks||t.niceTicks)){var w=(t.ticks||t.niceTicks).map(function(E){var C=c?c.indexOf(E):E;return{coordinate:a(C)+_,value:E,offset:_}});return w.filter(function(E){return!a_(E.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(E,C){return{coordinate:a(E)+_,value:E,index:C,offset:_}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(E){return{coordinate:a(E)+_,value:E,offset:_}}):a.domain().map(function(E,C){return{coordinate:a(E)+_,value:c?c[E]:E,index:C,offset:_}})},Ix=function(t,r,n){var a;return dr(n)?a=n:dr(r)&&(a=r),dr(t)||a?function(c,f,o,m){dr(t)&&t(c,f,o,m),dr(a)&&a(c,f,o,m)}:null},uxe=function(t,r,n){var a=t.scale,c=t.type,f=t.layout,o=t.axisType;if(a==="auto")return f==="radial"&&o==="radiusAxis"?{scale:gv(),realScaleType:"band"}:f==="radial"&&o==="angleAxis"?{scale:xb(),realScaleType:"linear"}:c==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ky(),realScaleType:"point"}:c==="category"?{scale:gv(),realScaleType:"band"}:{scale:xb(),realScaleType:"linear"};if(o_(a)){var m="scale".concat(nS(a));return{scale:(Sz[m]||ky)(),realScaleType:Sz[m]?m:"point"}}return dr(a)?{scale:a}:{scale:ky(),realScaleType:"point"}},Iz=1e-4,hxe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),c=Math.min(a[0],a[1])-Iz,f=Math.max(a[0],a[1])+Iz,o=t(r[0]),m=t(r[n-1]);(o<c||o>f||m<c||m>f)&&t.domain([r[0],r[n-1]])}},fxe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},dxe=function(t,r){if(!r||r.length!==2||!Lt(r[0])||!Lt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),c=[t[0],t[1]];return(!Lt(t[0])||t[0]<n)&&(c[0]=n),(!Lt(t[1])||t[1]>a)&&(c[1]=a),c[0]>a&&(c[0]=a),c[1]<n&&(c[1]=n),c},pxe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var c=0,f=0,o=0;o<r;++o){var m=a_(t[o][n][1])?t[o][n][0]:t[o][n][1];m>=0?(t[o][n][0]=c,t[o][n][1]=c+m,c=t[o][n][1]):(t[o][n][0]=f,t[o][n][1]=f+m,f=t[o][n][1])}},mxe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var c=0,f=0;f<r;++f){var o=a_(t[f][n][1])?t[f][n][0]:t[f][n][1];o>=0?(t[f][n][0]=c,t[f][n][1]=c+o,c=t[f][n][1]):(t[f][n][0]=0,t[f][n][1]=0)}},gxe={sign:pxe,expand:$he,none:fp,silhouette:Nhe,wiggle:zhe,positive:mxe},yxe=function(t,r,n){var a=r.map(function(o){return o.props.dataKey}),c=gxe[n],f=jhe().keys(a).value(function(o,m){return+ea(o,m,0)}).order(KC).offset(c);return f(t)},vxe=function(t,r,n,a,c,f){if(!t)return null;var o=f?r.reverse():r,m={},_=o.reduce(function(E,C){var M=C.props,I=M.stackId,D=M.hide;if(D)return E;var $=C.props[n],B=E[$]||{hasStack:!1,stackGroups:{}};if(yi(I)){var F=B.stackGroups[I]||{numericAxisId:n,cateAxisId:a,items:[]};F.items.push(C),B.hasStack=!0,B.stackGroups[I]=F}else B.stackGroups[s_("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[C]};return Ta(Ta({},E),{},ep({},$,B))},m),w={};return Object.keys(_).reduce(function(E,C){var M=_[C];if(M.hasStack){var I={};M.stackGroups=Object.keys(M.stackGroups).reduce(function(D,$){var B=M.stackGroups[$];return Ta(Ta({},D),{},ep({},$,{numericAxisId:n,cateAxisId:a,items:B.items,stackedData:yxe(t,B.items,c)}))},I)}return Ta(Ta({},E),{},ep({},C,M))},w)},_xe=function(t,r){var n=r.realScaleType,a=r.type,c=r.tickCount,f=r.originalDomain,o=r.allowDecimals,m=n||r.scale;if(m!=="auto"&&m!=="linear")return null;if(c&&a==="number"&&f&&(f[0]==="auto"||f[1]==="auto")){var _=t.domain();if(!_.length)return null;var w=z0e(_,c,o);return t.domain([hS(w),uS(w)]),{niceTicks:w}}if(c&&a==="number"){var E=t.domain(),C=B0e(E,c,o);return{niceTicks:C}}return null},Dz=function(t){var r=t.axis,n=t.ticks,a=t.bandSize,c=t.entry,f=t.index,o=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!cr(c[r.dataKey])){var m=H1(n,"value",c[r.dataKey]);if(m)return m.coordinate+a/2}return n[f]?n[f].coordinate+a/2:null}var _=ea(c,cr(o)?r.dataKey:o);return cr(_)?null:r.scale(_)},Rz=function(t){var r=t.axis,n=t.ticks,a=t.offset,c=t.bandSize,f=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var m=ea(f,r.dataKey,r.domain[o]);return cr(m)?null:r.scale(m)-c/2+a},xxe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),c=Math.max(n[0],n[1]);return a<=0&&c>=0?0:c<0?c:a}return n[0]},bxe=function(t,r){var n=t.props.stackId;if(yi(n)){var a=r[n];if(a){var c=a.items.indexOf(t);return c>=0?a.stackedData[c]:null}}return null},wxe=function(t){return t.reduce(function(r,n){return[hS(n.concat([r[0]]).filter(Lt)),uS(n.concat([r[1]]).filter(Lt))]},[1/0,-1/0])},D8=function(t,r,n){return Object.keys(t).reduce(function(a,c){var f=t[c],o=f.stackedData,m=o.reduce(function(_,w){var E=wxe(w.slice(r,n+1));return[Math.min(_[0],E[0]),Math.max(_[1],E[1])]},[1/0,-1/0]);return[Math.min(m[0],a[0]),Math.max(m[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Lz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PP=function(t,r,n){if(dr(t))return t(r,n);if(!zi(t))return r;var a=[];if(Lt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(Lz.test(t[0])){var c=+Lz.exec(t[0])[1];a[0]=r[0]-c}else dr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Lt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(jz.test(t[1])){var f=+jz.exec(t[1])[1];a[1]=r[1]+f}else dr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Ab=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var c=ck(r,function(E){return E.coordinate}),f=1/0,o=1,m=c.length;o<m;o++){var _=c[o],w=c[o-1];f=Math.min((_.coordinate||0)-(w.coordinate||0),f)}return f===1/0?0:f}return n?void 0:0},$z=function(t,r,n){return!t||!t.length||cS(t,Ia(n,"type.defaultProps.domain"))?r:t},R8=function(t,r){var n=t.props,a=n.dataKey,c=n.name,f=n.unit,o=n.formatter,m=n.tooltipType,_=n.chartType;return Ta(Ta({},Rr(t)),{},{dataKey:a,unit:f,formatter:o,name:c||a,color:Dk(t),value:ea(r,a),type:m,payload:r,chartType:_})};function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function Nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nz(Object(r),!0).forEach(function(n){Sxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sxe(e,t,r){return t=Exe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Exe(e){var t=Txe(e,"string");return Tv(t)==="symbol"?t:String(t)}function Txe(e,t){if(Tv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cb=Math.PI/180,Axe=function(t){return t*180/Math.PI},Bi=function(t,r,n,a){return{x:t+Math.cos(-Cb*a)*n,y:r+Math.sin(-Cb*a)*n}},Cxe=function(t,r){var n=t.x,a=t.y,c=r.x,f=r.y;return Math.sqrt(Math.pow(n-c,2)+Math.pow(a-f,2))},Pxe=function(t,r){var n=t.x,a=t.y,c=r.cx,f=r.cy,o=Cxe({x:n,y:a},{x:c,y:f});if(o<=0)return{radius:o};var m=(n-c)/o,_=Math.acos(m);return a>f&&(_=2*Math.PI-_),{radius:o,angle:Axe(_),angleInRadian:_}},Oxe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),c=Math.floor(n/360),f=Math.min(a,c);return{startAngle:r-f*360,endAngle:n-f*360}},Mxe=function(t,r){var n=r.startAngle,a=r.endAngle,c=Math.floor(n/360),f=Math.floor(a/360),o=Math.min(c,f);return t+o*360},Bz=function(t,r){var n=t.x,a=t.y,c=Pxe({x:n,y:a},r),f=c.radius,o=c.angle,m=r.innerRadius,_=r.outerRadius;if(f<m||f>_)return!1;if(f===0)return!0;var w=Oxe(r),E=w.startAngle,C=w.endAngle,M=o,I;if(E<=C){for(;M>C;)M-=360;for(;M<E;)M+=360;I=M>=E&&M<=C}else{for(;M>E;)M-=360;for(;M<C;)M+=360;I=M>=C&&M<=E}return I?zz(zz({},r),{},{radius:f,angle:Mxe(M,r)}):null};function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}var kxe=["offset"];function Ixe(e){return jxe(e)||Lxe(e)||Rxe(e)||Dxe()}function Dxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rxe(e,t){if(e){if(typeof e=="string")return OP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OP(e,t)}}function Lxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jxe(e){if(Array.isArray(e))return OP(e)}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $xe(e,t){if(e==null)return{};var r=Nxe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nxe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(r),!0).forEach(function(n){zxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zxe(e,t,r){return t=Bxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bxe(e){var t=Fxe(e,"string");return Av(t)==="symbol"?t:String(t)}function Fxe(e,t){if(Av(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Av(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(this,arguments)}var Uxe=function(t){var r=t.value,n=t.formatter,a=cr(t.children)?r:t.children;return dr(n)?n(a):a},Vxe=function(t,r){var n=bs(r-t),a=Math.min(Math.abs(r-t),360);return n*a},Wxe=function(t,r,n){var a=t.position,c=t.viewBox,f=t.offset,o=t.className,m=c,_=m.cx,w=m.cy,E=m.innerRadius,C=m.outerRadius,M=m.startAngle,I=m.endAngle,D=m.clockWise,$=(E+C)/2,B=Vxe(M,I),F=B>=0?1:-1,R,U;a==="insideStart"?(R=M+F*f,U=D):a==="insideEnd"?(R=I-F*f,U=!D):a==="end"&&(R=I+F*f,U=D),U=B<=0?U:!U;var H=Bi(_,w,$,R),X=Bi(_,w,$,R+(U?1:-1)*359),ee="M".concat(H.x,",").concat(H.y,`
    A`).concat($,",").concat($,",0,1,").concat(U?0:1,`,
    `).concat(X.x,",").concat(X.y),oe=cr(t.id)?s_("recharts-radial-line-"):t.id;return Se.createElement("text",Cv({},n,{dominantBaseline:"central",className:Yt("recharts-radial-bar-label",o)}),Se.createElement("defs",null,Se.createElement("path",{id:oe,d:ee})),Se.createElement("textPath",{xlinkHref:"#".concat(oe)},r))},qxe=function(t){var r=t.viewBox,n=t.offset,a=t.position,c=r,f=c.cx,o=c.cy,m=c.innerRadius,_=c.outerRadius,w=c.startAngle,E=c.endAngle,C=(w+E)/2;if(a==="outside"){var M=Bi(f,o,_+n,C),I=M.x,D=M.y;return{x:I,y:D,textAnchor:I>=f?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:f,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:f,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:f,y:o,textAnchor:"middle",verticalAnchor:"end"};var $=(m+_)/2,B=Bi(f,o,$,C),F=B.x,R=B.y;return{x:F,y:R,textAnchor:"middle",verticalAnchor:"middle"}},Gxe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,c=t.position,f=r,o=f.x,m=f.y,_=f.width,w=f.height,E=w>=0?1:-1,C=E*a,M=E>0?"end":"start",I=E>0?"start":"end",D=_>=0?1:-1,$=D*a,B=D>0?"end":"start",F=D>0?"start":"end";if(c==="top"){var R={x:o+_/2,y:m-E*a,textAnchor:"middle",verticalAnchor:M};return pi(pi({},R),n?{height:Math.max(m-n.y,0),width:_}:{})}if(c==="bottom"){var U={x:o+_/2,y:m+w+C,textAnchor:"middle",verticalAnchor:I};return pi(pi({},U),n?{height:Math.max(n.y+n.height-(m+w),0),width:_}:{})}if(c==="left"){var H={x:o-$,y:m+w/2,textAnchor:B,verticalAnchor:"middle"};return pi(pi({},H),n?{width:Math.max(H.x-n.x,0),height:w}:{})}if(c==="right"){var X={x:o+_+$,y:m+w/2,textAnchor:F,verticalAnchor:"middle"};return pi(pi({},X),n?{width:Math.max(n.x+n.width-X.x,0),height:w}:{})}var ee=n?{width:_,height:w}:{};return c==="insideLeft"?pi({x:o+$,y:m+w/2,textAnchor:F,verticalAnchor:"middle"},ee):c==="insideRight"?pi({x:o+_-$,y:m+w/2,textAnchor:B,verticalAnchor:"middle"},ee):c==="insideTop"?pi({x:o+_/2,y:m+C,textAnchor:"middle",verticalAnchor:I},ee):c==="insideBottom"?pi({x:o+_/2,y:m+w-C,textAnchor:"middle",verticalAnchor:M},ee):c==="insideTopLeft"?pi({x:o+$,y:m+C,textAnchor:F,verticalAnchor:I},ee):c==="insideTopRight"?pi({x:o+_-$,y:m+C,textAnchor:B,verticalAnchor:I},ee):c==="insideBottomLeft"?pi({x:o+$,y:m+w-C,textAnchor:F,verticalAnchor:M},ee):c==="insideBottomRight"?pi({x:o+_-$,y:m+w-C,textAnchor:B,verticalAnchor:M},ee):Wp(c)&&(Lt(c.x)||jh(c.x))&&(Lt(c.y)||jh(c.y))?pi({x:o+hp(c.x,_),y:m+hp(c.y,w),textAnchor:"end",verticalAnchor:"end"},ee):pi({x:o+_/2,y:m+w/2,textAnchor:"middle",verticalAnchor:"middle"},ee)},Hxe=function(t){return"cx"in t&&Lt(t.cx)};function ro(e){var t=e.offset,r=t===void 0?5:t,n=$xe(e,kxe),a=pi({offset:r},n),c=a.viewBox,f=a.position,o=a.value,m=a.children,_=a.content,w=a.className,E=w===void 0?"":w,C=a.textBreakAll;if(!c||cr(o)&&cr(m)&&!Y.isValidElement(_)&&!dr(_))return null;if(Y.isValidElement(_))return Y.cloneElement(_,a);var M;if(dr(_)){if(M=Y.createElement(_,a),Y.isValidElement(M))return M}else M=Uxe(a);var I=Hxe(c),D=Rr(a,!0);if(I&&(f==="insideStart"||f==="insideEnd"||f==="end"))return Wxe(a,M,D);var $=I?qxe(a):Gxe(a);return Se.createElement(db,Cv({className:Yt("recharts-label",E)},D,$,{breakAll:C}),M)}ro.displayName="Label";var L8=function(t){var r=t.cx,n=t.cy,a=t.angle,c=t.startAngle,f=t.endAngle,o=t.r,m=t.radius,_=t.innerRadius,w=t.outerRadius,E=t.x,C=t.y,M=t.top,I=t.left,D=t.width,$=t.height,B=t.clockWise,F=t.labelViewBox;if(F)return F;if(Lt(D)&&Lt($)){if(Lt(E)&&Lt(C))return{x:E,y:C,width:D,height:$};if(Lt(M)&&Lt(I))return{x:M,y:I,width:D,height:$}}return Lt(E)&&Lt(C)?{x:E,y:C,width:0,height:0}:Lt(r)&&Lt(n)?{cx:r,cy:n,startAngle:c||a||0,endAngle:f||a||0,innerRadius:_||0,outerRadius:w||m||o||0,clockWise:B}:t.viewBox?t.viewBox:{}},Zxe=function(t,r){return t?t===!0?Se.createElement(ro,{key:"label-implicit",viewBox:r}):yi(t)?Se.createElement(ro,{key:"label-implicit",viewBox:r,value:t}):Y.isValidElement(t)?t.type===ro?Y.cloneElement(t,{key:"label-implicit",viewBox:r}):Se.createElement(ro,{key:"label-implicit",content:t,viewBox:r}):dr(t)?Se.createElement(ro,{key:"label-implicit",content:t,viewBox:r}):Wp(t)?Se.createElement(ro,Cv({viewBox:r},t,{key:"label-implicit"})):null:null},Xxe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,c=L8(t),f=Da(a,ro).map(function(m,_){return Y.cloneElement(m,{viewBox:r||c,key:"label-".concat(_)})});if(!n)return f;var o=Zxe(t.label,r||c);return[o].concat(Ixe(f))};ro.parseViewBox=L8;ro.renderCallByParent=Xxe;function Kxe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Yxe=Kxe;const Jxe=Hr(Yxe);function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}var Qxe=["valueAccessor"],e1e=["data","dataKey","clockWise","id","textBreakAll"];function t1e(e){return o1e(e)||i1e(e)||n1e(e)||r1e()}function r1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n1e(e,t){if(e){if(typeof e=="string")return MP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MP(e,t)}}function i1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o1e(e){if(Array.isArray(e))return MP(e)}function MP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(this,arguments)}function Uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(r),!0).forEach(function(n){a1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a1e(e,t,r){return t=s1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s1e(e){var t=l1e(e,"string");return Pv(t)==="symbol"?t:String(t)}function l1e(e,t){if(Pv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wz(e,t){if(e==null)return{};var r=c1e(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c1e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var u1e=function(t){return zi(t.value)?Jxe(t.value):t.value};function bu(e){var t=e.valueAccessor,r=t===void 0?u1e:t,n=Wz(e,Qxe),a=n.data,c=n.dataKey,f=n.clockWise,o=n.id,m=n.textBreakAll,_=Wz(n,e1e);return!a||!a.length?null:Se.createElement(Kn,{className:"recharts-label-list"},a.map(function(w,E){var C=cr(c)?r(w,E):ea(w&&w.payload,c),M=cr(o)?{}:{id:"".concat(o,"-").concat(E)};return Se.createElement(ro,Pb({},Rr(w,!0),_,M,{parentViewBox:w.parentViewBox,index:E,value:C,textBreakAll:m,viewBox:ro.parseViewBox(cr(f)?w:Vz(Vz({},w),{},{clockWise:f})),key:"label-".concat(E)}))}))}bu.displayName="LabelList";function h1e(e,t){return e?e===!0?Se.createElement(bu,{key:"labelList-implicit",data:t}):Se.isValidElement(e)||dr(e)?Se.createElement(bu,{key:"labelList-implicit",data:t,content:e}):Wp(e)?Se.createElement(bu,Pb({data:t},e,{key:"labelList-implicit"})):null:null}function f1e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Da(n,bu).map(function(f,o){return Y.cloneElement(f,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var c=h1e(e.label,t);return[c].concat(t1e(a))}bu.renderCallByParent=f1e;function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function kP(){return kP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kP.apply(this,arguments)}function qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(r),!0).forEach(function(n){d1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d1e(e,t,r){return t=p1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p1e(e){var t=m1e(e,"string");return Ov(t)==="symbol"?t:String(t)}function m1e(e,t){if(Ov(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ov(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g1e=function(t,r){var n=bs(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Dx=function(t){var r=t.cx,n=t.cy,a=t.radius,c=t.angle,f=t.sign,o=t.isExternal,m=t.cornerRadius,_=t.cornerIsExternal,w=m*(o?1:-1)+a,E=Math.asin(m/w)/Cb,C=_?c:c+f*E,M=Bi(r,n,w,C),I=Bi(r,n,a,C),D=_?c-f*E:c,$=Bi(r,n,w*Math.cos(E*Cb),D);return{center:M,circleTangency:I,lineTangency:$,theta:E}},j8=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,c=t.outerRadius,f=t.startAngle,o=t.endAngle,m=g1e(f,o),_=f+m,w=Bi(r,n,c,f),E=Bi(r,n,c,_),C="M ".concat(w.x,",").concat(w.y,`
    A `).concat(c,",").concat(c,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(f>_),`,
    `).concat(E.x,",").concat(E.y,`
  `);if(a>0){var M=Bi(r,n,a,f),I=Bi(r,n,a,_);C+="L ".concat(I.x,",").concat(I.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(f<=_),`,
            `).concat(M.x,",").concat(M.y," Z")}else C+="L ".concat(r,",").concat(n," Z");return C},y1e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,c=t.outerRadius,f=t.cornerRadius,o=t.forceCornerRadius,m=t.cornerIsExternal,_=t.startAngle,w=t.endAngle,E=bs(w-_),C=Dx({cx:r,cy:n,radius:c,angle:_,sign:E,cornerRadius:f,cornerIsExternal:m}),M=C.circleTangency,I=C.lineTangency,D=C.theta,$=Dx({cx:r,cy:n,radius:c,angle:w,sign:-E,cornerRadius:f,cornerIsExternal:m}),B=$.circleTangency,F=$.lineTangency,R=$.theta,U=m?Math.abs(_-w):Math.abs(_-w)-D-R;if(U<0)return o?"M ".concat(I.x,",").concat(I.y,`
        a`).concat(f,",").concat(f,",0,0,1,").concat(f*2,`,0
        a`).concat(f,",").concat(f,",0,0,1,").concat(-f*2,`,0
      `):j8({cx:r,cy:n,innerRadius:a,outerRadius:c,startAngle:_,endAngle:w});var H="M ".concat(I.x,",").concat(I.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(c,",").concat(c,",0,").concat(+(U>180),",").concat(+(E<0),",").concat(B.x,",").concat(B.y,`
    A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(F.x,",").concat(F.y,`
  `);if(a>0){var X=Dx({cx:r,cy:n,radius:a,angle:_,sign:E,isExternal:!0,cornerRadius:f,cornerIsExternal:m}),ee=X.circleTangency,oe=X.lineTangency,ae=X.theta,ge=Dx({cx:r,cy:n,radius:a,angle:w,sign:-E,isExternal:!0,cornerRadius:f,cornerIsExternal:m}),he=ge.circleTangency,ve=ge.lineTangency,Ee=ge.theta,Re=m?Math.abs(_-w):Math.abs(_-w)-ae-Ee;if(Re<0&&f===0)return"".concat(H,"L").concat(r,",").concat(n,"Z");H+="L".concat(ve.x,",").concat(ve.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(he.x,",").concat(he.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Re>180),",").concat(+(E>0),",").concat(ee.x,",").concat(ee.y,`
      A`).concat(f,",").concat(f,",0,0,").concat(+(E<0),",").concat(oe.x,",").concat(oe.y,"Z")}else H+="L".concat(r,",").concat(n,"Z");return H},v1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$8=function(t){var r=Gz(Gz({},v1e),t),n=r.cx,a=r.cy,c=r.innerRadius,f=r.outerRadius,o=r.cornerRadius,m=r.forceCornerRadius,_=r.cornerIsExternal,w=r.startAngle,E=r.endAngle,C=r.className;if(f<c||w===E)return null;var M=Yt("recharts-sector",C),I=f-c,D=hp(o,I,0,!0),$;return D>0&&Math.abs(w-E)<360?$=y1e({cx:n,cy:a,innerRadius:c,outerRadius:f,cornerRadius:Math.min(D,I/2),forceCornerRadius:m,cornerIsExternal:_,startAngle:w,endAngle:E}):$=j8({cx:n,cy:a,innerRadius:c,outerRadius:f,startAngle:w,endAngle:E}),Se.createElement("path",kP({},Rr(r,!0),{className:M,d:$,role:"img"}))};function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IP.apply(this,arguments)}function Hz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(r),!0).forEach(function(n){_1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _1e(e,t,r){return t=x1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x1e(e){var t=b1e(e,"string");return Mv(t)==="symbol"?t:String(t)}function b1e(e,t){if(Mv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xz={curveBasisClosed:The,curveBasisOpen:Ahe,curveBasis:Ehe,curveBumpX:uhe,curveBumpY:hhe,curveLinearClosed:Che,curveLinear:oS,curveMonotoneX:Phe,curveMonotoneY:Ohe,curveNatural:Mhe,curveStep:khe,curveStepAfter:Dhe,curveStepBefore:Ihe},Rx=function(t){return t.x===+t.x&&t.y===+t.y},ty=function(t){return t.x},ry=function(t){return t.y},w1e=function(t,r){if(dr(t))return t;var n="curve".concat(nS(t));return(n==="curveMonotone"||n==="curveBump")&&r?Xz["".concat(n).concat(r==="vertical"?"Y":"X")]:Xz[n]||oS},S1e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,c=a===void 0?[]:a,f=t.baseLine,o=t.layout,m=t.connectNulls,_=m===void 0?!1:m,w=w1e(n,o),E=_?c.filter(function(D){return Rx(D)}):c,C;if(zi(f)){var M=_?f.filter(function(D){return Rx(D)}):f,I=E.map(function(D,$){return Zz(Zz({},D),{},{base:M[$]})});return o==="vertical"?C=Ax().y(ry).x1(ty).x0(function(D){return D.base.x}):C=Ax().x(ty).y1(ry).y0(function(D){return D.base.y}),C.defined(Rx).curve(w),C(I)}return o==="vertical"&&Lt(f)?C=Ax().y(ry).x1(ty).x0(f):Lt(f)?C=Ax().x(ty).y1(ry).y0(f):C=Q6().x(ty).y(ry),C.defined(Rx).curve(w),C(E)},DP=function(t){var r=t.className,n=t.points,a=t.path,c=t.pathRef;if((!n||!n.length)&&!a)return null;var f=n&&n.length?S1e(t):a;return Se.createElement("path",IP({},Rr(t),Z1(t),{className:Yt("recharts-curve",r),d:f,ref:c}))};function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ob.apply(this,arguments)}function E1e(e,t){return P1e(e)||C1e(e,t)||A1e(e,t)||T1e()}function T1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A1e(e,t){if(e){if(typeof e=="string")return Kz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kz(e,t)}}function Kz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function P1e(e){if(Array.isArray(e))return e}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(n){O1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O1e(e,t,r){return t=M1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M1e(e){var t=k1e(e,"string");return kv(t)==="symbol"?t:String(t)}function k1e(e,t){if(kv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qz=function(t,r,n,a,c){var f=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,m=n>=0?1:-1,_=a>=0&&n>=0||a<0&&n<0?1:0,w;if(f>0&&c instanceof Array){for(var E=[0,0,0,0],C=0,M=4;C<M;C++)E[C]=c[C]>f?f:c[C];w="M".concat(t,",").concat(r+o*E[0]),E[0]>0&&(w+="A ".concat(E[0],",").concat(E[0],",0,0,").concat(_,",").concat(t+m*E[0],",").concat(r)),w+="L ".concat(t+n-m*E[1],",").concat(r),E[1]>0&&(w+="A ".concat(E[1],",").concat(E[1],",0,0,").concat(_,`,
        `).concat(t+n,",").concat(r+o*E[1])),w+="L ".concat(t+n,",").concat(r+a-o*E[2]),E[2]>0&&(w+="A ".concat(E[2],",").concat(E[2],",0,0,").concat(_,`,
        `).concat(t+n-m*E[2],",").concat(r+a)),w+="L ".concat(t+m*E[3],",").concat(r+a),E[3]>0&&(w+="A ".concat(E[3],",").concat(E[3],",0,0,").concat(_,`,
        `).concat(t,",").concat(r+a-o*E[3])),w+="Z"}else if(f>0&&c===+c&&c>0){var I=Math.min(f,c);w="M ".concat(t,",").concat(r+o*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(_,",").concat(t+m*I,",").concat(r,`
            L `).concat(t+n-m*I,",").concat(r,`
            A `).concat(I,",").concat(I,",0,0,").concat(_,",").concat(t+n,",").concat(r+o*I,`
            L `).concat(t+n,",").concat(r+a-o*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(_,",").concat(t+n-m*I,",").concat(r+a,`
            L `).concat(t+m*I,",").concat(r+a,`
            A `).concat(I,",").concat(I,",0,0,").concat(_,",").concat(t,",").concat(r+a-o*I," Z")}else w="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return w},I1e=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,c=r.x,f=r.y,o=r.width,m=r.height;if(Math.abs(o)>0&&Math.abs(m)>0){var _=Math.min(c,c+o),w=Math.max(c,c+o),E=Math.min(f,f+m),C=Math.max(f,f+m);return n>=_&&n<=w&&a>=E&&a<=C}return!1},D1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rk=function(t){var r=Jz(Jz({},D1e),t),n=Y.useRef(),a=Y.useState(-1),c=E1e(a,2),f=c[0],o=c[1];Y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var U=n.current.getTotalLength();U&&o(U)}catch{}},[]);var m=r.x,_=r.y,w=r.width,E=r.height,C=r.radius,M=r.className,I=r.animationEasing,D=r.animationDuration,$=r.animationBegin,B=r.isAnimationActive,F=r.isUpdateAnimationActive;if(m!==+m||_!==+_||w!==+w||E!==+E||w===0||E===0)return null;var R=Yt("recharts-rectangle",M);return F?Se.createElement(Yl,{canBegin:f>0,from:{width:w,height:E,x:m,y:_},to:{width:w,height:E,x:m,y:_},duration:D,animationEasing:I,isActive:F},function(U){var H=U.width,X=U.height,ee=U.x,oe=U.y;return Se.createElement(Yl,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:D,isActive:B,easing:I},Se.createElement("path",Ob({},Rr(r,!0),{className:R,d:Qz(ee,oe,H,X,C),ref:n})))}):Se.createElement("path",Ob({},Rr(r,!0),{className:R,d:Qz(m,_,w,E,C)}))};function RP(){return RP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RP.apply(this,arguments)}var Lk=function(t){var r=t.cx,n=t.cy,a=t.r,c=t.className,f=Yt("recharts-dot",c);return r===+r&&n===+n&&a===+a?Se.createElement("circle",RP({},Rr(t),Z1(t),{className:f,cx:r,cy:n,r:a})):null};function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}var R1e=["x","y","top","left","width","height","className"];function LP(){return LP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LP.apply(this,arguments)}function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L1e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(n){j1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j1e(e,t,r){return t=$1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $1e(e){var t=N1e(e,"string");return Iv(t)==="symbol"?t:String(t)}function N1e(e,t){if(Iv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z1e(e,t){if(e==null)return{};var r=B1e(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function B1e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var F1e=function(t,r,n,a,c,f){return"M".concat(t,",").concat(c,"v").concat(a,"M").concat(f,",").concat(r,"h").concat(n)},U1e=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,c=a===void 0?0:a,f=t.top,o=f===void 0?0:f,m=t.left,_=m===void 0?0:m,w=t.width,E=w===void 0?0:w,C=t.height,M=C===void 0?0:C,I=t.className,D=z1e(t,R1e),$=L1e({x:n,y:c,top:o,left:_,width:E,height:M},D);return!Lt(n)||!Lt(c)||!Lt(E)||!Lt(M)||!Lt(o)||!Lt(_)?null:Se.createElement("path",LP({},Rr($,!0),{className:Yt("recharts-cross",I),d:F1e(n,c,E,M,o,_)}))},V1e=ic,W1e=oc,q1e="[object Boolean]";function G1e(e){return e===!0||e===!1||W1e(e)&&V1e(e)==q1e}var H1e=G1e;const N8=Hr(H1e);var Z1e=R6,X1e=Z1e(Object.getPrototypeOf,Object),K1e=X1e,Y1e=ic,J1e=K1e,Q1e=oc,ebe="[object Object]",tbe=Function.prototype,rbe=Object.prototype,z8=tbe.toString,nbe=rbe.hasOwnProperty,ibe=z8.call(Object);function obe(e){if(!Q1e(e)||Y1e(e)!=ebe)return!1;var t=J1e(e);if(t===null)return!0;var r=nbe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&z8.call(r)==ibe}var abe=obe;const sbe=Hr(abe);function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(this,arguments)}function lbe(e,t){return fbe(e)||hbe(e,t)||ube(e,t)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ube(e,t){if(e){if(typeof e=="string")return t3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t3(e,t)}}function t3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function fbe(e){if(Array.isArray(e))return e}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){dbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dbe(e,t,r){return t=pbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pbe(e){var t=mbe(e,"string");return Dv(t)==="symbol"?t:String(t)}function mbe(e,t){if(Dv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3=function(t,r,n,a,c){var f=n-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-f/2,",").concat(r+c),o+="L ".concat(t+n-f/2-a,",").concat(r+c),o+="L ".concat(t,",").concat(r," Z"),o},gbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ybe=function(t){var r=n3(n3({},gbe),t),n=Y.useRef(),a=Y.useState(-1),c=lbe(a,2),f=c[0],o=c[1];Y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&o(R)}catch{}},[]);var m=r.x,_=r.y,w=r.upperWidth,E=r.lowerWidth,C=r.height,M=r.className,I=r.animationEasing,D=r.animationDuration,$=r.animationBegin,B=r.isUpdateAnimationActive;if(m!==+m||_!==+_||w!==+w||E!==+E||C!==+C||w===0&&E===0||C===0)return null;var F=Yt("recharts-trapezoid",M);return B?Se.createElement(Yl,{canBegin:f>0,from:{upperWidth:0,lowerWidth:0,height:C,x:m,y:_},to:{upperWidth:w,lowerWidth:E,height:C,x:m,y:_},duration:D,animationEasing:I,isActive:B},function(R){var U=R.upperWidth,H=R.lowerWidth,X=R.height,ee=R.x,oe=R.y;return Se.createElement(Yl,{canBegin:f>0,from:"0px ".concat(f===-1?1:f,"px"),to:"".concat(f,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:D,easing:I},Se.createElement("path",Mb({},Rr(r,!0),{className:F,d:i3(ee,oe,U,H,X),ref:n})))}):Se.createElement("g",null,Se.createElement("path",Mb({},Rr(r,!0),{className:F,d:i3(m,_,w,E,C)})))},vbe=["option","shapeType","propTransformer","activeClassName","isActive"];function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function _be(e,t){if(e==null)return{};var r=xbe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xbe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function o3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(r),!0).forEach(function(n){bbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bbe(e,t,r){return t=wbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wbe(e){var t=Sbe(e,"string");return Rv(t)==="symbol"?t:String(t)}function Sbe(e,t){if(Rv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ebe(e,t){return a3(a3({},t),e)}function Tbe(e,t){return e==="symbols"}function s3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Se.createElement(Rk,r);case"trapezoid":return Se.createElement(ybe,r);case"sector":return Se.createElement($8,r);case"symbols":if(Tbe(t))return Se.createElement(ak,r);break;default:return null}}function Abe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?Ebe:n,c=e.activeClassName,f=c===void 0?"recharts-active-shape":c,o=e.isActive,m=_be(e,vbe),_;if(Y.isValidElement(t))_=Y.cloneElement(t,m);else if(dr(t))_=t(m);else if(sbe(t)&&!N8(t)){var w=m,E=a(t,w);_=Se.createElement(s3,{shapeType:r,elementProps:E})}else{var C=m;_=Se.createElement(s3,{shapeType:r,elementProps:C})}return o?Se.createElement(Kn,{className:f},_):_}function xS(e,t){return"trapezoids"in e.props}function bS(e,t){return"sectors"in e.props}function Lv(e,t){return"points"in e.props}function Cbe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,c=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&c}function Pbe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Obe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function Mbe(e,t){var r;return xS(e)?r=Cbe:bS(e)?r=Pbe:Lv(e)&&(r=Obe),r}function kbe(e,t){var r;return xS(e)?r="trapezoids":bS(e)?r="sectors":Lv(e)&&(r="points"),r}function Ibe(e,t){if(xS(e)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(bS(e)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Lv(e)?t.payload:{}}function Dbe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=kbe(r),c=Ibe(r,t),f=n.filter(function(m,_){var w=cS(c,m),E=r.props[a].filter(function(I){var D=Mbe(r);return D(I,t)}),C=r.props[a].indexOf(E[E.length-1]),M=_===C;return w&&M}),o=n.indexOf(f[f.length-1]);return o}var Rbe=Math.ceil,Lbe=Math.max;function jbe(e,t,r,n){for(var a=-1,c=Lbe(Rbe((t-e)/(r||1)),0),f=Array(c);c--;)f[n?c:++a]=e,e+=r;return f}var $be=jbe,Nbe=CV,l3=1/0,zbe=17976931348623157e292;function Bbe(e){if(!e)return e===0?e:0;if(e=Nbe(e),e===l3||e===-l3){var t=e<0?-1:1;return t*zbe}return e===e?e:0}var B8=Bbe,Fbe=$be,Ube=lS,J2=B8;function Vbe(e){return function(t,r,n){return n&&typeof n!="number"&&Ube(t,r,n)&&(r=n=void 0),t=J2(t),r===void 0?(r=t,t=0):r=J2(r),n=n===void 0?t<r?1:-1:J2(n),Fbe(t,r,n,e)}}var Wbe=Vbe,qbe=Wbe,Gbe=qbe(),Hbe=Gbe;const kb=Hr(Hbe);function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function c3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(r),!0).forEach(function(n){F8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F8(e,t,r){return t=Zbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zbe(e){var t=Xbe(e,"string");return jv(t)==="symbol"?t:String(t)}function Xbe(e,t){if(jv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kbe=["Webkit","Moz","O","ms"],Ybe=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(c){return c.toUpperCase()}),a=Kbe.reduce(function(c,f){return u3(u3({},c),{},F8({},f+n,r))},{});return a[t]=r,a};function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ib.apply(this,arguments)}function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U8(n.key),n)}}function Qbe(e,t,r){return t&&f3(e.prototype,t),r&&f3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ewe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jP(e,t)}function twe(e){var t=nwe();return function(){var n=Db(e),a;if(t){var c=Db(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return rwe(this,a)}}function rwe(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bs(e)}function Bs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Db(e){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(e)}function Ho(e,t,r){return t=U8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8(e){var t=iwe(e,"string");return bp(t)==="symbol"?t:String(t)}function iwe(e,t){if(bp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var owe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,c=t.x,f=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var m=r.length,_=ky().domain(kb(0,m)).range([c,c+f-o]),w=_.domain().map(function(E){return _(E)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:_(n),endX:_(a),scale:_,scaleValues:w}},d3=function(t){return t.changedTouches&&!!t.changedTouches.length},$v=function(e){ewe(r,e);var t=twe(r);function r(n){var a;return Jbe(this,r),a=t.call(this,n),Ho(Bs(a),"handleDrag",function(c){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(c):a.state.isSlideMoving&&a.handleSlideDrag(c)}),Ho(Bs(a),"handleTouchMove",function(c){c.changedTouches!=null&&c.changedTouches.length>0&&a.handleDrag(c.changedTouches[0])}),Ho(Bs(a),"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var c=a.props,f=c.endIndex,o=c.onDragEnd,m=c.startIndex;o==null||o({endIndex:f,startIndex:m})}),a.detachDragEndListener()}),Ho(Bs(a),"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ho(Bs(a),"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ho(Bs(a),"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ho(Bs(a),"handleSlideDragStart",function(c){var f=d3(c)?c.changedTouches[0]:c;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:f.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(Bs(a),"startX"),endX:a.handleTravellerDragStart.bind(Bs(a),"endX")},a.state={},a}return Qbe(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var c=a.startX,f=a.endX,o=this.state.scaleValues,m=this.props,_=m.gap,w=m.data,E=w.length-1,C=Math.min(c,f),M=Math.max(c,f),I=r.getIndexInRange(o,C),D=r.getIndexInRange(o,M);return{startIndex:I-I%_,endIndex:D===E?E:D-D%_}}},{key:"getTextOfTick",value:function(a){var c=this.props,f=c.data,o=c.tickFormatter,m=c.dataKey,_=ea(f[a],m,a);return dr(o)?o(_,a):_}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var c=this.state,f=c.slideMoveStartX,o=c.startX,m=c.endX,_=this.props,w=_.x,E=_.width,C=_.travellerWidth,M=_.startIndex,I=_.endIndex,D=_.onChange,$=a.pageX-f;$>0?$=Math.min($,w+E-C-m,w+E-C-o):$<0&&($=Math.max($,w-o,w-m));var B=this.getIndex({startX:o+$,endX:m+$});(B.startIndex!==M||B.endIndex!==I)&&D&&D(B),this.setState({startX:o+$,endX:m+$,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,c){var f=d3(c)?c.changedTouches[0]:c;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:f.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var c,f=this.state,o=f.brushMoveStartX,m=f.movingTravellerId,_=f.endX,w=f.startX,E=this.state[m],C=this.props,M=C.x,I=C.width,D=C.travellerWidth,$=C.onChange,B=C.gap,F=C.data,R={startX:this.state.startX,endX:this.state.endX},U=a.pageX-o;U>0?U=Math.min(U,M+I-D-E):U<0&&(U=Math.max(U,M-E)),R[m]=E+U;var H=this.getIndex(R),X=H.startIndex,ee=H.endIndex,oe=function(){var ge=F.length-1;return m==="startX"&&(_>w?X%B===0:ee%B===0)||_<w&&ee===ge||m==="endX"&&(_>w?ee%B===0:X%B===0)||_>w&&ee===ge};this.setState((c={},Ho(c,m,E+U),Ho(c,"brushMoveStartX",a.pageX),c),function(){$&&oe()&&$(H)})}},{key:"handleTravellerMoveKeyboard",value:function(a,c){var f=this,o=this.state,m=o.scaleValues,_=o.startX,w=o.endX,E=this.state[c],C=m.indexOf(E);if(C!==-1){var M=C+a;if(!(M===-1||M>=m.length)){var I=m[M];c==="startX"&&I>=w||c==="endX"&&I<=_||this.setState(Ho({},c,I),function(){f.props.onChange(f.getIndex({startX:f.state.startX,endX:f.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,c=a.x,f=a.y,o=a.width,m=a.height,_=a.fill,w=a.stroke;return Se.createElement("rect",{stroke:w,fill:_,x:c,y:f,width:o,height:m})}},{key:"renderPanorama",value:function(){var a=this.props,c=a.x,f=a.y,o=a.width,m=a.height,_=a.data,w=a.children,E=a.padding,C=Y.Children.only(w);return C?Se.cloneElement(C,{x:c,y:f,width:o,height:m,margin:E,compact:!0,data:_}):null}},{key:"renderTravellerLayer",value:function(a,c){var f=this,o=this.props,m=o.y,_=o.travellerWidth,w=o.height,E=o.traveller,C=Math.max(a,this.props.x),M=Q2(Q2({},Rr(this.props)),{},{x:C,y:m,width:_,height:w});return Se.createElement(Kn,{tabIndex:0,role:"slider",className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[c],onTouchStart:this.travellerDragStartHandlers[c],onKeyDown:function(D){["ArrowLeft","ArrowRight"].includes(D.key)&&(D.preventDefault(),D.stopPropagation(),f.handleTravellerMoveKeyboard(D.key==="ArrowRight"?1:-1,c))},onFocus:function(){f.setState({isTravellerFocused:!0})},onBlur:function(){f.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(E,M))}},{key:"renderSlide",value:function(a,c){var f=this.props,o=f.y,m=f.height,_=f.stroke,w=f.travellerWidth,E=Math.min(a,c)+w,C=Math.max(Math.abs(c-a)-w,0);return Se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:_,fillOpacity:.2,x:E,y:o,width:C,height:m})}},{key:"renderText",value:function(){var a=this.props,c=a.startIndex,f=a.endIndex,o=a.y,m=a.height,_=a.travellerWidth,w=a.stroke,E=this.state,C=E.startX,M=E.endX,I=5,D={pointerEvents:"none",fill:w};return Se.createElement(Kn,{className:"recharts-brush-texts"},Se.createElement(db,Ib({textAnchor:"end",verticalAnchor:"middle",x:Math.min(C,M)-I,y:o+m/2},D),this.getTextOfTick(c)),Se.createElement(db,Ib({textAnchor:"start",verticalAnchor:"middle",x:Math.max(C,M)+_+I,y:o+m/2},D),this.getTextOfTick(f)))}},{key:"render",value:function(){var a=this.props,c=a.data,f=a.className,o=a.children,m=a.x,_=a.y,w=a.width,E=a.height,C=a.alwaysShowText,M=this.state,I=M.startX,D=M.endX,$=M.isTextActive,B=M.isSlideMoving,F=M.isTravellerMoving,R=M.isTravellerFocused;if(!c||!c.length||!Lt(m)||!Lt(_)||!Lt(w)||!Lt(E)||w<=0||E<=0)return null;var U=Yt("recharts-brush",f),H=Se.Children.count(o)===1,X=Ybe("userSelect","none");return Se.createElement(Kn,{className:U,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:X},this.renderBackground(),H&&this.renderPanorama(),this.renderSlide(I,D),this.renderTravellerLayer(I,"startX"),this.renderTravellerLayer(D,"endX"),($||B||F||R||C)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var c=a.x,f=a.y,o=a.width,m=a.height,_=a.stroke,w=Math.floor(f+m/2)-1;return Se.createElement(Se.Fragment,null,Se.createElement("rect",{x:c,y:f,width:o,height:m,fill:_,stroke:"none"}),Se.createElement("line",{x1:c+1,y1:w,x2:c+o-1,y2:w,fill:"none",stroke:"#fff"}),Se.createElement("line",{x1:c+1,y1:w+2,x2:c+o-1,y2:w+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,c){var f;return Se.isValidElement(a)?f=Se.cloneElement(a,c):dr(a)?f=a(c):f=r.renderDefaultTraveller(c),f}},{key:"getDerivedStateFromProps",value:function(a,c){var f=a.data,o=a.width,m=a.x,_=a.travellerWidth,w=a.updateId,E=a.startIndex,C=a.endIndex;if(f!==c.prevData||w!==c.prevUpdateId)return Q2({prevData:f,prevTravellerWidth:_,prevUpdateId:w,prevX:m,prevWidth:o},f&&f.length?owe({data:f,width:o,x:m,travellerWidth:_,startIndex:E,endIndex:C}):{scale:null,scaleValues:null});if(c.scale&&(o!==c.prevWidth||m!==c.prevX||_!==c.prevTravellerWidth)){c.scale.range([m,m+o-_]);var M=c.scale.domain().map(function(I){return c.scale(I)});return{prevData:f,prevTravellerWidth:_,prevUpdateId:w,prevX:m,prevWidth:o,startX:c.scale(a.startIndex),endX:c.scale(a.endIndex),scaleValues:M}}return null}},{key:"getIndexInRange",value:function(a,c){for(var f=a.length,o=0,m=f-1;m-o>1;){var _=Math.floor((o+m)/2);a[_]>c?m=_:o=_}return c>=a[m]?m:o}}]),r}(Y.PureComponent);Ho($v,"displayName","Brush");Ho($v,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var awe=lk;function swe(e,t){var r;return awe(e,function(n,a,c){return r=t(n,a,c),!r}),!!r}var lwe=swe,cwe=A6,uwe=ku,hwe=lwe,fwe=mo,dwe=lS;function pwe(e,t,r){var n=fwe(e)?cwe:hwe;return r&&dwe(e,t,r)&&(t=void 0),n(e,uwe(t))}var mwe=pwe;const gwe=Hr(mwe);var Ys=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r};function ywe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var vwe=ywe,_we=lk;function xwe(e,t){var r=!0;return _we(e,function(n,a,c){return r=!!t(n,a,c),r}),r}var bwe=xwe,wwe=vwe,Swe=bwe,Ewe=ku,Twe=mo,Awe=lS;function Cwe(e,t,r){var n=Twe(e)?wwe:Swe;return r&&Awe(e,t,r)&&(t=void 0),n(e,Ewe(t))}var Pwe=Cwe;const V8=Hr(Pwe);var p3=TV;function Owe(e,t,r){t=="__proto__"&&p3?p3(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Mwe=Owe,kwe=Mwe,Iwe=SV,Dwe=ku;function Rwe(e,t){var r={};return t=Dwe(t),Iwe(e,function(n,a,c){kwe(r,a,t(n,a,c))}),r}var Lwe=Rwe;const jwe=Hr(Lwe);function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}var $we=["x","y"];function $P(){return $P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$P.apply(this,arguments)}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(n){Nwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nwe(e,t,r){return t=zwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zwe(e){var t=Bwe(e,"string");return Nv(t)==="symbol"?t:String(t)}function Bwe(e,t){if(Nv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fwe(e,t){if(e==null)return{};var r=Uwe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Uwe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Vwe(e,t){var r=e.x,n=e.y,a=Fwe(e,$we),c="".concat(r),f=parseInt(c,10),o="".concat(n),m=parseInt(o,10),_="".concat(t.height||a.height),w=parseInt(_,10),E="".concat(t.width||a.width),C=parseInt(E,10);return ny(ny(ny(ny(ny({},t),a),f?{x:f}:{}),m?{y:m}:{}),{},{height:w,width:C,name:t.name,radius:t.radius})}function g3(e){return Se.createElement(Abe,$P({shapeType:"rectangle",propTransformer:Vwe,activeClassName:"recharts-active-bar"},e))}var Wwe=["value","background"];function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function qwe(e,t){if(e==null)return{};var r=Gwe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gwe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rb.apply(this,arguments)}function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(n){au(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W8(n.key),n)}}function Zwe(e,t,r){return t&&v3(e.prototype,t),r&&v3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NP(e,t)}function Kwe(e){var t=Jwe();return function(){var n=Lb(e),a;if(t){var c=Lb(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Ywe(this,a)}}function Ywe(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gy(e)}function gy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(e)}function au(e,t,r){return t=W8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W8(e){var t=Qwe(e,"string");return wp(t)==="symbol"?t:String(t)}function Qwe(e,t){if(wp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rm=function(e){Xwe(r,e);var t=Kwe(r);function r(){var n;Hwe(this,r);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=t.call.apply(t,[this].concat(c)),au(gy(n),"state",{isAnimationFinished:!1}),au(gy(n),"id",s_("recharts-bar-")),au(gy(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),au(gy(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Zwe(r,[{key:"renderRectanglesStatically",value:function(a){var c=this,f=this.props,o=f.shape,m=f.dataKey,_=f.activeIndex,w=f.activeBar,E=Rr(this.props);return a&&a.map(function(C,M){var I=M===_,D=I?w:o,$=Ci(Ci(Ci({},E),C),{},{isActive:I,option:D,index:M,dataKey:m,onAnimationStart:c.handleAnimationStart,onAnimationEnd:c.handleAnimationEnd});return Se.createElement(Kn,Rb({className:"recharts-bar-rectangle"},X1(c.props,C,M),{key:"rectangle-".concat(M)}),Se.createElement(g3,$))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,c=this.props,f=c.data,o=c.layout,m=c.isAnimationActive,_=c.animationBegin,w=c.animationDuration,E=c.animationEasing,C=c.animationId,M=this.state.prevData;return Se.createElement(Yl,{begin:_,duration:w,isActive:m,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(C),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var D=I.t,$=f.map(function(B,F){var R=M&&M[F];if(R){var U=ys(R.x,B.x),H=ys(R.y,B.y),X=ys(R.width,B.width),ee=ys(R.height,B.height);return Ci(Ci({},B),{},{x:U(D),y:H(D),width:X(D),height:ee(D)})}if(o==="horizontal"){var oe=ys(0,B.height),ae=oe(D);return Ci(Ci({},B),{},{y:B.y+B.height-ae,height:ae})}var ge=ys(0,B.width),he=ge(D);return Ci(Ci({},B),{},{width:he})});return Se.createElement(Kn,null,a.renderRectanglesStatically($))})}},{key:"renderRectangles",value:function(){var a=this.props,c=a.data,f=a.isAnimationActive,o=this.state.prevData;return f&&c&&c.length&&(!o||!cS(o,c))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(c)}},{key:"renderBackground",value:function(){var a=this,c=this.props,f=c.data,o=c.dataKey,m=c.activeIndex,_=Rr(this.props.background);return f.map(function(w,E){w.value;var C=w.background,M=qwe(w,Wwe);if(!C)return null;var I=Ci(Ci(Ci(Ci(Ci({},M),{},{fill:"#eee"},C),_),X1(a.props,w,E)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:E,key:"background-bar-".concat(E),className:"recharts-bar-background-rectangle"});return Se.createElement(g3,Rb({option:a.props.background,isActive:E===m},I))})}},{key:"renderErrorBar",value:function(a,c){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,o=f.data,m=f.xAxis,_=f.yAxis,w=f.layout,E=f.children,C=Da(E,d_);if(!C)return null;var M=w==="vertical"?o[0].height/2:o[0].width/2,I=function(B,F){var R=Array.isArray(B.value)?B.value[1]:B.value;return{x:B.x,y:B.y,value:R,errorVal:ea(B,F)}},D={clipPath:a?"url(#clipPath-".concat(c,")"):null};return Se.createElement(Kn,D,C.map(function($,B){return Se.cloneElement($,{key:"error-bar-".concat(B),data:o,xAxis:m,yAxis:_,layout:w,offset:M,dataPointFormatter:I})}))}},{key:"render",value:function(){var a=this.props,c=a.hide,f=a.data,o=a.className,m=a.xAxis,_=a.yAxis,w=a.left,E=a.top,C=a.width,M=a.height,I=a.isAnimationActive,D=a.background,$=a.id;if(c||!f||!f.length)return null;var B=this.state.isAnimationFinished,F=Yt("recharts-bar",o),R=m&&m.allowDataOverflow,U=_&&_.allowDataOverflow,H=R||U,X=cr($)?this.id:$;return Se.createElement(Kn,{className:F},R||U?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(X)},Se.createElement("rect",{x:R?w:w-C/2,y:U?E:E-M/2,width:R?C:C*2,height:U?M:M*2}))):null,Se.createElement(Kn,{className:"recharts-bar-rectangles",clipPath:H?"url(#clipPath-".concat(X,")"):null},D?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(H,X),(!I||B)&&bu.renderCallByParent(this.props,f))}}],[{key:"getDerivedStateFromProps",value:function(a,c){return a.animationId!==c.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:c.curData}:a.data!==c.curData?{curData:a.data}:null}}]),r}(Y.PureComponent);au(rm,"displayName","Bar");au(rm,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!Vl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});au(rm,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,c=e.xAxis,f=e.yAxis,o=e.xAxisTicks,m=e.yAxisTicks,_=e.stackedData,w=e.dataStartIndex,E=e.displayedData,C=e.offset,M=fxe(n,r);if(!M)return null;var I=t.layout,D=r.props,$=D.dataKey,B=D.children,F=D.minPointSize,R=I==="horizontal"?f:c,U=_?R.scale.domain():null,H=xxe({numericAxis:R}),X=Da(B,MV),ee=E.map(function(oe,ae){var ge,he,ve,Ee,Re,Ne;if(_?ge=dxe(_[w+ae],U):(ge=ea(oe,$),zi(ge)||(ge=[H,ge])),I==="horizontal"){var Ve,Ke=[f.scale(ge[0]),f.scale(ge[1])],ke=Ke[0],Ge=Ke[1];he=Rz({axis:c,ticks:o,bandSize:a,offset:M.offset,entry:oe,index:ae}),ve=(Ve=Ge??ke)!==null&&Ve!==void 0?Ve:void 0,Ee=M.size;var Ye=ke-Ge;if(Re=Number.isNaN(Ye)?0:Ye,Ne={x:he,y:f.y,width:Ee,height:f.height},Math.abs(F)>0&&Math.abs(Re)<Math.abs(F)){var _t=bs(Re||F)*(Math.abs(F)-Math.abs(Re));ve-=_t,Re+=_t}}else{var Ot=[c.scale(ge[0]),c.scale(ge[1])],bt=Ot[0],Zt=Ot[1];if(he=bt,ve=Rz({axis:f,ticks:m,bandSize:a,offset:M.offset,entry:oe,index:ae}),Ee=Zt-bt,Re=M.size,Ne={x:c.x,y:ve,width:c.width,height:Re},Math.abs(F)>0&&Math.abs(Ee)<Math.abs(F)){var Xt=bs(Ee||F)*(Math.abs(F)-Math.abs(Ee));Ee+=Xt}}return Ci(Ci(Ci({},oe),{},{x:he,y:ve,width:Ee,height:Re,value:_?ge:ge[1],payload:oe,background:Ne},X&&X[ae]&&X[ae].props),{},{tooltipPayload:[R8(r,oe)],tooltipPosition:{x:he+Ee/2,y:ve+Re/2}})});return Ci({data:ee,layout:I},C)});function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function eSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q8(n.key),n)}}function tSe(e,t,r){return t&&_3(e.prototype,t),r&&_3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(r),!0).forEach(function(n){wS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wS(e,t,r){return t=q8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q8(e){var t=rSe(e,"string");return zv(t)==="symbol"?t:String(t)}function rSe(e,t){if(zv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G8=function(t,r,n,a,c){var f=t.width,o=t.height,m=t.layout,_=t.children,w=Object.keys(r),E={left:n.left,leftMirror:n.left,right:f-n.right,rightMirror:f-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},C=!!jl(_,rm);return w.reduce(function(M,I){var D=r[I],$=D.orientation,B=D.domain,F=D.padding,R=F===void 0?{}:F,U=D.mirror,H=D.reversed,X="".concat($).concat(U?"Mirror":""),ee,oe,ae,ge,he;if(D.type==="number"&&(D.padding==="gap"||D.padding==="no-gap")){var ve=B[1]-B[0],Ee=1/0,Re=D.categoricalDomain.sort();Re.forEach(function(Zt,Xt){Xt>0&&(Ee=Math.min((Zt||0)-(Re[Xt-1]||0),Ee))});var Ne=Ee/ve,Ve=D.layout==="vertical"?n.height:n.width;if(D.padding==="gap"&&(ee=Ne*Ve/2),D.padding==="no-gap"){var Ke=hp(t.barCategoryGap,Ne*Ve),ke=Ne*Ve/2;ee=ke-Ke-(ke-Ke)/Ve*Ke}}a==="xAxis"?oe=[n.left+(R.left||0)+(ee||0),n.left+n.width-(R.right||0)-(ee||0)]:a==="yAxis"?oe=m==="horizontal"?[n.top+n.height-(R.bottom||0),n.top+(R.top||0)]:[n.top+(R.top||0)+(ee||0),n.top+n.height-(R.bottom||0)-(ee||0)]:oe=D.range,H&&(oe=[oe[1],oe[0]]);var Ge=uxe(D,c,C),Ye=Ge.scale,_t=Ge.realScaleType;Ye.domain(B).range(oe),hxe(Ye);var Ot=_xe(Ye,ps(ps({},D),{},{realScaleType:_t}));a==="xAxis"?(he=$==="top"&&!U||$==="bottom"&&U,ae=n.left,ge=E[X]-he*D.height):a==="yAxis"&&(he=$==="left"&&!U||$==="right"&&U,ae=E[X]-he*D.width,ge=n.top);var bt=ps(ps(ps({},D),Ot),{},{realScaleType:_t,x:ae,y:ge,scale:Ye,width:a==="xAxis"?n.width:D.width,height:a==="yAxis"?n.height:D.height});return bt.bandSize=Ab(bt,Ot),!D.hide&&a==="xAxis"?E[X]+=(he?-1:1)*bt.height:D.hide||(E[X]+=(he?-1:1)*bt.width),ps(ps({},M),{},wS({},I,bt))},{})},H8=function(t,r){var n=t.x,a=t.y,c=r.x,f=r.y;return{x:Math.min(n,c),y:Math.min(a,f),width:Math.abs(c-n),height:Math.abs(f-a)}},nSe=function(t){var r=t.x1,n=t.y1,a=t.x2,c=t.y2;return H8({x:r,y:n},{x:a,y:c})},Z8=function(){function e(t){eSe(this,e),this.scale=t}return tSe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,c=n.position;if(r!==void 0){if(c)switch(c){case"start":return this.scale(r);case"middle":{var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+f}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+m}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],c=n[n.length-1];return a<=c?r>=a&&r<=c:r>=c&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}]),e}();wS(Z8,"EPS",1e-4);var jk=function(t){var r=Object.keys(t).reduce(function(n,a){return ps(ps({},n),{},wS({},a,Z8.create(t[a])))},{});return ps(ps({},r),{},{apply:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=c.bandAware,o=c.position;return jwe(a,function(m,_){return r[_].apply(m,{bandAware:f,position:o})})},isInRange:function(a){return V8(a,function(c,f){return r[f].isInRange(c)})}})};function iSe(e){return(e%180+180)%180}var oSe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=iSe(a),f=c*Math.PI/180,o=Math.atan(n/r),m=f>o&&f<Math.PI-o?n/Math.sin(f):r/Math.cos(f);return Math.abs(m)};function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function b3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(r),!0).forEach(function(n){aSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aSe(e,t,r){return t=sSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sSe(e){var t=lSe(e,"string");return Bv(t)==="symbol"?t:String(t)}function lSe(e,t){if(Bv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cSe(e,t){return dSe(e)||fSe(e,t)||hSe(e,t)||uSe()}function uSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hSe(e,t){if(e){if(typeof e=="string")return S3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S3(e,t)}}function S3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function dSe(e){if(Array.isArray(e))return e}function zP(){return zP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zP.apply(this,arguments)}var pSe=function(t,r){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,r):dr(t)?n=t(r):n=Se.createElement("line",zP({},r,{className:"recharts-reference-line-line"})),n},mSe=function(t,r,n,a,c){var f=c.viewBox,o=f.x,m=f.y,_=f.width,w=f.height,E=c.position;if(n){var C=c.y,M=c.yAxis.orientation,I=t.y.apply(C,{position:E});if(Ys(c,"discard")&&!t.y.isInRange(I))return null;var D=[{x:o+_,y:I},{x:o,y:I}];return M==="left"?D.reverse():D}if(r){var $=c.x,B=c.xAxis.orientation,F=t.x.apply($,{position:E});if(Ys(c,"discard")&&!t.x.isInRange(F))return null;var R=[{x:F,y:m+w},{x:F,y:m}];return B==="top"?R.reverse():R}if(a){var U=c.segment,H=U.map(function(X){return t.apply(X,{position:E})});return Ys(c,"discard")&&gwe(H,function(X){return!t.isInRange(X)})?null:H}return null};function $k(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxis,c=e.yAxis,f=e.shape,o=e.className,m=e.alwaysShow,_=e.clipPathId;Uh(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var w=jk({x:a.scale,y:c.scale}),E=yi(t),C=yi(r),M=n&&n.length===2,I=mSe(w,E,C,M,e);if(!I)return null;var D=cSe(I,2),$=D[0],B=$.x,F=$.y,R=D[1],U=R.x,H=R.y,X=Ys(e,"hidden")?"url(#".concat(_,")"):void 0,ee=w3(w3({clipPath:X},Rr(e,!0)),{},{x1:B,y1:F,x2:U,y2:H});return Se.createElement(Kn,{className:Yt("recharts-reference-line",o)},pSe(f,ee),ro.renderCallByParent(e,nSe({x1:B,y1:F,x2:U,y2:H})))}$k.displayName="ReferenceLine";$k.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BP.apply(this,arguments)}function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(n){gSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gSe(e,t,r){return t=ySe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ySe(e){var t=vSe(e,"string");return Fv(t)==="symbol"?t:String(t)}function vSe(e,t){if(Fv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Se=function(t){var r=t.x,n=t.y,a=t.xAxis,c=t.yAxis,f=jk({x:a.scale,y:c.scale}),o=f.apply({x:r,y:n},{bandAware:!0});return Ys(t,"discard")&&!f.isInRange(o)?null:o};function p_(e){var t=e.x,r=e.y,n=e.r,a=e.alwaysShow,c=e.clipPathId,f=yi(t),o=yi(r);if(Uh(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!o)return null;var m=_Se(e);if(!m)return null;var _=m.x,w=m.y,E=e.shape,C=e.className,M=Ys(e,"hidden")?"url(#".concat(c,")"):void 0,I=T3(T3({clipPath:M},Rr(e,!0)),{},{cx:_,cy:w});return Se.createElement(Kn,{className:Yt("recharts-reference-dot",C)},p_.renderDot(E,I),ro.renderCallByParent(e,{x:_-n,y:w-n,width:2*n,height:2*n}))}p_.displayName="ReferenceDot";p_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};p_.renderDot=function(e,t){var r;return Se.isValidElement(e)?r=Se.cloneElement(e,t):dr(e)?r=e(t):r=Se.createElement(Lk,BP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r};function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function FP(){return FP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FP.apply(this,arguments)}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){xSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xSe(e,t,r){return t=bSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bSe(e){var t=wSe(e,"string");return Uv(t)==="symbol"?t:String(t)}function wSe(e,t){if(Uv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SSe=function(t,r,n,a,c){var f=c.x1,o=c.x2,m=c.y1,_=c.y2,w=c.xAxis,E=c.yAxis;if(!w||!E)return null;var C=jk({x:w.scale,y:E.scale}),M={x:t?C.x.apply(f,{position:"start"}):C.x.rangeMin,y:n?C.y.apply(m,{position:"start"}):C.y.rangeMin},I={x:r?C.x.apply(o,{position:"end"}):C.x.rangeMax,y:a?C.y.apply(_,{position:"end"}):C.y.rangeMax};return Ys(c,"discard")&&(!C.isInRange(M)||!C.isInRange(I))?null:H8(M,I)};function m_(e){var t=e.x1,r=e.x2,n=e.y1,a=e.y2,c=e.className,f=e.alwaysShow,o=e.clipPathId;Uh(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=yi(t),_=yi(r),w=yi(n),E=yi(a),C=e.shape;if(!m&&!_&&!w&&!E&&!C)return null;var M=SSe(m,_,w,E,e);if(!M&&!C)return null;var I=Ys(e,"hidden")?"url(#".concat(o,")"):void 0;return Se.createElement(Kn,{className:Yt("recharts-reference-area",c)},m_.renderRect(C,C3(C3({clipPath:I},Rr(e,!0)),M)),ro.renderCallByParent(e,M))}m_.displayName="ReferenceArea";m_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};m_.renderRect=function(e,t){var r;return Se.isValidElement(e)?r=Se.cloneElement(e,t):dr(e)?r=e(t):r=Se.createElement(Rk,FP({},t,{className:"recharts-reference-area-rect"})),r};function X8(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)n.push(e[a]);else return;return n}function ESe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return oSe(n,r)}function TSe(e,t,r){var n=r==="width",a=e.x,c=e.y,f=e.width,o=e.height;return t===1?{start:n?a:c,end:n?a+f:c+o}:{start:n?a+f:c+o,end:n?a:c}}function jb(e,t,r,n,a){return e*(t-e*r/2-n)>=0&&e*(t+e*r/2-a)<=0}function ASe(e,t){return X8(e,t+1)}function CSe(e,t,r,n,a){for(var c=(n||[]).slice(),f=t.start,o=t.end,m=0,_=1,w=f;_<=c.length;){var E=n==null?void 0:n[m];if(E===void 0)return X8(n,_);var C=r(E,m),M=E.coordinate,I=m===0||jb(e,M,C,w,o);I||(m=0,w=f,_+=1),I&&(w=M+e*(C/2+a),m+=_)}return[]}function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){PSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PSe(e,t,r){return t=OSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OSe(e){var t=MSe(e,"string");return Vv(t)==="symbol"?t:String(t)}function MSe(e,t){if(Vv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kSe(e,t,r,n,a){for(var c=(n||[]).slice(),f=c.length,o=t.start,m=t.end,_=f-1;_>=0;_--){var w=c[_],E=r(w,_);if(_===f-1){var C=e*(w.coordinate+e*E/2-m);c[_]=w=eo(eo({},w),{},{tickCoord:C>0?w.coordinate-C*e:w.coordinate})}else c[_]=w=eo(eo({},w),{},{tickCoord:w.coordinate});var M=jb(e,w.tickCoord,E,o,m);M&&(m=w.tickCoord-e*(E/2+a),c[_]=eo(eo({},w),{},{isShow:!0}))}return c}function ISe(e,t,r,n,a,c){var f=(n||[]).slice(),o=f.length,m=t.start,_=t.end;if(c){var w=n[o-1],E=r(w,o-1),C=e*(w.coordinate+e*E/2-_);f[o-1]=w=eo(eo({},w),{},{tickCoord:C>0?w.coordinate-C*e:w.coordinate});var M=jb(e,w.tickCoord,E,m,_);M&&(_=w.tickCoord-e*(E/2+a),f[o-1]=eo(eo({},w),{},{isShow:!0}))}for(var I=c?o-1:o,D=0;D<I;D++){var $=f[D],B=r($,D);if(D===0){var F=e*($.coordinate-e*B/2-m);f[D]=$=eo(eo({},$),{},{tickCoord:F<0?$.coordinate-F*e:$.coordinate})}else f[D]=$=eo(eo({},$),{},{tickCoord:$.coordinate});var R=jb(e,$.tickCoord,B,m,_);R&&(m=$.tickCoord+e*(B/2+a),f[D]=eo(eo({},$),{},{isShow:!0}))}return f}function UP(e,t,r){var n=e.tick,a=e.ticks,c=e.viewBox,f=e.minTickGap,o=e.orientation,m=e.interval,_=e.tickFormatter,w=e.unit,E=e.angle;if(!a||!a.length||!n)return[];if(Lt(m)||Vl.isSsr)return ASe(a,typeof m=="number"&&Lt(m)?m:0);var C=[],M=o==="top"||o==="bottom"?"width":"height",I=w&&M==="width"?My(w,{fontSize:t,letterSpacing:r}):{width:0,height:0},D=function(R,U){var H=dr(_)?_(R.value,U):R.value;return M==="width"?ESe(My(H,{fontSize:t,letterSpacing:r}),I,E):My(H,{fontSize:t,letterSpacing:r})[M]},$=a.length>=2?bs(a[1].coordinate-a[0].coordinate):1,B=TSe(c,$,M);return m==="equidistantPreserveStart"?CSe($,B,D,a,f):(m==="preserveStart"||m==="preserveStartEnd"?C=ISe($,B,D,a,f,m==="preserveStartEnd"):C=kSe($,B,D,a,f),C.filter(function(F){return F.isShow}))}var DSe=["viewBox"],RSe=["viewBox"],LSe=["ticks"];function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ud.apply(this,arguments)}function O3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(r),!0).forEach(function(n){Nk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eA(e,t){if(e==null)return{};var r=jSe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jSe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K8(n.key),n)}}function NSe(e,t,r){return t&&M3(e.prototype,t),r&&M3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t)}function VP(e,t){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VP(e,t)}function BSe(e){var t=VSe();return function(){var n=$b(e),a;if(t){var c=$b(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return FSe(this,a)}}function FSe(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return USe(e)}function USe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $b(e){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(e)}function Nk(e,t,r){return t=K8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K8(e){var t=WSe(e,"string");return Sp(t)==="symbol"?t:String(t)}function WSe(e,t){if(Sp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dy=function(e){zSe(r,e);var t=BSe(r);function r(n){var a;return $Se(this,r),a=t.call(this,n),a.state={fontSize:"",letterSpacing:""},a}return NSe(r,[{key:"shouldComponentUpdate",value:function(a,c){var f=a.viewBox,o=eA(a,DSe),m=this.props,_=m.viewBox,w=eA(m,RSe);return!Jd(f,_)||!Jd(o,w)||!Jd(c,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var c=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];c&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var c=this.props,f=c.x,o=c.y,m=c.width,_=c.height,w=c.orientation,E=c.tickSize,C=c.mirror,M=c.tickMargin,I,D,$,B,F,R,U=C?-1:1,H=a.tickSize||E,X=Lt(a.tickCoord)?a.tickCoord:a.coordinate;switch(w){case"top":I=D=a.coordinate,B=o+ +!C*_,$=B-U*H,R=$-U*M,F=X;break;case"left":$=B=a.coordinate,D=f+ +!C*m,I=D-U*H,F=I-U*M,R=X;break;case"right":$=B=a.coordinate,D=f+ +C*m,I=D+U*H,F=I+U*M,R=X;break;default:I=D=a.coordinate,B=o+ +C*_,$=B+U*H,R=$+U*M,F=X;break}return{line:{x1:I,y1:$,x2:D,y2:B},tick:{x:F,y:R}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,c=a.orientation,f=a.mirror,o;switch(c){case"left":o=f?"start":"end";break;case"right":o=f?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,c=a.orientation,f=a.mirror,o="end";switch(c){case"left":case"right":o="middle";break;case"top":o=f?"start":"end";break;default:o=f?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,c=a.x,f=a.y,o=a.width,m=a.height,_=a.orientation,w=a.mirror,E=a.axisLine,C=so(so(so({},Rr(this.props)),Rr(E)),{},{fill:"none"});if(_==="top"||_==="bottom"){var M=+(_==="top"&&!w||_==="bottom"&&w);C=so(so({},C),{},{x1:c,y1:f+M*m,x2:c+o,y2:f+M*m})}else{var I=+(_==="left"&&!w||_==="right"&&w);C=so(so({},C),{},{x1:c+I*o,y1:f,x2:c+I*o,y2:f+m})}return Se.createElement("line",Ud({},C,{className:Yt("recharts-cartesian-axis-line",Ia(E,"className"))}))}},{key:"renderTicks",value:function(a,c,f){var o=this,m=this.props,_=m.tickLine,w=m.stroke,E=m.tick,C=m.tickFormatter,M=m.unit,I=UP(so(so({},this.props),{},{ticks:a}),c,f),D=this.getTickTextAnchor(),$=this.getTickVerticalAnchor(),B=Rr(this.props),F=Rr(E),R=so(so({},B),{},{fill:"none"},Rr(_)),U=I.map(function(H,X){var ee=o.getTickLineCoord(H),oe=ee.line,ae=ee.tick,ge=so(so(so(so({textAnchor:D,verticalAnchor:$},B),{},{stroke:"none",fill:w},F),ae),{},{index:X,payload:H,visibleTicksCount:I.length,tickFormatter:C});return Se.createElement(Kn,Ud({className:"recharts-cartesian-axis-tick",key:"tick-".concat(X)},X1(o.props,H,X)),_&&Se.createElement("line",Ud({},R,oe,{className:Yt("recharts-cartesian-axis-tick-line",Ia(_,"className"))})),E&&r.renderTickItem(E,ge,"".concat(dr(C)?C(H.value,X):H.value).concat(M||"")))});return Se.createElement("g",{className:"recharts-cartesian-axis-ticks"},U)}},{key:"render",value:function(){var a=this,c=this.props,f=c.axisLine,o=c.width,m=c.height,_=c.ticksGenerator,w=c.className,E=c.hide;if(E)return null;var C=this.props,M=C.ticks,I=eA(C,LSe),D=M;return dr(_)&&(D=M&&M.length>0?_(this.props):_(I)),o<=0||m<=0||!D||!D.length?null:Se.createElement(Kn,{className:Yt("recharts-cartesian-axis",w),ref:function(B){a.layerReference=B}},f&&this.renderAxisLine(),this.renderTicks(D,this.state.fontSize,this.state.letterSpacing),ro.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,c,f){var o;return Se.isValidElement(a)?o=Se.cloneElement(a,c):dr(a)?o=a(c):o=Se.createElement(db,Ud({},c,{className:"recharts-cartesian-axis-tick-value"}),f),o}}]),r}(Y.Component);Nk(Dy,"displayName","CartesianAxis");Nk(Dy,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qSe=["x1","y1","x2","y2","key"],GSe=["offset"];function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function WP(){return WP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WP.apply(this,arguments)}function k3(e,t){if(e==null)return{};var r=HSe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HSe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function I3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(r),!0).forEach(function(n){zk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y8(n.key),n)}}function XSe(e,t,r){return t&&D3(e.prototype,t),r&&D3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qP(e,t)}function qP(e,t){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qP(e,t)}function YSe(e){var t=eEe();return function(){var n=Nb(e),a;if(t){var c=Nb(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return JSe(this,a)}}function JSe(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QSe(e)}function QSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nb(e){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(e)}function zk(e,t,r){return t=Y8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y8(e){var t=tEe(e,"string");return Ep(t)==="symbol"?t:String(t)}function tEe(e,t){if(Ep(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ep(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zb=function(e){KSe(r,e);var t=YSe(r);function r(){return ZSe(this,r),t.apply(this,arguments)}return XSe(r,[{key:"renderHorizontal",value:function(a){var c=this,f=this.props,o=f.x,m=f.width,_=f.horizontal;if(!a||!a.length)return null;var w=a.map(function(E,C){var M=Uc(Uc({},c.props),{},{x1:o,y1:E,x2:o+m,y2:E,key:"line-".concat(C),index:C});return r.renderLineItem(_,M)});return Se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},w)}},{key:"renderVertical",value:function(a){var c=this,f=this.props,o=f.y,m=f.height,_=f.vertical;if(!a||!a.length)return null;var w=a.map(function(E,C){var M=Uc(Uc({},c.props),{},{x1:E,y1:o,x2:E,y2:o+m,key:"line-".concat(C),index:C});return r.renderLineItem(_,M)});return Se.createElement("g",{className:"recharts-cartesian-grid-vertical"},w)}},{key:"renderVerticalStripes",value:function(a){var c=this.props.verticalFill;if(!c||!c.length)return null;var f=this.props,o=f.fillOpacity,m=f.x,_=f.y,w=f.width,E=f.height,C=a.map(function(I){return Math.round(I+m-m)}).sort(function(I,D){return I-D});m!==C[0]&&C.unshift(0);var M=C.map(function(I,D){var $=!C[D+1],B=$?m+w-I:C[D+1]-I;if(B<=0)return null;var F=D%c.length;return Se.createElement("rect",{key:"react-".concat(D),x:I,y:_,width:B,height:E,stroke:"none",fill:c[F],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},M)}},{key:"renderHorizontalStripes",value:function(a){var c=this.props.horizontalFill;if(!c||!c.length)return null;var f=this.props,o=f.fillOpacity,m=f.x,_=f.y,w=f.width,E=f.height,C=a.map(function(I){return Math.round(I+_-_)}).sort(function(I,D){return I-D});_!==C[0]&&C.unshift(0);var M=C.map(function(I,D){var $=!C[D+1],B=$?_+E-I:C[D+1]-I;if(B<=0)return null;var F=D%c.length;return Se.createElement("rect",{key:"react-".concat(D),y:I,x:m,height:B,width:w,stroke:"none",fill:c[F],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},M)}},{key:"renderBackground",value:function(){var a=this.props.fill;if(!a||a==="none")return null;var c=this.props,f=c.fillOpacity,o=c.x,m=c.y,_=c.width,w=c.height;return Se.createElement("rect",{x:o,y:m,width:_,height:w,stroke:"none",fill:a,fillOpacity:f,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var a=this.props,c=a.x,f=a.y,o=a.width,m=a.height,_=a.horizontal,w=a.vertical,E=a.horizontalCoordinatesGenerator,C=a.verticalCoordinatesGenerator,M=a.xAxis,I=a.yAxis,D=a.offset,$=a.chartWidth,B=a.chartHeight,F=a.syncWithTicks,R=a.horizontalValues,U=a.verticalValues;if(!Lt(o)||o<=0||!Lt(m)||m<=0||!Lt(c)||c!==+c||!Lt(f)||f!==+f)return null;var H=this.props,X=H.horizontalPoints,ee=H.verticalPoints;if((!X||!X.length)&&dr(E)){var oe=R&&R.length;X=E({yAxis:Uc(Uc({},I),{},{ticks:oe?R:I.ticks}),width:$,height:B,offset:D},oe?!0:F)}if((!ee||!ee.length)&&dr(C)){var ae=U&&U.length;ee=C({xAxis:Uc(Uc({},M),{},{ticks:ae?U:M.ticks}),width:$,height:B,offset:D},ae?!0:F)}return Se.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),_&&this.renderHorizontal(X),w&&this.renderVertical(ee),_&&this.renderHorizontalStripes(X),w&&this.renderVerticalStripes(ee))}}],[{key:"renderLineItem",value:function(a,c){var f;if(Se.isValidElement(a))f=Se.cloneElement(a,c);else if(dr(a))f=a(c);else{var o=c.x1,m=c.y1,_=c.x2,w=c.y2,E=c.key,C=k3(c,qSe),M=Rr(C);M.offset;var I=k3(M,GSe);f=Se.createElement("line",WP({},I,{x1:o,y1:m,x2:_,y2:w,fill:"none",key:E}))}return f}}]),r}(Y.PureComponent);zk(zb,"displayName","CartesianGrid");zk(zb,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var rEe=["type","layout","connectNulls","ref"];function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function nEe(e,t){if(e==null)return{};var r=iEe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iEe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(this,arguments)}function R3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(r),!0).forEach(function(n){Vs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ed(e){return lEe(e)||sEe(e)||aEe(e)||oEe()}function oEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aEe(e,t){if(e){if(typeof e=="string")return GP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GP(e,t)}}function sEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lEe(e){if(Array.isArray(e))return GP(e)}function GP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J8(n.key),n)}}function uEe(e,t,r){return t&&L3(e.prototype,t),r&&L3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}function HP(e,t){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HP(e,t)}function fEe(e){var t=pEe();return function(){var n=Bb(e),a;if(t){var c=Bb(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return dEe(this,a)}}function dEe(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ih(e)}function Ih(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bb(e){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(e)}function Vs(e,t,r){return t=J8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J8(e){var t=mEe(e,"string");return Tp(t)==="symbol"?t:String(t)}function mEe(e,t){if(Tp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g_=function(e){hEe(r,e);var t=fEe(r);function r(){var n;cEe(this,r);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=t.call.apply(t,[this].concat(c)),Vs(Ih(n),"state",{isAnimationFinished:!0,totalLength:0}),Vs(Ih(n),"getStrokeDasharray",function(o,m,_){for(var w=_.reduce(function(F,R){return F+R}),E=Math.floor(o/w),C=o%w,M=m-o,I=[],D=0,$=0;;$+=_[D],++D)if($+_[D]>C){I=[].concat(Ed(_.slice(0,D)),[C-$]);break}var B=I.length%2===0?[0,M]:[M];return[].concat(Ed(r.repeat(_,E)),Ed(I),B).map(function(F){return"".concat(F,"px")}).join(", ")}),Vs(Ih(n),"id",s_("recharts-line-")),Vs(Ih(n),"pathRef",function(o){n.mainCurve=o}),Vs(Ih(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Vs(Ih(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return uEe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,c){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,o=f.points,m=f.xAxis,_=f.yAxis,w=f.layout,E=f.children,C=Da(E,d_);if(!C)return null;var M=function($,B){return{x:$.x,y:$.y,value:$.value,errorVal:ea($.payload,B)}},I={clipPath:a?"url(#clipPath-".concat(c,")"):null};return Se.createElement(Kn,I,C.map(function(D,$){return Se.cloneElement(D,{key:"bar-".concat($),data:o,xAxis:m,yAxis:_,layout:w,dataPointFormatter:M})}))}},{key:"renderDots",value:function(a,c,f){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var m=this.props,_=m.dot,w=m.points,E=m.dataKey,C=Rr(this.props),M=Rr(_,!0),I=w.map(function($,B){var F=qo(qo(qo({key:"dot-".concat(B),r:3},C),M),{},{value:$.value,dataKey:E,cx:$.x,cy:$.y,index:B,payload:$.payload});return r.renderDotItem(_,F)}),D={clipPath:a?"url(#clipPath-".concat(c?"":"dots-").concat(f,")"):null};return Se.createElement(Kn,Ry({className:"recharts-line-dots",key:"dots"},D),I)}},{key:"renderCurveStatically",value:function(a,c,f,o){var m=this.props,_=m.type,w=m.layout,E=m.connectNulls;m.ref;var C=nEe(m,rEe),M=qo(qo(qo({},Rr(C,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(f,")"):null,points:a},o),{},{type:_,layout:w,connectNulls:E});return Se.createElement(DP,Ry({},M,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,c){var f=this,o=this.props,m=o.points,_=o.strokeDasharray,w=o.isAnimationActive,E=o.animationBegin,C=o.animationDuration,M=o.animationEasing,I=o.animationId,D=o.animateNewValues,$=o.width,B=o.height,F=this.state,R=F.prevPoints,U=F.totalLength;return Se.createElement(Yl,{begin:E,duration:C,isActive:w,easing:M,from:{t:0},to:{t:1},key:"line-".concat(I),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(H){var X=H.t;if(R){var ee=R.length/m.length,oe=m.map(function(Ee,Re){var Ne=Math.floor(Re*ee);if(R[Ne]){var Ve=R[Ne],Ke=ys(Ve.x,Ee.x),ke=ys(Ve.y,Ee.y);return qo(qo({},Ee),{},{x:Ke(X),y:ke(X)})}if(D){var Ge=ys($*2,Ee.x),Ye=ys(B/2,Ee.y);return qo(qo({},Ee),{},{x:Ge(X),y:Ye(X)})}return qo(qo({},Ee),{},{x:Ee.x,y:Ee.y})});return f.renderCurveStatically(oe,a,c)}var ae=ys(0,U),ge=ae(X),he;if(_){var ve="".concat(_).split(/[,\s]+/gim).map(function(Ee){return parseFloat(Ee)});he=f.getStrokeDasharray(ge,U,ve)}else he="".concat(ge,"px ").concat(U-ge,"px");return f.renderCurveStatically(m,a,c,{strokeDasharray:he})})}},{key:"renderCurve",value:function(a,c){var f=this.props,o=f.points,m=f.isAnimationActive,_=this.state,w=_.prevPoints,E=_.totalLength;return m&&o&&o.length&&(!w&&E>0||!cS(w,o))?this.renderCurveWithAnimation(a,c):this.renderCurveStatically(o,a,c)}},{key:"render",value:function(){var a,c=this.props,f=c.hide,o=c.dot,m=c.points,_=c.className,w=c.xAxis,E=c.yAxis,C=c.top,M=c.left,I=c.width,D=c.height,$=c.isAnimationActive,B=c.id;if(f||!m||!m.length)return null;var F=this.state.isAnimationFinished,R=m.length===1,U=Yt("recharts-line",_),H=w&&w.allowDataOverflow,X=E&&E.allowDataOverflow,ee=H||X,oe=cr(B)?this.id:B,ae=(a=Rr(o))!==null&&a!==void 0?a:{r:3,strokeWidth:2},ge=ae.r,he=ge===void 0?3:ge,ve=ae.strokeWidth,Ee=ve===void 0?2:ve,Re=Lie(o)?o:{},Ne=Re.clipDot,Ve=Ne===void 0?!0:Ne,Ke=he*2+Ee;return Se.createElement(Kn,{className:U},H||X?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(oe)},Se.createElement("rect",{x:H?M:M-I/2,y:X?C:C-D/2,width:H?I:I*2,height:X?D:D*2})),!Ve&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(oe)},Se.createElement("rect",{x:M-Ke/2,y:C-Ke/2,width:I+Ke,height:D+Ke}))):null,!R&&this.renderCurve(ee,oe),this.renderErrorBar(ee,oe),(R||o)&&this.renderDots(ee,Ve,oe),(!$||F)&&bu.renderCallByParent(this.props,m))}}],[{key:"getDerivedStateFromProps",value:function(a,c){return a.animationId!==c.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:c.curPoints}:a.points!==c.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,c){for(var f=a.length%2!==0?[].concat(Ed(a),[0]):a,o=[],m=0;m<c;++m)o=[].concat(Ed(o),Ed(f));return o}},{key:"renderDotItem",value:function(a,c){var f;if(Se.isValidElement(a))f=Se.cloneElement(a,c);else if(dr(a))f=a(c);else{var o=Yt("recharts-line-dot",a?a.className:"");f=Se.createElement(Lk,Ry({},c,{className:o}))}return f}}]),r}(Y.PureComponent);Vs(g_,"displayName","Line");Vs(g_,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Vl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Vs(g_,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,c=e.yAxisTicks,f=e.dataKey,o=e.bandSize,m=e.displayedData,_=e.offset,w=t.layout,E=m.map(function(C,M){var I=ea(C,f);return w==="horizontal"?{x:Dz({axis:r,ticks:a,bandSize:o,entry:C,index:M}),y:cr(I)?null:n.scale(I),value:I,payload:C}:{x:cr(I)?null:r.scale(I),y:Dz({axis:n,ticks:c,bandSize:o,entry:C,index:M}),value:I,payload:C}});return qo({points:E,layout:w},_)});var Ap=function(){return null};Ap.displayName="XAxis";Ap.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var Cp=function(){return null};Cp.displayName="YAxis";Cp.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var gEe=ku,yEe=l_,vEe=rS;function _Ee(e){return function(t,r,n){var a=Object(t);if(!yEe(t)){var c=gEe(r);t=vEe(t),r=function(o){return c(a[o],o,a)}}var f=e(t,r,n);return f>-1?a[c?t[f]:f]:void 0}}var xEe=_Ee,bEe=B8;function wEe(e){var t=bEe(e),r=t%1;return t===t?r?t-r:t:0}var SEe=wEe,EEe=B6,TEe=ku,AEe=SEe,CEe=Math.max;function PEe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:AEe(r);return a<0&&(a=CEe(n+a,0)),EEe(e,TEe(t),a)}var OEe=PEe,MEe=xEe,kEe=OEe,IEe=MEe(kEe),DEe=IEe;const REe=Hr(DEe);var LEe="Invariant failed";function jEe(e,t){if(!e)throw new Error(LEe)}function Q8(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,c=e.endAngle,f=Bi(t,r,n,a),o=Bi(t,r,n,c);return{points:[f,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:c}}function j3(e){return BEe(e)||zEe(e)||NEe(e)||$Ee()}function $Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NEe(e,t){if(e){if(typeof e=="string")return ZP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZP(e,t)}}function zEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BEe(e){if(Array.isArray(e))return ZP(e)}function ZP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XP=function(t,r,n,a,c){var f=Da(t,$k),o=Da(t,p_),m=[].concat(j3(f),j3(o)),_=Da(t,m_),w="".concat(a,"Id"),E=a[0],C=r;if(m.length&&(C=m.reduce(function(D,$){if($.props[w]===n&&Ys($.props,"extendDomain")&&Lt($.props[E])){var B=$.props[E];return[Math.min(D[0],B),Math.max(D[1],B)]}return D},C)),_.length){var M="".concat(E,"1"),I="".concat(E,"2");C=_.reduce(function(D,$){if($.props[w]===n&&Ys($.props,"extendDomain")&&Lt($.props[M])&&Lt($.props[I])){var B=$.props[M],F=$.props[I];return[Math.min(D[0],B,F),Math.max(D[1],B,F)]}return D},C)}return c&&c.length&&(C=c.reduce(function(D,$){return Lt($)?[Math.min(D[0],$),Math.max(D[1],$)]:D},C)),C},eW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(m,_,w){this.fn=m,this.context=_,this.once=w||!1}function c(m,_,w,E,C){if(typeof w!="function")throw new TypeError("The listener must be a function");var M=new a(w,E||m,C),I=r?r+_:_;return m._events[I]?m._events[I].fn?m._events[I]=[m._events[I],M]:m._events[I].push(M):(m._events[I]=M,m._eventsCount++),m}function f(m,_){--m._eventsCount===0?m._events=new n:delete m._events[_]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var _=[],w,E;if(this._eventsCount===0)return _;for(E in w=this._events)t.call(w,E)&&_.push(r?E.slice(1):E);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(w)):_},o.prototype.listeners=function(_){var w=r?r+_:_,E=this._events[w];if(!E)return[];if(E.fn)return[E.fn];for(var C=0,M=E.length,I=new Array(M);C<M;C++)I[C]=E[C].fn;return I},o.prototype.listenerCount=function(_){var w=r?r+_:_,E=this._events[w];return E?E.fn?1:E.length:0},o.prototype.emit=function(_,w,E,C,M,I){var D=r?r+_:_;if(!this._events[D])return!1;var $=this._events[D],B=arguments.length,F,R;if($.fn){switch($.once&&this.removeListener(_,$.fn,void 0,!0),B){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,w),!0;case 3:return $.fn.call($.context,w,E),!0;case 4:return $.fn.call($.context,w,E,C),!0;case 5:return $.fn.call($.context,w,E,C,M),!0;case 6:return $.fn.call($.context,w,E,C,M,I),!0}for(R=1,F=new Array(B-1);R<B;R++)F[R-1]=arguments[R];$.fn.apply($.context,F)}else{var U=$.length,H;for(R=0;R<U;R++)switch($[R].once&&this.removeListener(_,$[R].fn,void 0,!0),B){case 1:$[R].fn.call($[R].context);break;case 2:$[R].fn.call($[R].context,w);break;case 3:$[R].fn.call($[R].context,w,E);break;case 4:$[R].fn.call($[R].context,w,E,C);break;default:if(!F)for(H=1,F=new Array(B-1);H<B;H++)F[H-1]=arguments[H];$[R].fn.apply($[R].context,F)}}return!0},o.prototype.on=function(_,w,E){return c(this,_,w,E,!1)},o.prototype.once=function(_,w,E){return c(this,_,w,E,!0)},o.prototype.removeListener=function(_,w,E,C){var M=r?r+_:_;if(!this._events[M])return this;if(!w)return f(this,M),this;var I=this._events[M];if(I.fn)I.fn===w&&(!C||I.once)&&(!E||I.context===E)&&f(this,M);else{for(var D=0,$=[],B=I.length;D<B;D++)(I[D].fn!==w||C&&!I[D].once||E&&I[D].context!==E)&&$.push(I[D]);$.length?this._events[M]=$.length===1?$[0]:$:f(this,M)}return this},o.prototype.removeAllListeners=function(_){var w;return _?(w=r?r+_:_,this._events[w]&&f(this,w)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(eW);var FEe=eW.exports;const UEe=Hr(FEe);var Go=new UEe;Go.setMaxListeners&&Go.setMaxListeners(10);var tA="recharts.syncMouseEvents";function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function VEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tW(n.key),n)}}function WEe(e,t,r){return t&&$3(e.prototype,t),r&&$3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rA(e,t,r){return t=tW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tW(e){var t=qEe(e,"string");return Wv(t)==="symbol"?t:String(t)}function qEe(e,t){if(Wv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GEe=function(){function e(){VEe(this,e),rA(this,"activeIndex",0),rA(this,"coordinateList",[]),rA(this,"layout","horizontal")}return WEe(e,[{key:"setDetails",value:function(r){var n=r.coordinateList,a=n===void 0?[]:n,c=r.container,f=c===void 0?null:c,o=r.layout,m=o===void 0?null:o,_=r.offset,w=_===void 0?null:_,E=r.mouseHandlerCallback,C=E===void 0?null:E;this.coordinateList=a??this.coordinateList,this.container=f??this.container,this.layout=m??this.layout,this.offset=w??this.offset,this.mouseHandlerCallback=C??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),n=r.x,a=r.y,c=r.height,f=this.coordinateList[this.activeIndex].coordinate,o=n+f,m=a+this.offset.top+c/2;this.mouseHandlerCallback({pageX:o,pageY:m})}}}]),e}();function HEe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Lt(n)&&Lt(a))return!0}return!1}function ZEe(e){if(typeof requestAnimationFrame=="function"){var t=requestAnimationFrame(e);return function(){return cancelAnimationFrame(t)}}if(typeof setImmediate=="function"){var r=setImmediate(e);return function(){return clearImmediate(r)}}var n=setTimeout(e);return function(){return clearTimeout(n)}}function XEe(e,t,r){var n,a,c,f;if(e==="horizontal")n=t.x,c=n,a=r.top,f=r.top+r.height;else if(e==="vertical")a=t.y,f=a,n=r.left,c=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,m=t.cy,_=t.innerRadius,w=t.outerRadius,E=t.angle,C=Bi(o,m,_,E),M=Bi(o,m,w,E);n=C.x,a=C.y,c=M.x,f=M.y}else return Q8(t);return[{x:n,y:a},{x:c,y:f}]}function KEe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}var YEe=["item"],JEe=["children","className","width","height","style","compact","title","desc"];function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function N3(e,t){return tTe(e)||eTe(e,t)||rW(e,t)||QEe()}function QEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,c,f,o=[],m=!0,_=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);m=!0);}catch(w){_=!0,a=w}finally{try{if(!m&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(_)throw a}}return o}}function tTe(e){if(Array.isArray(e))return e}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(this,arguments)}function z3(e,t){if(e==null)return{};var r=rTe(e,t),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rTe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function nTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nW(n.key),n)}}function iTe(e,t,r){return t&&B3(e.prototype,t),r&&B3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KP(e,t)}function KP(e,t){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KP(e,t)}function aTe(e){var t=lTe();return function(){var n=Fb(e),a;if(t){var c=Fb(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return sTe(this,a)}}function sTe(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pr(e)}function Pr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fb(e){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(e)}function Op(e){return hTe(e)||uTe(e)||rW(e)||cTe()}function cTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rW(e,t){if(e){if(typeof e=="string")return YP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YP(e,t)}}function uTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hTe(e){if(Array.isArray(e))return YP(e)}function YP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){ir(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ir(e,t,r){return t=nW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=fTe(e,"string");return Pp(t)==="symbol"?t:String(t)}function fTe(e,t){if(Pp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dTe={xAxis:["bottom","top"],yAxis:["left","right"]},iW={x:0,y:0},pTe=Number.isFinite?Number.isFinite:isFinite,mTe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},gTe=function(t,r,n,a){var c=r.find(function(w){return w&&w.index===n});if(c){if(t==="horizontal")return{x:c.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:c.coordinate};if(t==="centric"){var f=c.coordinate,o=a.radius;return st(st(st({},a),Bi(a.cx,a.cy,o,f)),{},{angle:f,radius:o})}var m=c.coordinate,_=a.angle;return st(st(st({},a),Bi(a.cx,a.cy,m,_)),{},{angle:_,radius:m})}return iW},SS=function(t,r,n){var a=r.graphicalItems,c=r.dataStartIndex,f=r.dataEndIndex,o=(a||[]).reduce(function(m,_){var w=_.props.data;return w&&w.length?[].concat(Op(m),Op(w)):m},[]);return o&&o.length>0?o:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:t&&t.length&&Lt(c)&&Lt(f)?t.slice(c,f+1):[]};function oW(e){return e==="number"?[0,"auto"]:void 0}var aW=function(t,r,n,a){var c=t.graphicalItems,f=t.tooltipAxis,o=SS(r,t);return n<0||!c||!c.length||n>=o.length?null:c.reduce(function(m,_){var w=_.props.hide;if(w)return m;var E=_.props.data,C=E===void 0?r:E,M;if(f.dataKey&&!f.allowDuplicatedCategory){var I=C===void 0?o:C;M=H1(I,f.dataKey,a)}else M=C&&C[n]||o[n];return M?[].concat(Op(m),[R8(_,M)]):m},[])},U3=function(t,r,n,a){var c=a||{x:t.chartX,y:t.chartY},f=mTe(c,n),o=t.orderedTooltipTicks,m=t.tooltipAxis,_=t.tooltipTicks,w=ixe(f,o,_,m);if(w>=0&&_){var E=_[w]&&_[w].value,C=aW(t,r,w,E),M=gTe(n,o,w,c);return{activeTooltipIndex:w,activeLabel:E,activePayload:C,activeCoordinate:M}}return null},yTe=function(t,r){var n=r.axes,a=r.graphicalItems,c=r.axisType,f=r.axisIdKey,o=r.stackGroups,m=r.dataStartIndex,_=r.dataEndIndex,w=t.layout,E=t.children,C=t.stackOffset,M=I8(w,c),I=n.reduce(function(D,$){var B,F=$.props,R=F.type,U=F.dataKey,H=F.allowDataOverflow,X=F.allowDuplicatedCategory,ee=F.scale,oe=F.ticks,ae=F.includeHidden,ge=$.props[f];if(D[ge])return D;var he=SS(t.data,{graphicalItems:a.filter(function(bt){return bt.props[f]===ge}),dataStartIndex:m,dataEndIndex:_}),ve=he.length,Ee,Re,Ne;HEe($.props.domain,H,R)&&(Ee=PP($.props.domain,null,H),M&&(R==="number"||ee!=="auto")&&(Ne=Iy(he,U,"category")));var Ve=oW(R);if(!Ee||Ee.length===0){var Ke,ke=(Ke=$.props.domain)!==null&&Ke!==void 0?Ke:Ve;if(U){if(Ee=Iy(he,U,R),R==="category"&&M){var Ge=Aie(Ee);X&&Ge?(Re=Ee,Ee=kb(0,ve)):X||(Ee=$z(ke,Ee,$).reduce(function(bt,Zt){return bt.indexOf(Zt)>=0?bt:[].concat(Op(bt),[Zt])},[]))}else if(R==="category")X?Ee=Ee.filter(function(bt){return bt!==""&&!cr(bt)}):Ee=$z(ke,Ee,$).reduce(function(bt,Zt){return bt.indexOf(Zt)>=0||Zt===""||cr(Zt)?bt:[].concat(Op(bt),[Zt])},[]);else if(R==="number"){var Ye=cxe(he,a.filter(function(bt){return bt.props[f]===ge&&(ae||!bt.props.hide)}),U,c,w);Ye&&(Ee=Ye)}M&&(R==="number"||ee!=="auto")&&(Ne=Iy(he,U,"category"))}else M?Ee=kb(0,ve):o&&o[ge]&&o[ge].hasStack&&R==="number"?Ee=C==="expand"?[0,1]:D8(o[ge].stackGroups,m,_):Ee=k8(he,a.filter(function(bt){return bt.props[f]===ge&&(ae||!bt.props.hide)}),R,w,!0);if(R==="number")Ee=XP(E,Ee,ge,c,oe),ke&&(Ee=PP(ke,Ee,H));else if(R==="category"&&ke){var _t=ke,Ot=Ee.every(function(bt){return _t.indexOf(bt)>=0});Ot&&(Ee=_t)}}return st(st({},D),{},ir({},ge,st(st({},$.props),{},{axisType:c,domain:Ee,categoricalDomain:Ne,duplicateDomain:Re,originalDomain:(B=$.props.domain)!==null&&B!==void 0?B:Ve,isCategorical:M,layout:w})))},{});return I},vTe=function(t,r){var n=r.graphicalItems,a=r.Axis,c=r.axisType,f=r.axisIdKey,o=r.stackGroups,m=r.dataStartIndex,_=r.dataEndIndex,w=t.layout,E=t.children,C=SS(t.data,{graphicalItems:n,dataStartIndex:m,dataEndIndex:_}),M=C.length,I=I8(w,c),D=-1,$=n.reduce(function(B,F){var R=F.props[f],U=oW("number");if(!B[R]){D++;var H;return I?H=kb(0,M):o&&o[R]&&o[R].hasStack?(H=D8(o[R].stackGroups,m,_),H=XP(E,H,R,c)):(H=PP(U,k8(C,n.filter(function(X){return X.props[f]===R&&!X.props.hide}),"number",w),a.defaultProps.allowDataOverflow),H=XP(E,H,R,c)),st(st({},B),{},ir({},R,st(st({axisType:c},a.defaultProps),{},{hide:!0,orientation:Ia(dTe,"".concat(c,".").concat(D%2),null),domain:H,originalDomain:U,isCategorical:I,layout:w})))}return B},{});return $},_Te=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,c=r.AxisComp,f=r.graphicalItems,o=r.stackGroups,m=r.dataStartIndex,_=r.dataEndIndex,w=t.children,E="".concat(a,"Id"),C=Da(w,c),M={};return C&&C.length?M=yTe(t,{axes:C,graphicalItems:f,axisType:a,axisIdKey:E,stackGroups:o,dataStartIndex:m,dataEndIndex:_}):f&&f.length&&(M=vTe(t,{Axis:c,graphicalItems:f,axisType:a,axisIdKey:E,stackGroups:o,dataStartIndex:m,dataEndIndex:_})),M},xTe=function(t){var r=Vc(t),n=Wc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:ck(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Ab(r,n)}},V3=function(t){var r,n,a=t.children,c=t.defaultShowTooltip,f=jl(a,$v),o=f&&f.props&&f.props.startIndex||0,m=(f==null||(r=f.props)===null||r===void 0?void 0:r.endIndex)!==void 0?f==null||(n=f.props)===null||n===void 0?void 0:n.endIndex:t.data&&t.data.length-1||0;return{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:m,activeTooltipIndex:-1,isTooltipActive:cr(c)?!1:c}},bTe=function(t){return!t||!t.length?!1:t.some(function(r){var n=_u(r&&r.type);return n&&n.indexOf("Bar")>=0})},W3=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wTe=function(t,r){var n=t.props,a=t.graphicalItems,c=t.xAxisMap,f=c===void 0?{}:c,o=t.yAxisMap,m=o===void 0?{}:o,_=n.width,w=n.height,E=n.children,C=n.margin||{},M=jl(E,$v),I=jl(E,ef),D=Object.keys(m).reduce(function(R,U){var H=m[U],X=H.orientation;return!H.mirror&&!H.hide?st(st({},R),{},ir({},X,R[X]+H.width)):R},{left:C.left||0,right:C.right||0}),$=Object.keys(f).reduce(function(R,U){var H=f[U],X=H.orientation;return!H.mirror&&!H.hide?st(st({},R),{},ir({},X,Ia(R,"".concat(X))+H.height)):R},{top:C.top||0,bottom:C.bottom||0}),B=st(st({},$),D),F=B.bottom;return M&&(B.bottom+=M.props.height||$v.defaultProps.height),I&&r&&(B=sxe(B,a,n,r)),st(st({brushBottom:F},B),{},{width:_-B.left-B.right,height:w-B.top-B.bottom})},sW=function(t){var r,n=t.chartName,a=t.GraphicalChild,c=t.defaultTooltipEventType,f=c===void 0?"axis":c,o=t.validateTooltipEventTypes,m=o===void 0?["axis"]:o,_=t.axisComponents,w=t.legendContent,E=t.formatAxisMap,C=t.defaultProps,M=function($,B){var F=B.graphicalItems,R=B.stackGroups,U=B.offset,H=B.updateId,X=B.dataStartIndex,ee=B.dataEndIndex,oe=$.barSize,ae=$.layout,ge=$.barGap,he=$.barCategoryGap,ve=$.maxBarSize,Ee=W3(ae),Re=Ee.numericAxisName,Ne=Ee.cateAxisName,Ve=bTe(F),Ke=Ve&&oxe({barSize:oe,stackGroups:R}),ke=[];return F.forEach(function(Ge,Ye){var _t=SS($.data,{dataStartIndex:X,dataEndIndex:ee},Ge),Ot=Ge.props,bt=Ot.dataKey,Zt=Ot.maxBarSize,Xt=Ge.props["".concat(Re,"Id")],kt=Ge.props["".concat(Ne,"Id")],Mt={},$r=_.reduce(function(Gn,xi){var Hn,bi=B["".concat(xi.axisType,"Map")],_r=Ge.props["".concat(xi.axisType,"Id")];bi&&bi[_r]||xi.axisType==="zAxis"||jEe(!1);var ui=bi[_r];return st(st({},Gn),{},(Hn={},ir(Hn,xi.axisType,ui),ir(Hn,"".concat(xi.axisType,"Ticks"),Wc(ui)),Hn))},Mt),St=$r[Ne],Dt=$r["".concat(Ne,"Ticks")],xt=R&&R[Xt]&&R[Xt].hasStack&&bxe(Ge,R[Xt].stackGroups),dt=_u(Ge.type).indexOf("Bar")>=0,er=Ab(St,Dt),Kt=[];if(dt){var Nt,vr,nn=cr(Zt)?ve:Zt,mn=(Nt=(vr=Ab(St,Dt,!0))!==null&&vr!==void 0?vr:nn)!==null&&Nt!==void 0?Nt:0;Kt=axe({barGap:ge,barCategoryGap:he,bandSize:mn!==er?mn:er,sizeList:Ke[kt],maxBarSize:nn}),mn!==er&&(Kt=Kt.map(function(Gn){return st(st({},Gn),{},{position:st(st({},Gn.position),{},{offset:Gn.position.offset-mn/2})})}))}var En=Ge&&Ge.type&&Ge.type.getComposedData;if(En){var gn;ke.push({props:st(st({},En(st(st({},$r),{},{displayedData:_t,props:$,dataKey:bt,item:Ge,bandSize:er,barPosition:Kt,offset:U,stackedData:xt,layout:ae,dataStartIndex:X,dataEndIndex:ee}))),{},(gn={key:Ge.key||"item-".concat(Ye)},ir(gn,Re,$r[Re]),ir(gn,Ne,$r[Ne]),ir(gn,"animationId",H),gn)),childIndex:Nie(Ge,$.children),item:Ge})}}),ke},I=function($,B){var F=$.props,R=$.dataStartIndex,U=$.dataEndIndex,H=$.updateId;if(!a$({props:F}))return null;var X=F.children,ee=F.layout,oe=F.stackOffset,ae=F.data,ge=F.reverseStackOrder,he=W3(ee),ve=he.numericAxisName,Ee=he.cateAxisName,Re=Da(X,a),Ne=vxe(ae,Re,"".concat(ve,"Id"),"".concat(Ee,"Id"),oe,ge),Ve=_.reduce(function(_t,Ot){var bt="".concat(Ot.axisType,"Map");return st(st({},_t),{},ir({},bt,_Te(F,st(st({},Ot),{},{graphicalItems:Re,stackGroups:Ot.axisType===ve&&Ne,dataStartIndex:R,dataEndIndex:U}))))},{}),Ke=wTe(st(st({},Ve),{},{props:F,graphicalItems:Re}),B==null?void 0:B.legendBBox);Object.keys(Ve).forEach(function(_t){Ve[_t]=E(F,Ve[_t],Ke,_t.replace("Map",""),n)});var ke=Ve["".concat(Ee,"Map")],Ge=xTe(ke),Ye=M(F,st(st({},Ve),{},{dataStartIndex:R,dataEndIndex:U,updateId:H,graphicalItems:Re,stackGroups:Ne,offset:Ke}));return st(st({formattedGraphicalItems:Ye,graphicalItems:Re,offset:Ke,stackGroups:Ne},Ge),Ve)};return r=function(D){oTe(B,D);var $=aTe(B);function B(F){var R;return nTe(this,B),R=$.call(this,F),ir(Pr(R),"accessibilityManager",new GEe),ir(Pr(R),"clearDefer",function(){R.cancelDefer&&(R.cancelDefer(),R.cancelDefer=null)}),ir(Pr(R),"handleLegendBBoxUpdate",function(U){if(U){var H=R.state,X=H.dataStartIndex,ee=H.dataEndIndex,oe=H.updateId;R.setState(st({legendBBox:U},I({props:R.props,dataStartIndex:X,dataEndIndex:ee,updateId:oe},st(st({},R.state),{},{legendBBox:U}))))}}),ir(Pr(R),"handleReceiveSyncEvent",function(U,H,X){var ee=R.props.syncId;ee===U&&H!==R.uniqueChartId&&(R.clearDefer(),R.cancelDefer=ZEe(R.applySyncEvent.bind(Pr(R),X)))}),ir(Pr(R),"handleBrushChange",function(U){var H=U.startIndex,X=U.endIndex;if(H!==R.state.dataStartIndex||X!==R.state.dataEndIndex){var ee=R.state.updateId;R.setState(function(){return st({dataStartIndex:H,dataEndIndex:X},I({props:R.props,dataStartIndex:H,dataEndIndex:X,updateId:ee},R.state))}),R.triggerSyncEvent({dataStartIndex:H,dataEndIndex:X})}}),ir(Pr(R),"handleMouseEnter",function(U){var H=R.props.onMouseEnter,X=R.getMouseInfo(U);if(X){var ee=st(st({},X),{},{isTooltipActive:!0});R.setState(ee),R.triggerSyncEvent(ee),dr(H)&&H(ee,U)}}),ir(Pr(R),"triggeredAfterMouseMove",function(U){var H=R.props.onMouseMove,X=R.getMouseInfo(U),ee=X?st(st({},X),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(ee),R.triggerSyncEvent(ee),dr(H)&&H(ee,U)}),ir(Pr(R),"handleItemMouseEnter",function(U){R.setState(function(){return{isTooltipActive:!0,activeItem:U,activePayload:U.tooltipPayload,activeCoordinate:U.tooltipPosition||{x:U.cx,y:U.cy}}})}),ir(Pr(R),"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),ir(Pr(R),"handleMouseMove",function(U){U&&dr(U.persist)&&U.persist(),R.triggeredAfterMouseMove(U)}),ir(Pr(R),"handleMouseLeave",function(U){var H=R.props.onMouseLeave,X={isTooltipActive:!1};R.setState(X),R.triggerSyncEvent(X),dr(H)&&H(X,U),R.cancelThrottledTriggerAfterMouseMove()}),ir(Pr(R),"handleOuterEvent",function(U){var H=$ie(U),X=Ia(R.props,"".concat(H));if(H&&dr(X)){var ee;/.*touch.*/i.test(H)?ee=R.getMouseInfo(U.changedTouches[0]):ee=R.getMouseInfo(U);var oe=X;oe(ee,U)}}),ir(Pr(R),"handleClick",function(U){var H=R.props.onClick,X=R.getMouseInfo(U);if(X){var ee=st(st({},X),{},{isTooltipActive:!0});R.setState(ee),R.triggerSyncEvent(ee),dr(H)&&H(ee,U)}}),ir(Pr(R),"handleMouseDown",function(U){var H=R.props.onMouseDown;if(dr(H)){var X=R.getMouseInfo(U);H(X,U)}}),ir(Pr(R),"handleMouseUp",function(U){var H=R.props.onMouseUp;if(dr(H)){var X=R.getMouseInfo(U);H(X,U)}}),ir(Pr(R),"handleTouchMove",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&R.handleMouseMove(U.changedTouches[0])}),ir(Pr(R),"handleTouchStart",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&R.handleMouseDown(U.changedTouches[0])}),ir(Pr(R),"handleTouchEnd",function(U){U.changedTouches!=null&&U.changedTouches.length>0&&R.handleMouseUp(U.changedTouches[0])}),ir(Pr(R),"verticalCoordinatesGenerator",function(U,H){var X=U.xAxis,ee=U.width,oe=U.height,ae=U.offset;return kz(UP(st(st(st({},Dy.defaultProps),X),{},{ticks:Wc(X,!0),viewBox:{x:0,y:0,width:ee,height:oe}})),ae.left,ae.left+ae.width,H)}),ir(Pr(R),"horizontalCoordinatesGenerator",function(U,H){var X=U.yAxis,ee=U.width,oe=U.height,ae=U.offset;return kz(UP(st(st(st({},Dy.defaultProps),X),{},{ticks:Wc(X,!0),viewBox:{x:0,y:0,width:ee,height:oe}})),ae.top,ae.top+ae.height,H)}),ir(Pr(R),"axesTicksGenerator",function(U){return Wc(U,!0)}),ir(Pr(R),"renderCursor",function(U){var H=R.state,X=H.isTooltipActive,ee=H.activeCoordinate,oe=H.activePayload,ae=H.offset,ge=H.activeTooltipIndex,he=H.tooltipAxisBandSize,ve=R.getTooltipEventType();if(!U||!U.props.cursor||!X||!ee||n!=="ScatterChart"&&ve!=="axis")return null;var Ee=R.props.layout,Re,Ne=DP;if(n==="ScatterChart")Re=ee,Ne=U1e;else if(n==="BarChart")Re=KEe(Ee,ee,ae,he),Ne=Rk;else if(Ee==="radial"){var Ve=Q8(ee),Ke=Ve.cx,ke=Ve.cy,Ge=Ve.radius,Ye=Ve.startAngle,_t=Ve.endAngle;Re={cx:Ke,cy:ke,startAngle:Ye,endAngle:_t,innerRadius:Ge,outerRadius:Ge},Ne=$8}else Re={points:XEe(Ee,ee,ae)},Ne=DP;var Ot=U.key||"_recharts-cursor",bt=st(st(st(st({stroke:"#ccc",pointerEvents:"none"},ae),Re),Rr(U.props.cursor)),{},{payload:oe,payloadIndex:ge,key:Ot,className:"recharts-tooltip-cursor"});return Y.isValidElement(U.props.cursor)?Y.cloneElement(U.props.cursor,bt):Y.createElement(Ne,bt)}),ir(Pr(R),"renderPolarAxis",function(U,H,X){var ee=Ia(U,"type.axisType"),oe=Ia(R.state,"".concat(ee,"Map")),ae=oe&&oe[U.props["".concat(ee,"Id")]];return Y.cloneElement(U,st(st({},ae),{},{className:ee,key:U.key||"".concat(H,"-").concat(X),ticks:Wc(ae,!0)}))}),ir(Pr(R),"renderXAxis",function(U,H,X){var ee=R.state.xAxisMap,oe=ee[U.props.xAxisId];return R.renderAxis(oe,U,H,X)}),ir(Pr(R),"renderYAxis",function(U,H,X){var ee=R.state.yAxisMap,oe=ee[U.props.yAxisId];return R.renderAxis(oe,U,H,X)}),ir(Pr(R),"renderGrid",function(U){var H=R.state,X=H.xAxisMap,ee=H.yAxisMap,oe=H.offset,ae=R.props,ge=ae.width,he=ae.height,ve=Vc(X),Ee=REe(ee,function(Ve){return V8(Ve.domain,pTe)}),Re=Ee||Vc(ee),Ne=U.props||{};return Y.cloneElement(U,{key:U.key||"grid",x:Lt(Ne.x)?Ne.x:oe.left,y:Lt(Ne.y)?Ne.y:oe.top,width:Lt(Ne.width)?Ne.width:oe.width,height:Lt(Ne.height)?Ne.height:oe.height,xAxis:ve,yAxis:Re,offset:oe,chartWidth:ge,chartHeight:he,verticalCoordinatesGenerator:Ne.verticalCoordinatesGenerator||R.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:Ne.horizontalCoordinatesGenerator||R.horizontalCoordinatesGenerator})}),ir(Pr(R),"renderPolarGrid",function(U){var H=U.props,X=H.radialLines,ee=H.polarAngles,oe=H.polarRadius,ae=R.state,ge=ae.radiusAxisMap,he=ae.angleAxisMap,ve=Vc(ge),Ee=Vc(he),Re=Ee.cx,Ne=Ee.cy,Ve=Ee.innerRadius,Ke=Ee.outerRadius;return Y.cloneElement(U,{polarAngles:zi(ee)?ee:Wc(Ee,!0).map(function(ke){return ke.coordinate}),polarRadius:zi(oe)?oe:Wc(ve,!0).map(function(ke){return ke.coordinate}),cx:Re,cy:Ne,innerRadius:Ve,outerRadius:Ke,key:U.key||"polar-grid",radialLines:X})}),ir(Pr(R),"renderLegend",function(){var U=R.state.formattedGraphicalItems,H=R.props,X=H.children,ee=H.width,oe=H.height,ae=R.props.margin||{},ge=ee-(ae.left||0)-(ae.right||0),he=O8({children:X,formattedGraphicalItems:U,legendWidth:ge,legendContent:w});if(!he)return null;var ve=he.item,Ee=z3(he,YEe);return Y.cloneElement(ve,st(st({},Ee),{},{chartWidth:ee,chartHeight:oe,margin:ae,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),ir(Pr(R),"renderTooltip",function(){var U=R.props.children,H=jl(U,ou);if(!H)return null;var X=R.state,ee=X.isTooltipActive,oe=X.activeCoordinate,ae=X.activePayload,ge=X.activeLabel,he=X.offset;return Y.cloneElement(H,{viewBox:st(st({},he),{},{x:he.left,y:he.top}),active:ee,label:ge,payload:ee?ae:[],coordinate:oe})}),ir(Pr(R),"renderBrush",function(U){var H=R.props,X=H.margin,ee=H.data,oe=R.state,ae=oe.offset,ge=oe.dataStartIndex,he=oe.dataEndIndex,ve=oe.updateId;return Y.cloneElement(U,{key:U.key||"_recharts-brush",onChange:Ix(R.handleBrushChange,null,U.props.onChange),data:ee,x:Lt(U.props.x)?U.props.x:ae.left,y:Lt(U.props.y)?U.props.y:ae.top+ae.height+ae.brushBottom-(X.bottom||0),width:Lt(U.props.width)?U.props.width:ae.width,startIndex:ge,endIndex:he,updateId:"brush-".concat(ve)})}),ir(Pr(R),"renderReferenceElement",function(U,H,X){if(!U)return null;var ee=Pr(R),oe=ee.clipPathId,ae=R.state,ge=ae.xAxisMap,he=ae.yAxisMap,ve=ae.offset,Ee=U.props,Re=Ee.xAxisId,Ne=Ee.yAxisId;return Y.cloneElement(U,{key:U.key||"".concat(H,"-").concat(X),xAxis:ge[Re],yAxis:he[Ne],viewBox:{x:ve.left,y:ve.top,width:ve.width,height:ve.height},clipPathId:oe})}),ir(Pr(R),"renderActivePoints",function(U){var H=U.item,X=U.activePoint,ee=U.basePoint,oe=U.childIndex,ae=U.isRange,ge=[],he=H.props.key,ve=H.item.props,Ee=ve.activeDot,Re=ve.dataKey,Ne=st(st({index:oe,dataKey:Re,cx:X.x,cy:X.y,r:4,fill:Dk(H.item),strokeWidth:2,stroke:"#fff",payload:X.payload,value:X.value,key:"".concat(he,"-activePoint-").concat(oe)},Rr(Ee)),Z1(Ee));return ge.push(B.renderActiveDot(Ee,Ne)),ee?ge.push(B.renderActiveDot(Ee,st(st({},Ne),{},{cx:ee.x,cy:ee.y,key:"".concat(he,"-basePoint-").concat(oe)}))):ae&&ge.push(null),ge}),ir(Pr(R),"renderGraphicChild",function(U,H,X){var ee=R.filterFormatItem(U,H,X);if(!ee)return null;var oe=R.getTooltipEventType(),ae=R.state,ge=ae.isTooltipActive,he=ae.tooltipAxis,ve=ae.activeTooltipIndex,Ee=ae.activeLabel,Re=R.props.children,Ne=jl(Re,ou),Ve=ee.props,Ke=Ve.points,ke=Ve.isRange,Ge=Ve.baseLine,Ye=ee.item.props,_t=Ye.activeDot,Ot=Ye.hide,bt=Ye.activeBar,Zt=Ye.activeShape,Xt=!!(!Ot&&ge&&Ne&&(_t||bt||Zt)),kt={};oe!=="axis"&&Ne&&Ne.props.trigger==="click"?kt={onClick:Ix(R.handleItemMouseEnter,null,U.props.onCLick)}:oe!=="axis"&&(kt={onMouseLeave:Ix(R.handleItemMouseLeave,null,U.props.onMouseLeave),onMouseEnter:Ix(R.handleItemMouseEnter,null,U.props.onMouseEnter)});var Mt=Y.cloneElement(U,st(st({},ee.props),kt));function $r(gn){return typeof he.dataKey=="function"?he.dataKey(gn.payload):null}if(Xt)if(ve>=0){var St,Dt;if(he.dataKey&&!he.allowDuplicatedCategory){var xt=typeof he.dataKey=="function"?$r:"payload.".concat(he.dataKey.toString());St=H1(Ke,xt,Ee),Dt=ke&&Ge&&H1(Ge,xt,Ee)}else St=Ke==null?void 0:Ke[ve],Dt=ke&&Ge&&Ge[ve];if(Zt||bt){var dt=U.props.activeIndex!==void 0?U.props.activeIndex:ve;return[Y.cloneElement(U,st(st(st({},ee.props),kt),{},{activeIndex:dt})),null,null]}if(!cr(St))return[Mt].concat(Op(R.renderActivePoints({item:ee,activePoint:St,basePoint:Dt,childIndex:ve,isRange:ke})))}else{var er,Kt=(er=R.getItemByXY(R.state.activeCoordinate))!==null&&er!==void 0?er:{graphicalItem:Mt},Nt=Kt.graphicalItem,vr=Nt.item,nn=vr===void 0?U:vr,mn=Nt.childIndex,En=st(st(st({},ee.props),kt),{},{activeIndex:mn});return[Y.cloneElement(nn,En),null,null]}return ke?[Mt,null,null]:[Mt,null]}),ir(Pr(R),"renderCustomized",function(U,H,X){return Y.cloneElement(U,st(st({key:"recharts-customized-".concat(X)},R.props),R.state))}),R.uniqueChartId=cr(F.id)?s_("recharts"):F.id,R.clipPathId="".concat(R.uniqueChartId,"-clip"),F.throttleDelay&&(R.triggeredAfterMouseMove=OV(R.triggeredAfterMouseMove,F.throttleDelay)),R.state={},R}return iTe(B,[{key:"componentDidMount",value:function(){var R,U;cr(this.props.syncId)||this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(U=this.props.margin.top)!==null&&U!==void 0?U:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.handleMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(R,U){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==U.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var H,X;this.accessibilityManager.setDetails({offset:{left:(H=this.props.margin.left)!==null&&H!==void 0?H:0,top:(X=this.props.margin.top)!==null&&X!==void 0?X:0}})}return null}},{key:"componentDidUpdate",value:function(R){cr(R.syncId)&&!cr(this.props.syncId)&&this.addListener(),!cr(R.syncId)&&cr(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDefer(),cr(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){typeof this.triggeredAfterMouseMove.cancel=="function"&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=jl(this.props.children,ou);if(R&&N8(R.props.shared)){var U=R.props.shared?"axis":"item";return m.indexOf(U)>=0?U:f}return f}},{key:"getMouseInfo",value:function(R){var U;if(!this.container)return null;var H=Mge(this.container),X=kge(R,H),ee=this.container,oe=ee==null||(U=ee.getBoundingClientRect())===null||U===void 0?void 0:U.width,ae=ee.offsetWidth,ge=oe/ae||1,he=this.inRange(X.chartX,X.chartY,ge);if(!he)return null;var ve=this.state,Ee=ve.xAxisMap,Re=ve.yAxisMap,Ne=this.getTooltipEventType();if(Ne!=="axis"&&Ee&&Re){var Ve=Vc(Ee).scale,Ke=Vc(Re).scale,ke=Ve&&Ve.invert?Ve.invert(X.chartX):null,Ge=Ke&&Ke.invert?Ke.invert(X.chartY):null;return st(st({},X),{},{xValue:ke,yValue:Ge})}var Ye=U3(this.state,this.props.data,this.props.layout,he);return Ye?st(st({},X),Ye):null}},{key:"inRange",value:function(R,U){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,X=this.props.layout,ee=R/H,oe=U/H;if(X==="horizontal"||X==="vertical"){var ae=this.state.offset,ge=ee>=ae.left&&ee<=ae.left+ae.width&&oe>=ae.top&&oe<=ae.top+ae.height;return ge?{x:ee,y:oe}:null}var he=this.state,ve=he.angleAxisMap,Ee=he.radiusAxisMap;if(ve&&Ee){var Re=Vc(ve);return Bz({x:ee,y:oe},Re)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,U=this.getTooltipEventType(),H=jl(R,ou),X={};H&&U==="axis"&&(H.props.trigger==="click"?X={onClick:this.handleClick}:X={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var ee=Z1(this.props,this.handleOuterEvent);return st(st({},ee),X)}},{key:"addListener",value:function(){Go.on(tA,this.handleReceiveSyncEvent),Go.setMaxListeners&&Go._maxListeners&&Go.setMaxListeners(Go._maxListeners+1)}},{key:"removeListener",value:function(){Go.removeListener(tA,this.handleReceiveSyncEvent),Go.setMaxListeners&&Go._maxListeners&&Go.setMaxListeners(Go._maxListeners-1)}},{key:"triggerSyncEvent",value:function(R){var U=this.props.syncId;cr(U)||Go.emit(tA,U,this.uniqueChartId,R)}},{key:"applySyncEvent",value:function(R){var U=this.props,H=U.layout,X=U.syncMethod,ee=this.state.updateId,oe=R.dataStartIndex,ae=R.dataEndIndex;if(!cr(R.dataStartIndex)||!cr(R.dataEndIndex))this.setState(st({dataStartIndex:oe,dataEndIndex:ae},I({props:this.props,dataStartIndex:oe,dataEndIndex:ae,updateId:ee},this.state)));else if(cr(R.activeTooltipIndex))this.setState(R);else{var ge=R.chartX,he=R.chartY,ve=R.activeTooltipIndex,Ee=this.state,Re=Ee.offset,Ne=Ee.tooltipTicks;if(!Re)return;if(typeof X=="function")ve=X(Ne,R);else if(X==="value"){ve=-1;for(var Ve=0;Ve<Ne.length;Ve++)if(Ne[Ve].value===R.activeLabel){ve=Ve;break}}var Ke=st(st({},Re),{},{x:Re.left,y:Re.top}),ke=Math.min(ge,Ke.x+Ke.width),Ge=Math.min(he,Ke.y+Ke.height),Ye=Ne[ve]&&Ne[ve].value,_t=aW(this.state,this.props.data,ve),Ot=Ne[ve]?{x:H==="horizontal"?Ne[ve].coordinate:ke,y:H==="horizontal"?Ge:Ne[ve].coordinate}:iW;this.setState(st(st({},R),{},{activeLabel:Ye,activeCoordinate:Ot,activePayload:_t,activeTooltipIndex:ve}))}}},{key:"filterFormatItem",value:function(R,U,H){for(var X=this.state.formattedGraphicalItems,ee=0,oe=X.length;ee<oe;ee++){var ae=X[ee];if(ae.item===R||ae.props.key===R.key||U===_u(ae.item.type)&&H===ae.childIndex)return ae}return null}},{key:"renderAxis",value:function(R,U,H,X){var ee=this.props,oe=ee.width,ae=ee.height;return Se.createElement(Dy,Vd({},R,{className:Yt("recharts-".concat(R.axisType," ").concat(R.axisType),R.className),key:U.key||"".concat(H,"-").concat(X),viewBox:{x:0,y:0,width:oe,height:ae},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var R=this.clipPathId,U=this.state.offset,H=U.left,X=U.top,ee=U.height,oe=U.width;return Se.createElement("defs",null,Se.createElement("clipPath",{id:R},Se.createElement("rect",{x:H,y:X,height:ee,width:oe})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(U,H){var X=N3(H,2),ee=X[0],oe=X[1];return st(st({},U),{},ir({},ee,oe.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(U,H){var X=N3(H,2),ee=X[0],oe=X[1];return st(st({},U),{},ir({},ee,oe.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var U;return(U=this.state.xAxisMap)===null||U===void 0||(U=U[R])===null||U===void 0?void 0:U.scale}},{key:"getYScaleByAxisId",value:function(R){var U;return(U=this.state.yAxisMap)===null||U===void 0||(U=U[R])===null||U===void 0?void 0:U.scale}},{key:"getItemByXY",value:function(R){var U=this.state,H=U.formattedGraphicalItems,X=U.activeItem;if(H&&H.length)for(var ee=0,oe=H.length;ee<oe;ee++){var ae=H[ee],ge=ae.props,he=ae.item,ve=_u(he.type);if(ve==="Bar"){var Ee=(ge.data||[]).find(function(Ke){return I1e(R,Ke)});if(Ee)return{graphicalItem:ae,payload:Ee}}else if(ve==="RadialBar"){var Re=(ge.data||[]).find(function(Ke){return Bz(R,Ke)});if(Re)return{graphicalItem:ae,payload:Re}}else if(xS(ae)||bS(ae)||Lv(ae)){var Ne=Dbe({graphicalItem:ae,activeTooltipItem:X,itemData:he.props.data}),Ve=he.props.activeIndex===void 0?Ne:he.props.activeIndex;return{graphicalItem:st(st({},ae),{},{childIndex:Ve}),payload:Lv(ae)?he.props.data[Ne]:ae.props.data[Ne]}}}return null}},{key:"render",value:function(){var R=this;if(!a$(this))return null;var U=this.props,H=U.children,X=U.className,ee=U.width,oe=U.height,ae=U.style,ge=U.compact,he=U.title,ve=U.desc,Ee=z3(U,JEe),Re=Rr(Ee),Ne={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(ge)return Se.createElement(NC,Vd({},Re,{width:ee,height:oe,title:he,desc:ve}),this.renderClipPath(),l$(H,Ne));if(this.props.accessibilityLayer){var Ve,Ke;Re.tabIndex=(Ve=0)!==null&&Ve!==void 0?Ve:this.props.tabIndex,Re.role=(Ke="img")!==null&&Ke!==void 0?Ke:this.props.role,Re.onKeyDown=function(Ge){R.accessibilityManager.keyboardEvent(Ge)},Re.onFocus=function(){R.accessibilityManager.focus()}}var ke=this.parseEventsOfWrapper();return Se.createElement("div",Vd({className:Yt("recharts-wrapper",X),style:st({position:"relative",cursor:"default",width:ee,height:oe},ae)},ke,{ref:function(Ye){R.container=Ye},role:"region"}),Se.createElement(NC,Vd({},Re,{width:ee,height:oe,title:he,desc:ve}),this.renderClipPath(),l$(H,Ne)),this.renderLegend(),this.renderTooltip())}}]),B}(Y.Component),ir(r,"displayName",n),ir(r,"defaultProps",st({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},C)),ir(r,"getDerivedStateFromProps",function(D,$){var B=D.data,F=D.children,R=D.width,U=D.height,H=D.layout,X=D.stackOffset,ee=D.margin;if(cr($.updateId)){var oe=V3(D);return st(st(st({},oe),{},{updateId:0},I(st(st({props:D},oe),{},{updateId:0}),$)),{},{prevData:B,prevWidth:R,prevHeight:U,prevLayout:H,prevStackOffset:X,prevMargin:ee,prevChildren:F})}if(B!==$.prevData||R!==$.prevWidth||U!==$.prevHeight||H!==$.prevLayout||X!==$.prevStackOffset||!Jd(ee,$.prevMargin)){var ae=V3(D),ge={chartX:$.chartX,chartY:$.chartY,isTooltipActive:$.isTooltipActive},he=st(st({},U3($,B,H)),{},{updateId:$.updateId+1}),ve=st(st(st({},ae),ge),he);return st(st(st({},ve),I(st({props:D},ve),$)),{},{prevData:B,prevWidth:R,prevHeight:U,prevLayout:H,prevStackOffset:X,prevMargin:ee,prevChildren:F})}if(!S6(F,$.prevChildren)){var Ee=!cr(B),Re=Ee?$.updateId:$.updateId+1;return st(st({updateId:Re},I(st(st({props:D},$),{},{updateId:Re}),$)),{},{prevChildren:F})}return null}),ir(r,"renderActiveDot",function(D,$){var B;return Y.isValidElement(D)?B=Y.cloneElement(D,$):dr(D)?B=D($):B=Se.createElement(Lk,$),Se.createElement(Kn,{className:"recharts-active-dot",key:$.key},B)}),r},STe=sW({chartName:"LineChart",GraphicalChild:g_,axisComponents:[{axisType:"xAxis",AxisComp:Ap},{axisType:"yAxis",AxisComp:Cp}],formatAxisMap:G8}),ETe=sW({chartName:"BarChart",GraphicalChild:rm,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ap},{axisType:"yAxis",AxisComp:Cp}],formatAxisMap:G8});function TTe(){const[e,t]=Y.useState(null),[r,n]=Y.useState(null),[a,c]=Y.useState(null),[f,o]=Y.useState([]),[m,_]=Y.useState([]),[w,E]=Y.useState([]);Y.useEffect(()=>{const M=async()=>{try{const R=await vd.get("/totalUsers");t(R.data)}catch(R){console.error("Error fetching total users:",R)}},I=async()=>{try{const R=await vd.get("/totalDrivers");n(R.data)}catch(R){console.error("Error fetching total drivers:",R)}},D=async()=>{try{const R=await vd.get("/totalTrips");c(R.data)}catch(R){console.error("Error fetching total drivers:",R)}},$=async()=>{try{const R=await vd.get("/calculateTotalEarnings");console.log(R.data);const U=R.data.map(H=>H.total);o(U),console.log(f,"income")}catch(R){console.error("Error fetching total drivers:",R)}},B=async()=>{try{const R=await vd.get("/monthlyIncome");console.log(R.data,"monthlyincome");const U=Array.from({length:12},(H,X)=>({_id:{month:X+1},totalIncome:0}));R.data.forEach(H=>{const X=H._id.month-1;U[X]=H}),_(U)}catch(R){console.error("Error fetching monthly income:",R)}};async function F(){try{const R=await vd.get("/monthlyTrips");E(R.data.monthlyTrips)}catch(R){console.error("Error fetching monthly trips data:",R)}}F(),M(),I(),D(),$(),B()},[]);const C=w.map(M=>({month:new Date(M.year,M.month-1,1).toLocaleDateString("en-US",{month:"short"}),count:M.totalTrips}));return j.jsxs("main",{className:"main-container",children:[j.jsx("div",{className:"main-title",children:j.jsx("h3",{children:"DASHBOARD"})}),j.jsxs("div",{className:"main-cards",children:[j.jsxs("div",{className:"card",children:[j.jsx("div",{className:"card-inner",children:j.jsx("h3",{children:"Users"})}),j.jsx("h1",{children:e})]}),j.jsxs("div",{className:"card",children:[j.jsx("div",{className:"card-inner",children:j.jsx("h3",{children:"Drivers"})}),j.jsx("h1",{children:r})]}),j.jsxs("div",{className:"card",children:[j.jsx("div",{className:"card-inner",children:j.jsx("h3",{children:"Total Trips"})}),j.jsx("h1",{children:a})]}),j.jsxs("div",{className:"card",children:[j.jsx("div",{className:"card-inner",children:j.jsx("h3",{children:"Total Earnings"})}),j.jsxs("h1",{children:["₹",f]})]})]}),j.jsxs("div",{className:"charts",children:[j.jsx(SN,{width:"100%",height:300,children:j.jsxs(ETe,{data:m,margin:{top:5,right:30,left:20,bottom:5},children:[j.jsx(zb,{strokeDasharray:"3 3"}),j.jsx(Ap,{dataKey:"_id.month",tickFormatter:M=>new Date(0,M-1,1).toLocaleDateString("en-US",{month:"short"})}),j.jsx(Cp,{}),j.jsx(ou,{}),j.jsx(ef,{}),j.jsx(rm,{dataKey:"totalIncome",fill:"#82ca9d",name:"Monthly Earnings"})]})}),j.jsx(SN,{width:"100%",height:300,children:j.jsxs(STe,{data:C,margin:{top:5,right:30,left:20,bottom:5},children:[j.jsx(zb,{strokeDasharray:"3 3"}),j.jsx(Ap,{dataKey:"month"}),j.jsx(Cp,{}),j.jsx(ou,{}),j.jsx(ef,{}),j.jsx(g_,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8},name:"Monthly Trips"})]})})]})]})}const ATe=()=>j.jsxs("div",{children:[j.jsx(n_,{}),j.jsx("div",{className:"container",children:j.jsx(TTe,{})})]});const CTe="/assets/1st section-7e4e65e8.png",PTe="/assets/seond-641204e8.jpg",OTe="/assets/3rd-09d1251a.avif";var Lx;function q3(e){if((!Lx&&Lx!==0||e)&&Vp){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Lx=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Lx}const MTe=nl("modal-body"),lW=Y.forwardRef(({bsPrefix:e,className:t,contentClassName:r,centered:n,size:a,fullscreen:c,children:f,scrollable:o,...m},_)=>{e=ci(e,"modal");const w=`${e}-dialog`,E=typeof c=="string"?`${e}-fullscreen-${c}`:`${e}-fullscreen`;return j.jsx("div",{...m,ref:_,className:Yt(w,t,a&&`${e}-${a}`,n&&`${w}-centered`,o&&`${w}-scrollable`,c&&E),children:j.jsx("div",{className:Yt(`${e}-content`,r),children:f})})});lW.displayName="ModalDialog";const cW=lW,kTe=nl("modal-footer"),uW=Y.forwardRef(({bsPrefix:e,className:t,closeLabel:r="Close",closeButton:n=!1,...a},c)=>(e=ci(e,"modal-header"),j.jsx(i6,{ref:c,...a,className:Yt(t,e),closeLabel:r,closeButton:n})));uW.displayName="ModalHeader";const ITe=uW,DTe=a6("h4"),RTe=nl("modal-title",{Component:DTe});function LTe(e){return j.jsx(jM,{...e,timeout:null})}function jTe(e){return j.jsx(jM,{...e,timeout:null})}const hW=Y.forwardRef(({bsPrefix:e,className:t,style:r,dialogClassName:n,contentClassName:a,children:c,dialogAs:f=cW,"aria-labelledby":o,"aria-describedby":m,"aria-label":_,show:w=!1,animation:E=!0,backdrop:C=!0,keyboard:M=!0,onEscapeKeyDown:I,onShow:D,onHide:$,container:B,autoFocus:F=!0,enforceFocus:R=!0,restoreFocus:U=!0,restoreFocusOptions:H,onEntered:X,onExit:ee,onExiting:oe,onEnter:ae,onEntering:ge,onExited:he,backdropClassName:ve,manager:Ee,...Re},Ne)=>{const[Ve,Ke]=Y.useState({}),[ke,Ge]=Y.useState(!1),Ye=Y.useRef(!1),_t=Y.useRef(!1),Ot=Y.useRef(null),[bt,Zt]=LU(),Xt=uf(Ne,Zt),kt=qn($),Mt=TU();e=ci(e,"modal");const $r=Y.useMemo(()=>({onHide:kt}),[kt]);function St(){return Ee||l6({isRTL:Mt})}function Dt(_r){if(!Vp)return;const ui=St().getScrollbarWidth()>0,Yn=_r.scrollHeight>r_(_r).documentElement.clientHeight;Ke({paddingRight:ui&&!Yn?q3():void 0,paddingLeft:!ui&&Yn?q3():void 0})}const xt=qn(()=>{bt&&Dt(bt.dialog)});JU(()=>{DC(window,"resize",xt),Ot.current==null||Ot.current()});const dt=()=>{Ye.current=!0},er=_r=>{Ye.current&&bt&&_r.target===bt.dialog&&(_t.current=!0),Ye.current=!1},Kt=()=>{Ge(!0),Ot.current=ZU(bt.dialog,()=>{Ge(!1)})},Nt=_r=>{_r.target===_r.currentTarget&&Kt()},vr=_r=>{if(C==="static"){Nt(_r);return}if(_t.current||_r.target!==_r.currentTarget){_t.current=!1;return}$==null||$()},nn=_r=>{M?I==null||I(_r):(_r.preventDefault(),C==="static"&&Kt())},mn=(_r,ui)=>{_r&&Dt(_r),ae==null||ae(_r,ui)},En=_r=>{Ot.current==null||Ot.current(),ee==null||ee(_r)},gn=(_r,ui)=>{ge==null||ge(_r,ui),IM(window,"resize",xt)},Gn=_r=>{_r&&(_r.style.display=""),he==null||he(_r),DC(window,"resize",xt)},xi=Y.useCallback(_r=>j.jsx("div",{..._r,className:Yt(`${e}-backdrop`,ve,!E&&"show")}),[E,ve,e]),Hn={...r,...Ve};Hn.display="block";const bi=_r=>j.jsx("div",{role:"dialog",..._r,style:Hn,className:Yt(t,e,ke&&`${e}-static`,!E&&"show"),onClick:C?vr:void 0,onMouseUp:er,"aria-label":_,"aria-labelledby":o,"aria-describedby":m,children:j.jsx(f,{...Re,onMouseDown:dt,className:n,contentClassName:a,children:c})});return j.jsx($M.Provider,{value:$r,children:j.jsx(t6,{show:w,ref:Xt,backdrop:C,container:B,keyboard:!0,autoFocus:F,enforceFocus:R,restoreFocus:U,restoreFocusOptions:H,onEscapeKeyDown:nn,onShow:D,onHide:$,onEnter:mn,onEntering:gn,onEntered:X,onExit:En,onExiting:oe,onExited:Gn,manager:St(),transition:E?LTe:void 0,backdropTransition:E?jTe:void 0,renderBackdrop:xi,renderDialog:bi})})});hW.displayName="Modal";const Aa=Object.assign(hW,{Body:MTe,Header:ITe,Title:RTe,Footer:kTe,Dialog:cW,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),G3=Bl("http://localhost:3003"),H3=[{name:"Thripunithara",lat:9.943436,lon:76.345907},{name:"Vytila",lat:9.96571,lon:76.317854},{name:"Elamkulam",lat:9.967908,lon:76.301361},{name:"Kaloor",lat:9.99709,lon:76.302818},{name:"Kalamasserry",lat:10.01455,lon:76.293159},{name:"Edapally",lat:10.023429,lon:76.309524}],Z3=[{name:"Thripunithara",lat:9.943436,lon:76.345907},{name:"Vytila",lat:9.96571,lon:76.317854},{name:"Elamkulam",lat:9.967908,lon:76.301361},{name:"Kaloor",lat:9.99709,lon:76.302818},{name:"Kalamasserry",lat:10.01455,lon:76.293159},{name:"Edapally",lat:10.023429,lon:76.309524}],fW=()=>{var I;const e=Lo(),t=tM(xM);console.log(t._id);const r=(I=t==null?void 0:t.user)==null?void 0:I._id;console.log(r);const[n,a]=Y.useState(""),[c,f]=Y.useState(""),[o,m]=Y.useState(!1),_=D=>{a(D.target.value)},w=D=>{f(D.target.value)},C={"Content-Type":"application/json",token:localStorage.getItem("token")},M=async D=>{D.preventDefault();const $=H3.find(U=>U.name===n),B=Z3.find(U=>U.name===c);if(!$||!B){console.error("Invalid pickup or destination location.");return}const F={pickupLocation:{name:n,lat:$.lat,lon:$.lon},destinationLocation:{name:c,lat:B.lat,lon:B.lon}};let R=!1;m(!0),G3.on("acceptedride",async U=>{var H,X,ee,oe;if(console.log(U,"accepted driver"),m(!1),!R){R=!0;const ae=U.fare,ge=U.driverdetails._id;console.log(ge,"rdiverId");const he={DriverName:((H=U.driverdetails.driver)==null?void 0:H.Drivername)||U.driverdetails.Drivername,DriverPhone:((X=U.driverdetails.driver)==null?void 0:X.phone)||U.driverdetails.phone,VehicleModel:((ee=U.driverdetails.driver)==null?void 0:ee.VehicleModel)||U.driverdetails.VehicleModel,vehiclePhoto:((oe=U.driverdetails.driver)==null?void 0:oe.vehiclePhoto)||U.driverdetails.vehiclePhoto};try{const Ee=(await vi.post(`http://localhost:3003/api/users/createRide/${r}`,{rideData:F,fare:ae,driver:he,DriverId:ge},{headers:C})).data.trip._id;e("/driverdetails",{state:{...U,tripId:Ee}})}catch(ve){Qt.error("Axios POST request error"),console.error("Axios POST request error:",ve)}}});try{G3.emit("createdride",{trip:F,userDetails:t})}catch(U){Qt.error("Socket emit error"),console.error("Socket emit error:",U)}};return j.jsxs("div",{children:[j.jsx(Ro,{}),j.jsxs("div",{className:"imageContainer",children:[j.jsx("img",{className:"first",src:CTe,alt:""}),j.jsx("div",{className:"formContainer",children:j.jsxs("form",{className:"userhomeform",onSubmit:M,children:[j.jsx("h1",{className:"formheading",children:"Request a Ride now"}),j.jsxs("select",{className:"options",onChange:_,value:n,children:[j.jsx("option",{value:"",children:"Select pickup location"}),H3.map((D,$)=>j.jsx("option",{value:D.name,children:D.name},$))]}),j.jsx("br",{}),j.jsx("br",{}),j.jsxs("select",{className:"options",onChange:w,value:c,children:[j.jsx("option",{value:"",children:"Select destination"}),Z3.map((D,$)=>j.jsx("option",{value:D.name,children:D.name},$))]}),j.jsx("br",{}),j.jsx("input",{className:"button1",type:"submit",value:"Submit"})]})})]}),j.jsxs("div",{className:"secondimagecontainer",children:[j.jsx("img",{className:"second",src:PTe,alt:""}),j.jsx("h1",{className:"safely",children:"Safely Unleashed..."}),j.jsx("div",{className:"secondparacontainer",children:j.jsx("p",{className:"secondpara",children:"VeloCity, safety isn't just a feature; it's ingrained in every aspect of our service. A safe biking experience that you can trust every time you ride with us. Your journey is important to us, and we are committed to helping you reach your destination safely and with confidence."})})]}),j.jsxs("div",{className:"thirdimagecontainer",children:[j.jsxs("h1",{className:"thirdpara",children:["Navigating the Urban Pulse: Swift and Secure City Travel with VeloCity...",j.jsx("p",{className:"thirdparagra",children:"Discover the thrill of city exploration with VeloCity – where speed meets safety. Zip through urban landscapes faster than ever before while enjoying the peace of mind that comes with our top-tier safety features. Your journey is our priority, ensuring you reach your destination swiftly and securely, redefining city travel one ride at a time."})]}),j.jsx("img",{className:"thirdimage",src:OTe,alt:""})]}),j.jsx("div",{className:"last",children:j.jsx("h1",{})}),j.jsx(Aa,{show:o,onHide:()=>m(!1),children:j.jsx(Aa.Body,{className:"custom-modal",children:j.jsx("p",{children:"Connecting to rider..."})})})]})};function $Te(e,t,r){const n=Y.useRef(e!==void 0),[a,c]=Y.useState(t),f=e!==void 0,o=n.current;return n.current=f,!f&&o&&a!==t&&c(t),[f?e:a,Y.useCallback((...m)=>{const[_,...w]=m;let E=r==null?void 0:r(_,...w);return c(_),E},[r])]}const NTe=Y.createContext(null),ES=NTe;var X3=Object.prototype.hasOwnProperty;function K3(e,t,r){for(r of e.keys())if(Ly(r,t))return r}function Ly(e,t){var r,n,a;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Ly(e[n],t[n]););return n===-1}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if(a=n,a&&typeof a=="object"&&(a=K3(t,a),!a)||!t.has(a))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if(a=n[0],a&&typeof a=="object"&&(a=K3(t,a),!a)||!Ly(n[1],t.get(a)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(X3.call(e,r)&&++n&&!X3.call(t,r)||!(r in t)||!Ly(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}function zTe(e){const t=jU();return[e[0],Y.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var Io="top",$a="bottom",Na="right",Do="left",Bk="auto",y_=[Io,$a,Na,Do],Mp="start",qv="end",BTe="clippingParents",dW="viewport",iy="popper",FTe="reference",Y3=y_.reduce(function(e,t){return e.concat([t+"-"+Mp,t+"-"+qv])},[]),pW=[].concat(y_,[Bk]).reduce(function(e,t){return e.concat([t,t+"-"+Mp,t+"-"+qv])},[]),UTe="beforeRead",VTe="read",WTe="afterRead",qTe="beforeMain",GTe="main",HTe="afterMain",ZTe="beforeWrite",XTe="write",KTe="afterWrite",YTe=[UTe,VTe,WTe,qTe,GTe,HTe,ZTe,XTe,KTe];function Js(e){return e.split("-")[0]}function ta(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rf(e){var t=ta(e).Element;return e instanceof t||e instanceof Element}function Qs(e){var t=ta(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Fk(e){if(typeof ShadowRoot>"u")return!1;var t=ta(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var qh=Math.max,Ub=Math.min,kp=Math.round;function JP(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function mW(){return!/^((?!chrome|android).)*safari/i.test(JP())}function Ip(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,c=1;t&&Qs(e)&&(a=e.offsetWidth>0&&kp(n.width)/e.offsetWidth||1,c=e.offsetHeight>0&&kp(n.height)/e.offsetHeight||1);var f=rf(e)?ta(e):window,o=f.visualViewport,m=!mW()&&r,_=(n.left+(m&&o?o.offsetLeft:0))/a,w=(n.top+(m&&o?o.offsetTop:0))/c,E=n.width/a,C=n.height/c;return{width:E,height:C,top:w,right:_+E,bottom:w+C,left:_,x:_,y:w}}function Uk(e){var t=Ip(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function gW(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Fk(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Au(e){return e?(e.nodeName||"").toLowerCase():null}function tc(e){return ta(e).getComputedStyle(e)}function JTe(e){return["table","td","th"].indexOf(Au(e))>=0}function Lu(e){return((rf(e)?e.ownerDocument:e.document)||window.document).documentElement}function TS(e){return Au(e)==="html"?e:e.assignedSlot||e.parentNode||(Fk(e)?e.host:null)||Lu(e)}function J3(e){return!Qs(e)||tc(e).position==="fixed"?null:e.offsetParent}function QTe(e){var t=/firefox/i.test(JP()),r=/Trident/i.test(JP());if(r&&Qs(e)){var n=tc(e);if(n.position==="fixed")return null}var a=TS(e);for(Fk(a)&&(a=a.host);Qs(a)&&["html","body"].indexOf(Au(a))<0;){var c=tc(a);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return a;a=a.parentNode}return null}function v_(e){for(var t=ta(e),r=J3(e);r&&JTe(r)&&tc(r).position==="static";)r=J3(r);return r&&(Au(r)==="html"||Au(r)==="body"&&tc(r).position==="static")?t:r||QTe(e)||t}function Vk(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function jy(e,t,r){return qh(e,Ub(t,r))}function e2e(e,t,r){var n=jy(e,t,r);return n>r?r:n}function yW(){return{top:0,right:0,bottom:0,left:0}}function vW(e){return Object.assign({},yW(),e)}function _W(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var t2e=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,vW(typeof t!="number"?t:_W(t,y_))};function r2e(e){var t,r=e.state,n=e.name,a=e.options,c=r.elements.arrow,f=r.modifiersData.popperOffsets,o=Js(r.placement),m=Vk(o),_=[Do,Na].indexOf(o)>=0,w=_?"height":"width";if(!(!c||!f)){var E=t2e(a.padding,r),C=Uk(c),M=m==="y"?Io:Do,I=m==="y"?$a:Na,D=r.rects.reference[w]+r.rects.reference[m]-f[m]-r.rects.popper[w],$=f[m]-r.rects.reference[m],B=v_(c),F=B?m==="y"?B.clientHeight||0:B.clientWidth||0:0,R=D/2-$/2,U=E[M],H=F-C[w]-E[I],X=F/2-C[w]/2+R,ee=jy(U,X,H),oe=m;r.modifiersData[n]=(t={},t[oe]=ee,t.centerOffset=ee-X,t)}}function n2e(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||gW(t.elements.popper,a)&&(t.elements.arrow=a))}const i2e={name:"arrow",enabled:!0,phase:"main",fn:r2e,effect:n2e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Dp(e){return e.split("-")[1]}var o2e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function a2e(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:kp(r*a)/a||0,y:kp(n*a)/a||0}}function Q3(e){var t,r=e.popper,n=e.popperRect,a=e.placement,c=e.variation,f=e.offsets,o=e.position,m=e.gpuAcceleration,_=e.adaptive,w=e.roundOffsets,E=e.isFixed,C=f.x,M=C===void 0?0:C,I=f.y,D=I===void 0?0:I,$=typeof w=="function"?w({x:M,y:D}):{x:M,y:D};M=$.x,D=$.y;var B=f.hasOwnProperty("x"),F=f.hasOwnProperty("y"),R=Do,U=Io,H=window;if(_){var X=v_(r),ee="clientHeight",oe="clientWidth";if(X===ta(r)&&(X=Lu(r),tc(X).position!=="static"&&o==="absolute"&&(ee="scrollHeight",oe="scrollWidth")),X=X,a===Io||(a===Do||a===Na)&&c===qv){U=$a;var ae=E&&X===H&&H.visualViewport?H.visualViewport.height:X[ee];D-=ae-n.height,D*=m?1:-1}if(a===Do||(a===Io||a===$a)&&c===qv){R=Na;var ge=E&&X===H&&H.visualViewport?H.visualViewport.width:X[oe];M-=ge-n.width,M*=m?1:-1}}var he=Object.assign({position:o},_&&o2e),ve=w===!0?a2e({x:M,y:D},ta(r)):{x:M,y:D};if(M=ve.x,D=ve.y,m){var Ee;return Object.assign({},he,(Ee={},Ee[U]=F?"0":"",Ee[R]=B?"0":"",Ee.transform=(H.devicePixelRatio||1)<=1?"translate("+M+"px, "+D+"px)":"translate3d("+M+"px, "+D+"px, 0)",Ee))}return Object.assign({},he,(t={},t[U]=F?D+"px":"",t[R]=B?M+"px":"",t.transform="",t))}function s2e(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,c=r.adaptive,f=c===void 0?!0:c,o=r.roundOffsets,m=o===void 0?!0:o,_={placement:Js(t.placement),variation:Dp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Q3(Object.assign({},_,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Q3(Object.assign({},_,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const l2e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:s2e,data:{}};var jx={passive:!0};function c2e(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,c=a===void 0?!0:a,f=n.resize,o=f===void 0?!0:f,m=ta(t.elements.popper),_=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&_.forEach(function(w){w.addEventListener("scroll",r.update,jx)}),o&&m.addEventListener("resize",r.update,jx),function(){c&&_.forEach(function(w){w.removeEventListener("scroll",r.update,jx)}),o&&m.removeEventListener("resize",r.update,jx)}}const u2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:c2e,data:{}};var h2e={left:"right",right:"left",bottom:"top",top:"bottom"};function l1(e){return e.replace(/left|right|bottom|top/g,function(t){return h2e[t]})}var f2e={start:"end",end:"start"};function eB(e){return e.replace(/start|end/g,function(t){return f2e[t]})}function Wk(e){var t=ta(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function qk(e){return Ip(Lu(e)).left+Wk(e).scrollLeft}function d2e(e,t){var r=ta(e),n=Lu(e),a=r.visualViewport,c=n.clientWidth,f=n.clientHeight,o=0,m=0;if(a){c=a.width,f=a.height;var _=mW();(_||!_&&t==="fixed")&&(o=a.offsetLeft,m=a.offsetTop)}return{width:c,height:f,x:o+qk(e),y:m}}function p2e(e){var t,r=Lu(e),n=Wk(e),a=(t=e.ownerDocument)==null?void 0:t.body,c=qh(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),f=qh(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-n.scrollLeft+qk(e),m=-n.scrollTop;return tc(a||r).direction==="rtl"&&(o+=qh(r.clientWidth,a?a.clientWidth:0)-c),{width:c,height:f,x:o,y:m}}function Gk(e){var t=tc(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function xW(e){return["html","body","#document"].indexOf(Au(e))>=0?e.ownerDocument.body:Qs(e)&&Gk(e)?e:xW(TS(e))}function $y(e,t){var r;t===void 0&&(t=[]);var n=xW(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),c=ta(n),f=a?[c].concat(c.visualViewport||[],Gk(n)?n:[]):n,o=t.concat(f);return a?o:o.concat($y(TS(f)))}function QP(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function m2e(e,t){var r=Ip(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function tB(e,t,r){return t===dW?QP(d2e(e,r)):rf(t)?m2e(t,r):QP(p2e(Lu(e)))}function g2e(e){var t=$y(TS(e)),r=["absolute","fixed"].indexOf(tc(e).position)>=0,n=r&&Qs(e)?v_(e):e;return rf(n)?t.filter(function(a){return rf(a)&&gW(a,n)&&Au(a)!=="body"}):[]}function y2e(e,t,r,n){var a=t==="clippingParents"?g2e(e):[].concat(t),c=[].concat(a,[r]),f=c[0],o=c.reduce(function(m,_){var w=tB(e,_,n);return m.top=qh(w.top,m.top),m.right=Ub(w.right,m.right),m.bottom=Ub(w.bottom,m.bottom),m.left=qh(w.left,m.left),m},tB(e,f,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function bW(e){var t=e.reference,r=e.element,n=e.placement,a=n?Js(n):null,c=n?Dp(n):null,f=t.x+t.width/2-r.width/2,o=t.y+t.height/2-r.height/2,m;switch(a){case Io:m={x:f,y:t.y-r.height};break;case $a:m={x:f,y:t.y+t.height};break;case Na:m={x:t.x+t.width,y:o};break;case Do:m={x:t.x-r.width,y:o};break;default:m={x:t.x,y:t.y}}var _=a?Vk(a):null;if(_!=null){var w=_==="y"?"height":"width";switch(c){case Mp:m[_]=m[_]-(t[w]/2-r[w]/2);break;case qv:m[_]=m[_]+(t[w]/2-r[w]/2);break}}return m}function Gv(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,c=r.strategy,f=c===void 0?e.strategy:c,o=r.boundary,m=o===void 0?BTe:o,_=r.rootBoundary,w=_===void 0?dW:_,E=r.elementContext,C=E===void 0?iy:E,M=r.altBoundary,I=M===void 0?!1:M,D=r.padding,$=D===void 0?0:D,B=vW(typeof $!="number"?$:_W($,y_)),F=C===iy?FTe:iy,R=e.rects.popper,U=e.elements[I?F:C],H=y2e(rf(U)?U:U.contextElement||Lu(e.elements.popper),m,w,f),X=Ip(e.elements.reference),ee=bW({reference:X,element:R,strategy:"absolute",placement:a}),oe=QP(Object.assign({},R,ee)),ae=C===iy?oe:X,ge={top:H.top-ae.top+B.top,bottom:ae.bottom-H.bottom+B.bottom,left:H.left-ae.left+B.left,right:ae.right-H.right+B.right},he=e.modifiersData.offset;if(C===iy&&he){var ve=he[a];Object.keys(ge).forEach(function(Ee){var Re=[Na,$a].indexOf(Ee)>=0?1:-1,Ne=[Io,$a].indexOf(Ee)>=0?"y":"x";ge[Ee]+=ve[Ne]*Re})}return ge}function v2e(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,c=r.rootBoundary,f=r.padding,o=r.flipVariations,m=r.allowedAutoPlacements,_=m===void 0?pW:m,w=Dp(n),E=w?o?Y3:Y3.filter(function(I){return Dp(I)===w}):y_,C=E.filter(function(I){return _.indexOf(I)>=0});C.length===0&&(C=E);var M=C.reduce(function(I,D){return I[D]=Gv(e,{placement:D,boundary:a,rootBoundary:c,padding:f})[Js(D)],I},{});return Object.keys(M).sort(function(I,D){return M[I]-M[D]})}function _2e(e){if(Js(e)===Bk)return[];var t=l1(e);return[eB(e),t,eB(t)]}function x2e(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,c=a===void 0?!0:a,f=r.altAxis,o=f===void 0?!0:f,m=r.fallbackPlacements,_=r.padding,w=r.boundary,E=r.rootBoundary,C=r.altBoundary,M=r.flipVariations,I=M===void 0?!0:M,D=r.allowedAutoPlacements,$=t.options.placement,B=Js($),F=B===$,R=m||(F||!I?[l1($)]:_2e($)),U=[$].concat(R).reduce(function(Zt,Xt){return Zt.concat(Js(Xt)===Bk?v2e(t,{placement:Xt,boundary:w,rootBoundary:E,padding:_,flipVariations:I,allowedAutoPlacements:D}):Xt)},[]),H=t.rects.reference,X=t.rects.popper,ee=new Map,oe=!0,ae=U[0],ge=0;ge<U.length;ge++){var he=U[ge],ve=Js(he),Ee=Dp(he)===Mp,Re=[Io,$a].indexOf(ve)>=0,Ne=Re?"width":"height",Ve=Gv(t,{placement:he,boundary:w,rootBoundary:E,altBoundary:C,padding:_}),Ke=Re?Ee?Na:Do:Ee?$a:Io;H[Ne]>X[Ne]&&(Ke=l1(Ke));var ke=l1(Ke),Ge=[];if(c&&Ge.push(Ve[ve]<=0),o&&Ge.push(Ve[Ke]<=0,Ve[ke]<=0),Ge.every(function(Zt){return Zt})){ae=he,oe=!1;break}ee.set(he,Ge)}if(oe)for(var Ye=I?3:1,_t=function(Xt){var kt=U.find(function(Mt){var $r=ee.get(Mt);if($r)return $r.slice(0,Xt).every(function(St){return St})});if(kt)return ae=kt,"break"},Ot=Ye;Ot>0;Ot--){var bt=_t(Ot);if(bt==="break")break}t.placement!==ae&&(t.modifiersData[n]._skip=!0,t.placement=ae,t.reset=!0)}}const b2e={name:"flip",enabled:!0,phase:"main",fn:x2e,requiresIfExists:["offset"],data:{_skip:!1}};function rB(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function nB(e){return[Io,Na,$a,Do].some(function(t){return e[t]>=0})}function w2e(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,c=t.modifiersData.preventOverflow,f=Gv(t,{elementContext:"reference"}),o=Gv(t,{altBoundary:!0}),m=rB(f,n),_=rB(o,a,c),w=nB(m),E=nB(_);t.modifiersData[r]={referenceClippingOffsets:m,popperEscapeOffsets:_,isReferenceHidden:w,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":E})}const S2e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:w2e};function E2e(e,t,r){var n=Js(e),a=[Do,Io].indexOf(n)>=0?-1:1,c=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,f=c[0],o=c[1];return f=f||0,o=(o||0)*a,[Do,Na].indexOf(n)>=0?{x:o,y:f}:{x:f,y:o}}function T2e(e){var t=e.state,r=e.options,n=e.name,a=r.offset,c=a===void 0?[0,0]:a,f=pW.reduce(function(w,E){return w[E]=E2e(E,t.rects,c),w},{}),o=f[t.placement],m=o.x,_=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=_),t.modifiersData[n]=f}const A2e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:T2e};function C2e(e){var t=e.state,r=e.name;t.modifiersData[r]=bW({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const P2e={name:"popperOffsets",enabled:!0,phase:"read",fn:C2e,data:{}};function O2e(e){return e==="x"?"y":"x"}function M2e(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,c=a===void 0?!0:a,f=r.altAxis,o=f===void 0?!1:f,m=r.boundary,_=r.rootBoundary,w=r.altBoundary,E=r.padding,C=r.tether,M=C===void 0?!0:C,I=r.tetherOffset,D=I===void 0?0:I,$=Gv(t,{boundary:m,rootBoundary:_,padding:E,altBoundary:w}),B=Js(t.placement),F=Dp(t.placement),R=!F,U=Vk(B),H=O2e(U),X=t.modifiersData.popperOffsets,ee=t.rects.reference,oe=t.rects.popper,ae=typeof D=="function"?D(Object.assign({},t.rects,{placement:t.placement})):D,ge=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),he=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ve={x:0,y:0};if(X){if(c){var Ee,Re=U==="y"?Io:Do,Ne=U==="y"?$a:Na,Ve=U==="y"?"height":"width",Ke=X[U],ke=Ke+$[Re],Ge=Ke-$[Ne],Ye=M?-oe[Ve]/2:0,_t=F===Mp?ee[Ve]:oe[Ve],Ot=F===Mp?-oe[Ve]:-ee[Ve],bt=t.elements.arrow,Zt=M&&bt?Uk(bt):{width:0,height:0},Xt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:yW(),kt=Xt[Re],Mt=Xt[Ne],$r=jy(0,ee[Ve],Zt[Ve]),St=R?ee[Ve]/2-Ye-$r-kt-ge.mainAxis:_t-$r-kt-ge.mainAxis,Dt=R?-ee[Ve]/2+Ye+$r+Mt+ge.mainAxis:Ot+$r+Mt+ge.mainAxis,xt=t.elements.arrow&&v_(t.elements.arrow),dt=xt?U==="y"?xt.clientTop||0:xt.clientLeft||0:0,er=(Ee=he==null?void 0:he[U])!=null?Ee:0,Kt=Ke+St-er-dt,Nt=Ke+Dt-er,vr=jy(M?Ub(ke,Kt):ke,Ke,M?qh(Ge,Nt):Ge);X[U]=vr,ve[U]=vr-Ke}if(o){var nn,mn=U==="x"?Io:Do,En=U==="x"?$a:Na,gn=X[H],Gn=H==="y"?"height":"width",xi=gn+$[mn],Hn=gn-$[En],bi=[Io,Do].indexOf(B)!==-1,_r=(nn=he==null?void 0:he[H])!=null?nn:0,ui=bi?xi:gn-ee[Gn]-oe[Gn]-_r+ge.altAxis,Yn=bi?gn+ee[Gn]+oe[Gn]-_r-ge.altAxis:Hn,No=M&&bi?e2e(ui,gn,Yn):jy(M?ui:xi,gn,M?Yn:Hn);X[H]=No,ve[H]=No-gn}t.modifiersData[n]=ve}}const k2e={name:"preventOverflow",enabled:!0,phase:"main",fn:M2e,requiresIfExists:["offset"]};function I2e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function D2e(e){return e===ta(e)||!Qs(e)?Wk(e):I2e(e)}function R2e(e){var t=e.getBoundingClientRect(),r=kp(t.width)/e.offsetWidth||1,n=kp(t.height)/e.offsetHeight||1;return r!==1||n!==1}function L2e(e,t,r){r===void 0&&(r=!1);var n=Qs(t),a=Qs(t)&&R2e(t),c=Lu(t),f=Ip(e,a,r),o={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(n||!n&&!r)&&((Au(t)!=="body"||Gk(c))&&(o=D2e(t)),Qs(t)?(m=Ip(t,!0),m.x+=t.clientLeft,m.y+=t.clientTop):c&&(m.x=qk(c))),{x:f.left+o.scrollLeft-m.x,y:f.top+o.scrollTop-m.y,width:f.width,height:f.height}}function j2e(e){var t=new Map,r=new Set,n=[];e.forEach(function(c){t.set(c.name,c)});function a(c){r.add(c.name);var f=[].concat(c.requires||[],c.requiresIfExists||[]);f.forEach(function(o){if(!r.has(o)){var m=t.get(o);m&&a(m)}}),n.push(c)}return e.forEach(function(c){r.has(c.name)||a(c)}),n}function $2e(e){var t=j2e(e);return YTe.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function N2e(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function z2e(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var iB={placement:"bottom",modifiers:[],strategy:"absolute"};function oB(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function B2e(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,c=a===void 0?iB:a;return function(o,m,_){_===void 0&&(_=c);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},iB,c),modifiersData:{},elements:{reference:o,popper:m},attributes:{},styles:{}},E=[],C=!1,M={state:w,setOptions:function(B){var F=typeof B=="function"?B(w.options):B;D(),w.options=Object.assign({},c,w.options,F),w.scrollParents={reference:rf(o)?$y(o):o.contextElement?$y(o.contextElement):[],popper:$y(m)};var R=$2e(z2e([].concat(n,w.options.modifiers)));return w.orderedModifiers=R.filter(function(U){return U.enabled}),I(),M.update()},forceUpdate:function(){if(!C){var B=w.elements,F=B.reference,R=B.popper;if(oB(F,R)){w.rects={reference:L2e(F,v_(R),w.options.strategy==="fixed"),popper:Uk(R)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(ge){return w.modifiersData[ge.name]=Object.assign({},ge.data)});for(var U=0;U<w.orderedModifiers.length;U++){if(w.reset===!0){w.reset=!1,U=-1;continue}var H=w.orderedModifiers[U],X=H.fn,ee=H.options,oe=ee===void 0?{}:ee,ae=H.name;typeof X=="function"&&(w=X({state:w,options:oe,name:ae,instance:M})||w)}}}},update:N2e(function(){return new Promise(function($){M.forceUpdate(),$(w)})}),destroy:function(){D(),C=!0}};if(!oB(o,m))return M;M.setOptions(_).then(function($){!C&&_.onFirstUpdate&&_.onFirstUpdate($)});function I(){w.orderedModifiers.forEach(function($){var B=$.name,F=$.options,R=F===void 0?{}:F,U=$.effect;if(typeof U=="function"){var H=U({state:w,name:B,instance:M,options:R}),X=function(){};E.push(H||X)}})}function D(){E.forEach(function($){return $()}),E=[]}return M}}const F2e=B2e({defaultModifiers:[S2e,P2e,l2e,u2e,A2e,b2e,k2e,i2e]}),U2e=["enabled","placement","strategy","modifiers"];function V2e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}const W2e={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},q2e={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:r}=e.elements;if("removeAttribute"in t){const n=(t.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==r.id);n.length?t.setAttribute("aria-describedby",n.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:r,reference:n}=e.elements,a=(t=r.getAttribute("role"))==null?void 0:t.toLowerCase();if(r.id&&a==="tooltip"&&"setAttribute"in n){const c=n.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(r.id)!==-1)return;n.setAttribute("aria-describedby",c?`${c},${r.id}`:r.id)}}},G2e=[];function H2e(e,t,r={}){let{enabled:n=!0,placement:a="bottom",strategy:c="absolute",modifiers:f=G2e}=r,o=V2e(r,U2e);const m=Y.useRef(f),_=Y.useRef(),w=Y.useCallback(()=>{var $;($=_.current)==null||$.update()},[]),E=Y.useCallback(()=>{var $;($=_.current)==null||$.forceUpdate()},[]),[C,M]=zTe(Y.useState({placement:a,update:w,forceUpdate:E,attributes:{},styles:{popper:{},arrow:{}}})),I=Y.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:$})=>{const B={},F={};Object.keys($.elements).forEach(R=>{B[R]=$.styles[R],F[R]=$.attributes[R]}),M({state:$,styles:B,attributes:F,update:w,forceUpdate:E,placement:$.placement})}}),[w,E,M]),D=Y.useMemo(()=>(Ly(m.current,f)||(m.current=f),m.current),[f]);return Y.useEffect(()=>{!_.current||!n||_.current.setOptions({placement:a,strategy:c,modifiers:[...D,I,W2e]})},[c,a,I,n,D]),Y.useEffect(()=>{if(!(!n||e==null||t==null))return _.current=F2e(e,t,Object.assign({},o,{placement:a,strategy:c,modifiers:[...D,q2e,I]})),()=>{_.current!=null&&(_.current.destroy(),_.current=void 0,M($=>Object.assign({},$,{attributes:{},styles:{popper:{}}})))}},[n,e,t]),C}var Z2e=function(){},X2e=Z2e;const K2e=Hr(X2e),aB=()=>{};function Y2e(e){return e.button===0}function J2e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const nA=e=>e&&("current"in e?e.current:e),sB={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Q2e(e,t=aB,{disabled:r,clickTrigger:n="click"}={}){const a=Y.useRef(!1),c=Y.useRef(!1),f=Y.useCallback(_=>{const w=nA(e);K2e(!!w,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!w||J2e(_)||!Y2e(_)||!!G1(w,_.target)||c.current,c.current=!1},[e]),o=qn(_=>{const w=nA(e);w&&G1(w,_.target)&&(c.current=!0)}),m=qn(_=>{a.current||t(_)});Y.useEffect(()=>{var _,w;if(r||e==null)return;const E=r_(nA(e)),C=E.defaultView||window;let M=(_=C.event)!=null?_:(w=C.parent)==null?void 0:w.event,I=null;sB[n]&&(I=iu(E,sB[n],o,!0));const D=iu(E,n,f,!0),$=iu(E,n,F=>{if(F===M){M=void 0;return}m(F)});let B=[];return"ontouchstart"in E.documentElement&&(B=[].slice.call(E.body.children).map(F=>iu(F,"mousemove",aB))),()=>{I==null||I(),D(),$(),B.forEach(F=>F())}},[e,r,n,f,o,m])}function eAe(e){const t={};return Array.isArray(e)?(e==null||e.forEach(r=>{t[r.name]=r}),t):e||t}function tAe(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function rAe({enabled:e,enableEvents:t,placement:r,flip:n,offset:a,fixed:c,containerPadding:f,arrowElement:o,popperConfig:m={}}){var _,w,E,C,M;const I=eAe(m.modifiers);return Object.assign({},m,{placement:r,enabled:e,strategy:c?"fixed":m.strategy,modifiers:tAe(Object.assign({},I,{eventListeners:{enabled:t,options:(_=I.eventListeners)==null?void 0:_.options},preventOverflow:Object.assign({},I.preventOverflow,{options:f?Object.assign({padding:f},(w=I.preventOverflow)==null?void 0:w.options):(E=I.preventOverflow)==null?void 0:E.options}),offset:{options:Object.assign({offset:a},(C=I.offset)==null?void 0:C.options)},arrow:Object.assign({},I.arrow,{enabled:!!o,options:Object.assign({},(M=I.arrow)==null?void 0:M.options,{element:o})}),flip:Object.assign({enabled:!!n},I.flip)}))})}const nAe=["children"];function iAe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}const oAe=()=>{};function wW(e={}){const t=Y.useContext(ES),[r,n]=LU(),a=Y.useRef(!1),{flip:c,offset:f,rootCloseEvent:o,fixed:m=!1,placement:_,popperConfig:w={},enableEventListeners:E=!0,usePopper:C=!!t}=e,M=(t==null?void 0:t.show)==null?!!e.show:t.show;M&&!a.current&&(a.current=!0);const I=X=>{t==null||t.toggle(!1,X)},{placement:D,setMenu:$,menuElement:B,toggleElement:F}=t||{},R=H2e(F,B,rAe({placement:_||D||"bottom-start",enabled:C,enableEvents:E??M,offset:f,flip:c,fixed:m,arrowElement:r,popperConfig:w})),U=Object.assign({ref:$||oAe,"aria-labelledby":F==null?void 0:F.id},R.attributes.popper,{style:R.styles.popper}),H={show:M,placement:D,hasShown:a.current,toggle:t==null?void 0:t.toggle,popper:C?R:null,arrowProps:C?Object.assign({ref:n},R.attributes.arrow,{style:R.styles.arrow}):{}};return Q2e(B,I,{clickTrigger:o,disabled:!M}),[U,H]}const aAe={usePopper:!0};function Hk(e){let{children:t}=e,r=iAe(e,nAe);const[n,a]=wW(r);return j.jsx(j.Fragment,{children:t(n,a)})}Hk.displayName="DropdownMenu";Hk.defaultProps=aAe;const Vb={prefix:String(Math.round(Math.random()*1e10)),current:0,isSSR:!1},Zk=Se.createContext(Vb);let sAe=!!(typeof window<"u"&&window.document&&window.document.createElement),iA=new WeakMap;function lAe(e=!1){let t=Y.useContext(Zk),r=Y.useRef(null);if(r.current===null&&!e){var n,a;let c=(n=Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(a=n.ReactCurrentOwner)===null||a===void 0?void 0:a.current;if(c){let f=iA.get(c);f==null?iA.set(c,{id:t.current,state:c.memoizedState}):c.memoizedState!==f.state&&(t.current=f.id,iA.delete(c))}r.current=++t.current}return r.current}function cAe(e){let t=Y.useContext(Zk);t===Vb&&!sAe&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let r=lAe(!!e),n=`react-aria${t.prefix}`;return e||`${n}-${r}`}function uAe(e){let t=Se.useId(),[r]=Y.useState(mAe()),n=r?"react-aria":`react-aria${Vb.prefix}`;return e||`${n}-${t}`}const hAe=typeof Se.useId=="function"?uAe:cAe;function fAe(){return!1}function dAe(){return!0}function pAe(e){return()=>{}}function mAe(){return typeof Se.useSyncExternalStore=="function"?Se.useSyncExternalStore(pAe,fAe,dAe):Y.useContext(Zk).isSSR}const SW=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},lB=()=>{};function EW(){const e=hAe(),{show:t=!1,toggle:r=lB,setToggle:n,menuElement:a}=Y.useContext(ES)||{},c=Y.useCallback(o=>{r(!t,o)},[t,r]),f={id:e,ref:n||lB,onClick:c,"aria-expanded":!!t};return a&&SW(a)&&(f["aria-haspopup"]=!0),[f,{show:t,toggle:r}]}function TW({children:e}){const[t,r]=EW();return j.jsx(j.Fragment,{children:e(t,r)})}TW.displayName="DropdownToggle";const gAe=["eventKey","disabled","onClick","active","as"];function yAe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,c;for(c=0;c<n.length;c++)a=n[c],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function AW({key:e,href:t,active:r,disabled:n,onClick:a}){const c=Y.useContext(Qh),f=Y.useContext(PM),{activeKey:o}=f||{},m=av(e,t),_=r==null&&e!=null?av(o)===m:r;return[{onClick:qn(E=>{n||(a==null||a(E),c&&!E.isPropagationStopped()&&c(m,E))}),"aria-disabled":n||void 0,"aria-selected":_,[Up("dropdown-item")]:""},{isActive:_}]}const CW=Y.forwardRef((e,t)=>{let{eventKey:r,disabled:n,onClick:a,active:c,as:f=MM}=e,o=yAe(e,gAe);const[m]=AW({key:r,href:o.href,disabled:n,onClick:a,active:c});return j.jsx(f,Object.assign({},o,{ref:t},m))});CW.displayName="DropdownItem";function cB(){const e=CU(),t=Y.useRef(null),r=Y.useCallback(n=>{t.current=n,e()},[e]);return[t,r]}function __({defaultShow:e,show:t,onSelect:r,onToggle:n,itemSelector:a=`* [${Up("dropdown-item")}]`,focusFirstItemOnShow:c,placement:f="bottom-start",children:o}){const m=Bw(),[_,w]=$Te(t,e,n),[E,C]=cB(),M=E.current,[I,D]=cB(),$=I.current,B=$U(_),F=Y.useRef(null),R=Y.useRef(!1),U=Y.useContext(Qh),H=Y.useCallback((he,ve,Ee=ve==null?void 0:ve.type)=>{w(he,{originalEvent:ve,source:Ee})},[w]),X=qn((he,ve)=>{r==null||r(he,ve),H(!1,ve,"select"),ve.isPropagationStopped()||U==null||U(he,ve)}),ee=Y.useMemo(()=>({toggle:H,placement:f,show:_,menuElement:M,toggleElement:$,setMenu:C,setToggle:D}),[H,f,_,M,$,C,D]);M&&B&&!_&&(R.current=M.contains(M.ownerDocument.activeElement));const oe=qn(()=>{$&&$.focus&&$.focus()}),ae=qn(()=>{const he=F.current;let ve=c;if(ve==null&&(ve=E.current&&SW(E.current)?"keyboard":!1),ve===!1||ve==="keyboard"&&!/^key.+$/.test(he))return;const Ee=Il(E.current,a)[0];Ee&&Ee.focus&&Ee.focus()});Y.useEffect(()=>{_?ae():R.current&&(R.current=!1,oe())},[_,R,oe,ae]),Y.useEffect(()=>{F.current=null});const ge=(he,ve)=>{if(!E.current)return null;const Ee=Il(E.current,a);let Re=Ee.indexOf(he)+ve;return Re=Math.max(0,Math.min(Re,Ee.length)),Ee[Re]};return kQ(Y.useCallback(()=>m.document,[m]),"keydown",he=>{var ve,Ee;const{key:Re}=he,Ne=he.target,Ve=(ve=E.current)==null?void 0:ve.contains(Ne),Ke=(Ee=I.current)==null?void 0:Ee.contains(Ne);if(/input|textarea/i.test(Ne.tagName)&&(Re===" "||Re!=="Escape"&&Ve||Re==="Escape"&&Ne.type==="search")||!Ve&&!Ke||Re==="Tab"&&(!E.current||!_))return;F.current=he.type;const Ge={originalEvent:he,source:he.type};switch(Re){case"ArrowUp":{const Ye=ge(Ne,-1);Ye&&Ye.focus&&Ye.focus(),he.preventDefault();return}case"ArrowDown":if(he.preventDefault(),!_)w(!0,Ge);else{const Ye=ge(Ne,1);Ye&&Ye.focus&&Ye.focus()}return;case"Tab":IM(Ne.ownerDocument,"keyup",Ye=>{var _t;(Ye.key==="Tab"&&!Ye.target||!((_t=E.current)!=null&&_t.contains(Ye.target)))&&w(!1,Ge)},{once:!0});break;case"Escape":Re==="Escape"&&(he.preventDefault(),he.stopPropagation()),w(!1,Ge);break}}),j.jsx(Qh.Provider,{value:X,children:j.jsx(ES.Provider,{value:ee,children:o})})}__.displayName="Dropdown";__.Menu=Hk;__.Toggle=TW;__.Item=CW;const PW=Y.createContext({});PW.displayName="DropdownContext";const OW=PW,MW=Y.forwardRef(({bsPrefix:e,className:t,eventKey:r,disabled:n=!1,onClick:a,active:c,as:f=zU,...o},m)=>{const _=ci(e,"dropdown-item"),[w,E]=AW({key:r,href:o.href,disabled:n,onClick:a,active:c});return j.jsx(f,{...o,...w,ref:m,className:Yt(t,_,E.isActive&&"active",n&&"disabled")})});MW.displayName="DropdownItem";const vAe=MW,kW=Y.createContext(null);kW.displayName="InputGroupContext";const IW=kW;function DW(e,t){return e}function RW(e,t,r){const n=r?"top-end":"top-start",a=r?"top-start":"top-end",c=r?"bottom-end":"bottom-start",f=r?"bottom-start":"bottom-end",o=r?"right-start":"left-start",m=r?"right-end":"left-end",_=r?"left-start":"right-start",w=r?"left-end":"right-end";let E=e?f:c;return t==="up"?E=e?a:n:t==="end"?E=e?w:_:t==="start"?E=e?m:o:t==="down-centered"?E="bottom":t==="up-centered"&&(E="top"),E}const LW=Y.forwardRef(({bsPrefix:e,className:t,align:r,rootCloseEvent:n,flip:a=!0,show:c,renderOnMount:f,as:o="div",popperConfig:m,variant:_,...w},E)=>{let C=!1;const M=Y.useContext(hf),I=ci(e,"dropdown-menu"),{align:D,drop:$,isRTL:B}=Y.useContext(OW);r=r||D;const F=Y.useContext(IW),R=[];if(r)if(typeof r=="object"){const he=Object.keys(r);if(he.length){const ve=he[0],Ee=r[ve];C=Ee==="start",R.push(`${I}-${ve}-${Ee}`)}}else r==="end"&&(C=!0);const U=RW(C,$,B),[H,{hasShown:X,popper:ee,show:oe,toggle:ae}]=wW({flip:a,rootCloseEvent:n,show:c,usePopper:!M&&R.length===0,offset:[0,2],popperConfig:m,placement:U});if(H.ref=uf(DW(E),H.ref),q1(()=>{oe&&(ee==null||ee.update())},[oe]),!X&&!f&&!F)return null;typeof o!="string"&&(H.show=oe,H.close=()=>ae==null?void 0:ae(!1),H.align=r);let ge=w.style;return ee!=null&&ee.placement&&(ge={...w.style,...H.style},w["x-placement"]=ee.placement),j.jsx(o,{...w,...H,style:ge,...(R.length||M)&&{"data-bs-popper":"static"},className:Yt(t,I,oe&&"show",C&&`${I}-end`,_&&`${I}-${_}`,...R)})});LW.displayName="DropdownMenu";const _Ae=LW,jW=Y.forwardRef(({as:e,bsPrefix:t,variant:r="primary",size:n,active:a=!1,disabled:c=!1,className:f,...o},m)=>{const _=ci(t,"btn"),[w,{tagName:E}]=OM({tagName:e,disabled:c,...o}),C=E;return j.jsx(C,{...w,...o,ref:m,disabled:c,className:Yt(f,_,a&&"active",r&&`${_}-${r}`,n&&`${_}-${n}`,o.href&&c&&"disabled")})});jW.displayName="Button";const Wb=jW,$W=Y.forwardRef(({bsPrefix:e,split:t,className:r,childBsPrefix:n,as:a=Wb,...c},f)=>{const o=ci(e,"dropdown-toggle"),m=Y.useContext(ES);n!==void 0&&(c.bsPrefix=n);const[_]=EW();return _.ref=uf(_.ref,DW(f)),j.jsx(a,{className:Yt(r,o,t&&`${o}-split`,(m==null?void 0:m.show)&&"show"),..._,...c})});$W.displayName="DropdownToggle";const xAe=$W,bAe=nl("dropdown-header",{defaultProps:{role:"heading"}}),wAe=nl("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),SAe=nl("dropdown-item-text",{Component:"span"}),NW=Y.forwardRef((e,t)=>{const{bsPrefix:r,drop:n="down",show:a,className:c,align:f="start",onSelect:o,onToggle:m,focusFirstItemOnShow:_,as:w="div",navbar:E,autoClose:C=!0,...M}=CM(e,{show:"onToggle"}),I=Y.useContext(IW),D=ci(r,"dropdown"),$=TU(),B=ee=>C===!1?ee==="click":C==="inside"?ee!=="rootClose":C==="outside"?ee!=="select":!0,F=qn((ee,oe)=>{oe.originalEvent.currentTarget===document&&(oe.source!=="keydown"||oe.originalEvent.key==="Escape")&&(oe.source="rootClose"),B(oe.source)&&(m==null||m(ee,oe))}),U=RW(f==="end",n,$),H=Y.useMemo(()=>({align:f,drop:n,isRTL:$}),[f,n,$]),X={down:D,"down-centered":`${D}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return j.jsx(OW.Provider,{value:H,children:j.jsx(__,{placement:U,show:a,onSelect:o,onToggle:F,focusFirstItemOnShow:_,itemSelector:`.${D}-item:not(.disabled):not(:disabled)`,children:I?M.children:j.jsx(w,{...M,ref:t,className:Yt(c,a&&"show",X[n])})})})});NW.displayName="Dropdown";const su=Object.assign(NW,{Toggle:xAe,Menu:_Ae,Item:vAe,ItemText:SAe,Divider:wAe,Header:bAe}),EAe="/assets/pngwing.com (1)-d8824846.png";const TAe="/assets/logofinal-34f36033.png",AS=()=>{var n;const e=Lo(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("userData"),e("/")},r=localStorage.getItem("userData");if(r){const a=JSON.parse(r),c=a==null?void 0:a.username,f=(n=a==null?void 0:a.user)==null?void 0:n.username;return console.log(c),console.log(f),j.jsx(Pa,{className:"custom-user-nav ",expand:"md",children:j.jsxs("div",{className:"container",children:[j.jsxs(Pa.Brand,{href:"#home ",className:"d-flex  align-items-center justify-content-center ",children:[j.jsx("img",{src:TAe,alt:"Logo",className:"driver-nav-logo"}),j.jsx("h1",{className:"mb-0 driver_heading"})]}),j.jsx(Pa.Toggle,{"aria-controls":"basic-navbar-nav"}),j.jsxs(Pa.Collapse,{id:"basic-navbar-nav",children:[j.jsxs(kM,{className:"ms-auto",style:{marginLeft:"10px"},children:[j.jsx(Ni,{to:"/userhome",style:{color:location.pathname==="/userhome"?"oceanblue":"black",fontWeight:location.pathname==="/userhome"?"bolder":"normal",marginRight:"40px",textDecoration:"none"},children:"Home"}),j.jsx(Ni,{to:"#about",style:{color:"black",marginRight:"40px",textDecoration:"none"},children:"About"}),j.jsx(Ni,{to:"#services",style:{color:"black",marginRight:"30px",textDecoration:"none"},children:"Careers"}),j.jsx(Ni,{to:"#contact",style:{color:"black",marginRight:"40px",textDecoration:"none"},children:"Contact"})]}),r&&j.jsx(Ni,{to:"/userprofile",children:j.jsxs("div",{className:"d-flex flex-column align-items-center",children:[j.jsx("img",{src:EAe,style:{height:"3rem",marginRight:"10px"},alt:""}),j.jsx("span",{style:{color:"black",textDecoration:"none"},children:c||f||""})]})}),j.jsxs(su,{children:[j.jsx(su.Toggle,{variant:"light",id:"dropdown-basic"}),j.jsx(su.Menu,{style:{border:"none"},children:j.jsx(su.Item,{onClick:t,children:"Logout"})})]})]})]})})}};function zW(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=zW(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Ht(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=zW(t))&&(n&&(n+=" "),n+=r);return n}(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".dropdown-menu .active:not(.form-control){color:#16181b;background-color:#eee}.dropdown-menu [data-active=true] a.dropdown-item,.dropdown-menu .dropdown-item:focus,.dropdown-menu li:focus .dropdown-item :not(.disabled){color:#16181b;background-color:#eee}.dropdown-menu li:focus{outline:none}.dropdown-menu.dropdown-menu-dark [data-active=true] a.dropdown-item,.dropdown-menu.dropdown-menu-dark .dropdown-item:focus,.dropdown-menu.dropdown-menu-dark li:focus .dropdown-item{color:#fff;background-color:#1266f1}.btn-group.dropstart>.dropdown-menu{right:0!important}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const AAe=Se.forwardRef(({breakpoint:e,fluid:t,children:r,className:n,tag:a="div",...c},f)=>{const o=Ht(`${t?"container-fluid":`container${e?"-"+e:""}`}`,n);return j.jsx(a,{className:o,...c,ref:f,children:r})}),$x=Se.forwardRef(({center:e,children:t,className:r,end:n,lg:a,md:c,offsetLg:f,offsetMd:o,offsetSm:m,order:_,size:w,sm:E,start:C,tag:M="div",xl:I,xxl:D,xs:$,...B},F)=>{const R=Ht(w&&`col-${w}`,$&&`col-xs-${$}`,E&&`col-sm-${E}`,c&&`col-md-${c}`,a&&`col-lg-${a}`,I&&`col-xl-${I}`,D&&`col-xxl-${D}`,!w&&!$&&!E&&!c&&!a&&!I&&!D?"col":"",_&&`order-${_}`,C&&"align-self-start",e&&"align-self-center",n&&"align-self-end",m&&`offset-sm-${m}`,o&&`offset-md-${o}`,f&&`offset-lg-${f}`,r);return j.jsx(M,{className:R,ref:F,...B,children:t})});Se.forwardRef(({className:e,color:t="primary",pill:r,light:n,dot:a,tag:c="span",children:f,notification:o,...m},_)=>{const w=Ht("badge",n?t&&`badge-${t}`:t&&`bg-${t}`,a&&"badge-dot",r&&"rounded-pill",o&&"badge-notification",e);return j.jsx(c,{className:w,ref:_,...m,children:f})});const CAe=({...e})=>{const[t,r]=Y.useState(!1),n=Ht("ripple-wave",t&&"active");return Y.useEffect(()=>{const a=setTimeout(()=>{r(!0)},50);return()=>{clearTimeout(a)}},[]),j.jsx("div",{className:n,...e})},PAe=(...e)=>{const t=Se.useRef();return Se.useEffect(()=>{e.forEach(r=>{r&&(typeof r=="function"?r(t.current):r.current=t.current)})},[e]),t},OAe=Se.forwardRef(({className:e,rippleTag:t="div",rippleCentered:r,rippleDuration:n=500,rippleUnbound:a,rippleRadius:c=0,rippleColor:f="dark",children:o,onMouseDown:m,..._},w)=>{const E=Y.useRef(null),C=PAe(w,E),M="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",I=[0,0,0],D=["primary","secondary","success","danger","warning","info","light","dark"],[$,B]=Y.useState([]),[F,R]=Y.useState(!1),U=Ht("ripple","ripple-surface",a&&"ripple-surface-unbound",F&&`ripple-surface-${f}`,e),H=()=>{if(D.find(ge=>ge===(f==null?void 0:f.toLowerCase())))return R(!0);{const ge=X(f).join(",");return`radial-gradient(circle, ${M.split("{{color}}").join(`${ge}`)})`}},X=ge=>{const he=Re=>(Re.length<7&&(Re=`#${Re[1]}${Re[1]}${Re[2]}${Re[2]}${Re[3]}${Re[3]}`),[parseInt(Re.substr(1,2),16),parseInt(Re.substr(3,2),16),parseInt(Re.substr(5,2),16)]),ve=Re=>{const Ne=document.body.appendChild(document.createElement("fictum")),Ve="rgb(1, 2, 3)";return Ne.style.color=Ve,Ne.style.color!==Ve||(Ne.style.color=Re,Ne.style.color===Ve||Ne.style.color==="")?I:(Re=getComputedStyle(Ne).color,document.body.removeChild(Ne),Re)},Ee=Re=>(Re=Re.match(/[.\d]+/g).map(Ne=>+Number(Ne)),Re.length=3,Re);return ge.toLowerCase()==="transparent"?I:ge[0]==="#"?he(ge):(ge.indexOf("rgb")===-1&&(ge=ve(ge)),ge.indexOf("rgb")===0?Ee(ge):I)},ee=ge=>{const{offsetX:he,offsetY:ve,height:Ee,width:Re}=ge,Ne=ve<=Ee/2,Ve=he<=Re/2,Ke=(Ot,bt)=>Math.sqrt(Ot**2+bt**2),ke=ve===Ee/2&&he===Re/2,Ge={first:Ne===!0&&Ve===!1,second:Ne===!0&&Ve===!0,third:Ne===!1&&Ve===!0,fourth:Ne===!1&&Ve===!1},Ye={topLeft:Ke(he,ve),topRight:Ke(Re-he,ve),bottomLeft:Ke(he,Ee-ve),bottomRight:Ke(Re-he,Ee-ve)};let _t=0;return ke||Ge.fourth?_t=Ye.topLeft:Ge.third?_t=Ye.topRight:Ge.second?_t=Ye.bottomRight:Ge.first&&(_t=Ye.bottomLeft),_t*2},oe=ge=>{var he;const ve=(he=C.current)==null?void 0:he.getBoundingClientRect(),Ee=ge.clientX-ve.left,Re=ge.clientY-ve.top,Ne=ve.height,Ve=ve.width,Ke={offsetX:r?Ne/2:Ee,offsetY:r?Ve/2:Re,height:Ne,width:Ve},ke={delay:n&&n*.5,duration:n&&n-n*.5},Ge=ee(Ke),Ye=c||Ge/2,_t={left:r?`${Ve/2-Ye}px`:`${Ee-Ye}px`,top:r?`${Ne/2-Ye}px`:`${Re-Ye}px`,height:c?`${c*2}px`:`${Ge}px`,width:c?`${c*2}px`:`${Ge}px`,transitionDelay:`0s, ${ke.delay}ms`,transitionDuration:`${n}ms, ${ke.duration}ms`};return F?_t:{..._t,backgroundImage:`${H()}`}},ae=ge=>{const he=oe(ge),ve=$.concat(he);B(ve),m&&m(ge)};return Y.useEffect(()=>{const ge=setTimeout(()=>{$.length>0&&B($.splice(1,$.length-1))},n);return()=>{clearTimeout(ge)}},[n,$]),j.jsxs(t,{className:U,onMouseDown:ge=>ae(ge),ref:C,..._,children:[o,$.map((ge,he)=>j.jsx(CAe,{style:ge},he))]})});Se.forwardRef(({className:e,color:t="primary",outline:r,children:n,rounded:a,disabled:c,floating:f,size:o,href:m,block:_,active:w,toggle:E,noRipple:C,tag:M="button",role:I="button",...D},$)=>{const[B,F]=Y.useState(w||!1);let R;const U=t&&["light","link"].includes(t)||r?"dark":"light";t!=="none"?r?t?R=`btn-outline-${t}`:R="btn-outline-primary":t?R=`btn-${t}`:R="btn-primary":R="";const H=Ht(t!=="none"&&"btn",R,a&&"btn-rounded",f&&"btn-floating",o&&`btn-${o}`,`${(m||M!=="button")&&c?"disabled":""}`,_&&"btn-block",B&&"active",e);return m&&M!=="a"&&(M="a"),["hr","img","input"].includes(M)||C?j.jsx(M,{className:H,onClick:E?()=>{F(!B)}:void 0,disabled:c&&M==="button"?!0:void 0,href:m,ref:$,role:I,...D,children:n}):j.jsx(OAe,{rippleTag:M,rippleColor:U,className:H,onClick:E?()=>{F(!B)}:void 0,disabled:c&&M==="button"?!0:void 0,href:m,ref:$,role:I,...D,children:n})});Se.forwardRef(({className:e,children:t,shadow:r,toolbar:n,size:a,vertical:c,tag:f="div",role:o="group",...m},_)=>{let w;n?w="btn-toolbar":c?w="btn-group-vertical":w="btn-group";const E=Ht(w,r&&`shadow-${r}`,a&&`btn-group-${a}`,e);return j.jsx(f,{className:E,ref:_,role:o,...m,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",color:n,grow:a,size:c,...f},o)=>{const m=Ht(`${a?"spinner-grow":"spinner-border"}`,n&&`text-${n}`,`${c?a?"spinner-grow-"+c:"spinner-border-"+c:""}`,e);return j.jsx(r,{className:m,ref:o,...f,children:t})});Se.forwardRef(({className:e,children:t,border:r,background:n,tag:a="div",shadow:c,alignment:f,...o},m)=>{const _=Ht("card",r&&`border border-${r}`,n&&`bg-${n}`,c&&`shadow-${c}`,f&&`text-${f}`,e);return j.jsx(a,{className:_,ref:m,...o,children:t})});Se.forwardRef(({className:e,children:t,border:r,background:n,tag:a="div",...c},f)=>{const o=Ht("card-header",r&&`border-${r}`,n&&`bg-${n}`,e);return j.jsx(a,{className:o,...c,ref:f,children:t})});Se.forwardRef(({className:e,children:t,tag:r="p",...n},a)=>{const c=Ht("card-subtitle",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="h5",...n},a)=>{const c=Ht("card-title",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="p",...n},a)=>{const c=Ht("card-text",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("card-body",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,border:r,background:n,tag:a="div",...c},f)=>{const o=Ht("card-footer",r&&`border-${r}`,n&&`bg-${n}`,e);return j.jsx(a,{className:o,...c,ref:f,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("card-img-overlay",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("card-group",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,tag:t="ul",horizontal:r,horizontalSize:n,light:a,numbered:c,children:f,small:o,...m},_)=>{const w=Ht("list-group",r&&(n?`list-group-horizontal-${n}`:"list-group-horizontal"),a&&"list-group-light",c&&"list-group-numbered",o&&"list-group-small",e);return j.jsx(t,{className:w,ref:_,...m,children:f})});Se.forwardRef(({className:e,tag:t="li",active:r,disabled:n,action:a,color:c,children:f,noBorders:o,...m},_)=>{const w=t==="button",E=Ht("list-group-item",r&&"active",n&&!w&&"disabled",a&&"list-group-item-action",c&&`list-group-item-${c}`,o&&"border-0",e);return j.jsx(t,{className:E,disabled:w&&n,ref:_,...m,children:f})});const MAe=Se.forwardRef(({around:e,between:t,bottom:r,center:n,children:a,className:c,evenly:f,end:o,middle:m,start:_,tag:w="div",top:E,...C},M)=>{const I=Ht("row",e&&"justify-content-around",t&&"justify-content-between",r&&"align-self-end",n&&"justify-content-center",f&&"justifty-content-evenly",o&&"justify-content-end",m&&"align-self-center",_&&"justify-content-start",E&&"align-self-start",c);return j.jsx(w,{className:I,...C,ref:M,children:a})}),us=({animate:e,className:t,icon:r,fab:n,fas:a,fal:c,far:f,flag:o,spin:m,fixed:_,flip:w,list:E,size:C,pull:M,pulse:I,color:D,border:$,rotate:B,inverse:F,stack:R,iconType:U,children:H,...X})=>{let ee;o?ee="flag":n?ee="fab":a?ee="fas":f?ee="far":c?ee="fal":ee="fa";const oe=Ht(U?`fa-${U}`:ee,e&&`fa-${e}`,o?`flag-${o}`:r&&`fa-${r}`,C&&`fa-${C}`,D&&`text-${D}`,$&&"fa-border",B&&`fa-rotate-${B}`,M&&`fa-pull-${M}`,m&&!e&&"fa-spin",E&&"fa-li",_&&"fa-fw",I&&!e&&"fa-pulse",F&&"fa-inverse",w&&`fa-flip-${w}`,R&&`fa-stack-${R}`,t);return j.jsx("i",{className:oe,...X,children:H})};Se.forwardRef(({className:e,children:t,tag:r="p",variant:n,color:a,blockquote:c,note:f,noteColor:o,listUnStyled:m,listInLine:_,...w},E)=>{const C=Ht(n&&n,c&&"blockquote",f&&"note",a&&`text-${a}`,o&&`note-${o}`,m&&"list-unstyled",_&&"list-inline",e);return c&&(r="blockquote"),(m||_)&&(r="ul"),j.jsx(r,{className:C,ref:E,...w,children:t})});Se.forwardRef(({className:e,color:t,uppercase:r,bold:n,children:a,...c},f)=>{const o=Ht("breadcrumb",n&&"font-weight-bold",t&&`text-${t}`,r&&"text-uppercase",e);return j.jsx("nav",{"aria-label":"breadcrumb",children:j.jsx("ol",{className:o,ref:f,...c,children:a})})});Se.forwardRef(({className:e,active:t,current:r="page",children:n,...a},c)=>{const f=Ht("breadcrumb-item",t&&"active",e);return j.jsx("li",{className:f,ref:c,"aria-current":t&&r,...a,children:n})});const kAe=e=>{if(e!==!1)return`navbar-expand-${e}`};Se.forwardRef(({className:e,children:t,light:r,dark:n,scrolling:a,fixed:c,sticky:f,scrollingNavbarOffset:o,color:m,transparent:_,expand:w,tag:E="nav",bgColor:C,...M},I)=>{const[D,$]=Y.useState(!1),B=Ht({"navbar-light":r,"navbar-dark":n,"scrolling-navbar":a||o,"top-nav-collapse":D,[`text-${m}`]:m&&_?D:m},c&&`fixed-${c}`,f&&"sticky-top","navbar",w&&kAe(w),C&&`bg-${C}`,e),F=Y.useCallback(()=>{o&&window.pageYOffset>o?$(!0):$(!1)},[o]);return Y.useEffect(()=>((a||o)&&window.addEventListener("scroll",F),()=>{window.removeEventListener("scroll",F)}),[F,a,o]),j.jsx(E,{className:B,role:"navigation",...M,ref:I,children:t})});Se.forwardRef(({children:e,className:t="",disabled:r=!1,active:n=!1,tag:a="a",...c},f)=>{const o=Ht("nav-link",r?"disabled":n?"active":"",t);return j.jsx(a,{"data-test":"nav-link",className:o,style:{cursor:"pointer"},ref:f,...c,children:e})});Se.forwardRef(({className:e,children:t,tag:r="a",...n},a)=>{const c=Ht("navbar-brand",e);return j.jsx(r,{className:c,ref:a,...n,children:t})});Se.forwardRef(({children:e,className:t,active:r,text:n,tag:a="li",...c},f)=>{const o=Ht("nav-item",r&&"active",n&&"navbar-text",t);return j.jsx(a,{...c,className:o,ref:f,children:e})});Se.forwardRef(({children:e,className:t,right:r,fullWidth:n=!0,left:a,tag:c="ul",...f},o)=>{const m=Ht("navbar-nav",n&&"w-100",r&&"ms-auto",a&&"me-auto",t);return j.jsx(c,{className:m,ref:o,...f,children:e})});Se.forwardRef(({children:e,className:t,tag:r="button",...n},a)=>{const c=Ht("navbar-toggler",t);return j.jsx(r,{...n,className:c,ref:a,children:e})});const IAe=Se.forwardRef(({children:e,bgColor:t,color:r,className:n,...a},c)=>{const f=Ht(t&&`bg-${t}`,r&&`text-${r}`,n);return j.jsx("footer",{className:f,...a,ref:c,children:e})});Se.forwardRef(({children:e,size:t,circle:r,center:n,end:a,start:c,className:f,...o},m)=>{const _=Ht("pagination",n&&"justify-content-center",r&&"pagination-circle",a&&"justify-content-end",t&&`pagination-${t}`,c&&"justify-content-start",f);return j.jsx("ul",{className:_,...o,ref:m,children:e})});Se.forwardRef(({children:e,className:t,tag:r="a",...n},a)=>{const c=Ht("page-link",t);return j.jsx(r,{className:c,...n,ref:a,children:e})});Se.forwardRef(({children:e,className:t,active:r,disabled:n,...a},c)=>{const f=Ht("page-item",r&&"active",n&&"disabled",t);return j.jsx("li",{className:f,...a,ref:c,children:e})});const DAe=Se.forwardRef(({animated:e,children:t,className:r,style:n,tag:a="div",valuenow:c,valuemax:f,striped:o,bgColor:m,valuemin:_,width:w,...E},C)=>{const M=Ht("progress-bar",m&&`bg-${m}`,o&&"progress-bar-striped",e&&"progress-bar-animated",r),I={width:`${w}%`,...n};return j.jsx(a,{className:M,style:I,ref:C,role:"progressbar",...E,"aria-valuenow":Number(w)??c,"aria-valuemin":Number(_),"aria-valuemax":Number(f),children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",height:n,style:a,...c},f)=>{const o=Ht("progress",e),m={height:`${n}px`,...a};return j.jsx(r,{className:o,ref:f,style:m,...c,children:Se.Children.map(t,_=>{if(!Se.isValidElement(_)||_.type!==DAe){console.error("Progress component only allows ProgressBar as child");return}else return _})})});const RAe=e=>{const[t,r]=Y.useState(!1),n=Y.useMemo(()=>new IntersectionObserver(([a])=>{r(a.isIntersecting)}),[]);return Y.useEffect(()=>{if(e.current)return n.observe(e.current),()=>n.disconnect()},[n,e]),t};Se.forwardRef(({className:e,size:t,contrast:r,value:n,defaultValue:a,id:c,labelClass:f,wrapperClass:o,wrapperStyle:m,wrapperTag:_="div",label:w,onChange:E,children:C,labelRef:M,labelStyle:I,type:D,onBlur:$,readonly:B=!1,...F},R)=>{var U,H;const[X,ee]=Y.useState(n||a),[oe,ae]=Y.useState(0),[ge,he]=Y.useState(!1),ve=Y.useRef(null),Ee=RAe(ve);Y.useImperativeHandle(R,()=>ve.current);const Re=Y.useRef(null),Ne=M||Re,Ve=Ht("form-outline",r&&"form-white",o),Ke=Ht("form-control",ge&&"active",D==="date"&&"active",t&&`form-control-${t}`,e),ke=Ht("form-label",f);Y.useEffect(()=>{if(!ve.current)return;const{value:Ot}=ve.current;Ot!=""?he(!0):he(!1)},[(U=ve.current)==null?void 0:U.value]),Y.useEffect(()=>{n!==void 0&&(n!=""?he(!0):he(!1))},[n]),Y.useEffect(()=>{a!==void 0&&(a!=""?he(!0):he(!1))},[a]);const Ge=Y.useCallback(()=>{var Ot;(Ot=Ne.current)!=null&&Ot.clientWidth&&ae(Ne.current.clientWidth*.8+8)},[Ne]);Y.useEffect(()=>{Ge()},[(H=Ne.current)==null?void 0:H.clientWidth,Ge,Ee]);const Ye=Ot=>{ee(Ot.target.value),E==null||E(Ot)},_t=Y.useCallback(Ot=>{ve.current&&(X!==void 0&&X!=""||n!==void 0&&n!=""||ve.current.value!=""?he(!0):he(!1),$&&$(Ot))},[X,n,$]);return j.jsxs(_,{className:Ve,style:m,children:[j.jsx("input",{type:D,readOnly:B,className:Ke,onBlur:_t,onChange:Ye,onFocus:Ge,value:n,defaultValue:a,id:c,ref:ve,...F}),w&&j.jsx("label",{className:ke,style:I,htmlFor:c,ref:Ne,children:w}),j.jsxs("div",{className:"form-notch",children:[j.jsx("div",{className:"form-notch-leading"}),j.jsx("div",{className:"form-notch-middle",style:{width:oe}}),j.jsx("div",{className:"form-notch-trailing"})]}),C]})});const LAe=({className:e,children:t,show:r=!1,id:n,navbar:a,tag:c="div",collapseRef:f,style:o,onShow:m,onHide:_,...w})=>{const[E,C]=Y.useState(!1),[M,I]=Y.useState(void 0),[D,$]=Y.useState(!1),B=Ht(D?"collapsing":"collapse",!D&&E&&"show",a&&"navbar-collapse",e),F=Y.useRef(null),R=f??F,U=Y.useCallback(()=>{E&&I(void 0)},[E]);return Y.useEffect(()=>{var H;M===void 0&&E&&I((H=R==null?void 0:R.current)==null?void 0:H.scrollHeight)},[M,E,R]),Y.useEffect(()=>{E!==r&&(r?m==null||m():_==null||_(),C(r)),E&&$(!0);const H=setTimeout(()=>{$(!1)},350);return()=>{clearTimeout(H)}},[r,E,m,_]),Y.useEffect(()=>{var H;I(E?(H=R==null?void 0:R.current)==null?void 0:H.scrollHeight:0)},[E,R,t]),Y.useEffect(()=>(window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U)}),[U]),j.jsx(c,{style:{height:M,...o},id:n,className:B,...w,ref:R,children:t})};Y.createContext(null);Se.forwardRef(({className:e,centered:t,children:r,size:n,scrollable:a,tag:c="div",...f},o)=>{const m=Ht("modal-dialog",a&&"modal-dialog-scrollable",t&&"modal-dialog-centered",n&&`modal-${n}`,e);return j.jsx(c,{className:m,...f,ref:o,children:r})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("modal-content",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("modal-header",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="h5",...n},a)=>{const c=Ht("modal-title",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("modal-body",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.forwardRef(({className:e,children:t,tag:r="div",...n},a)=>{const c=Ht("modal-footer",e);return j.jsx(r,{className:c,...n,ref:a,children:t})});Se.createContext({activeElement:null,setTargets:null});Se.forwardRef(({className:e,children:t,noBorder:r,textBefore:n,textAfter:a,noWrap:c,tag:f="div",textTag:o="span",textClass:m,size:_,textProps:w,...E},C)=>{const M=Ht("input-group",c&&"flex-nowrap",_&&`input-group-${_}`,e),I=Ht("input-group-text",r&&"border-0",m),D=$=>j.jsx(j.Fragment,{children:$&&Array.isArray($)?$.map((B,F)=>j.jsx(o,{className:I,...w,children:B},F)):j.jsx(o,{className:I,...w,children:$})});return j.jsxs(f,{className:M,ref:C,...E,children:[n&&D(n),t,a&&D(a)]})});Se.forwardRef(({className:e,children:t,isValidated:r,onReset:n,onSubmit:a,noValidate:c=!0,...f},o)=>{const[m,_]=Y.useState(r),w=Ht("needs-validation",m&&"was-validated",e);return j.jsx("form",{className:w,onSubmit:E=>{E.preventDefault(),_(!0),a&&a(E)},onReset:E=>{E.preventDefault(),_(!1),n&&n(E)},ref:o,noValidate:c,...f,children:t})});Se.forwardRef(({className:e,fill:t,pills:r,justify:n,children:a,...c},f)=>{const o=Ht("nav",r?"nav-pills":"nav-tabs",t&&"nav-fill",n&&"nav-justified",e);return j.jsx("ul",{className:o,ref:f,...c,children:a})});Se.forwardRef(({className:e,children:t,style:r,tag:n="li",...a},c)=>{const f=Ht("nav-item",e);return j.jsx(n,{className:f,style:{cursor:"pointer",...r},role:"presentation",ref:c,...a,children:t})});Se.forwardRef(({className:e,color:t,active:r,onShow:n,onHide:a,children:c,...f},o)=>{const m=Ht("nav-link",r&&"active",t&&`bg-${t}`,e);return Y.useEffect(()=>{r?n==null||n():a==null||a()},[r]),j.jsx("a",{className:m,ref:o,...f,children:c})});Se.forwardRef(({className:e,tag:t="div",children:r,...n},a)=>{const c=Ht("tab-content",e);return j.jsx(t,{className:c,ref:a,...n,children:r})});Se.forwardRef(({className:e,tag:t="div",show:r,children:n,...a},c)=>{const[f,o]=Y.useState(!1),m=Ht("tab-pane","fade",f&&"show",r&&"active",e);return Y.useEffect(()=>{let _;return r?_=setTimeout(()=>{o(!0)},100):o(!1),()=>{clearTimeout(_)}},[r]),j.jsx(t,{className:m,role:"tabpanel",ref:c,...a,children:n})});Y.createContext({active:0});const BW=Se.createContext({activeItem:0,setActiveItem:null,alwaysOpen:!1,initialActive:0});Se.forwardRef(({alwaysOpen:e,borderless:t,className:r,flush:n,initialActive:a=0,tag:c="div",children:f,onChange:o,...m},_)=>{const w=Ht("accordion",n&&"accordion-flush",t&&"accordion-borderless",r),[E,C]=Y.useState(a);return Y.useEffect(()=>{E&&o&&o(E)},[o,E]),j.jsx(c,{className:w,ref:_,...m,children:j.jsx(BW.Provider,{value:{activeItem:E,setActiveItem:C,alwaysOpen:e,initialActive:a},children:f})})});Se.forwardRef(({className:e,bodyClassName:t,bodyStyle:r,headerClassName:n,collapseId:a,headerTitle:c,headerStyle:f,btnClassName:o,tag:m="div",children:_,...w},E)=>{const{activeItem:C,setActiveItem:M,alwaysOpen:I,initialActive:D}=Y.useContext(BW),[$,B]=Y.useState(D),F=Ht("accordion-item",e),R=Ht("accordion-header",n),U=Ht("accordion-body",t),H=Ht("accordion-button",I?a!==$&&"collapsed":a!==C&&"collapsed",o),X=ee=>{I?B(ee!==$?ee:0):M(ee!==C?ee:0)};return j.jsxs(m,{className:F,ref:E,...w,children:[j.jsx("h2",{className:R,style:f,children:j.jsx("button",{onClick:()=>X(a),className:H,type:"button",children:c})}),j.jsx(LAe,{id:a.toString(),show:I?$===a:C===a,children:j.jsx("div",{className:U,style:r,children:_})})]})});const Xk=()=>j.jsxs(IAe,{bgColor:"light",className:"text-center text-lg-start text-muted",children:[j.jsxs("section",{className:"d-flex justify-content-center justify-content-lg-between p-4 border-bottom",children:[j.jsx("div",{className:"me-5 d-none d-lg-block",children:j.jsx("span",{children:"Get connected with us on social networks:"})}),j.jsxs("div",{children:[j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"facebook-f"})}),j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"twitter"})}),j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"google"})}),j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"instagram"})}),j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"linkedin"})}),j.jsx("a",{href:"",className:"me-4 text-reset",children:j.jsx(us,{fab:!0,icon:"github"})})]})]}),j.jsx("section",{className:"",children:j.jsx(AAe,{className:"text-center text-md-start mt-5",children:j.jsxs(MAe,{className:"mt-3",children:[j.jsxs($x,{md:"3",lg:"4",xl:"3",className:"mx-auto mb-4",children:[j.jsxs("h6",{className:"text-uppercase fw-bold mb-4",children:[j.jsx(us,{icon:"gem",className:"me-3"}),"Company name"]}),j.jsx("p",{children:"Here you can use rows and columns to organize your footer content. Lorem ipsum dolor sit amet, consectetur adipisicing elit."})]}),j.jsxs($x,{md:"2",lg:"2",xl:"2",className:"mx-auto mb-4",children:[j.jsx("h6",{className:"text-uppercase fw-bold mb-4",children:"Products"}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Angular"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"React"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Vue"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Laravel"})})]}),j.jsxs($x,{md:"3",lg:"2",xl:"2",className:"mx-auto mb-4",children:[j.jsx("h6",{className:"text-uppercase fw-bold mb-4",children:"Useful links"}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Pricing"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Settings"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Orders"})}),j.jsx("p",{children:j.jsx("a",{href:"#!",className:"text-reset",children:"Help"})})]}),j.jsxs($x,{md:"4",lg:"3",xl:"3",className:"mx-auto mb-md-0 mb-4",children:[j.jsx("h6",{className:"text-uppercase fw-bold mb-4",children:"Contact"}),j.jsxs("p",{children:[j.jsx(us,{icon:"home",className:"me-2"}),"New York, NY 10012, US"]}),j.jsxs("p",{children:[j.jsx(us,{icon:"envelope",className:"me-3"}),"info@example.com"]}),j.jsxs("p",{children:[j.jsx(us,{icon:"phone",className:"me-3"})," + 01 234 567 88"]}),j.jsxs("p",{children:[j.jsx(us,{icon:"print",className:"me-3"})," + 01 234 567 89"]})]})]})})}),j.jsxs("div",{className:"text-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.05)"},children:["© 2021 Copyright:",j.jsx("a",{className:"text-reset fw-bold",href:"https://mdbootstrap.com/",children:"MDBootstrap.com"})]})]});const jAe=()=>{const e=cf();return Y.useEffect(()=>{const t=localStorage.getItem("userData"),r=t?JSON.parse(t):null;e(Kl(r))},[e]),j.jsxs("div",{className:"container-fluid",children:[j.jsx(AS,{}),j.jsx("div",{children:j.jsx(fW,{})}),j.jsx("div",{className:"footerhero",children:j.jsx(Xk,{})})]})},$Ae=Y.forwardRef(({bsPrefix:e,className:t,striped:r,bordered:n,borderless:a,hover:c,size:f,variant:o,responsive:m,..._},w)=>{const E=ci(e,"table"),C=Yt(t,E,o&&`${E}-${o}`,f&&`${E}-${f}`,r&&`${E}-${typeof r=="string"?`striped-${r}`:"striped"}`,n&&`${E}-bordered`,a&&`${E}-borderless`,c&&`${E}-hover`),M=j.jsx("table",{..._,className:C,ref:w});if(m){let I=`${E}-responsive`;return typeof m=="string"&&(I=`${I}-${m}`),j.jsx("div",{className:I,children:M})}return M}),Kk=$Ae;var CS={};Object.defineProperty(CS,"__esModule",{value:!0});CS.default=void 0;var NAe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zAe=function(){function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),oA,uB,Hv=CS.confirmAlert=XAe,FW=Y,Xc=UW(FW),BAe=GU,lo=UW(BAe),hB=u1;function UW(e){return e&&e.__esModule?e:{default:e}}function FAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fB(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function UAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var eO=(uB=oA=function(e){UAe(t,e);function t(){var r,n,a,c;FAe(this,t);for(var f=arguments.length,o=Array(f),m=0;m<f;m++)o[m]=arguments[m];return c=(n=(a=fB(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(o))),a),a.handleClickButton=function(_){_.onClick&&_.onClick(),a.close()},a.handleClickOverlay=function(_){var w=a.props,E=w.closeOnClickOutside,C=w.onClickOutside,M=_.target===a.overlay;E&&M&&(C(),a.close()),_.stopPropagation()},a.close=function(){var _=a.props.afterClose;ZAe(),GAe(a.props),WAe(_)},a.keyboard=function(_){var w=a.props,E=w.closeOnEscape,C=w.onKeypressEscape,M=w.onkeyPress,I=w.keyCodeForClose,D=_.keyCode,$=D===27;I.includes(D)&&a.close(),E&&$&&(C(_),a.close()),M&&M()},a.componentDidMount=function(){document.addEventListener("keydown",a.keyboard,!1)},a.componentWillUnmount=function(){document.removeEventListener("keydown",a.keyboard,!1),a.props.willUnmount()},a.renderCustomUI=function(){var _=a.props,w=_.title,E=_.message,C=_.buttons,M=_.customUI,I={title:w,message:E,buttons:C,onClose:a.close};return M(I)},n),fB(a,c)}return zAe(t,[{key:"render",value:function(){var n=this,a=this.props,c=a.title,f=a.message,o=a.buttons,m=a.childrenElement,_=a.customUI,w=a.overlayClassName;return Xc.default.createElement("div",{className:"react-confirm-alert-overlay "+w,ref:function(C){return n.overlay=C},onClick:this.handleClickOverlay},Xc.default.createElement("div",{className:"react-confirm-alert"},_?this.renderCustomUI():Xc.default.createElement("div",{className:"react-confirm-alert-body"},c&&Xc.default.createElement("h1",null,c),f,m(),Xc.default.createElement("div",{className:"react-confirm-alert-button-group"},o.map(function(E,C){return Xc.default.createElement("button",NAe({key:C,className:E.className},E,{onClick:function(I){return n.handleClickButton(E)}}),E.label)})))))}}]),t}(FW.Component),oA.propTypes={title:lo.default.string,message:lo.default.string,buttons:lo.default.array.isRequired,childrenElement:lo.default.func,customUI:lo.default.func,closeOnClickOutside:lo.default.bool,closeOnEscape:lo.default.bool,keyCodeForClose:lo.default.arrayOf(lo.default.number),willUnmount:lo.default.func,afterClose:lo.default.func,onClickOutside:lo.default.func,onKeypressEscape:lo.default.func,onkeyPress:lo.default.func,overlayClassName:lo.default.string},oA.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},uB);CS.default=eO;var yy=null,tO="react-confirm-alert";function VAe(){var e=document.getElementById("react-confirm-alert-firm-svg");if(!e){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"feGaussianBlur");r.setAttribute("stdDeviation","0.3");var n=document.createElementNS(t,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(r);var a=document.createElementNS(t,"svg");a.setAttribute("id","react-confirm-alert-firm-svg"),a.setAttribute("class","react-confirm-alert-svg"),a.appendChild(n),document.body.appendChild(a)}}function WAe(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t),document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}function qAe(e){var t=document.getElementById(e.targetId||tO);e.targetId&&!t&&console.error("React Confirm Alert:","Can not get element id (#"+e.targetId+")"),t?(yy=(0,hB.createRoot)(t),yy.render(Xc.default.createElement(eO,e))):(document.body.children[0].classList.add("react-confirm-alert-blur"),t=document.createElement("div"),t.id=tO,document.body.appendChild(t),yy=(0,hB.createRoot)(t),yy.render(Xc.default.createElement(eO,e)))}function GAe(e){var t=document.getElementById(e.targetId||tO);t&&yy.unmount(t)}function HAe(){document.body.classList.add("react-confirm-alert-body-element")}function ZAe(){document.body.classList.remove("react-confirm-alert-body-element")}function XAe(e){HAe(),VAe(),qAe(e)}function KAe(){const[e,t]=Y.useState([]),[r,n]=Y.useState(!1);Y.useEffect(()=>{a()},[r]);const a=()=>{vi.get("http://localhost:3003/api/admin/users").then(o=>{console.log(o.data.users),t(o.data.users)}).catch(o=>{console.error(o)})},c=o=>{(()=>{Hv({title:"Do you Really want to block the User",buttons:[{label:"Yes",onClick:()=>{vi.put(`http://localhost:3003/api/admin/blockUser/${o}`).then(_=>{console.log(_.data),Qt.success(_.data),n(w=>!w)}).catch(_=>{console.error(_)})}},{label:"No"}]})})()},f=o=>{(()=>{Hv({title:"Do you Really want to Unblock the User",buttons:[{label:"Yes",onClick:()=>{vi.put(`http://localhost:3003/api/admin/UnblockUser/${o}`).then(_=>{console.log(_.data),Qt.success(_.data),n(w=>!w)}).catch(_=>{console.error(_)})}},{label:"No"}]})})()};return j.jsxs("div",{children:[j.jsx(Ro,{}),j.jsxs(Kk,{bordered:!0,hover:!0,size:"lg",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"User id"}),j.jsx("th",{children:"Name"}),j.jsx("th",{children:"E-mail"}),j.jsx("th",{children:"Phone"}),j.jsx("th",{children:"Trip History"}),j.jsx("th",{children:"Actions"})]})}),j.jsx("tbody",{children:e.map((o,m)=>j.jsxs("tr",{children:[j.jsx("td",{children:o._id}),j.jsx("td",{children:o.username}),j.jsx("td",{children:o.email}),j.jsx("td",{children:o.phone}),j.jsx("div",{style:{maxHeight:"10rem",overflowY:"scroll"},children:j.jsx("td",{style:{},children:o.trips.map((_,w)=>j.jsx("div",{children:j.jsxs("div",{style:{marginBottom:"30px"},children:["  ",j.jsxs("span",{style:{fontWeight:"bold"},children:["Trip ",w+1]}),":",j.jsxs("div",{children:["Date : ",new Date(_.createdAt).toLocaleDateString()]}),j.jsxs("div",{children:["Time :"," ",new Date(_.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),j.jsxs("div",{children:["Pickup Location: ",_.pickuplocation.name]}),j.jsxs("div",{children:["Destination: ",_.destination.name]})]})},w))})}),j.jsx("td",{children:o.isBlocked?j.jsx("button",{onClick:()=>f(o._id),style:{margin:"5px",borderRadius:"5px"},children:"Unblock"}):j.jsx("button",{onClick:()=>c(o._id),style:{margin:"5px",borderRadius:"5px"},children:"Block"})})]},m))})]})]})}const YAe=()=>j.jsxs("div",{children:[j.jsx(n_,{}),j.jsx("div",{className:"container",children:j.jsx("div",{className:"row",children:j.jsx("div",{className:"col-sm-2 col-md-12 col-lg-12 m-5",children:j.jsx(KAe,{})})})})]});var VW={},nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.cssValue=nf.parseLengthAndUnit=void 0;var JAe={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function WW(e){if(typeof e=="number")return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();r.includes(".")?t=parseFloat(r):t=parseInt(r,10);var n=(e.match(/[^0-9]*$/)||"").toString();return JAe[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}nf.parseLengthAndUnit=WW;function QAe(e){var t=WW(e);return"".concat(t.value).concat(t.unit)}nf.cssValue=QAe;var x_={};Object.defineProperty(x_,"__esModule",{value:!0});x_.createAnimation=void 0;var eCe=function(e,t,r){var n="react-spinners-".concat(e,"-").concat(r);if(typeof window>"u"||!window.document)return n;var a=document.createElement("style");document.head.appendChild(a);var c=a.sheet,f=`
    @keyframes `.concat(n,` {
      `).concat(t,`
    }
  `);return c&&c.insertRule(f,0),n};x_.createAnimation=eCe;var Kc=wn&&wn.__assign||function(){return Kc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kc.apply(this,arguments)},tCe=wn&&wn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rCe=wn&&wn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nCe=wn&&wn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&tCe(t,e,r);return rCe(t,e),t},iCe=wn&&wn.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(VW,"__esModule",{value:!0});var aA=nCe(Y),sA=nf,oCe=x_,dB=(0,oCe.createAnimation)("MoonLoader","100% {transform: rotate(360deg)}","moon");function aCe(e){var t=e.loading,r=t===void 0?!0:t,n=e.color,a=n===void 0?"#000000":n,c=e.speedMultiplier,f=c===void 0?1:c,o=e.cssOverride,m=o===void 0?{}:o,_=e.size,w=_===void 0?60:_,E=iCe(e,["loading","color","speedMultiplier","cssOverride","size"]),C=(0,sA.parseLengthAndUnit)(w),M=C.value,I=C.unit,D=M/7,$=Kc({display:"inherit",position:"relative",width:"".concat("".concat(M+D*2).concat(I)),height:"".concat("".concat(M+D*2).concat(I)),animation:"".concat(dB," ").concat(.6/f,"s 0s infinite linear"),animationFillMode:"forwards"},m),B=function(U){return{width:(0,sA.cssValue)(U),height:(0,sA.cssValue)(U),borderRadius:"100%"}},F=Kc(Kc({},B(D)),{backgroundColor:"".concat(a),opacity:"0.8",position:"absolute",top:"".concat("".concat(M/2-D/2).concat(I)),animation:"".concat(dB," ").concat(.6/f,"s 0s infinite linear"),animationFillMode:"forwards"}),R=Kc(Kc({},B(M)),{border:"".concat(D,"px solid ").concat(a),opacity:"0.1",boxSizing:"content-box",position:"absolute"});return r?aA.createElement("span",Kc({style:$},E),aA.createElement("span",{style:F}),aA.createElement("span",{style:R})):null}var sCe=VW.default=aCe;function lCe(){const[e,t]=Y.useState([]),[r,n]=Y.useState(!1),[a,c]=Y.useState(!1);Y.useEffect(()=>{c(!0),setTimeout(()=>{c(!1),console.log("Loading set to false")},4e3)},[]),Y.useEffect(()=>{m()},[r]);const f=_=>{(()=>{Hv({title:"Do you Really want to block the Driver",buttons:[{label:"Yes",onClick:()=>{vi.put(`http://localhost:3003/api/admin/blockDriver/${_}`).then(E=>{console.log(E.data),Qt.success(E.data),n(C=>!C)}).catch(E=>{console.error(E),Qt.error(E)})}},{label:"No"}]})})()},o=_=>{(()=>{Hv({title:"Do you Really want to Unblock the Driver",buttons:[{label:"Yes",onClick:()=>{vi.put(`http://localhost:3003/api/admin/UnblockDriver/${_}`).then(E=>{console.log(E.data),Qt.success(E.data),n(C=>!C)}).catch(E=>{console.error(E)})}},{label:"No"}]})})()},m=()=>{vi.get("http://localhost:3003/api/admin/approvedDriver").then(_=>{console.log(_.data.drivers),t(_.data.drivers)}).catch(_=>{console.error(_)})};return j.jsx(j.Fragment,{children:a?j.jsx("div",{className:"loader-container",children:j.jsx(sCe,{color:"#4c36d6",size:60,loading:a})}):j.jsxs("div",{children:[j.jsx(Ro,{}),j.jsxs(Kk,{bordered:!0,hover:!0,size:"lg",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Driver id"}),j.jsx("th",{style:{width:"170px"},children:"Name"}),j.jsx("th",{style:{width:"170px"},children:"E-mail"}),j.jsx("th",{children:"Phone"}),j.jsx("th",{children:"Actions"})]})}),j.jsx("tbody",{children:e.map((_,w)=>j.jsxs("tr",{children:[j.jsx("td",{children:_._id}),j.jsx("td",{children:_.Drivername}),j.jsx("td",{children:_.email}),j.jsx("td",{children:_.phone}),j.jsx("td",{children:_.isBlocked?j.jsx("button",{onClick:()=>o(_._id),style:{margin:"5px",borderRadius:"5px"},children:"Unblock"}):j.jsx("button",{onClick:()=>f(_._id),style:{margin:"5px",borderRadius:"5px"},children:"Block"})})]},w))})]})]})})}const cCe=()=>j.jsxs("div",{children:[j.jsx(n_,{}),j.jsx("div",{className:"container",children:j.jsx("div",{className:"row",children:j.jsx("div",{className:"col-sm-2 col-md-12 col-lg-12 m-5",children:j.jsx(lCe,{})})})})]});function uCe(){const[e,t]=Y.useState([]);Y.useEffect(()=>{vi.get("http://localhost:3003/api/admin/driver").then(n=>{t(n.data.drivers),console.log(n.data.drivers)})},[]);const r=n=>{(()=>{Hv({title:"Confirm to submit",message:"Are you sure to accept him as driver.",buttons:[{label:"Yes",onClick:()=>{vi.put(`http://localhost:3003/api/admin/acceptdriver/${n}`).then(c=>{console.log(c.data),Qt.success(c.data)}).catch(c=>{console.error(c)})}},{label:"No"}]})})()};return j.jsx("div",{children:j.jsxs("div",{className:"verification",children:[j.jsx(Ro,{}),j.jsxs(Kk,{bordered:!0,hover:!0,size:"lg",children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Driver id"}),j.jsx("th",{style:{width:"170px"},children:"Name"}),j.jsx("th",{style:{width:"170px"},children:"E-mail"}),j.jsx("th",{children:"Phone"}),j.jsx("th",{children:"RC No"}),j.jsx("th",{children:"License No"}),j.jsx("th",{style:{width:"4rem"},children:"Vehicle Details"}),j.jsx("th",{children:"Actions"})]})}),j.jsx("tbody",{children:e.map((n,a)=>j.jsxs("tr",{children:[j.jsx("td",{children:n._id}),j.jsx("td",{children:n.Drivername}),j.jsx("td",{children:n.email}),j.jsx("td",{children:n.phone}),j.jsx("td",{children:n.RCNo}),j.jsx("td",{children:n.licenseno}),j.jsxs("td",{children:[j.jsx("div",{children:j.jsx("img",{src:n.vehiclePhoto,alt:""})}),j.jsxs("div",{style:{width:"15rem"},children:[j.jsx("span",{style:{color:"blue",fontWeight:"bold"},children:" Model:"}),j.jsxs("span",{style:{fontWeight:"bold"},children:[n.VehicleModel,j.jsx("br",{})]})]}),j.jsxs("div",{children:[j.jsxs("span",{style:{color:"blue",fontWeight:"bold"},children:["vehicle No:"," "]}),j.jsx("span",{style:{fontWeight:"bold"},children:n.vehicleNo})]})," "]}),j.jsx("td",{children:j.jsxs("div",{style:{display:"flex"},children:[j.jsx("button",{onClick:()=>r(n._id),style:{margin:"5px",borderRadius:"5px"},children:"Accept"}),j.jsx("button",{style:{margin:"5px",borderRadius:"5px"},children:"Reject"})]})})]},a))})]})]})})}const hCe=()=>j.jsxs("div",{children:[j.jsx(n_,{}),j.jsx("div",{className:"container",children:j.jsx("div",{className:"row",children:j.jsx("div",{className:"col-sm-2 col-md-12 col-lg-12 m-5",children:j.jsx(uCe,{})})})})]}),fCe="/assets/logofinal-34f36033.png",dCe="/assets/pngwing.com (1)-d8824846.png";const Yk=()=>{var n;const e=localStorage.getItem("DriverData"),t=Lo(),r=()=>{localStorage.removeItem("drivertoken"),localStorage.removeItem("DriverData"),t("/driverlogin")};if(e){const a=JSON.parse(e),c=a==null?void 0:a.Drivername,f=(n=a.driver)==null?void 0:n.Drivername;return j.jsx(Pa,{className:"custom-driver-nav ",expand:"md",children:j.jsxs("div",{className:"container",children:[j.jsxs(Pa.Brand,{href:"#home ",className:"d-flex  align-items-center justify-content-center ",children:[j.jsx("img",{src:fCe,alt:"Logo",className:"driver-nav-logo"}),j.jsx("h1",{className:"mb-0 driver_heading",children:"Driver"})]}),j.jsx(Pa.Toggle,{"aria-controls":"basic-navbar-nav"}),j.jsxs(Pa.Collapse,{id:"basic-navbar-nav",children:[j.jsxs(kM,{className:"ms-auto ",children:[j.jsx(Ni,{to:"/driverhome",style:{color:location.pathname==="/driverhome"?"indigo":"black",fontWeight:location.pathname==="/driverhome"?"bolder":"normal",marginRight:"40px",textDecoration:"none"},children:"Home"}),j.jsx(Ni,{to:"#about",style:{color:"black",marginRight:"40px",textDecoration:"none"},children:"About"}),j.jsx(Ni,{to:"#services",style:{color:"black",marginRight:"30px",textDecoration:"none"},children:"Careers"}),j.jsx(Ni,{to:"#contact",style:{color:"black",marginRight:"40px",textDecoration:"none"},children:"Contact"})]}),e&&j.jsx(Ni,{to:"/driveprofile",children:j.jsxs("div",{className:"d-flex  flex-column  align-items-center",children:[j.jsx("img",{src:dCe,style:{height:"3rem",marginRight:"10px"},alt:""}),j.jsx("span",{style:{color:"black",textDecoration:"none"},children:f||c||""})]})}),j.jsxs(su,{children:[j.jsx(su.Toggle,{variant:"light",id:"dropdown-basic"}),j.jsx(su.Menu,{style:{border:"none"},children:j.jsx(su.Item,{onClick:r,children:"Logout"})})]})]})]})})}};const pCe="/assets/0_fGUT3jb2dvnw9OZP-69d71e11.gif";var qW={},PS={},jo={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.areaConversion=wr.timeConversion=wr.distanceConversion=wr.altitudeKeys=wr.latitudeKeys=wr.longitudeKeys=wr.MAXLON=wr.MINLON=wr.MAXLAT=wr.MINLAT=wr.earthRadius=wr.sexagesimalPattern=void 0;var mCe=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;wr.sexagesimalPattern=mCe;var gCe=6378137;wr.earthRadius=gCe;var yCe=-90;wr.MINLAT=yCe;var vCe=90;wr.MAXLAT=vCe;var _Ce=-180;wr.MINLON=_Ce;var xCe=180;wr.MAXLON=xCe;var bCe=["lng","lon","longitude",0];wr.longitudeKeys=bCe;var wCe=["lat","latitude",1];wr.latitudeKeys=wCe;var SCe=["alt","altitude","elevation","elev",2];wr.altitudeKeys=SCe;var ECe={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};wr.distanceConversion=ECe;var TCe={m:60,h:3600,d:86400};wr.timeConversion=TCe;var Ts={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};wr.areaConversion=Ts;Ts.sqm=Ts.m2;Ts.sqkm=Ts.km2;Ts.sqft=Ts.ft2;Ts.sqyd=Ts.yd2;Ts.sqin=Ts.in2;var mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.default=void 0;var ACe=function(t,r){return r.reduce(function(n,a){if(typeof t>"u"||t===null)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,a)&&typeof a<"u"&&typeof n>"u"?(n=a,a):n},void 0)},CCe=ACe;mf.default=CCe;var nm={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.default=void 0;var PCe=function(t){var r=t.toString().trim();return isNaN(parseFloat(r))?!1:parseFloat(r)===Number(r)},OCe=PCe;gf.default=OCe;var yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.default=void 0;var MCe=wr,kCe=function(t){return MCe.sexagesimalPattern.test(t.toString().trim())},ICe=kCe;yf.default=ICe;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.default=void 0;var DCe=wr,RCe=function(t){var r=new RegExp(DCe.sexagesimalPattern).exec(t.toString().trim());if(typeof r>"u"||r===null)throw new Error("Given value is not in sexagesimal format");var n=Number(r[2])/60||0,a=Number(r[4])/3600||0,c=parseFloat(r[1])+n+a;return["S","W"].includes(r[7])?-c:c},LCe=RCe;vf.default=LCe;var b_={},im={};Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var lA=wr,cA=jCe(mf);function jCe(e){return e&&e.__esModule?e:{default:e}}function pB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $Ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(r),!0).forEach(function(n){NCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NCe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zCe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:lA.longitudeKeys,latitude:lA.latitudeKeys,altitude:lA.altitudeKeys},n=(0,cA.default)(t,r.longitude),a=(0,cA.default)(t,r.latitude),c=(0,cA.default)(t,r.altitude);return $Ce({latitude:a,longitude:n},c?{altitude:c}:{})},BCe=zCe;im.default=BCe;var w_={};Object.defineProperty(w_,"__esModule",{value:!0});w_.default=void 0;var FCe=Jk(gf),UCe=Jk(yf),VCe=Jk(vf),mB=wr;function Jk(e){return e&&e.__esModule?e:{default:e}}var WCe=function e(t){return(0,FCe.default)(t)?!(parseFloat(t)>mB.MAXLAT||t<mB.MINLAT):(0,UCe.default)(t)?e((0,VCe.default)(t)):!1},qCe=WCe;w_.default=qCe;var S_={};Object.defineProperty(S_,"__esModule",{value:!0});S_.default=void 0;var GCe=Qk(gf),HCe=Qk(yf),ZCe=Qk(vf),gB=wr;function Qk(e){return e&&e.__esModule?e:{default:e}}var XCe=function e(t){return(0,GCe.default)(t)?!(parseFloat(t)>gB.MAXLON||t<gB.MINLON):(0,HCe.default)(t)?e((0,ZCe.default)(t)):!1},KCe=XCe;S_.default=KCe;Object.defineProperty(b_,"__esModule",{value:!0});b_.default=void 0;var YCe=eI(im),yB=eI(w_),vB=eI(S_);function eI(e){return e&&e.__esModule?e:{default:e}}var JCe=function(t){var r=(0,YCe.default)(t),n=r.latitude,a=r.longitude;if(Array.isArray(t)&&t.length>=2)return(0,vB.default)(t[0])&&(0,yB.default)(t[1]);if(typeof n>"u"||typeof a>"u")return!1;var c=t[a],f=t[n];return!(typeof f>"u"||typeof c>"u"||(0,yB.default)(f)===!1||(0,vB.default)(c)===!1)},QCe=JCe;b_.default=QCe;Object.defineProperty(nm,"__esModule",{value:!0});nm.default=void 0;var ePe=E_(gf),tPe=E_(yf),rPe=E_(vf),_B=E_(b_),nPe=E_(im);function E_(e){return e&&e.__esModule?e:{default:e}}function xB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(r),!0).forEach(function(n){rO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iPe=function e(t){if((0,ePe.default)(t))return Number(t);if((0,tPe.default)(t))return(0,rPe.default)(t);if((0,_B.default)(t)){var r=(0,nPe.default)(t);return Array.isArray(t)?t.map(function(n,a){return[0,1].includes(a)?e(n):n}):uA(uA(uA({},t),r.latitude&&rO({},r.latitude,e(t[r.latitude]))),r.longitude&&rO({},r.longitude,e(t[r.longitude])))}return Array.isArray(t)?t.map(function(n){return(0,_B.default)(n)?e(n):n}):t},oPe=iPe;nm.default=oPe;Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var aPe=wr,sPe=GW(mf),lPe=GW(nm);function GW(e){return e&&e.__esModule?e:{default:e}}var cPe=function(t,r){var n=(0,sPe.default)(t,aPe.latitudeKeys);if(!(typeof n>"u"||n===null)){var a=t[n];return r===!0?a:(0,lPe.default)(a)}},uPe=cPe;jo.default=uPe;var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var hPe=wr,fPe=HW(mf),dPe=HW(nm);function HW(e){return e&&e.__esModule?e:{default:e}}var pPe=function(t,r){var n=(0,fPe.default)(t,hPe.longitudeKeys);if(!(typeof n>"u"||n===null)){var a=t[n];return r===!0?a:(0,dPe.default)(a)}},mPe=pPe;$o.default=mPe;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.default=void 0;var gPe=function(t){return t*Math.PI/180},yPe=gPe;Fa.default=yPe;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.default=void 0;var vPe=function(t){return t*180/Math.PI},_Pe=vPe;sc.default=_Pe;Object.defineProperty(PS,"__esModule",{value:!0});PS.default=void 0;var xPe=OS(jo),bPe=OS($o),hA=OS(Fa),fA=OS(sc),bB=wr;function OS(e){return e&&e.__esModule?e:{default:e}}var wPe=function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,c=(0,xPe.default)(t),f=(0,bPe.default)(t),o=r/a,m=(0,hA.default)(n),_=(0,hA.default)(c),w=(0,hA.default)(f),E=Math.asin(Math.sin(_)*Math.cos(o)+Math.cos(_)*Math.sin(o)*Math.cos(m)),C=w+Math.atan2(Math.sin(m)*Math.sin(o)*Math.cos(_),Math.cos(o)-Math.sin(_)*Math.sin(E)),M=(0,fA.default)(C);return(M<bB.MINLON||M>bB.MAXLON)&&(C=(C+3*Math.PI)%(2*Math.PI)-Math.PI,M=(0,fA.default)(C)),{latitude:(0,fA.default)(E),longitude:M}},SPe=wPe;PS.default=SPe;var MS={};Object.defineProperty(MS,"__esModule",{value:!0});MS.default=void 0;var EPe=wr,TPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",n=EPe.areaConversion[r];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")},APe=TPe;MS.default=APe;var kS={};Object.defineProperty(kS,"__esModule",{value:!0});kS.default=void 0;var CPe=wr,PPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",n=CPe.distanceConversion[r];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")},OPe=PPe;kS.default=OPe;var IS={};Object.defineProperty(IS,"__esModule",{value:!0});IS.default=void 0;var Nx=wr,MPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(r){case"kmh":return t*Nx.timeConversion.h*Nx.distanceConversion.km;case"mph":return t*Nx.timeConversion.h*Nx.distanceConversion.mi;default:return t}},kPe=MPe;IS.default=kPe;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});DS.default=void 0;function wB(e,t){return LPe(e)||RPe(e,t)||DPe(e,t)||IPe()}function IPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DPe(e,t){if(e){if(typeof e=="string")return SB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SB(e,t)}}function SB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RPe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,c=void 0;try{for(var f=e[Symbol.iterator](),o;!(n=(o=f.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(m){a=!0,c=m}finally{try{!n&&f.return!=null&&f.return()}finally{if(a)throw c}}return r}}function LPe(e){if(Array.isArray(e))return e}var jPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,n=Math.pow(10,r);return Math.round(t*n)/n},$Pe=function(t){var r=t.toString().split("."),n=wB(r,2),a=n[0],c=n[1],f=Math.abs(Number(a)),o=+("0."+(c||0))*60,m=o.toString().split("."),_=Math.floor(o),w=jPe(+("0."+(m[1]||0))*60).toString(),E=w.split("."),C=wB(E,2),M=C[0],I=C[1],D=I===void 0?"0":I;return f+"° "+_.toString().padStart(2,"0")+"' "+M.padStart(2,"0")+"."+D.padEnd(1,"0")+'"'},NPe=$Pe;DS.default=NPe;var RS={},T_={},ol={},A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.default=void 0;var zPe=function(t){return t>1?1:t<-1?-1:t},BPe=zPe;A_.default=BPe;Object.defineProperty(ol,"__esModule",{value:!0});ol.default=void 0;var EB=LS(jo),TB=LS($o),Td=LS(Fa),FPe=LS(A_),UPe=wr;function LS(e){return e&&e.__esModule?e:{default:e}}var VPe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=typeof n<"u"&&!isNaN(n)?n:1;var a=(0,EB.default)(t),c=(0,TB.default)(t),f=(0,EB.default)(r),o=(0,TB.default)(r),m=Math.acos((0,FPe.default)(Math.sin((0,Td.default)(f))*Math.sin((0,Td.default)(a))+Math.cos((0,Td.default)(f))*Math.cos((0,Td.default)(a))*Math.cos((0,Td.default)(c)-(0,Td.default)(o))))*UPe.earthRadius;return Math.round(m/n)*n},WPe=VPe;ol.default=WPe;Object.defineProperty(T_,"__esModule",{value:!0});T_.default=void 0;var AB=qPe(ol);function qPe(e){return e&&e.__esModule?e:{default:e}}var GPe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:AB.default;return n=typeof n=="function"?n:AB.default,r.slice().sort(function(a,c){return n(t,a)-n(t,c)})},HPe=GPe;T_.default=HPe;Object.defineProperty(RS,"__esModule",{value:!0});RS.default=void 0;var ZPe=XPe(T_);function XPe(e){return e&&e.__esModule?e:{default:e}}var KPe=function(t,r){return(0,ZPe.default)(t,r)[0]},YPe=KPe;RS.default=YPe;var jS={};Object.defineProperty(jS,"__esModule",{value:!0});jS.default=void 0;var dA=tI(Fa),JPe=tI(jo),CB=tI($o),PB=wr;function tI(e){return e&&e.__esModule?e:{default:e}}var QPe=function(t){var r=0;if(t.length>2){for(var n,a,c,f=0;f<t.length;f++){f===t.length-2?(n=t.length-2,a=t.length-1,c=0):f===t.length-1?(n=t.length-1,a=0,c=1):(n=f,a=f+1,c=f+2);var o=(0,CB.default)(t[n]),m=(0,JPe.default)(t[a]),_=(0,CB.default)(t[c]);r+=((0,dA.default)(_)-(0,dA.default)(o))*Math.sin((0,dA.default)(m))}r=r*PB.earthRadius*PB.earthRadius/2}return Math.abs(r)},eOe=QPe;jS.default=eOe;var C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.default=void 0;var tOe=ZW(jo),rOe=ZW($o);function ZW(e){return e&&e.__esModule?e:{default:e}}var nOe=function(t){if(Array.isArray(t)===!1||t.length===0)throw new Error("No points were given.");return t.reduce(function(r,n){var a=(0,tOe.default)(n),c=(0,rOe.default)(n);return{maxLat:Math.max(a,r.maxLat),minLat:Math.min(a,r.minLat),maxLng:Math.max(c,r.maxLng),minLng:Math.min(c,r.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},iOe=nOe;C_.default=iOe;var $S={};Object.defineProperty($S,"__esModule",{value:!0});$S.default=void 0;var oOe=NS(jo),aOe=NS($o),Ad=NS(Fa),zx=NS(sc),oy=wr;function NS(e){return e&&e.__esModule?e:{default:e}}var sOe=function(t,r){var n=(0,oOe.default)(t),a=(0,aOe.default)(t),c=(0,Ad.default)(n),f=(0,Ad.default)(a),o=r/oy.earthRadius,m=c-o,_=c+o,w=(0,Ad.default)(oy.MAXLAT),E=(0,Ad.default)(oy.MINLAT),C=(0,Ad.default)(oy.MAXLON),M=(0,Ad.default)(oy.MINLON),I,D;if(m>E&&_<w){var $=Math.asin(Math.sin(o)/Math.cos(c));I=f-$,I<M&&(I+=Math.PI*2),D=f+$,D>C&&(D-=Math.PI*2)}else m=Math.max(m,E),_=Math.min(_,w),I=M,D=C;return[{latitude:(0,zx.default)(m),longitude:(0,zx.default)(I)},{latitude:(0,zx.default)(_),longitude:(0,zx.default)(D)}]},lOe=sOe;$S.default=lOe;var zS={};Object.defineProperty(zS,"__esModule",{value:!0});zS.default=void 0;var cOe=BS(jo),uOe=BS($o),OB=BS(Fa),MB=BS(sc);function BS(e){return e&&e.__esModule?e:{default:e}}var hOe=function(t){if(Array.isArray(t)===!1||t.length===0)return!1;var r=t.length,n=t.reduce(function(o,m){var _=(0,OB.default)((0,cOe.default)(m)),w=(0,OB.default)((0,uOe.default)(m));return{X:o.X+Math.cos(_)*Math.cos(w),Y:o.Y+Math.cos(_)*Math.sin(w),Z:o.Z+Math.sin(_)}},{X:0,Y:0,Z:0}),a=n.X/r,c=n.Y/r,f=n.Z/r;return{longitude:(0,MB.default)(Math.atan2(c,a)),latitude:(0,MB.default)(Math.atan2(f,Math.sqrt(a*a+c*c)))}},fOe=hOe;zS.default=fOe;var FS={};Object.defineProperty(FS,"__esModule",{value:!0});FS.default=void 0;var dOe=pOe(C_);function pOe(e){return e&&e.__esModule?e:{default:e}}var mOe=function(t){var r=(0,dOe.default)(t),n=r.minLat+(r.maxLat-r.minLat)/2,a=r.minLng+(r.maxLng-r.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(a.toFixed(6))}},gOe=mOe;FS.default=gOe;var US={},P_={};Object.defineProperty(P_,"__esModule",{value:!0});P_.default=void 0;var kB=VS(jo),IB=VS($o),Bx=VS(Fa),yOe=VS(sc);function VS(e){return e&&e.__esModule?e:{default:e}}var vOe=function(t,r){var n=(0,Bx.default)((0,IB.default)(r))-(0,Bx.default)((0,IB.default)(t)),a=Math.log(Math.tan((0,Bx.default)((0,kB.default)(r))/2+Math.PI/4)/Math.tan((0,Bx.default)((0,kB.default)(t))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n>0?n=(Math.PI*2-n)*-1:n=Math.PI*2+n),((0,yOe.default)(Math.atan2(n,a))+360)%360},_Oe=vOe;P_.default=_Oe;Object.defineProperty(US,"__esModule",{value:!0});US.default=void 0;var DB=xOe(P_);function xOe(e){return e&&e.__esModule?e:{default:e}}var bOe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DB.default,a=typeof n=="function"?n(t,r):(0,DB.default)(t,r);if(isNaN(a))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(a/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},wOe=bOe;US.default=wOe;var O_={};Object.defineProperty(O_,"__esModule",{value:!0});O_.default=void 0;var pA=XW(ol),RB=XW(A_);function XW(e){return e&&e.__esModule?e:{default:e}}var SOe=function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,c=(0,pA.default)(r,t,a),f=(0,pA.default)(t,n,a),o=(0,pA.default)(r,n,a),m=Math.acos((0,RB.default)((c*c+o*o-f*f)/(2*c*o))),_=Math.acos((0,RB.default)((f*f+o*o-c*c)/(2*f*o)));return m>Math.PI/2?c:_>Math.PI/2?f:Math.sin(m)*c},EOe=SOe;O_.default=EOe;var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.default=void 0;var LB=qS(jo),jB=qS($o),Ol=qS(Fa),TOe=qS(sc);function qS(e){return e&&e.__esModule?e:{default:e}}var AOe=function(t,r){var n=(0,LB.default)(r),a=(0,jB.default)(r),c=(0,LB.default)(t),f=(0,jB.default)(t),o=((0,TOe.default)(Math.atan2(Math.sin((0,Ol.default)(a)-(0,Ol.default)(f))*Math.cos((0,Ol.default)(n)),Math.cos((0,Ol.default)(c))*Math.sin((0,Ol.default)(n))-Math.sin((0,Ol.default)(c))*Math.cos((0,Ol.default)(n))*Math.cos((0,Ol.default)(a)-(0,Ol.default)(f))))+360)%360;return o},COe=AOe;WS.default=COe;var GS={};Object.defineProperty(GS,"__esModule",{value:!0});GS.default=void 0;var POe=OOe(ol);function OOe(e){return e&&e.__esModule?e:{default:e}}function c1(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c1=function(r){return typeof r}:c1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},c1(e)}var MOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:POe.default;return t.reduce(function(n,a){return c1(n)==="object"&&n.last!==null&&(n.distance+=r(a,n.last)),n.last=a,n},{last:null,distance:0}).distance},kOe=MOe;GS.default=kOe;var HS={};Object.defineProperty(HS,"__esModule",{value:!0});HS.default=void 0;var $B=rI(jo),NB=rI($o),mA=rI(Fa),zB=wr;function rI(e){return e&&e.__esModule?e:{default:e}}var IOe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=typeof n<"u"&&!isNaN(n)?n:1;var a=(0,$B.default)(t),c=(0,NB.default)(t),f=(0,$B.default)(r),o=(0,NB.default)(r),m=6356752314245e-6,_=1/298.257223563,w=(0,mA.default)(o-c),E,C,M,I,D,$,B=Math.atan((1-_)*Math.tan((0,mA.default)(parseFloat(a)))),F=Math.atan((1-_)*Math.tan((0,mA.default)(parseFloat(f)))),R=Math.sin(B),U=Math.cos(B),H=Math.sin(F),X=Math.cos(F),ee=w,oe,ae=100;do{var ge=Math.sin(ee),he=Math.cos(ee);if($=Math.sqrt(X*ge*(X*ge)+(U*H-R*X*he)*(U*H-R*X*he)),$===0)return 0;E=R*H+U*X*he,C=Math.atan2($,E),M=U*X*ge/$,I=1-M*M,D=E-2*R*H/I,isNaN(D)&&(D=0);var ve=_/16*I*(4+_*(4-3*I));oe=ee,ee=w+(1-ve)*_*M*(C+ve*$*(D+ve*E*(-1+2*D*D)))}while(Math.abs(ee-oe)>1e-12&&--ae>0);if(ae===0)return NaN;var Ee=I*(zB.earthRadius*zB.earthRadius-m*m)/(m*m),Re=1+Ee/16384*(4096+Ee*(-768+Ee*(320-175*Ee))),Ne=Ee/1024*(256+Ee*(-128+Ee*(74-47*Ee))),Ve=Ne*$*(D+Ne/4*(E*(-1+2*D*D)-Ne/6*D*(-3+4*$*$)*(-3+4*D*D))),Ke=m*Re*(C-Ve);return Math.round(Ke/n)*n},DOe=IOe;HS.default=DOe;var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});ZS.default=void 0;var ROe=function(t){if(/^(NNE|NE|NNW|N)$/.test(t))return"N";if(/^(ENE|E|ESE|SE)$/.test(t))return"E";if(/^(SSE|S|SSW|SW)$/.test(t))return"S";if(/^(WSW|W|WNW|NW)$/.test(t))return"W"},LOe=ROe;ZS.default=LOe;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});XS.default=void 0;var jOe=$Oe(ol);function $Oe(e){return e&&e.__esModule?e:{default:e}}var NOe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jOe.default,a=n(t,r),c=Number(r.time)-Number(t.time),f=a/c*1e3;return f},zOe=NOe;XS.default=zOe;var KS={};Object.defineProperty(KS,"__esModule",{value:!0});KS.default=void 0;var gA=BOe(ol);function BOe(e){return e&&e.__esModule?e:{default:e}}var FOe=function(t,r,n){return(0,gA.default)(r,t)+(0,gA.default)(t,n)===(0,gA.default)(r,n)},UOe=FOe;KS.default=UOe;var YS={};Object.defineProperty(YS,"__esModule",{value:!0});YS.default=void 0;var Fx=KW(jo),xa=KW($o);function KW(e){return e&&e.__esModule?e:{default:e}}var VOe=function(t,r){for(var n=!1,a=r.length,c=-1,f=a-1;++c<a;f=c)((0,xa.default)(r[c])<=(0,xa.default)(t)&&(0,xa.default)(t)<(0,xa.default)(r[f])||(0,xa.default)(r[f])<=(0,xa.default)(t)&&(0,xa.default)(t)<(0,xa.default)(r[c]))&&(0,Fx.default)(t)<((0,Fx.default)(r[f])-(0,Fx.default)(r[c]))*((0,xa.default)(t)-(0,xa.default)(r[c]))/((0,xa.default)(r[f])-(0,xa.default)(r[c]))+(0,Fx.default)(r[c])&&(n=!n);return n},WOe=VOe;YS.default=WOe;var JS={};Object.defineProperty(JS,"__esModule",{value:!0});JS.default=void 0;var qOe=GOe(O_);function GOe(e){return e&&e.__esModule?e:{default:e}}var HOe=function(t,r,n,a){return(0,qOe.default)(t,r,n)<a},ZOe=HOe;JS.default=ZOe;var QS={};Object.defineProperty(QS,"__esModule",{value:!0});QS.default=void 0;var XOe=KOe(ol);function KOe(e){return e&&e.__esModule?e:{default:e}}var YOe=function(t,r,n){var a=.01;return(0,XOe.default)(t,r,a)<n},JOe=YOe;QS.default=JOe;var eE={};Object.defineProperty(eE,"__esModule",{value:!0});eE.default=void 0;function QOe(e,t){return nMe(e)||rMe(e,t)||tMe(e,t)||eMe()}function eMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tMe(e,t){if(e){if(typeof e=="string")return BB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BB(e,t)}}function BB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rMe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,c=void 0;try{for(var f=e[Symbol.iterator](),o;!(n=(o=f.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(m){a=!0,c=m}finally{try{!n&&f.return!=null&&f.return()}finally{if(a)throw c}}return r}}function nMe(e){if(Array.isArray(e))return e}var iMe=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");var r=t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", "),n=r.map(function(a){var c=a.split(" "),f=QOe(c,2),o=f[0],m=f[1];return{longitude:parseFloat(o),latitude:parseFloat(m)}});return n},oMe=iMe;eE.default=oMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return Zt.default}});var r=kt(PS),n=kt(MS),a=kt(kS),c=kt(IS),f=kt(DS),o=kt(RS),m=kt(jS),_=kt(C_),w=kt($S),E=kt(zS),C=kt(FS),M=kt(US),I=kt(mf),D=kt(im),$=kt(ol),B=kt(O_),F=kt(WS),R=kt(jo),U=kt($o),H=kt(GS),X=kt(HS),ee=kt(P_),oe=kt(ZS),ae=kt(XS),ge=kt(gf),he=kt(KS),ve=kt(YS),Ee=kt(JS),Re=kt(QS),Ne=kt(yf),Ve=kt(b_),Ke=kt(w_),ke=kt(S_),Ge=kt(T_),Ye=kt(vf),_t=kt(nm),Ot=kt(Fa),bt=kt(sc),Zt=kt(eE),Xt=wr;Object.keys(Xt).forEach(function(Mt){Mt==="default"||Mt==="__esModule"||Object.prototype.hasOwnProperty.call(t,Mt)||Object.defineProperty(e,Mt,{enumerable:!0,get:function(){return Xt[Mt]}})});function kt(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}})(qW);const yA=Bl("http://localhost:3003"),aMe=()=>{var B,F,R,U,H,X,ee,oe,ae,ge,he,ve,Ee,Re,Ne,Ve;const e=Lo(),[t,r]=Y.useState(null),[n,a]=Y.useState(!1),[c,f]=Y.useState(0),[o,m]=Y.useState(0),_=(F=(B=t==null?void 0:t.trip)==null?void 0:B.destinationLocation)==null?void 0:F.lat,w=(U=(R=t==null?void 0:t.trip)==null?void 0:R.destinationLocation)==null?void 0:U.lon,E=(X=(H=t==null?void 0:t.trip)==null?void 0:H.pickupLocation)==null?void 0:X.lat,C=(oe=(ee=t==null?void 0:t.trip)==null?void 0:ee.pickupLocation)==null?void 0:oe.lon,M=localStorage.getItem("DriverData"),D=M?JSON.parse(M):null;console.log(D,"driverdetailssss"),Y.useEffect(()=>{if(_&&w&&E&&C){const Ke={latitude:_,longitude:w},ke={latitude:E,longitude:C},Ye=qW.getDistance(Ke,ke)/1e3;f(Ye),console.log(Ye,"Distance in kilometers");const bt=Math.round(10+10*Ye);m(bt)}},[t,E,C,_,w]),Y.useEffect(()=>(yA.on("newRideRequest",Ke=>{console.log(Ke,"trip iddd"),a(!0),r(Ke)}),()=>{yA.off("newRideRequest")}),[]);const $=Ke=>{const ke=Ke;console.log(ke,"dataaaaaaaaaaa"),e("/drivermap",{state:ke}),yA.emit("acceptedride",{driverdetails:D,distance:c,fare:o})};return j.jsxs("div",{children:[j.jsx("div",{children:j.jsx("img",{className:"driverbg-image",src:pCe,alt:""})}),j.jsxs(Aa,{show:n,onHide:()=>a(!1),size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[j.jsx(Aa.Header,{closeButton:!0,className:"text-center",style:{backgroundColor:"#3498db",color:"white"},children:j.jsx(Aa.Title,{id:"contained-modal-title-vcenter",children:"New trip is available"})}),j.jsx(Aa.Body,{style:{padding:"20px"},children:t?j.jsxs("div",{style:{textAlign:"center"},children:[j.jsxs("p",{children:["User: ",(ge=(ae=t==null?void 0:t.userDetails)==null?void 0:ae.user)==null?void 0:ge.username]}),j.jsxs("p",{children:["Phone: ",(ve=(he=t==null?void 0:t.userDetails)==null?void 0:he.user)==null?void 0:ve.phone]}),j.jsxs("p",{children:["Pickup Location: ",(Re=(Ee=t==null?void 0:t.trip)==null?void 0:Ee.pickupLocation)==null?void 0:Re.name]}),j.jsxs("p",{children:["Destination: ",(Ve=(Ne=t==null?void 0:t.trip)==null?void 0:Ne.destinationLocation)==null?void 0:Ve.name]}),j.jsxs("p",{children:["Distance: ",c,"kms"]}),j.jsxs("p",{children:["Fare: ₹ ",o]})]}):j.jsx("p",{children:"New ride is available"})}),j.jsx(Aa.Footer,{style:{backgroundColor:"#f2f2f2",textAlign:"center"},children:j.jsx(Wb,{variant:"primary",onClick:()=>$(t),children:"Take trip"})})]})]})},sMe=()=>{const e=cf();return Y.useEffect(()=>{const t=localStorage.getItem("DriverData"),r=t?JSON.parse(t):null;e(Kl(r))},[e]),j.jsxs("div",{className:"col-sm-12",children:[j.jsx(Yk,{}),j.jsx(aMe,{})]})},lMe="/assets/4333097-3cb212c7.jpg";function cMe(){var B,F,R,U;const e=cf(),t=tM(xM),r=(B=t==null?void 0:t.user)==null?void 0:B._id,[n,a]=Y.useState(!1),[c,f]=Y.useState(((F=t==null?void 0:t.user)==null?void 0:F.name)||""),[o,m]=Y.useState(((R=t==null?void 0:t.user)==null?void 0:R.email)||""),[_,w]=Y.useState(((U=t==null?void 0:t.user)==null?void 0:U.phone)||""),[E,C]=Y.useState([]),[M,I]=Y.useState(!0);Y.useEffect(()=>{(async()=>{const X=localStorage.getItem("userData");if(X){const ee=JSON.parse(X);e(Kl(ee)),ee&&ee.user?(f(ee.user.username||""),m(ee.user.email||""),w(ee.user.phone||"")):ee?(f(ee.username||""),m(ee.email||""),w(ee.phone||"")):(f(""),m(""),w(""))}I(!1)})()},[e]),Y.useEffect(()=>{var oe;const H=localStorage.getItem("userData"),ee=(oe=(H?JSON.parse(H):null).user)==null?void 0:oe._id;Fh.get(`/finduser/${ee||r}`).then(ae=>{const ge=ae.data.user;if(ge){const he=ge.trips;C(he)}else console.error("User data is undefined.")})},[]),console.log(E);const D=()=>{a(!0)},$=async()=>{var ae;const H=localStorage.getItem("userData"),X=H?JSON.parse(H):null,ee=X._id,oe=(ae=X.user)==null?void 0:ae._id;try{if(!H){console.log("User data not available yet.");return}const ge={username:c,email:o,phone:_},he=await vi.put(`http://localhost:3003/api/users/editProfile/${ee||oe}`,ge);if(he.data.updateUser){const ve=he.data.updateUser;e(Kl(ve)),localStorage.setItem("userData",JSON.stringify(ve)),a(!1)}else console.log("Server did not respond with updated user data.")}catch(ge){console.error("Error updating user profile:",ge)}};return M?j.jsx("div",{children:"Loading..."}):j.jsxs("div",{children:[j.jsx(AS,{}),j.jsx("section",{className:"userprofilebackground vh-100",children:j.jsx("div",{className:"container py-5 h-100",children:j.jsx("div",{className:"row d-flex justify-content-center align-items-center h-100",children:j.jsx("div",{className:" borerProfile col col-lg-12 mb-4 mb-lg-0 ",children:j.jsx("div",{className:"card mb-3",style:{borderRadius:".5rem"},children:j.jsxs("div",{className:"row g-0",children:[j.jsxs("div",{className:"col-md-4 gradient-custom text-center text-white",style:{borderTopLeftRadius:".5rem",borderBottomLeftRadius:".5rem"},children:[j.jsx("img",{className:"driver-profile-img",src:lMe,style:{width:"15rem",height:"18rem",paddingTop:"20%"},alt:""}),j.jsx("h5",{style:{color:"black"},children:c}),!n&&j.jsx("button",{className:"btn btn-primary",onClick:D,children:"Edit Profile"})]}),j.jsx("div",{className:"col-md-8",children:j.jsxs("div",{className:"card-body p-4",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Information"}),j.jsx("hr",{className:"mt-0 mb-4"}),j.jsxs("div",{className:"row pt-1",children:[j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Username"}),n?j.jsx("input",{type:"text",value:c,onChange:H=>f(H.target.value)}):j.jsx("p",{className:"text-muted",style:{fontWeight:"bold"},children:c})]}),j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Email"}),n?j.jsx("input",{type:"text",value:o,onChange:H=>m(H.target.value)}):j.jsx("p",{className:"text-muted",style:{fontWeight:"bold"},children:o})]}),j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Phone"}),n?j.jsx("input",{type:"text",value:_,onChange:H=>w(H.target.value)}):j.jsx("p",{className:"text-muted",style:{fontWeight:"bold"},children:_})]})]}),n?j.jsx("button",{className:"btn btn-success",onClick:$,children:"Save"}):null,j.jsxs("div",{children:[j.jsx("div",{className:"text-trip-history",children:j.jsx("h4",{className:"trip-history-title",children:"Trip History"})}),j.jsx("div",{className:"trip-history",children:E.map(H=>j.jsx("div",{className:"trip-item",children:j.jsxs("div",{className:"profile-date",children:[j.jsx("div",{className:"trip-location",children:j.jsxs("h5",{style:{fontWeight:"bolder"},children:[H.pickuplocation.name," To"," ",H.destination.name]})}),j.jsxs("p",{className:"date-time",children:[j.jsx("span",{className:"date",children:new Date(H.createdAt).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}),j.jsxs("span",{className:"time",children:["Time:"," ",new Date(H.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),j.jsxs("div",{className:"driver-details",children:[j.jsxs("p",{className:"driver-name",children:[j.jsx("span",{className:"label",children:"Driver Name:"})," ",H.driverDetails.name,"-"]}),j.jsx("p",{className:"driver-phone",children:H.driverDetails.phone})]}),j.jsxs("p",{className:"fare",children:[j.jsx("span",{className:"label",children:"Fare:"})," ₹",H.fare]})]})},H._id))})]})]})})]})})})})})}),j.jsx(Xk,{})]})}const uMe="/assets/4333097-3cb212c7.jpg";var YW={},qb=wn&&wn.__assign||function(){return qb=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qb.apply(this,arguments)},hMe=wn&&wn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fMe=wn&&wn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dMe=wn&&wn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&hMe(t,e,r);return fMe(t,e),t},pMe=wn&&wn.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(YW,"__esModule",{value:!0});var mMe=dMe(Y),FB=nf,gMe=x_,yMe=(0,gMe.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function vMe(e){var t=e.loading,r=t===void 0?!0:t,n=e.color,a=n===void 0?"#000000":n,c=e.speedMultiplier,f=c===void 0?1:c,o=e.cssOverride,m=o===void 0?{}:o,_=e.size,w=_===void 0?35:_,E=pMe(e,["loading","color","speedMultiplier","cssOverride","size"]),C=qb({background:"transparent !important",width:(0,FB.cssValue)(w),height:(0,FB.cssValue)(w),borderRadius:"100%",border:"2px solid",borderTopColor:a,borderBottomColor:"transparent",borderLeftColor:a,borderRightColor:a,display:"inline-block",animation:"".concat(yMe," ").concat(.75/f,"s 0s infinite linear"),animationFillMode:"both"},m);return r?mMe.createElement("span",qb({style:C},E)):null}var _Me=YW.default=vMe;function xMe(){var U,H,X,ee;const e=cf(),t=tM(xM),[r,n]=Y.useState(!1),[a,c]=Y.useState(((U=t==null?void 0:t.driver)==null?void 0:U.Drivername)||""),[f,o]=Y.useState(((H=t==null?void 0:t.driver)==null?void 0:H.email)||""),[m,_]=Y.useState(((X=t==null?void 0:t.driver)==null?void 0:X.phone)||""),[w,E]=Y.useState(!1),[C,M]=Y.useState([]);Y.useEffect(()=>{(async()=>{var ge;E(!0);const ae=localStorage.getItem("DriverData");if(ae){const he=JSON.parse(ae);e(Kl(he)),console.log((ge=he.driver)==null?void 0:ge.Drivername),he&&he.driver?(c(he.driver.Drivername||""),o(he.driver.email||""),_(he.driver.phone||"")):he?(c(he.Drivername||""),o(he.email||""),_(he.phone||"")):(c(""),o(""),_(""))}E(!1)})()},[e]);const I=()=>{n(!0)},D=localStorage.getItem("DriverData"),$=D?JSON.parse(D):null,B=$==null?void 0:$._id,F=(ee=$.driver)==null?void 0:ee._id;console.log(B,"00990"),console.log(F,"madnawdsafd");const R=async()=>{try{if(B||F){console.log("User data available.");const oe={Drivername:a,email:f,phone:m},ae=await vi.put(`http://localhost:3003/api/drivers/editprofile/${B||F}`,oe);if(ae.data.updateUser){const ge=ae.data.updateUser;e(Kl(ge)),localStorage.setItem("DriverData",JSON.stringify(ge)),n(!1)}else console.log("Server did not respond with updated user data.")}else console.log("User data not available yet.")}catch(oe){console.error("Error updating user profile:",oe)}};return Y.useEffect(()=>{bU.get(`/driverhistory/${B||F}`).then(oe=>{var ae;console.log(oe),M((ae=oe==null?void 0:oe.data)==null?void 0:ae.trips),E(!1)}).catch(oe=>{console.log(oe)})},[]),j.jsxs("div",{children:[j.jsx(Yk,{}),w?j.jsx(_Me,{color:"#36d7b7",loading:w,size:150,"aria-label":"Loading Spinner","data-testid":"loader"}):j.jsxs("div",{children:[j.jsx("section",{className:"driverprofilebackground vh-100",children:j.jsx("div",{className:"container py-5 h-100",children:j.jsx("div",{className:"row d-flex justify-content-center align-items-center h-100",children:j.jsx("div",{className:"borerProfile col col-lg-12 mb-4 mb-lg-0 ",children:j.jsx("div",{className:"card mb-3",style:{borderRadius:".5rem"},children:j.jsxs("div",{className:"row g-0",children:[j.jsxs("div",{className:"col-md-4 gradient-custom text-center text-white",style:{borderTopLeftRadius:".5rem",borderBottomLeftRadius:".5rem"},children:[j.jsx("img",{className:"driver-profile-img",src:uMe,style:{width:"15rem",height:"18rem",paddingTop:"20%"},alt:""}),j.jsx("h5",{style:{color:"black"},children:a}),!r&&j.jsx("button",{style:{marginTop:"10px"},className:"btn btn-primary",onClick:I,children:"Edit Profile"})]}),j.jsx("div",{className:"col-md-8",children:j.jsxs("div",{className:"card-body p-4",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Information"}),j.jsx("hr",{className:"mt-0 mb-4"}),j.jsxs("div",{className:"row pt-1",children:[j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"DriverName"}),r?j.jsx("input",{type:"text",value:a,onChange:oe=>c(oe.target.value)}):j.jsx("p",{style:{fontWeight:"bold"},className:"text-muted",children:a})]}),j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Email"}),r?j.jsx("input",{type:"text",value:f,onChange:oe=>o(oe.target.value)}):j.jsx("p",{style:{fontWeight:"bold"},className:"text-muted",children:f})]}),j.jsxs("div",{className:"col-6 mb-3",children:[j.jsx("h6",{style:{fontWeight:"bold"},children:"Phone"}),r?j.jsx("input",{type:"text",value:m,onChange:oe=>_(oe.target.value)}):j.jsx("p",{style:{fontWeight:"bold"},className:"text-muted",children:m})]})]}),r?j.jsx("button",{className:"btn btn-success",onClick:R,children:"Save"}):null,j.jsxs("div",{children:[j.jsx("div",{className:"text-trip-history",children:j.jsx("h4",{className:"trip-history-title",children:"Trip History"})}),j.jsx("div",{className:"trip-history",children:C.map(oe=>j.jsx("div",{className:"trip-item",children:j.jsxs("div",{className:"profile-date",children:[j.jsx("div",{className:"trip-location",children:j.jsxs("h5",{style:{fontWeight:"bolder"},children:[oe.pickuplocation.name," To"," ",oe.destination.name]})}),j.jsxs("p",{className:"date-time",children:[j.jsx("span",{className:"date",children:new Date(oe.createdAt).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}),j.jsxs("span",{className:"time",children:["Time:"," ",new Date(oe.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),j.jsxs("div",{className:"driver-details",children:[j.jsxs("p",{className:"driver-name",children:[j.jsx("span",{className:"label",children:"User Name:"})," ",oe.user.username,"-"]}),j.jsx("p",{className:"driver-phone",children:oe.user.phone})]}),j.jsxs("p",{className:"fare",children:[j.jsx("span",{className:"label",children:"Fare:"})," ₹",oe.fare]})]})},oe._id))})]})]})})]})})})})})}),j.jsx(Xk,{})]})]})}var JW={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(wn,function(){var r,n,a;function c(o,m){if(!r)r=m;else if(!n)n=m;else{var _="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",w={};r(w),a=m(w),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}c(["exports"],function(o){var m=typeof self<"u"?self:{},_="2.15.0";let w;const E={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(w==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{w={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{w=s}}return w},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!E.API_URL)return null;try{const s=new URL(E.API_URL);return s.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":s.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},C={supported:!1,testSupport:function(s){!D&&I&&($?B(s):M=s)}};let M,I,D=!1,$=!1;function B(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,I),s.isContextLost())return;C.supported=!0}catch{}s.deleteTexture(i),D=!0}m.document&&(I=m.document.createElement("img"),I.onload=function(){M&&B(M),M=null,$=!0},I.onerror=function(){D=!0,M=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const F="01";function R(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var U=H;function H(s,i,l,h){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=h}H.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,h=0;h<8;h++){var p=this.sampleCurveX(l)-s;if(Math.abs(p)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var x=0,S=1;for(l=s,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-s)<i));h++)s>p?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var X=R(U),ee=oe;function oe(s,i){this.x=s,this.y=i}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,l=s.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),l=Math.sin(s),h=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=h,this},_rotateAround:function(s,i){var l=Math.cos(s),h=Math.sin(s),p=i.y+h*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-h*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oe.convert=function(s){return s instanceof oe?s:Array.isArray(s)?new oe(s[0],s[1]):s};var ae=R(ee);const ge=Math.PI/180,he=180/Math.PI;function ve(s){return s*ge}function Ee(s){return s*he}const Re=[[0,0],[1,0],[1,1],[0,1]];function Ne(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,l=i*s;return 4*(s<.5?l:3*(s-i)+l-.75)}function Ve(s,i,l,h){const p=new X(s,i,l,h);return function(y){return p.solve(y)}}const Ke=Ve(.25,.1,.25,1);function ke(s,i,l){return Math.min(l,Math.max(i,s))}function Ge(s,i,l){return(l=ke((l-s)/(i-s),0,1))*l*(3-2*l)}function Ye(s,i,l){const h=l-i,p=((s-i)%h+h)%h+i;return p===i?l:p}function _t(s,i,l){if(!s.length)return l(null,[]);let h=s.length;const p=new Array(s.length);let y=null;s.forEach((x,S)=>{i(x,(A,P)=>{A&&(y=A),p[S]=P,--h==0&&l(y,p)})})}function Ot(s){const i=[];for(const l in s)i.push(s[l]);return i}function bt(s,...i){for(const l of i)for(const h in l)s[h]=l[h];return s}let Zt=1;function Xt(){return Zt++}function kt(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function Mt(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function $r(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function St(s,i){s.forEach(l=>{i[l]&&(i[l]=i[l].bind(i))})}function Dt(s,i){return s.indexOf(i,s.length-i.length)!==-1}function xt(s,i,l){const h={};for(const p in s)h[p]=i.call(l||this,s[p],p,s);return h}function dt(s,i,l){const h={};for(const p in s)i.call(l||this,s[p],p,s)&&(h[p]=s[p]);return h}function er(s){return Array.isArray(s)?s.map(er):typeof s=="object"&&s?xt(s,er):s}const Kt={};function Nt(s){Kt[s]||(typeof console<"u"&&console.warn(s),Kt[s]=!0)}function vr(s,i,l){return(l.y-s.y)*(i.x-s.x)>(i.y-s.y)*(l.x-s.x)}function nn(s){let i=0;for(let l,h,p=0,y=s.length,x=y-1;p<y;x=p++)l=s[p],h=s[x],i+=(h.x-l.x)*(l.y+h.y);return i}function mn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function En(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,p,y)=>{const x=p||y;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let gn=null;function Gn(s){if(gn==null){const i=s.navigator?s.navigator.userAgent:null;gn=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return gn}function xi(s){try{const i=m[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Hn(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const bi="mapbox-tiles";let _r=500,ui=50,Yn,No;function ju(){try{return m.caches}catch{}}function al(){ju()&&!Yn&&(Yn=m.caches.open(bi))}function lc(s){const i=s.indexOf("?");if(i<0)return s;const l=function(p){const y=p.indexOf("?");return y>0?p.slice(y+1).split("&"):[]}(s),h=l.filter(p=>{const y=p.split("=");return y[0]==="language"||y[0]==="worldview"});return h.length?`${s.slice(0,i)}?${h.join("&")}`:s.slice(0,i)}let $u=1/0;const sl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(sl);class Cs extends Error{constructor(i,l,h){l===401&&ze(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ll=mn()?()=>self.worker&&self.worker.referrer:()=>(m.location.protocol==="blob:"?m.parent:m).location.href,cl=function(s,i){if(!(/^file:/.test(l=s.url)||/^file:/.test(ll())&&!/^\w+:/.test(l))){if(m.fetch&&m.Request&&m.AbortController&&m.Request.prototype.hasOwnProperty("signal"))return function(h,p){const y=new m.AbortController,x=new m.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:ll(),referrerPolicy:h.referrerPolicy,signal:y.signal});let S=!1,A=!1;const P=(L=x.url).indexOf("sku=")>0&&ze(L);var L;h.type==="json"&&x.headers.set("Accept","application/json");const z=(G,Z,Q)=>{if(A)return;if(G&&G.message!=="SecurityError"&&Nt(G.toString()),Z&&Q)return V(Z);const ie=Date.now();m.fetch(x).then(de=>{if(de.ok){const we=P?de.clone():null;return V(de,we,ie)}return p(new Cs(de.statusText,de.status,h.url))}).catch(de=>{de.name!=="AbortError"&&p(new Error(`${de.message} ${h.url}`))})},V=(G,Z,Q)=>{(h.type==="arrayBuffer"?G.arrayBuffer():h.type==="json"?G.json():G.text()).then(ie=>{A||(Z&&Q&&function(de,we,pe){if(al(),!Yn)return;const xe={status:we.status,statusText:we.statusText,headers:new m.Headers};we.headers.forEach((qe,Fe)=>xe.headers.set(Fe,qe));const Ae=En(we.headers.get("Cache-Control")||"");if(Ae["no-store"])return;Ae["max-age"]&&xe.headers.set("Expires",new Date(pe+1e3*Ae["max-age"]).toUTCString());const Te=xe.headers.get("Expires");Te&&(new Date(Te).getTime()-pe<42e4||function(qe,Fe){if(No===void 0)try{new Response(new ReadableStream),No=!0}catch{No=!1}No?Fe(qe.body):qe.blob().then(Fe)}(we,qe=>{const Fe=new m.Response(qe,xe);al(),Yn&&Yn.then(et=>et.put(lc(de.url),Fe)).catch(et=>Nt(et.message))}))}(x,Z,Q),S=!0,p(null,ie,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(ie=>{A||p(new Error(ie.message))})};return P?function(G,Z){if(al(),!Yn)return Z(null);const Q=lc(G.url);Yn.then(ie=>{ie.match(Q).then(de=>{const we=function(pe){if(!pe)return!1;const xe=new Date(pe.headers.get("Expires")||0),Ae=En(pe.headers.get("Cache-Control")||"");return xe>Date.now()&&!Ae["no-cache"]}(de);ie.delete(Q),we&&ie.put(Q,de.clone()),Z(null,de,we)}).catch(Z)}).catch(Z)}(x,z):z(null,null),{cancel:()=>{A=!0,S||y.abort()}}}(s,i);if(mn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var l;return function(h,p){const y=new m.XMLHttpRequest;y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in h.headers)y.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=()=>{p(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(h.type==="json")try{x=JSON.parse(y.response)}catch(S){return p(S)}p(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else p(new Cs(y.statusText,y.status,h.url))},y.send(h.body),{cancel:()=>y.abort()}}(s,i)},cc=function(s,i){return cl(bt(s,{type:"arrayBuffer"}),i)};function _f(s){const i=m.document.createElement("a");return i.href=s,i.protocol===m.document.location.protocol&&i.host===m.document.location.host}const be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let te,re;te=[],re=0;const _e=function(s,i){if(C.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),re>=E.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return te.push(y),y}re++;let l=!1;const h=()=>{if(!l)for(l=!0,re--;te.length&&re<E.MAX_PARALLEL_IMAGE_REQUESTS;){const y=te.shift(),{requestParameters:x,callback:S,cancelled:A}=y;A||(y.cancel=_e(x,S).cancel)}},p=cc(s,(y,x,S,A)=>{h(),y?i(y):x&&(m.createImageBitmap?function(P,L){const z=new m.Blob([new Uint8Array(P)],{type:"image/png"});m.createImageBitmap(z).then(V=>{L(null,V)}).catch(V=>{L(new Error(`Could not load image because of ${V.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(P,L)=>i(P,L,S,A)):function(P,L){const z=new m.Image,V=m.URL;z.onload=()=>{L(null,z),V.revokeObjectURL(z.src),z.onload=null,m.requestAnimationFrame(()=>{z.src=be})},z.onerror=()=>L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const G=new m.Blob([new Uint8Array(P)],{type:"image/png"});z.src=P.byteLength?V.createObjectURL(G):be}(x,(P,L)=>i(P,L,S,A)))});return{cancel:()=>{p.cancel(),h()}}},Ce="NO_ACCESS_TOKEN";function De(s){return s.indexOf("mapbox:")===0}function ze(s){return E.API_URL_REGEX.test(s)}function $e(s){return E.API_CDN_URL_REGEX.test(s)}function Ie(s){return E.API_STYLE_REGEX.test(s)&&!Xe(s)}function Xe(s){return E.API_SPRITE_REGEX.test(s)}const vt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function wt(s){const i=s.match(vt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function mt(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}const or="mapbox.eventData";function ur(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(m.atob(i[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ar{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=ur(E.ACCESS_TOKEN);let h="";return h=l&&l.u?m.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(p,y)=>String.fromCharCode(+("0x"+y)))):E.ACCESS_TOKEN||"",i?`${or}.${i}:${h}`:`${or}:${h}`}fetchEventData(){const i=xi("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{const p=m.localStorage.getItem(l);p&&(this.eventData=JSON.parse(p));const y=m.localStorage.getItem(h);y&&(this.anonId=y)}catch{Nt("Unable to read from LocalStorage")}}saveEventData(){const i=xi("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{m.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&m.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Nt("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,h,p){if(!E.EVENTS_URL)return;const y=wt(E.EVENTS_URL);y.params.push(`access_token=${p||E.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString()},S=l?bt(x,l):x,A={url:mt(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=function(P,L){return cl(bt(P,{method:"POST"}),L)}(A,P=>{this.pendingRequest=null,h(P),this.saveEventData(),this.processRequests(p)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const hr=new class extends ar{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){E.EVENTS_URL&&E.ACCESS_TOKEN&&Array.isArray(s)&&s.some(l=>De(l)||ze(l))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=ur(E.ACCESS_TOKEN),l=i?i.u:E.ACCESS_TOKEN;let h=l!==this.eventData.tokenU;$r(this.anonId)||(this.anonId=kt(),h=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),x=new Date(p),S=(p-this.eventData.lastSuccess)/864e5;h=h||S>=1||S<-1||y.getDate()!==x.getDate()}else h=!0;h?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:F,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=p,this.eventData.tokenU=l)},s):this.processRequests()}},br=hr.postTurnstileEvent.bind(hr),cn=new class extends ar{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,l,h){this.skuToken=i,this.errorCb=h,E.EVENTS_URL&&(l||E.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(Ce)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),$r(this.anonId)||(this.anonId=kt()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:F,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s))}},Mn=cn.postMapLoadEvent.bind(cn),wi=new class extends ar{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){E.EVENTS_URL&&(s||E.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),h=function(p){const y=m.performance.getEntriesByType("resource"),x=m.performance.getEntriesByType("mark"),S=function(V){const G={};if(V){for(const Z in V)if(Z!=="other")for(const Q of V[Z]){const ie=`${Z}ResolveRangeMin`,de=`${Z}ResolveRangeMax`,we=`${Z}RequestCount`,pe=`${Z}RequestCachedCount`;G[ie]=Math.min(G[ie]||1/0,Q.startTime),G[de]=Math.max(G[de]||-1/0,Q.responseEnd);const xe=Ae=>{G[Ae]===void 0&&(G[Ae]=0),++G[Ae]};Q.transferSize!==void 0&&Q.transferSize===0&&xe(pe),xe(we)}}return G}(function(V,G){const Z={};if(V)for(const Q of V){const ie=G(Q);Z[ie]===void 0&&(Z[ie]=[]),Z[ie].push(Q)}return Z}(y,M_)),A=m.devicePixelRatio,P=m.navigator.connection||m.navigator.mozConnection||m.navigator.webkitConnection,L={counters:[],metadata:[],attributes:[]},z=(V,G,Z)=>{Z!=null&&V.push({name:G,value:Z.toString()})};for(const V in S)z(L.counters,V,S[V]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(z(L.counters,"interactionRangeMin",p.interactionRange[0]),z(L.counters,"interactionRangeMax",p.interactionRange[1])),x)for(const V of Object.keys(uc)){const G=uc[V],Z=x.find(Q=>Q.name===G);Z&&z(L.counters,G,Z.startTime)}return z(L.counters,"visibilityHidden",p.visibilityHidden),z(L.attributes,"style",function(V){if(V)for(const G of V){const Z=G.name.split("?")[0];if(Ie(Z)){const Q=Z.split("/").slice(-2);if(Q.length===2)return`mapbox://styles/${Q[0]}/${Q[1]}`}}}(y)),z(L.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),z(L.attributes,"fogEnabled",p.fogEnabled?"true":"false"),z(L.attributes,"projection",p.projection),z(L.attributes,"zoom",p.zoom),z(L.metadata,"devicePixelRatio",A),z(L.metadata,"connectionEffectiveType",P?P.effectiveType:void 0),z(L.metadata,"navigatorUserAgent",m.navigator.userAgent),z(L.metadata,"screenWidth",m.screen.width),z(L.metadata,"screenHeight",m.screen.height),z(L.metadata,"windowWidth",m.innerWidth),z(L.metadata,"windowHeight",m.innerHeight),z(L.metadata,"mapWidth",p.width/A),z(L.metadata,"mapHeight",p.height/A),z(L.metadata,"webglRenderer",p.renderer),z(L.metadata,"webglVendor",p.vendor),z(L.metadata,"sdkVersion",_),z(L.metadata,"sdkIdentifier","mapbox-gl-js"),L}(l);for(const p of h.metadata);for(const p of h.counters);for(const p of h.attributes);this.postEvent(i,h,()=>{},s)}},Un=wi.postPerformanceEvent.bind(wi),aa=new class extends ar{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,l,h){if(!E.API_URL||!E.SESSION_PATH)return;const p=wt(E.API_URL+E.SESSION_PATH);p.params.push(`sku=${i||""}`),p.params.push(`access_token=${h||E.ACCESS_TOKEN||""}`);const y={url:mt(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,S){return cl(bt(x,{method:"GET"}),S)}(y,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(h)})}getSessionAPI(s,i,l,h){this.skuToken=i,this.errorCb=h,E.SESSION_PATH&&E.API_URL&&(l||E.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(Ce)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s)}},Jn=aa.getSessionAPI.bind(aa),Ri=new Set,uc={create:"create",load:"load",fullLoad:"fullLoad"},tE={mark(s){m.performance.mark(s)},measure(s,i,l){m.performance.measure(s,i,l)}};function M_(s){const i=s.name.split("?")[0];return $e(i)&&i.includes("mapbox-gl.js")?"javascript":$e(i)&&i.includes("mapbox-gl.css")?"css":function(l){return E.API_FONTS_REGEX.test(l)}(i)?"fontRange":Xe(i)?"sprite":Ie(i)?"style":function(l){return E.API_TILEJSON_REGEX.test(l)}(i)?"tilejson":"other"}const Or=m.performance;function om(s){const i=s?s.url.toString():void 0;return Or.getEntriesByName(i)}let Nu,am,xf,sa;const Ua={now:()=>xf!==void 0?xf:m.performance.now(),setNow(s){xf=s},restoreNow(){xf=void 0},frame(s){const i=m.requestAnimationFrame(s);return{cancel:()=>m.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:l,height:h}=s;sa||(sa=m.document.createElement("canvas"));const p=sa.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(l>sa.width||h>sa.height)&&(sa.width=l,sa.height=h),p.clearRect(-i,-i,l+2*i,h+2*i),p.drawImage(s,0,0,l,h),p.getImageData(-i,-i,l+2*i,h+2*i)},resolveURL:s=>(Nu||(Nu=m.document.createElement("a")),Nu.href=s,Nu.href),get devicePixelRatio(){return m.devicePixelRatio},get prefersReducedMotion(){return!!m.matchMedia&&(am==null&&(am=m.matchMedia("(prefers-reduced-motion: reduce)")),am.matches)}};function sm(s,i,l){l[s]&&l[s].indexOf(i)!==-1||(l[s]=l[s]||[],l[s].push(i))}function lm(s,i,l){if(l&&l[s]){const h=l[s].indexOf(i);h!==-1&&l[s].splice(h,1)}}class ul{constructor(i,l={}){bt(this,l),this.type=i}}class Va extends ul{constructor(i,l={}){super("error",bt({error:i},l))}}class zu{on(i,l){return this._listeners=this._listeners||{},sm(i,l,this._listeners),this}off(i,l){return lm(i,l,this._listeners),lm(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},sm(i,l,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,l){typeof i=="string"&&(i=new ul(i,l||{}));const h=i.type;if(this.listens(h)){i.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of p)S.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)lm(h,S,this._oneTimeListeners),S.call(this,i);const x=this._eventedParent;x&&(bt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Va&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Wa(s,...i){for(const l of i)for(const h in l)s[h]=l[h];return s}function kn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Qn(s){if(Array.isArray(s))return s.map(Qn);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const l in s)i[l]=Qn(s[l]);return i}return kn(s)}class k_ extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var la=k_;class cm{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[h,p]of l)this.bindings[h]=p}concat(i){return new cm(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var I_=cm;const hc={kind:"null"},Pt={kind:"number"},xr={kind:"string"},pr={kind:"boolean"},io={kind:"color"},zo={kind:"object"},mr={kind:"value"},oo={kind:"collator"},Bu={kind:"formatted"},hl={kind:"resolvedImage"};function go(s,i){return{kind:"array",itemType:s,N:i}}function on(s){if(s.kind==="array"){const i=on(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const D_=[hc,Pt,xr,pr,io,Bu,zo,go(mr),hl];function qa(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!qa(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const l of D_)if(!qa(l,i))return null}}return`Expected ${on(s)} but found ${on(i)} instead.`}function Fu(s,i){return i.some(l=>l.kind===s.kind)}function Uu(s,i){return i.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}var um,R_={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Vu(s){return(s=Math.round(s))<0?0:s>255?255:s}function Wu(s){return Vu(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function bf(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function fc(s,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?s+(i-s)*l*6:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}try{um={}.parseCSSColor=function(s){var i,l=s.replace(/ /g,"").toLowerCase();if(l in R_)return R_[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var h=l.indexOf("("),p=l.indexOf(")");if(h!==-1&&p+1===l.length){var y=l.substr(0,h),x=l.substr(h+1,p-(h+1)).split(","),S=1;switch(y){case"rgba":if(x.length!==4)return null;S=bf(x.pop());case"rgb":return x.length!==3?null:[Wu(x[0]),Wu(x[1]),Wu(x[2]),S];case"hsla":if(x.length!==4)return null;S=bf(x.pop());case"hsl":if(x.length!==3)return null;var A=(parseFloat(x[0])%360+360)%360/360,P=bf(x[1]),L=bf(x[2]),z=L<=.5?L*(P+1):L+P-L*P,V=2*L-z;return[Vu(255*fc(V,z,A+1/3)),Vu(255*fc(V,z,A)),Vu(255*fc(V,z,A-1/3)),S];default:return null}}return null}}catch{}class Vi{constructor(i,l,h,p=1){this.r=i,this.g=l,this.b=h,this.a=p}static parse(i){if(!i)return;if(i instanceof Vi)return i;if(typeof i!="string")return;const l=um(i);return l?new Vi(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,h,p]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(h)},${p})`}toArray(){const{r:i,g:l,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*i/p,255*l/p,255*h/p,p]}toArray01(){const{r:i,g:l,b:h,a:p}=this;return p===0?[0,0,0,0]:[i/p,l/p,h/p,p]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:h,a:p}=this;return[i,l,h,p]}}Vi.black=new Vi(0,0,0,1),Vi.white=new Vi(1,1,1,1),Vi.transparent=new Vi(0,0,0,0),Vi.red=new Vi(1,0,0,1),Vi.blue=new Vi(0,0,1,1);var Tn=Vi;class hm{constructor(i,l,h){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fm{constructor(i,l,h,p,y){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=h,this.fontStack=p,this.textColor=y}}class Wi{constructor(i){this.sections=i}static fromString(i){return new Wi([new fm(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Wi?i:Wi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(h)}return i}}class yo{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new yo({name:i,available:!1}):null}serialize(){return["image",this.name]}}function L_(s,i,l,h){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,i,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,i,l,h]:[s,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function qu(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Tn||s instanceof hm||s instanceof Wi||s instanceof yo)return!0;if(Array.isArray(s)){for(const i of s)if(!qu(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!qu(s[i]))return!1;return!0}return!1}function yn(s){if(s===null)return hc;if(typeof s=="string")return xr;if(typeof s=="boolean")return pr;if(typeof s=="number")return Pt;if(s instanceof Tn)return io;if(s instanceof hm)return oo;if(s instanceof Wi)return Bu;if(s instanceof yo)return hl;if(Array.isArray(s)){const i=s.length;let l;for(const h of s){const p=yn(h);if(l){if(l===p)continue;l=mr;break}l=p}return go(l||mr,i)}return zo}function Gu(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof Tn||s instanceof Wi||s instanceof yo?s.toString():JSON.stringify(s)}class dm{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!qu(i[1]))return l.error("invalid value");const h=i[1];let p=yn(h);const y=l.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new dm(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Tn?["rgba"].concat(this.value.toArray()):this.value instanceof Wi?this.value.serialize():this.value}}var fl=dm,hi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const pm={string:xr,number:Pt,boolean:pr,object:zo};class mm{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h,p=1;const y=i[0];if(y==="array"){let S,A;if(i.length>2){const P=i[1];if(typeof P!="string"||!(P in pm)||P==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=pm[P],p++}else S=mr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);A=i[2],p++}h=go(S,A)}else h=pm[y];const x=[];for(;p<i.length;p++){const S=l.parse(i[p],p,mr);if(!S)return null;x.push(S)}return new mm(h,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(i);if(!qa(this.type,yn(h)))return h;if(l===this.args.length-1)throw new hi(`Expected value to be of type ${on(this.type)}, but found ${on(yn(h))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){l.push(h.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&l.push(p)}}return l.concat(this.args.map(h=>h.serialize()))}}var Ga=mm;class Ps{constructor(i){this.type=Bu,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const p=[];let y=!1;for(let x=1;x<=i.length-1;++x){const S=i[x];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;let A=null;if(S["font-scale"]&&(A=l.parse(S["font-scale"],1,Pt),!A))return null;let P=null;if(S["text-font"]&&(P=l.parse(S["text-font"],1,go(xr)),!P))return null;let L=null;if(S["text-color"]&&(L=l.parse(S["text-color"],1,io),!L))return null;const z=p[p.length-1];z.scale=A,z.font=P,z.textColor=L}else{const A=l.parse(i[x],1,mr);if(!A)return null;const P=A.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:A,scale:null,font:null,textColor:null})}}return new Ps(p)}evaluate(i){return new Wi(this.sections.map(l=>{const h=l.content.evaluate(i);return yn(h)===hl?new fm("",h,null,null,null):new fm(Gu(h),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),i.push(h)}return i}}class wf{constructor(i){this.type=hl,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const h=l.parse(i[1],1,xr);return h?new wf(h):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),h=yo.fromString(l);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(l)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const rE={"to-boolean":pr,"to-color":io,"to-number":Pt,"to-string":xr};class gm{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[0];if((h==="to-boolean"||h==="to-string")&&i.length!==2)return l.error("Expected one argument.");const p=rE[h],y=[];for(let x=1;x<i.length;x++){const S=l.parse(i[x],x,mr);if(!S)return null;y.push(S)}return new gm(p,y)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let l,h;for(const p of this.args){if(l=p.evaluate(i),h=null,l instanceof Tn)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:L_(l[0],l[1],l[2],l[3]),!h))return new Tn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new hi(h||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const h of this.args){if(l=h.evaluate(i),l===null)return 0;const p=Number(l);if(!isNaN(p))return p}throw new hi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Wi.fromString(Gu(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?yo.fromString(Gu(this.args[0].evaluate(i))):Gu(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ps([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new wf(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(l=>{i.push(l.serialize())}),i}}var dc=gm;const ca=["Unknown","Point","LineString","Polygon"];var ym=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-s[0])+this.featureDistanceData.bearing[1]*(h*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=Tn.parse(s)),i}};class dl{constructor(i,l,h,p){this.name=i,this.type=l,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,l){const h=i[0],p=dl.definitions[h];if(!p)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(([P])=>!Array.isArray(P)||P.length===i.length-1);let A=null;for(const[P,L]of S){A=new Sm(l.registry,l.path,null,l.scope);const z=[];let V=!1;for(let G=1;G<i.length;G++){const Z=i[G],Q=Array.isArray(P)?P[G-1]:P.type,ie=A.parse(Z,1+z.length,Q);if(!ie){V=!0;break}z.push(ie)}if(!V)if(Array.isArray(P)&&P.length!==z.length)A.error(`Expected ${P.length} arguments, but found ${z.length} instead.`);else{for(let G=0;G<z.length;G++){const Z=Array.isArray(P)?P[G]:P.type,Q=z[G];A.concat(G+1).checkSubtype(Z,Q.type)}if(A.errors.length===0)return new dl(h,y,L,z)}}if(S.length===1)l.errors.push(...A.errors);else{const P=(S.length?S:x).map(([z])=>{return V=z,Array.isArray(V)?`(${V.map(on).join(", ")})`:`(${on(V.type)}...)`;var V}).join(" | "),L=[];for(let z=1;z<i.length;z++){const V=l.parse(i[z],1+L.length);if(!V)return null;L.push(on(V.type))}l.error(`Expected arguments of type ${P}, but found (${L.join(", ")}) instead.`)}return null}static register(i,l){dl.definitions=l;for(const h in l)i[h]=dl}}var Ha=dl;class Hu{constructor(i,l,h){this.type=oo,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const p=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,pr);if(!p)return null;const y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,pr);if(!y)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,xr),!x)?null:new Hu(p,y,x)}evaluate(i){return new hm(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Za=8192;function Sf(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function pc(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Zu(s,i){const l=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(l*p*Za),Math.round(h*p*Za)]}function j_(s,i,l){const h=s[0]-i[0],p=s[1]-i[1],y=s[0]-l[0],x=s[1]-l[1];return h*x-y*p==0&&h*y<=0&&p*x<=0}function Ef(s,i){let l=!1;for(let x=0,S=i.length;x<S;x++){const A=i[x];for(let P=0,L=A.length;P<L-1;P++){if(j_(s,A[P],A[P+1]))return!1;(p=A[P])[1]>(h=s)[1]!=(y=A[P+1])[1]>h[1]&&h[0]<(y[0]-p[0])*(h[1]-p[1])/(y[1]-p[1])+p[0]&&(l=!l)}}var h,p,y;return l}function vm(s,i){for(let l=0;l<i.length;l++)if(Ef(s,i[l]))return!0;return!1}function _m(s,i,l,h){const p=h[0]-l[0],y=h[1]-l[1],x=(s[0]-l[0])*y-p*(s[1]-l[1]),S=(i[0]-l[0])*y-p*(i[1]-l[1]);return x>0&&S<0||x<0&&S>0}function mc(s,i,l){for(const P of l)for(let L=0;L<P.length-1;++L)if((S=[(x=P[L+1])[0]-(y=P[L])[0],x[1]-y[1]])[0]*(A=[(p=i)[0]-(h=s)[0],p[1]-h[1]])[1]-S[1]*A[0]!=0&&_m(h,p,y,x)&&_m(y,x,h,p))return!0;var h,p,y,x,S,A;return!1}function Mr(s,i){for(let l=0;l<s.length;++l)if(!Ef(s[l],i))return!1;for(let l=0;l<s.length-1;++l)if(mc(s[l],s[l+1],i))return!1;return!0}function nE(s,i){for(let l=0;l<i.length;l++)if(Mr(s,i[l]))return!0;return!1}function xm(s,i,l){const h=[];for(let p=0;p<s.length;p++){const y=[];for(let x=0;x<s[p].length;x++){const S=Zu(s[p][x],l);Sf(i,S),y.push(S)}h.push(y)}return h}function $_(s,i,l){const h=[];for(let p=0;p<s.length;p++){const y=xm(s[p],i,l);h.push(y)}return h}function bm(s,i,l,h){if(s[0]<l[0]||s[0]>l[2]){const p=.5*h;let y=s[0]-l[0]>p?-h:l[0]-s[0]>p?h:0;y===0&&(y=s[0]-l[2]>p?-h:l[2]-s[0]>p?h:0),s[0]+=y}Sf(i,s)}function N_(s,i,l,h){const p=Math.pow(2,h.z)*Za,y=[h.x*Za,h.y*Za],x=[];if(!s)return x;for(const S of s)for(const A of S){const P=[A.x+y[0],A.y+y[1]];bm(P,i,l,p),x.push(P)}return x}function wm(s,i,l,h){const p=Math.pow(2,h.z)*Za,y=[h.x*Za,h.y*Za],x=[];if(!s)return x;for(const A of s){const P=[];for(const L of A){const z=[L.x+y[0],L.y+y[1]];Sf(i,z),P.push(z)}x.push(P)}if(i[2]-i[0]<=p/2){(S=i)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const A of x)for(const P of A)bm(P,i,l,p)}var S;return x}class gc{constructor(i,l){this.type=pr,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(qu(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const y=h.features[p].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new gc(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new gc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new gc(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const S=xm(h.coordinates,y,x),A=N_(l.geometry(),p,y,x);if(!pc(p,y))return!1;for(const P of A)if(!Ef(P,S))return!1}if(h.type==="MultiPolygon"){const S=$_(h.coordinates,y,x),A=N_(l.geometry(),p,y,x);if(!pc(p,y))return!1;for(const P of A)if(!vm(P,S))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const S=xm(h.coordinates,y,x),A=wm(l.geometry(),p,y,x);if(!pc(p,y))return!1;for(const P of A)if(!Mr(P,S))return!1}if(h.type==="MultiPolygon"){const S=$_(h.coordinates,y,x),A=wm(l.geometry(),p,y,x);if(!pc(p,y))return!1;for(const P of A)if(!nE(P,S))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Tf=gc;function yc(s){if(s instanceof Ha&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Tf)return!1;let i=!0;return s.eachChild(l=>{i&&!yc(l)&&(i=!1)}),i}function Xa(s){if(s instanceof Ha&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(l=>{i&&!Xa(l)&&(i=!1)}),i}function pl(s,i){if(s instanceof Ha&&i.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(h=>{l&&!pl(h,i)&&(l=!1)}),l}class Af{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=i[1];return l.scope.has(h)?new Af(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var z_=Af;class Xu{constructor(i,l=[],h,p=new I_,y=[]){this.registry=i,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=y,this.expectedType=h}parse(i,l,h,p,y={}){return l?this.concat(l,h,p)._parse(i,y):this._parse(i,y)}_parse(i,l){function h(p,y,x){return x==="assert"?new Ga(y,[p]):x==="coerce"?new dc(y,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[p];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,A=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||A.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(S,A))return null}else x=h(x,S,l.typeAnnotation||"coerce");else x=h(x,S,l.typeAnnotation||"assert")}if(!(x instanceof fl)&&x.type.kind!=="resolvedImage"&&Em(x)){const S=new ym;try{x=new fl(x.type,x.evaluate(S))}catch(A){return this.error(A.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,h){const p=typeof i=="number"?this.path.concat(i):this.path,y=h?this.scope.concat(h):this.scope;return new Xu(this.registry,p,l||null,y,this.errors)}error(i,...l){const h=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new la(h,i))}checkSubtype(i,l){const h=qa(i,l);return h&&this.error(h),h}}var Sm=Xu;function Em(s){if(s instanceof z_)return Em(s.boundExpression);if(s instanceof Ha&&s.name==="error"||s instanceof Hu||s instanceof Tf)return!1;const i=s instanceof dc||s instanceof Ga;let l=!0;return s.eachChild(h=>{l=i?l&&Em(h):l&&h instanceof fl}),!!l&&yc(s)&&pl(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Cf(s,i){const l=s.length-1;let h,p,y=0,x=l,S=0;for(;y<=x;)if(S=Math.floor((y+x)/2),h=s[S],p=s[S+1],h<=i){if(S===l||i<p)return S;y=S+1}else{if(!(h>i))throw new hi("Input is not a number.");x=S-1}return 0}class Pf{constructor(i,l,h){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[p,y]of h)this.labels.push(p),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(i[1],1,Pt);if(!h)return null;const p=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let x=1;x<i.length;x+=2){const S=x===1?-1/0:i[x],A=i[x+1],P=x,L=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(p.length&&p[p.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const z=l.parse(A,L,y);if(!z)return null;y=y||z.type,p.push([S,z])}return new Pf(y,h,p)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=l[0])return h[0].evaluate(i);const y=l.length;return p>=l[y-1]?h[y-1].evaluate(i):h[Cf(l,p)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var Tm=Pf;function Sr(s,i,l){return s*(1-l)+i*l}var Ku=Object.freeze({__proto__:null,array:function(s,i,l){return s.map((h,p)=>Sr(h,i[p],l))},color:function(s,i,l){return new Tn(Sr(s.r,i.r,l),Sr(s.g,i.g,l),Sr(s.b,i.b,l),Sr(s.a,i.a,l))},number:Sr});const B_=.95047,Am=1.08883,F_=4/29,ml=6/29,Cm=3*ml*ml,iE=ml*ml*ml,oE=Math.PI/180,aE=180/Math.PI;function Pm(s){return s>iE?Math.pow(s,1/3):s/Cm+F_}function Om(s){return s>ml?s*s*s:Cm*(s-F_)}function Mm(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Of(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function U_(s){const i=Of(s.r),l=Of(s.g),h=Of(s.b),p=Pm((.4124564*i+.3575761*l+.1804375*h)/B_),y=Pm((.2126729*i+.7151522*l+.072175*h)/1);return{l:116*y-16,a:500*(p-y),b:200*(y-Pm((.0193339*i+.119192*l+.9503041*h)/Am)),alpha:s.a}}function V_(s){let i=(s.l+16)/116,l=isNaN(s.a)?i:i+s.a/500,h=isNaN(s.b)?i:i-s.b/200;return i=1*Om(i),l=B_*Om(l),h=Am*Om(h),new Tn(Mm(3.2404542*l-1.5371385*i-.4985314*h),Mm(-.969266*l+1.8760108*i+.041556*h),Mm(.0556434*l-.2040259*i+1.0572252*h),s.alpha)}function sE(s,i,l){const h=i-s;return s+l*(h>180||h<-180?h-360*Math.round(h/360):h)}const Yu={forward:U_,reverse:V_,interpolate:function(s,i,l){return{l:Sr(s.l,i.l,l),a:Sr(s.a,i.a,l),b:Sr(s.b,i.b,l),alpha:Sr(s.alpha,i.alpha,l)}}},vc={forward:function(s){const{l:i,a:l,b:h}=U_(s),p=Math.atan2(h,l)*aE;return{h:p<0?p+360:p,c:Math.sqrt(l*l+h*h),l:i,alpha:s.a}},reverse:function(s){const i=s.h*oE,l=s.c;return V_({l:s.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:s.alpha})},interpolate:function(s,i,l){return{h:sE(s.h,i.h,l),c:Sr(s.c,i.c,l),l:Sr(s.l,i.l,l),alpha:Sr(s.alpha,i.alpha,l)}}};var km=Object.freeze({__proto__:null,hcl:vc,lab:Yu});class Ju{constructor(i,l,h,p,y){this.type=i,this.operator=l,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,S]of y)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(i,l,h,p){let y=0;if(i.name==="exponential")y=Im(l,i.base,h,p);else if(i.name==="linear")y=Im(l,1,h,p);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new X(x[0],x[1],x[2],x[3]).solve(Im(l,1,h,p))}return y}static parse(i,l){let[h,p,y,...x]=i;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const P=p[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const P=p.slice(1);if(P.length!==4||P.some(L=>typeof L!="number"||L<0||L>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Pt),!y)return null;const S=[];let A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=io:l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType);for(let P=0;P<x.length;P+=2){const L=x[P],z=x[P+1],V=P+3,G=P+4;if(typeof L!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(S.length&&S[S.length-1][0]>=L)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const Z=l.parse(z,G,A);if(!Z)return null;A=A||Z.type,S.push([L,Z])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Ju(A,h,p,y,S):l.error(`Type ${on(A)} is not interpolatable.`)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=l[0])return h[0].evaluate(i);const y=l.length;if(p>=l[y-1])return h[y-1].evaluate(i);const x=Cf(l,p),S=Ju.interpolationFactor(this.interpolation,p,l[x],l[x+1]),A=h[x].evaluate(i),P=h[x+1].evaluate(i);return this.operator==="interpolate"?Ku[this.type.kind.toLowerCase()](A,P,S):this.operator==="interpolate-hcl"?vc.reverse(vc.interpolate(vc.forward(A),vc.forward(P),S)):Yu.reverse(Yu.interpolate(Yu.forward(A),Yu.forward(P),S))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l}}function Im(s,i,l,h){const p=h-l,y=s-l;return p===0?0:i===1?y/p:(Math.pow(i,y)-1)/(Math.pow(i,p)-1)}var ua=Ju;class Mf{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let h=null;const p=l.expectedType;p&&p.kind!=="value"&&(h=p);const y=[];for(const S of i.slice(1)){const A=l.parse(S,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,y.push(A)}const x=p&&y.some(S=>qa(p,S.type));return new Mf(x?mr:h,y)}evaluate(i){let l,h=null,p=0;for(const y of this.args){if(p++,h=y.evaluate(i),h&&h instanceof yo&&!h.available&&(l||(l=h),h=null,p===this.args.length))return l;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var Dm=Mf;class kf{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=l.parse(i[y+1],y+1);if(!S)return null;h.push([x,S])}const p=l.parse(i[i.length-1],i.length-1,l.expectedType,h);return p?new kf(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,h]of this.bindings)i.push(l,h.serialize());return i.push(this.result.serialize()),i}}var W_=kf;class Rm{constructor(i,l,h){this.type=i,this.index=l,this.input=h}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Pt),p=l.parse(i[2],2,go(l.expectedType||mr));return h&&p?new Rm(p.type.itemType,h,p):null}evaluate(i){const l=this.index.evaluate(i),h=this.input.evaluate(i);if(l<0)throw new hi(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new hi(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new hi(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var lE=Rm;class Lm{constructor(i,l){this.type=pr,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,mr),p=l.parse(i[2],2,mr);return h&&p?Fu(h.type,[pr,xr,Pt,hc,mr])?new Lm(h,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(h.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!Uu(l,["boolean","string","number","null"]))throw new hi(`Expected first argument to be of type boolean, string, number or null, but found ${on(yn(l))} instead.`);if(!Uu(h,["string","array"]))throw new hi(`Expected second argument to be of type array or string, but found ${on(yn(h))} instead.`);return h.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var If=Lm;class Qu{constructor(i,l,h){this.type=Pt,this.needle=i,this.haystack=l,this.fromIndex=h}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,mr),p=l.parse(i[2],2,mr);if(!h||!p)return null;if(!Fu(h.type,[pr,xr,Pt,hc,mr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Pt);return y?new Qu(h,p,y):null}return new Qu(h,p)}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Uu(l,["boolean","string","number","null"]))throw new hi(`Expected first argument to be of type boolean, string, number or null, but found ${on(yn(l))} instead.`);if(!Uu(h,["string","array"]))throw new hi(`Expected second argument to be of type array or string, but found ${on(yn(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return h.indexOf(l,p)}return h.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var q_=Qu;class jm{constructor(i,l,h,p,y,x){this.inputType=i,this.type=l,this.input=h,this.cases=p,this.outputs=y,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let h,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const y={},x=[];for(let P=2;P<i.length-1;P+=2){let L=i[P];const z=i[P+1];Array.isArray(L)||(L=[L]);const V=l.concat(P);if(L.length===0)return V.error("Expected at least one branch label.");for(const Z of L){if(typeof Z!="number"&&typeof Z!="string")return V.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return V.error("Numeric branch labels must be integer values.");if(h){if(V.checkSubtype(h,yn(Z)))return null}else h=yn(Z);if(y[String(Z)]!==void 0)return V.error("Branch labels must be unique.");y[String(Z)]=x.length}const G=l.parse(z,P,p);if(!G)return null;p=p||G.type,x.push(G)}const S=l.parse(i[1],1,mr);if(!S)return null;const A=l.parse(i[i.length-1],i.length-1,p);return A?S.type.kind!=="value"&&l.concat(1).checkSubtype(h,S.type)?null:new jm(h,p,S,y,x,A):null}evaluate(i){const l=this.input.evaluate(i);return(yn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),h=[],p={};for(const x of l){const S=p[this.cases[x]];S===void 0?(p[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[S][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,S]of h)i.push(S.length===1?y(S[0]):S.map(y)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var cE=jm;class $m{constructor(i,l,h){this.type=i,this.branches=l,this.otherwise=h}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const p=[];for(let x=1;x<i.length-1;x+=2){const S=l.parse(i[x],x,pr);if(!S)return null;const A=l.parse(i[x+1],x+1,h);if(!A)return null;p.push([S,A]),h=h||A.type}const y=l.parse(i[i.length-1],i.length-1,h);return y?new $m(h,p,y):null}evaluate(i){for(const[l,h]of this.branches)if(l.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,h]of this.branches)i(l),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var G_=$m;class eh{constructor(i,l,h,p){this.type=i,this.input=l,this.beginIndex=h,this.endIndex=p}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,mr),p=l.parse(i[2],2,Pt);if(!h||!p)return null;if(!Fu(h.type,[go(mr),xr,mr]))return l.error(`Expected first argument to be of type array or string, but found ${on(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Pt);return y?new eh(h.type,h,p,y):null}return new eh(h.type,h,p)}evaluate(i){const l=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!Uu(l,["string","array"]))throw new hi(`Expected first argument to be of type array or string, but found ${on(yn(l))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return l.slice(h,p)}return l.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var H_=eh;function Df(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Z_(s,i,l,h){return h.compare(i,l)===0}function _c(s,i,l){const h=s!=="=="&&s!=="!=";return class QW{constructor(y,x,S){this.type=pr,this.lhs=y,this.rhs=x,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const S=y[0];let A=x.parse(y[1],1,mr);if(!A)return null;if(!Df(S,A.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${on(A.type)}'.`);let P=x.parse(y[2],2,mr);if(!P)return null;if(!Df(S,P.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${on(P.type)}'.`);if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${on(A.type)}' and '${on(P.type)}'.`);h&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new Ga(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new Ga(A.type,[P])));let L=null;if(y.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(y[3],3,oo),!L)return null}return new QW(A,P,L)}evaluate(y){const x=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const A=yn(x),P=yn(S);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new hi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${A.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const A=yn(x),P=yn(S);if(A.kind!=="string"||P.kind!=="string")return i(y,x,S)}return this.collator?l(y,x,S,this.collator.evaluate(y)):i(y,x,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[s];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const uE=_c("==",function(s,i,l){return i===l},Z_),hE=_c("!=",function(s,i,l){return i!==l},function(s,i,l,h){return!Z_(0,i,l,h)}),fE=_c("<",function(s,i,l){return i<l},function(s,i,l,h){return h.compare(i,l)<0}),dE=_c(">",function(s,i,l){return i>l},function(s,i,l,h){return h.compare(i,l)>0}),pE=_c("<=",function(s,i,l){return i<=l},function(s,i,l,h){return h.compare(i,l)<=0}),X_=_c(">=",function(s,i,l){return i>=l},function(s,i,l,h){return h.compare(i,l)>=0});class Rf{constructor(i,l,h,p,y,x){this.type=xr,this.number=i,this.locale=l,this.currency=h,this.unit=p,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Pt);if(!h)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=l.parse(p.locale,1,xr),!y))return null;let x=null;if(p.currency&&(x=l.parse(p.currency,1,xr),!x))return null;let S=null;if(p.unit&&(S=l.parse(p.unit,1,xr),!S))return null;let A=null;if(p["min-fraction-digits"]&&(A=l.parse(p["min-fraction-digits"],1,Pt),!A))return null;let P=null;return p["max-fraction-digits"]&&(P=l.parse(p["max-fraction-digits"],1,Pt),!P)?null:new Rf(h,y,x,S,A,P)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class xc{constructor(i){this.type=Pt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=l.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${on(h.type)} instead.`):new xc(h):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new hi(`Expected value to be of type string or array, but found ${on(yn(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(l=>{i.push(l.serialize())}),i}}const K_={"==":uE,"!=":hE,">":dE,"<":fE,">=":X_,"<=":pE,array:Ga,at:lE,boolean:Ga,case:G_,coalesce:Dm,collator:Hu,format:Ps,image:wf,in:If,"index-of":q_,interpolate:ua,"interpolate-hcl":ua,"interpolate-lab":ua,length:xc,let:W_,literal:fl,match:cE,number:Ga,"number-format":Rf,object:Ga,slice:H_,step:Tm,string:Ga,"to-boolean":dc,"to-color":dc,"to-number":dc,"to-string":dc,var:z_,within:Tf};function Y_(s,[i,l,h,p]){i=i.evaluate(s),l=l.evaluate(s),h=h.evaluate(s);const y=p?p.evaluate(s):1,x=L_(i,l,h,y);if(x)throw new hi(x);return new Tn(i/255*y,l/255*y,h/255*y,y)}function Ka(s,i){return s in i}function Lf(s,i){const l=i[s];return l===void 0?null:l}function vo(s){return{type:s}}Ha.register(K_,{error:[{kind:"error"},[xr],(s,[i])=>{throw new hi(i.evaluate(s))}],typeof:[xr,[mr],(s,[i])=>on(yn(i.evaluate(s)))],"to-rgba":[go(Pt,4),[io],(s,[i])=>i.evaluate(s).toArray()],rgb:[io,[Pt,Pt,Pt],Y_],rgba:[io,[Pt,Pt,Pt,Pt],Y_],has:{type:pr,overloads:[[[xr],(s,[i])=>Ka(i.evaluate(s),s.properties())],[[xr,zo],(s,[i,l])=>Ka(i.evaluate(s),l.evaluate(s))]]},get:{type:mr,overloads:[[[xr],(s,[i])=>Lf(i.evaluate(s),s.properties())],[[xr,zo],(s,[i,l])=>Lf(i.evaluate(s),l.evaluate(s))]]},"feature-state":[mr,[xr],(s,[i])=>Lf(i.evaluate(s),s.featureState||{})],properties:[zo,[],s=>s.properties()],"geometry-type":[xr,[],s=>s.geometryType()],id:[mr,[],s=>s.id()],zoom:[Pt,[],s=>s.globals.zoom],pitch:[Pt,[],s=>s.globals.pitch||0],"distance-from-center":[Pt,[],s=>s.distanceFromCenter()],"heatmap-density":[Pt,[],s=>s.globals.heatmapDensity||0],"line-progress":[Pt,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[Pt,[],s=>s.globals.skyRadialProgress||0],accumulated:[mr,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Pt,vo(Pt),(s,i)=>{let l=0;for(const h of i)l+=h.evaluate(s);return l}],"*":[Pt,vo(Pt),(s,i)=>{let l=1;for(const h of i)l*=h.evaluate(s);return l}],"-":{type:Pt,overloads:[[[Pt,Pt],(s,[i,l])=>i.evaluate(s)-l.evaluate(s)],[[Pt],(s,[i])=>-i.evaluate(s)]]},"/":[Pt,[Pt,Pt],(s,[i,l])=>i.evaluate(s)/l.evaluate(s)],"%":[Pt,[Pt,Pt],(s,[i,l])=>i.evaluate(s)%l.evaluate(s)],ln2:[Pt,[],()=>Math.LN2],pi:[Pt,[],()=>Math.PI],e:[Pt,[],()=>Math.E],"^":[Pt,[Pt,Pt],(s,[i,l])=>Math.pow(i.evaluate(s),l.evaluate(s))],sqrt:[Pt,[Pt],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Pt,[Pt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Pt,[Pt],(s,[i])=>Math.log(i.evaluate(s))],log2:[Pt,[Pt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Pt,[Pt],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Pt,[Pt],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Pt,[Pt],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Pt,[Pt],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Pt,[Pt],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Pt,[Pt],(s,[i])=>Math.atan(i.evaluate(s))],min:[Pt,vo(Pt),(s,i)=>Math.min(...i.map(l=>l.evaluate(s)))],max:[Pt,vo(Pt),(s,i)=>Math.max(...i.map(l=>l.evaluate(s)))],abs:[Pt,[Pt],(s,[i])=>Math.abs(i.evaluate(s))],round:[Pt,[Pt],(s,[i])=>{const l=i.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Pt,[Pt],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Pt,[Pt],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[pr,[xr,mr],(s,[i,l])=>s.properties()[i.value]===l.value],"filter-id-==":[pr,[mr],(s,[i])=>s.id()===i.value],"filter-type-==":[pr,[xr],(s,[i])=>s.geometryType()===i.value],"filter-<":[pr,[xr,mr],(s,[i,l])=>{const h=s.properties()[i.value],p=l.value;return typeof h==typeof p&&h<p}],"filter-id-<":[pr,[mr],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l<h}],"filter->":[pr,[xr,mr],(s,[i,l])=>{const h=s.properties()[i.value],p=l.value;return typeof h==typeof p&&h>p}],"filter-id->":[pr,[mr],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l>h}],"filter-<=":[pr,[xr,mr],(s,[i,l])=>{const h=s.properties()[i.value],p=l.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[pr,[mr],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l<=h}],"filter->=":[pr,[xr,mr],(s,[i,l])=>{const h=s.properties()[i.value],p=l.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[pr,[mr],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l>=h}],"filter-has":[pr,[mr],(s,[i])=>i.value in s.properties()],"filter-has-id":[pr,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[pr,[go(xr)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[pr,[go(mr)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[pr,[xr,go(mr)],(s,[i,l])=>l.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[pr,[xr,go(mr)],(s,[i,l])=>function(h,p,y,x){for(;y<=x;){const S=y+x>>1;if(p[S]===h)return!0;p[S]>h?x=S-1:y=S+1}return!1}(s.properties()[i.value],l.value,0,l.value.length-1)],all:{type:pr,overloads:[[[pr,pr],(s,[i,l])=>i.evaluate(s)&&l.evaluate(s)],[vo(pr),(s,i)=>{for(const l of i)if(!l.evaluate(s))return!1;return!0}]]},any:{type:pr,overloads:[[[pr,pr],(s,[i,l])=>i.evaluate(s)||l.evaluate(s)],[vo(pr),(s,i)=>{for(const l of i)if(l.evaluate(s))return!0;return!1}]]},"!":[pr,[pr],(s,[i])=>!i.evaluate(s)],"is-supported-script":[pr,[xr],(s,[i])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(i.evaluate(s))}],upcase:[xr,[xr],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[xr,[xr],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[xr,vo(mr),(s,i)=>i.map(l=>Gu(l.evaluate(s))).join("")],"resolved-locale":[xr,[oo],(s,[i])=>i.evaluate(s).resolvedLocale()]});var th=K_;function J_(s){return{result:"success",value:s}}function gl(s){return{result:"error",value:s}}function bc(s){return s["property-type"]==="data-driven"}function jf(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function $f(s){return!!s.expression&&s.expression.interpolated}function Er(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function rh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Q_(s){return s}function Nf(s,i){const l=i.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",p=h||!(h||s.property!==void 0),y=s.type||($f(i)?"exponential":"interval");if(l&&((s=Wa({},s)).stops&&(s.stops=s.stops.map(P=>[P[0],Tn.parse(P[1])])),s.default=Tn.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!km[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let x,S,A;if(y==="exponential")x=Ya;else if(y==="interval")x=zf;else if(y==="categorical"){x=e0,S=Object.create(null);for(const P of s.stops)S[P[0]]=P[1];A=typeof s.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=t0}if(h){const P={},L=[];for(let G=0;G<s.stops.length;G++){const Z=s.stops[G],Q=Z[0].zoom;P[Q]===void 0&&(P[Q]={zoom:Q,type:s.type,property:s.property,default:s.default,stops:[]},L.push(Q)),P[Q].stops.push([Z[0].value,Z[1]])}const z=[];for(const G of L)z.push([P[G].zoom,Nf(P[G],i)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:ua.interpolationFactor.bind(void 0,V),zoomStops:z.map(G=>G[0]),evaluate:({zoom:G},Z)=>Ya({stops:z,base:s.base},i,G).evaluate(G,Z)}}if(p){const P=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:ua.interpolationFactor.bind(void 0,P),zoomStops:s.stops.map(L=>L[0]),evaluate:({zoom:L})=>x(s,i,L,S,A)}}return{kind:"source",evaluate(P,L){const z=L&&L.properties?L.properties[s.property]:void 0;return z===void 0?wc(s.default,i.default):x(s,i,z,S,A)}}}function wc(s,i,l){return s!==void 0?s:i!==void 0?i:l!==void 0?l:void 0}function e0(s,i,l,h,p){return wc(typeof l===p?h[l]:void 0,s.default,i.default)}function zf(s,i,l){if(Er(l)!=="number")return wc(s.default,i.default);const h=s.stops.length;if(h===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[h-1][0])return s.stops[h-1][1];const p=Cf(s.stops.map(y=>y[0]),l);return s.stops[p][1]}function Ya(s,i,l){const h=s.base!==void 0?s.base:1;if(Er(l)!=="number")return wc(s.default,i.default);const p=s.stops.length;if(p===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[p-1][0])return s.stops[p-1][1];const y=Cf(s.stops.map(L=>L[0]),l),x=function(L,z,V,G){const Z=G-V,Q=L-V;return Z===0?0:z===1?Q/Z:(Math.pow(z,Q)-1)/(Math.pow(z,Z)-1)}(l,h,s.stops[y][0],s.stops[y+1][0]),S=s.stops[y][1],A=s.stops[y+1][1];let P=Ku[i.type]||Q_;if(s.colorSpace&&s.colorSpace!=="rgb"){const L=km[s.colorSpace];P=(z,V)=>L.reverse(L.interpolate(L.forward(z),L.forward(V),x))}return typeof S.evaluate=="function"?{evaluate(...L){const z=S.evaluate.apply(void 0,L),V=A.evaluate.apply(void 0,L);if(z!==void 0&&V!==void 0)return P(z,V,x)}}:P(S,A,x)}function t0(s,i,l){return i.type==="color"?l=Tn.parse(l):i.type==="formatted"?l=Wi.fromString(l.toString()):i.type==="resolvedImage"?l=yo.fromString(l.toString()):Er(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),wc(l,s.default,i.default)}class Bf{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new ym,this._defaultValue=l?function(h){return h.type==="color"&&(rh(h.default)||Array.isArray(h.default))?new Tn(0,0,0,0):h.type==="color"?Tn.parse(h.default)||null:h.default===void 0?null:h.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,h,p,y,x,S,A){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=S||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,h,p,y,x,S,A){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=S||null,this._evaluator.featureDistanceData=A||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new hi(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function Sc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in th}function Ec(s,i){const l=new Sm(th,[],i?function(p){const y={color:io,string:xr,number:Pt,enum:xr,boolean:pr,formatted:Bu,resolvedImage:hl};return p.type==="array"?go(y[p.value]||mr,p.length):y[p.type]}(i):void 0),h=l.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?J_(new Bf(h,i)):gl(l.errors)}class Nm{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Xa(l.expression)}evaluateWithoutErrorHandling(i,l,h,p,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,p,y,x)}evaluate(i,l,h,p,y,x){return this._styleExpression.evaluate(i,l,h,p,y,x)}}class nh{constructor(i,l,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Xa(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,l,h,p,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,p,y,x)}evaluate(i,l,h,p,y,x){return this._styleExpression.evaluate(i,l,h,p,y,x)}interpolationFactor(i,l,h){return this.interpolationType?ua.interpolationFactor(this.interpolationType,i,l,h):0}}function ih(s,i){if((s=Ec(s,i)).result==="error")return s;const l=s.value.expression,h=yc(l);if(!h&&!bc(i))return gl([new la("","data expressions not supported")]);const p=pl(l,["zoom","pitch","distance-from-center"]);if(!p&&!jf(i))return gl([new la("","zoom expressions not supported")]);const y=Uf(l);return y||p?y instanceof la?gl([y]):y instanceof ua&&!$f(i)?gl([new la("",'"interpolate" expressions cannot be used with this property')]):J_(y?new nh(h?"camera":"composite",s.value,y.labels,y instanceof ua?y.interpolation:void 0):new Nm(h?"constant":"source",s.value)):gl([new la("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ff{constructor(i,l){this._parameters=i,this._specification=l,Wa(this,Nf(this._parameters,this._specification))}static deserialize(i){return new Ff(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Uf(s){let i=null;if(s instanceof W_)i=Uf(s.result);else if(s instanceof Dm){for(const l of s.args)if(i=Uf(l),i)break}else(s instanceof Tm||s instanceof ua)&&s.input instanceof Ha&&s.input.name==="zoom"&&(i=s);return i instanceof la||s.eachChild(l=>{const h=Uf(l);h instanceof la?i=h:!i&&h?i=new la("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new la("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class It{constructor(i,l,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function Bo(s){const i=s.key,l=s.value,h=s.valueSpec||{},p=s.objectElementValidators||{},y=s.style,x=s.styleSpec;let S=[];const A=Er(l);if(A!=="object")return[new It(i,l,`object expected, ${A} found`)];for(const P in l){const L=P.split(".")[0];let z;p[L]?z=p[L]:h[L]?z=Si:p["*"]?z=p["*"]:h["*"]&&(z=Si),z?S=S.concat(z({key:(i&&`${i}.`)+P,value:l[P],valueSpec:h[L]||h["*"],style:y,styleSpec:x,object:l,objectKey:P},l)):S.push(new It(i,l[P],`unknown property "${P}"`))}for(const P in h)p[P]||h[P].required&&h[P].default===void 0&&l[P]===void 0&&S.push(new It(i,l,`missing required property "${P}"`));return S}function r0(s){const i=s.value,l=s.valueSpec,h=s.style,p=s.styleSpec,y=s.key,x=s.arrayElementValidator||Si;if(Er(i)!=="array")return[new It(y,i,`array expected, ${Er(i)} found`)];if(l.length&&i.length!==l.length)return[new It(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new It(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let S={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};p.$version<7&&(S.function=l.function),Er(l.value)==="object"&&(S=l.value);let A=[];for(let P=0;P<i.length;P++)A=A.concat(x({array:i,arrayIndex:P,value:i[P],valueSpec:S,style:h,styleSpec:p,key:`${y}[${P}]`}));return A}function oh(s){const i=s.key,l=s.value,h=s.valueSpec;let p=Er(l);if(p==="number"&&l!=l&&(p="NaN"),p!=="number")return[new It(i,l,`number expected, ${p} found`)];if("minimum"in h){let y=h.minimum;if(Er(h.minimum)==="array"&&(y=h.minimum[s.arrayIndex]),l<y)return[new It(i,l,`${l} is less than the minimum value ${y}`)]}if("maximum"in h){let y=h.maximum;if(Er(h.maximum)==="array"&&(y=h.maximum[s.arrayIndex]),l>y)return[new It(i,l,`${l} is greater than the maximum value ${y}`)]}return[]}function ah(s){const i=s.valueSpec,l=kn(s.value.type);let h,p,y,x={};const S=l!=="categorical"&&s.value.property===void 0,A=!S,P=Er(s.value.stops)==="array"&&Er(s.value.stops[0])==="array"&&Er(s.value.stops[0][0])==="object",L=Bo({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(l==="identity")return[new It(G.key,G.value,'identity function may not have a "stops" property')];let Z=[];const Q=G.value;return Z=Z.concat(r0({key:G.key,value:Q,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:z})),Er(Q)==="array"&&Q.length===0&&Z.push(new It(G.key,Q,"array must have at least one stop")),Z},default:function(G){return Si({key:G.key,value:G.value,valueSpec:i,style:G.style,styleSpec:G.styleSpec})}}});return l==="identity"&&S&&L.push(new It(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||L.push(new It(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!$f(s.valueSpec)&&L.push(new It(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(A&&!bc(s.valueSpec)?L.push(new It(s.key,s.value,"property functions not supported")):S&&!jf(s.valueSpec)&&L.push(new It(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!P||s.value.property!==void 0||L.push(new It(s.key,s.value,'"property" property is required')),L;function z(G){let Z=[];const Q=G.value,ie=G.key;if(Er(Q)!=="array")return[new It(ie,Q,`array expected, ${Er(Q)} found`)];if(Q.length!==2)return[new It(ie,Q,`array length 2 expected, length ${Q.length} found`)];if(P){if(Er(Q[0])!=="object")return[new It(ie,Q,`object expected, ${Er(Q[0])} found`)];if(Q[0].zoom===void 0)return[new It(ie,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new It(ie,Q,"object stop key must have value")];const de=kn(Q[0].zoom);if(typeof de!="number")return[new It(ie,Q[0].zoom,"stop zoom values must be numbers")];if(y&&y>de)return[new It(ie,Q[0].zoom,"stop zoom values must appear in ascending order")];de!==y&&(y=de,p=void 0,x={}),Z=Z.concat(Bo({key:`${ie}[0]`,value:Q[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:oh,value:V}}))}else Z=Z.concat(V({key:`${ie}[0]`,value:Q[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},Q));return Sc(Qn(Q[1]))?Z.concat([new It(`${ie}[1]`,Q[1],"expressions are not allowed in function stops.")]):Z.concat(Si({key:`${ie}[1]`,value:Q[1],valueSpec:i,style:G.style,styleSpec:G.styleSpec}))}function V(G,Z){const Q=Er(G.value),ie=kn(G.value),de=G.value!==null?G.value:Z;if(h){if(Q!==h)return[new It(G.key,de,`${Q} stop domain type must match previous stop domain type ${h}`)]}else h=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean"&&typeof ie!="number"&&typeof ie!="string"&&typeof ie!="boolean")return[new It(G.key,de,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&l!=="categorical"){let we=`number expected, ${Q} found`;return bc(i)&&l===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(G.key,de,we)]}return l!=="categorical"||Q!=="number"||typeof ie=="number"&&isFinite(ie)&&Math.floor(ie)===ie?l!=="categorical"&&Q==="number"&&typeof ie=="number"&&typeof p=="number"&&p!==void 0&&ie<p?[new It(G.key,de,"stop domain values must appear in ascending order")]:(p=ie,l==="categorical"&&ie in x?[new It(G.key,de,"stop domain values must be unique")]:(x[ie]=!0,[])):[new It(G.key,de,`integer expected, found ${String(ie)}`)]}}function ei(s){const i=(s.expressionContext==="property"?ih:Ec)(Qn(s.value),s.valueSpec);if(i.result==="error")return i.value.map(h=>new It(`${s.key}${h.key}`,s.value,h.message));const l=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new It(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Xa(l))return[new It(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return sh(l,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!pl(l,["zoom","feature-state"]))return[new It(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!yc(l))return[new It(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sh(s,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const p of i.valueSpec.expression.parameters)l.delete(p);if(l.size===0)return[];const h=[];return s instanceof Ha&&l.has(s.name)?[new It(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(p=>{h.push(...sh(p,i))}),h)}function Vf(s){const i=s.key,l=s.value,h=s.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(kn(l))===-1&&p.push(new It(i,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(kn(l))===-1&&p.push(new It(i,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function zm(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!zm(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function Wf(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};zm(s)||(s=Ac(s));const l=s;let h=!0;try{h=function(P){if(!Tc(P))return P;let L=Qn(P);return qf(L),L=n0(L),L}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const p=Qe[`filter_${i}`],y=Ec(h,p);let x=null;if(y.result==="error")throw new Error(y.value.map(P=>`${P.key}: ${P.message}`).join(", "));x=(P,L,z)=>y.value.evaluate(P,L,{},z);let S=null,A=null;if(h!==l){const P=Ec(l,p);if(P.result==="error")throw new Error(P.value.map(L=>`${L.key}: ${L.message}`).join(", "));S=(L,z,V,G,Z)=>P.value.evaluate(L,z,{},V,void 0,void 0,G,Z),A=!yc(P.value.expression)}return{filter:x,dynamicFilter:S||void 0,needGeometry:i0(h),needFeature:!!A}}function n0(s){if(!Array.isArray(s))return s;const i=function(l){if(Bm.has(l[0])){for(let h=1;h<l.length;h++)if(Tc(l[h]))return!0}return l}(s);return i===!0?i:i.map(l=>n0(l))}function qf(s){let i=!1;const l=[];if(s[0]==="case"){for(let h=1;h<s.length-1;h+=2)i=i||Tc(s[h]),l.push(s[h+1]);l.push(s[s.length-1])}else if(s[0]==="match"){i=i||Tc(s[1]);for(let h=2;h<s.length-1;h+=2)l.push(s[h+1]);l.push(s[s.length-1])}else if(s[0]==="step"){i=i||Tc(s[1]);for(let h=1;h<s.length-1;h+=2)l.push(s[h+1])}i&&(s.length=0,s.push("any",...l));for(let h=1;h<s.length;h++)qf(s[h])}function Tc(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<s.length;l++)if(Tc(s[l]))return!0;return!1}const Bm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mE(s,i){return s<i?-1:s>i?1:0}function i0(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(i0(s[i]))return!0;return!1}function Ac(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Fm(s[1],s[2],"=="):i==="!="?Gf(Fm(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Fm(s[1],s[2],i):i==="any"?(l=s.slice(1),["any"].concat(l.map(Ac))):i==="all"?["all"].concat(s.slice(1).map(Ac)):i==="none"?["all"].concat(s.slice(1).map(Ac).map(Gf)):i==="in"?Um(s[1],s.slice(2)):i==="!in"?Gf(Um(s[1],s.slice(2))):i==="has"?Vm(s[1]):i==="!has"?Gf(Vm(s[1])):i!=="within"||s;var l}function Fm(s,i,l){switch(s){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,s,i]}}function Um(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",s,["literal",i.sort(mE)]]:["filter-in-small",s,["literal",i]]}}function Vm(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Gf(s){return["!",s]}function lh(s){return zm(Qn(s.value))?ei(Wa({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):ch(s)}function ch(s){const i=s.value,l=s.key;if(Er(i)!=="array")return[new It(l,i,`array expected, ${Er(i)} found`)];const h=s.styleSpec;let p,y=[];if(i.length<1)return[new It(l,i,"filter array must have at least 1 element")];switch(y=y.concat(Vf({key:`${l}[0]`,value:i[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),kn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&kn(i[1])==="$type"&&y.push(new It(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new It(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=Er(i[1]),p!=="string"&&y.push(new It(`${l}[1]`,i[1],`string expected, ${p} found`)));for(let x=2;x<i.length;x++)p=Er(i[x]),kn(i[1])==="$type"?y=y.concat(Vf({key:`${l}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&y.push(new It(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(ch({key:`${l}[${x}]`,value:i[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=Er(i[1]),i.length!==2?y.push(new It(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&y.push(new It(`${l}[1]`,i[1],`string expected, ${p} found`));break;case"within":p=Er(i[1]),i.length!==2?y.push(new It(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="object"&&y.push(new It(`${l}[1]`,i[1],`object expected, ${p} found`))}return y}function Wm(s,i){const l=s.key,h=s.style,p=s.styleSpec,y=s.value,x=s.objectKey,S=p[`${i}_${s.layerType}`];if(!S)return[];const A=x.match(/^(.*)-transition$/);if(i==="paint"&&A&&S[A[1]]&&S[A[1]].transition)return Si({key:l,value:y,valueSpec:p.transition,style:h,styleSpec:p});const P=s.valueSpec||S[x];if(!P)return[new It(l,y,`unknown property "${x}"`)];let L;if(Er(y)==="string"&&bc(P)&&!P.tokens&&(L=/^{([^}]+)}$/.exec(y))){const V=`\`{ "type": "identity", "property": ${L?JSON.stringify(L[1]):'"_"'} }\``;return[new It(l,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${V}.`)]}const z=[];return s.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&z.push(new It(l,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&rh(Qn(y))&&kn(y.type)==="identity"&&z.push(new It(l,y,'"text-font" does not support identity functions'))),z.concat(Si({key:s.key,value:y,valueSpec:P,style:h,styleSpec:p,expressionContext:"property",propertyType:i,propertyKey:x}))}function o0(s){return Wm(s,"paint")}function qm(s){return Wm(s,"layout")}function a0(s){let i=[];const l=s.value,h=s.key,p=s.style,y=s.styleSpec;l.type||l.ref||i.push(new It(h,l,'either "type" or "ref" is required'));let x=kn(l.type);const S=kn(l.ref);if(l.id){const A=kn(l.id);for(let P=0;P<s.arrayIndex;P++){const L=p.layers[P];kn(L.id)===A&&i.push(new It(h,l.id,`duplicate layer id "${l.id}", previously used at line ${L.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(P=>{P in l&&i.push(new It(h,l[P],`"${P}" is prohibited for ref layers`))}),p.layers.forEach(P=>{kn(P.id)===S&&(A=P)}),A?A.ref?i.push(new It(h,l.ref,"ref cannot reference another ref layer")):x=kn(A.type):typeof S=="string"&&i.push(new It(h,l.ref,`ref layer "${S}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const A=p.sources&&p.sources[l.source],P=A&&kn(A.type);A?P==="vector"&&x==="raster"?i.push(new It(h,l.source,`layer "${l.id}" requires a raster source`)):P==="raster"&&x!=="raster"?i.push(new It(h,l.source,`layer "${l.id}" requires a vector source`)):P!=="vector"||l["source-layer"]?P==="raster-dem"&&x!=="hillshade"?i.push(new It(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||P==="geojson"&&A.lineMetrics||i.push(new It(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new It(h,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new It(h,l.source,`source "${l.source}" not found`))}else i.push(new It(h,l,'missing required property "source"'));return i=i.concat(Bo({key:h,value:l,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Si({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,object:l,objectKey:"type"}),filter:A=>lh(Wa({layerType:x},A)),layout:A=>Bo({layer:l,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":P=>qm(Wa({layerType:x},P))}}),paint:A=>Bo({layer:l,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":P=>o0(Wa({layerType:x},P))}})}})),i}function Os(s){const i=s.value,l=s.key,h=Er(i);return h!=="string"?[new It(l,i,`string expected, ${h} found`)]:[]}const s0={promoteId:function({key:s,value:i}){if(Er(i)==="string")return Os({key:s,value:i});{const l=[];for(const h in i)l.push(...Os({key:`${s}.${h}`,value:i[h]}));return l}}};function l0(s){const i=s.value,l=s.key,h=s.styleSpec,p=s.style;if(!i.type)return[new It(l,i,'"type" is required')];const y=kn(i.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=Bo({key:l,value:i,valueSpec:h[`source_${y.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:s0}),x;case"geojson":if(x=Bo({key:l,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:s0}),i.cluster)for(const S in i.clusterProperties){const[A,P]=i.clusterProperties[S],L=typeof A=="string"?[A,["accumulated"],["get",S]]:A;x.push(...ei({key:`${l}.${S}.map`,value:P,expressionContext:"cluster-map"})),x.push(...ei({key:`${l}.${S}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return x;case"video":return Bo({key:l,value:i,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return Bo({key:l,value:i,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new It(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vf({key:`${l}.type`,value:i.type,valueSpec:{values:gE(h)},style:p,styleSpec:h})}}function gE(s){return s.source.reduce((i,l)=>{const h=s[l];return h.type.type==="enum"&&(i=i.concat(Object.keys(h.type.values))),i},[])}function c0(s){const i=s.value,l=s.styleSpec,h=l.light,p=s.style;let y=[];const x=Er(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new It("light",i,`object expected, ${x} found`)]),y;for(const S in i){const A=S.match(/^(.*)-transition$/);y=y.concat(A&&h[A[1]]&&h[A[1]].transition?Si({key:S,value:i[S],valueSpec:l.transition,style:p,styleSpec:l}):h[S]?Si({key:S,value:i[S],valueSpec:h[S],style:p,styleSpec:l}):[new It(S,i[S],`unknown property "${S}"`)])}return y}function Gm(s){const i=s.value,l=s.key,h=s.style,p=s.styleSpec,y=p.terrain;let x=[];const S=Er(i);if(i===void 0)return x;if(S!=="object")return x=x.concat([new It("terrain",i,`object expected, ${S} found`)]),x;for(const A in i){const P=A.match(/^(.*)-transition$/);x=x.concat(P&&y[P[1]]&&y[P[1]].transition?Si({key:A,value:i[A],valueSpec:p.transition,style:h,styleSpec:p}):y[A]?Si({key:A,value:i[A],valueSpec:y[A],style:h,styleSpec:p}):[new It(A,i[A],`unknown property "${A}"`)])}if(i.source){const A=h.sources&&h.sources[i.source],P=A&&kn(A.type);A?P!=="raster-dem"&&x.push(new It(l,i.source,`terrain cannot be used with a source of type ${String(P)}, it only be used with a "raster-dem" source type`)):x.push(new It(l,i.source,`source "${i.source}" not found`))}else x.push(new It(l,i,'terrain is missing required property "source"'));return x}function u0(s){const i=s.value,l=s.style,h=s.styleSpec,p=h.fog;let y=[];const x=Er(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new It("fog",i,`object expected, ${x} found`)]),y;for(const S in i){const A=S.match(/^(.*)-transition$/);y=y.concat(A&&p[A[1]]&&p[A[1]].transition?Si({key:S,value:i[S],valueSpec:h.transition,style:l,styleSpec:h}):p[S]?Si({key:S,value:i[S],valueSpec:p[S],style:l,styleSpec:h}):[new It(S,i[S],`unknown property "${S}"`)])}return y}const h0={"*":()=>[],array:r0,boolean:function(s){const i=s.value,l=s.key,h=Er(i);return h!=="boolean"?[new It(l,i,`boolean expected, ${h} found`)]:[]},number:oh,color:function(s){const i=s.key,l=s.value,h=Er(l);return h!=="string"?[new It(i,l,`color expected, ${h} found`)]:um(l)===null?[new It(i,l,`color expected, "${l}" found`)]:[]},enum:Vf,filter:lh,function:ah,layer:a0,object:Bo,source:l0,light:c0,terrain:Gm,fog:u0,string:Os,formatted:function(s){return Os(s).length===0?[]:ei(s)},resolvedImage:function(s){return Os(s).length===0?[]:ei(s)},projection:function(s){const i=s.value,l=s.styleSpec,h=l.projection,p=s.style;let y=[];const x=Er(i);if(x==="object")for(const S in i)y=y.concat(Si({key:S,value:i[S],valueSpec:h[S],style:p,styleSpec:l}));else x!=="string"&&(y=y.concat([new It("projection",i,`object or string expected, ${x} found`)]));return y}};function Si(s){const i=s.value,l=s.valueSpec,h=s.styleSpec;return l.expression&&rh(kn(i))?ah(s):l.expression&&Sc(Qn(i))?ei(s):l.type&&h0[l.type]?h0[l.type](s):Bo(Wa({},s,{valueSpec:l.type?h[l.type]:l}))}function yE(s){const i=s.value,l=s.key,h=Os(s);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new It(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new It(l,i,'"glyphs" url must include a "{range}" token'))),h}function f0(s,i=Qe){return _o(Si({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:yE,"*":()=>[]}}))}const vE=s=>_o(o0(s)),_E=s=>_o(qm(s));function _o(s){return s.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function d0(s,i){let l=!1;if(i&&i.length)for(const h of i)s.fire(new Va(new Error(h.message))),l=!0;return l}var xE=ha,Fo=3;function ha(s,i,l){var h=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var p=new Int32Array(this.arrayBuffer);s=p[0],this.d=(i=p[1])+2*(l=p[2]);for(var y=0;y<this.d*this.d;y++){var x=p[Fo+y],S=p[Fo+y+1];h.push(x===S?null:p.subarray(x,S))}var A=p[Fo+h.length+1];this.keys=p.subarray(p[Fo+h.length],A),this.bboxes=p.subarray(A),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var P=0;P<this.d*this.d;P++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=l,this.scale=i/s,this.uid=0;var L=l/i*s;this.min=-L,this.max=s+L}ha.prototype.insert=function(s,i,l,h,p){this._forEachCell(i,l,h,p,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p)},ha.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ha.prototype._insertCell=function(s,i,l,h,p,y){this.cells[p].push(y)},ha.prototype.query=function(s,i,l,h,p){var y=this.min,x=this.max;if(s<=y&&i<=y&&x<=l&&x<=h&&!p)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(s,i,l,h,this._queryCell,S,{},p),S},ha.prototype._queryCell=function(s,i,l,h,p,y,x,S){var A=this.cells[p];if(A!==null)for(var P=this.keys,L=this.bboxes,z=0;z<A.length;z++){var V=A[z];if(x[V]===void 0){var G=4*V;(S?S(L[G+0],L[G+1],L[G+2],L[G+3]):s<=L[G+2]&&i<=L[G+3]&&l>=L[G+0]&&h>=L[G+1])?(x[V]=!0,y.push(P[V])):x[V]=!1}}},ha.prototype._forEachCell=function(s,i,l,h,p,y,x,S){for(var A=this._convertToCellCoord(s),P=this._convertToCellCoord(i),L=this._convertToCellCoord(l),z=this._convertToCellCoord(h),V=A;V<=L;V++)for(var G=P;G<=z;G++){var Z=this.d*G+V;if((!S||S(this._convertFromCellCoord(V),this._convertFromCellCoord(G),this._convertFromCellCoord(V+1),this._convertFromCellCoord(G+1)))&&p.call(this,s,i,l,h,Z,y,x,S))return}},ha.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},ha.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},ha.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=Fo+this.cells.length+1+1,l=0,h=0;h<this.cells.length;h++)l+=this.cells[h].length;var p=new Int32Array(i+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var y=i,x=0;x<s.length;x++){var S=s[x];p[Fo+x]=y,p.set(S,y),y+=S.length}return p[Fo+s.length]=y,p.set(this.keys,y),p[Fo+s.length+1]=y+=this.keys.length,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer};var yl=R(xE);const Hf={};function Rt(s,i,l={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),Hf[i]={klass:s,omit:l.omit||[]}}Rt(Object,"Object"),yl.serialize=function(s,i){const l=s.toArrayBuffer();return i&&i.push(l),{buffer:l}},yl.deserialize=function(s){return new yl(s.buffer)},Object.defineProperty(yl,"name",{value:"Grid"}),Rt(yl,"Grid"),Rt(Tn,"Color"),Rt(Error,"Error"),Rt(Cs,"AJAXError"),Rt(yo,"ResolvedImage"),Rt(Ff,"StylePropertyFunction"),Rt(Bf,"StyleExpression",{omit:["_evaluator"]}),Rt(nh,"ZoomDependentExpression"),Rt(Nm,"ZoomConstantExpression"),Rt(Ha,"CompoundExpression",{omit:["_evaluate"]});for(const s in th)Hf[th[s]._classRegistryKey]||Rt(th[s],`Expression${s}`);function Hm(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Zm(s){return m.ImageBitmap&&s instanceof m.ImageBitmap}function Cc(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(Hm(s)||Zm(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return i&&i.push(l.buffer),l}if(s instanceof m.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const h of s)l.push(Cc(h,i));return l}if(typeof s=="object"){const l=s.constructor,h=l._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const p=l.serialize?l.serialize(s,i):{};if(!l.serialize){for(const y in s)s.hasOwnProperty(y)&&(Hf[h].omit.indexOf(y)>=0||(p[y]=Cc(s[y],i)));s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof s)}function vl(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||Hm(s)||Zm(s)||ArrayBuffer.isView(s)||s instanceof m.ImageData)return s;if(Array.isArray(s))return s.map(vl);if(typeof s=="object"){const i=s.$name||"Object",{klass:l}=Hf[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(s);const h=Object.create(l.prototype);for(const p of Object.keys(s))p!=="$name"&&(h[p]=vl(s[p]));return h}throw new Error("can't deserialize object of type "+typeof s)}const Ct={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Xm(s){for(const i of s)if(Km(i.charCodeAt(0)))return!0;return!1}function bE(s){for(const i of s)if(!p0(i.charCodeAt(0)))return!1;return!0}function p0(s){return!(Ct.Arabic(s)||Ct["Arabic Supplement"](s)||Ct["Arabic Extended-A"](s)||Ct["Arabic Presentation Forms-A"](s)||Ct["Arabic Presentation Forms-B"](s))}function Km(s){return!(s!==746&&s!==747&&(s<4352||!(Ct["Bopomofo Extended"](s)||Ct.Bopomofo(s)||Ct["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Ct["CJK Compatibility Ideographs"](s)||Ct["CJK Compatibility"](s)||Ct["CJK Radicals Supplement"](s)||Ct["CJK Strokes"](s)||!(!Ct["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Ct["CJK Unified Ideographs Extension A"](s)||Ct["CJK Unified Ideographs"](s)||Ct["Enclosed CJK Letters and Months"](s)||Ct["Hangul Compatibility Jamo"](s)||Ct["Hangul Jamo Extended-A"](s)||Ct["Hangul Jamo Extended-B"](s)||Ct["Hangul Jamo"](s)||Ct["Hangul Syllables"](s)||Ct.Hiragana(s)||Ct["Ideographic Description Characters"](s)||Ct.Kanbun(s)||Ct["Kangxi Radicals"](s)||Ct["Katakana Phonetic Extensions"](s)||Ct.Katakana(s)&&s!==12540||!(!Ct["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Ct["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Ct["Unified Canadian Aboriginal Syllabics"](s)||Ct["Unified Canadian Aboriginal Syllabics Extended"](s)||Ct["Vertical Forms"](s)||Ct["Yijing Hexagram Symbols"](s)||Ct["Yi Syllables"](s)||Ct["Yi Radicals"](s))))}function m0(s){return!(Km(s)||function(i){return!!(Ct["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Ct["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Ct["Letterlike Symbols"](i)||Ct["Number Forms"](i)||Ct["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Ct["Control Pictures"](i)&&i!==9251||Ct["Optical Character Recognition"](i)||Ct["Enclosed Alphanumerics"](i)||Ct["Geometric Shapes"](i)||Ct["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Ct["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Ct["CJK Symbols and Punctuation"](i)||Ct.Katakana(i)||Ct["Private Use Area"](i)||Ct["CJK Compatibility Forms"](i)||Ct["Small Form Variants"](i)||Ct["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function g0(s){return s>=1424&&s<=2303||Ct["Arabic Presentation Forms-A"](s)||Ct["Arabic Presentation Forms-B"](s)}function wE(s,i){return!(!i&&g0(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Ct.Khmer(s))}function SE(s){for(const i of s)if(g0(i.charCodeAt(0)))return!0;return!1}const Ym="deferred",Jm="loading",Qm="loaded";let Pc=null,g="unavailable",u=null;const d=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(g="error"),Pc&&Pc(s)};function v(){b.fire(new ul("pluginStateChange",{pluginStatus:g,pluginURL:u}))}const b=new zu,T=function(){return g},O=function(){if(g!==Ym||!u)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");g=Jm,v(),u&&cc({url:u},s=>{s?d(s):(g=Qm,v())})},k={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>g===Qm||k.applyArabicShaping!=null,isLoading:()=>g===Jm,setState(s){g=s.pluginStatus,u=s.pluginURL},isParsed:()=>k.applyArabicShaping!=null&&k.processBidirectionalText!=null&&k.processStyledBidirectionalText!=null,getPluginURL:()=>u};class N{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(l,h){for(const p of l)if(!wE(p.charCodeAt(0),h))return!1;return!0}(i,k.isLoaded())}}class q{constructor(i,l){this.property=i,this.value=l,this.expression=function(h,p){if(rh(h))return new Ff(h,p);if(Sc(h)){const y=ih(h,p);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return typeof h=="string"&&p.type==="color"&&(y=Tn.parse(h)),{kind:"constant",evaluate:()=>y}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,h){return this.property.possiblyEvaluate(this,i,l,h)}}class W{constructor(i){this.property=i,this.value=new q(i,void 0)}transitioned(i,l){return new ne(this.property,this.value,l,bt({},i.transition,this.transition),i.now)}untransitioned(){return new ne(this.property,this.value,null,{},0)}}class K{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return er(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new W(this._values[i].property)),this._values[i].value=new q(this._values[i].property,l===null?void 0:er(l))}getTransition(i){return er(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new W(this._values[i].property)),this._values[i].transition=er(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h);const p=this.getTransition(l);p!==void 0&&(i[`${l}-transition`]=p)}return i}transitioned(i,l){const h=new le(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,l._values[p]);return h}untransitioned(){const i=new le(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class ne{constructor(i,l,h,p,y){const x=p.delay||0,S=p.duration||0;y=y||0,this.property=i,this.value=l,this.begin=y+x,this.end=this.begin+S,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,l,h){const p=i.now||0,y=this.value.possiblyEvaluate(i,l,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return x.possiblyEvaluate(i,l,h);{const S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,h),y,Ne(S))}}return y}}class le{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,h){const p=new fe(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(i,l,h);return p}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class ue{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return er(this._values[i].value)}setValue(i,l){this._values[i]=new q(this._values[i].property,l===null?void 0:er(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h)}return i}possiblyEvaluate(i,l,h){const p=new fe(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(i,l,h);return p}}class ce{constructor(i,l,h){this.property=i,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,h,p){return this.property.evaluate(this.value,this.parameters,i,l,h,p)}}class fe{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class J{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,h){const p=Ku[this.specification.type];return p?p(i,l,h):i}}class se{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,h,p){return new ce(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},h,p)}:i.expression,l)}interpolate(i,l,h){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new ce(this,{kind:"constant",value:void 0},i.parameters);const p=Ku[this.specification.type];return p?new ce(this,{kind:"constant",value:p(i.value.value,l.value.value,h)},i.parameters):i}evaluate(i,l,h,p,y,x){return i.kind==="constant"?i.value:i.evaluate(l,h,p,y,x)}}class me{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,p){return!!i.expression.evaluate(l,null,{},h,p)}interpolate(){return!1}}class ye{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new N(0,{});for(const h in i){const p=i[h];p.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new q(p,void 0),x=this.defaultTransitionablePropertyValues[h]=new W(p);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate(l)}}}function Pe(s,i){return 256*(s=ke(Math.floor(s),0,255))+ke(Math.floor(i),0,255)}Rt(se,"DataDrivenProperty"),Rt(J,"DataConstantProperty"),Rt(me,"ColorRampProperty");const Me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oe{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class je{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Le(s,i=1){let l=0,h=0;return{members:s.map(p=>{const y=Me[p.type].BYTES_PER_ELEMENT,x=l=We(l,Math.max(i,y)),S=p.components||1;return h=Math.max(h,y),l+=y*S,{name:p.name,type:p.type,components:S,offset:x}}),size:We(l,Math.max(h,i)),alignment:i}}function We(s,i){return Math.ceil(s/i)*i}class ut extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const p=2*i;return this.int16[p+0]=l,this.int16[p+1]=h,i}}ut.prototype.bytesPerElement=4,Rt(ut,"StructArrayLayout2i4");class Be extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,h)}emplace(i,l,h,p){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=p,i}}Be.prototype.bytesPerElement=6,Rt(Be,"StructArrayLayout3i6");class rt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,p)}emplace(i,l,h,p,y){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=y,i}}rt.prototype.bytesPerElement=8,Rt(rt,"StructArrayLayout4i8");class He extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S){const A=this.length;return this.resize(A+1),this.emplace(A,i,l,h,p,y,x,S)}emplace(i,l,h,p,y,x,S,A){const P=6*i,L=12*i,z=3*i;return this.int16[P+0]=l,this.int16[P+1]=h,this.uint8[L+4]=p,this.uint8[L+5]=y,this.uint8[L+6]=x,this.uint8[L+7]=S,this.float32[z+2]=A,i}}He.prototype.bytesPerElement=12,Rt(He,"StructArrayLayout2i4ub1f12");class lt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,p)}emplace(i,l,h,p,y){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=y,i}}lt.prototype.bytesPerElement=16,Rt(lt,"StructArrayLayout4f16");class Ue extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,p,y)}emplace(i,l,h,p,y,x){const S=6*i,A=3*i;return this.uint16[S+0]=l,this.uint16[S+1]=h,this.uint16[S+2]=p,this.uint16[S+3]=y,this.float32[A+2]=x,i}}Ue.prototype.bytesPerElement=12,Rt(Ue,"StructArrayLayout4ui1f12");class tt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,p)}emplace(i,l,h,p,y){const x=4*i;return this.uint16[x+0]=l,this.uint16[x+1]=h,this.uint16[x+2]=p,this.uint16[x+3]=y,i}}tt.prototype.bytesPerElement=8,Rt(tt,"StructArrayLayout4ui8");class ft extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,h,p,y,x)}emplace(i,l,h,p,y,x,S){const A=6*i;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=x,this.int16[A+5]=S,i}}ft.prototype.bytesPerElement=12,Rt(ft,"StructArrayLayout6i12");class ot extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S,A,P,L,z,V){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,h,p,y,x,S,A,P,L,z,V)}emplace(i,l,h,p,y,x,S,A,P,L,z,V,G){const Z=12*i;return this.int16[Z+0]=l,this.int16[Z+1]=h,this.int16[Z+2]=p,this.int16[Z+3]=y,this.uint16[Z+4]=x,this.uint16[Z+5]=S,this.uint16[Z+6]=A,this.uint16[Z+7]=P,this.int16[Z+8]=L,this.int16[Z+9]=z,this.int16[Z+10]=V,this.int16[Z+11]=G,i}}ot.prototype.bytesPerElement=24,Rt(ot,"StructArrayLayout4i4ui4i24");class pt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,h,p,y,x)}emplace(i,l,h,p,y,x,S){const A=10*i,P=5*i;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.float32[P+2]=y,this.float32[P+3]=x,this.float32[P+4]=S,i}}pt.prototype.bytesPerElement=20,Rt(pt,"StructArrayLayout3i3f20");class Bt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Bt.prototype.bytesPerElement=4,Rt(Bt,"StructArrayLayout1ul4");class Jt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S,A,P,L,z,V,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,l,h,p,y,x,S,A,P,L,z,V,G)}emplace(i,l,h,p,y,x,S,A,P,L,z,V,G,Z){const Q=20*i,ie=10*i;return this.int16[Q+0]=l,this.int16[Q+1]=h,this.int16[Q+2]=p,this.int16[Q+3]=y,this.int16[Q+4]=x,this.float32[ie+3]=S,this.float32[ie+4]=A,this.float32[ie+5]=P,this.float32[ie+6]=L,this.int16[Q+14]=z,this.uint32[ie+8]=V,this.uint16[Q+18]=G,this.uint16[Q+19]=Z,i}}Jt.prototype.bytesPerElement=40,Rt(Jt,"StructArrayLayout5i4f1i1ul2ui40");class jt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S){const A=this.length;return this.resize(A+1),this.emplace(A,i,l,h,p,y,x,S)}emplace(i,l,h,p,y,x,S,A){const P=8*i;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+4]=y,this.int16[P+5]=x,this.int16[P+6]=S,this.int16[P+7]=A,i}}jt.prototype.bytesPerElement=16,Rt(jt,"StructArrayLayout3i2i2i16");class qt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,p,y)}emplace(i,l,h,p,y,x){const S=4*i,A=8*i;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[A+6]=y,this.int16[A+7]=x,i}}qt.prototype.bytesPerElement=16,Rt(qt,"StructArrayLayout2f1f2i16");class gr extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,p)}emplace(i,l,h,p,y){const x=12*i,S=3*i;return this.uint8[x+0]=l,this.uint8[x+1]=h,this.float32[S+1]=p,this.float32[S+2]=y,i}}gr.prototype.bytesPerElement=12,Rt(gr,"StructArrayLayout2ub2f12");class fr extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,h)}emplace(i,l,h,p){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,i}}fr.prototype.bytesPerElement=12,Rt(fr,"StructArrayLayout3f12");class zt extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,h)}emplace(i,l,h,p){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=p,i}}zt.prototype.bytesPerElement=6,Rt(zt,"StructArrayLayout3ui6");class Ir extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae){const Te=this.length;return this.resize(Te+1),this.emplace(Te,i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae)}emplace(i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae,Te){const qe=30*i,Fe=15*i,et=60*i;return this.int16[qe+0]=l,this.int16[qe+1]=h,this.int16[qe+2]=p,this.float32[Fe+2]=y,this.float32[Fe+3]=x,this.uint16[qe+8]=S,this.uint16[qe+9]=A,this.uint32[Fe+5]=P,this.uint32[Fe+6]=L,this.uint32[Fe+7]=z,this.uint16[qe+16]=V,this.uint16[qe+17]=G,this.uint16[qe+18]=Z,this.float32[Fe+10]=Q,this.float32[Fe+11]=ie,this.uint8[et+48]=de,this.uint8[et+49]=we,this.uint8[et+50]=pe,this.uint32[Fe+13]=xe,this.int16[qe+28]=Ae,this.uint8[et+58]=Te,i}}Ir.prototype.bytesPerElement=60,Rt(Ir,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Nr extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae,Te,qe,Fe,et,ht,Ze,nt,it,at){const gt=this.length;return this.resize(gt+1),this.emplace(gt,i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae,Te,qe,Fe,et,ht,Ze,nt,it,at)}emplace(i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie,de,we,pe,xe,Ae,Te,qe,Fe,et,ht,Ze,nt,it,at,gt){const Je=38*i,Tt=19*i;return this.int16[Je+0]=l,this.int16[Je+1]=h,this.int16[Je+2]=p,this.float32[Tt+2]=y,this.float32[Tt+3]=x,this.int16[Je+8]=S,this.int16[Je+9]=A,this.int16[Je+10]=P,this.int16[Je+11]=L,this.int16[Je+12]=z,this.int16[Je+13]=V,this.uint16[Je+14]=G,this.uint16[Je+15]=Z,this.uint16[Je+16]=Q,this.uint16[Je+17]=ie,this.uint16[Je+18]=de,this.uint16[Je+19]=we,this.uint16[Je+20]=pe,this.uint16[Je+21]=xe,this.uint16[Je+22]=Ae,this.uint16[Je+23]=Te,this.uint16[Je+24]=qe,this.uint16[Je+25]=Fe,this.uint16[Je+26]=et,this.uint16[Je+27]=ht,this.uint16[Je+28]=Ze,this.uint32[Tt+15]=nt,this.float32[Tt+16]=it,this.float32[Tt+17]=at,this.float32[Tt+18]=gt,i}}Nr.prototype.bytesPerElement=76,Rt(Nr,"StructArrayLayout3i2f6i15ui1ul3f76");class zr extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}zr.prototype.bytesPerElement=4,Rt(zr,"StructArrayLayout1f4");class Br extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,p,y)}emplace(i,l,h,p,y,x){const S=5*i;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=p,this.float32[S+3]=y,this.float32[S+4]=x,i}}Br.prototype.bytesPerElement=20,Rt(Br,"StructArrayLayout5f20");class Ei extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,p)}emplace(i,l,h,p,y){const x=6*i;return this.uint32[3*i+0]=l,this.uint16[x+2]=h,this.uint16[x+3]=p,this.uint16[x+4]=y,i}}Ei.prototype.bytesPerElement=12,Rt(Ei,"StructArrayLayout1ul3ui12");class ti extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const p=2*i;return this.uint16[p+0]=l,this.uint16[p+1]=h,i}}ti.prototype.bytesPerElement=4,Rt(ti,"StructArrayLayout2ui4");class xo extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}xo.prototype.bytesPerElement=2,Rt(xo,"StructArrayLayout1ui2");class fa extends je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const p=2*i;return this.float32[p+0]=l,this.float32[p+1]=h,i}}fa.prototype.bytesPerElement=8,Rt(fa,"StructArrayLayout2f8");class an extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}an.prototype.size=40;class Fr extends Jt{get(i){return new an(this,i)}}Rt(Fr,"CollisionBoxArray");class Ar extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Ar.prototype.size=60;class In extends Ir{get(i){return new Ar(this,i)}}Rt(In,"PlacedSymbolArray");class Li extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Li.prototype.size=76;class Qr extends Nr{get(i){return new Li(this,i)}}Rt(Qr,"SymbolInstanceArray");class qi extends zr{getoffsetX(i){return this.float32[1*i+0]}}Rt(qi,"GlyphOffsetArray");class Zf extends ut{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Rt(Zf,"SymbolLineVertexArray");class _l extends Oe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}_l.prototype.size=12;class uh extends Ei{get(i){return new _l(this,i)}}Rt(uh,"FeatureIndexArray");class Ja extends ti{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Rt(Ja,"FillExtrusionCentroidArray");const Ms=Le([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),xl=Le([{name:"a_dash",components:4,type:"Uint16"}]);var Xf={exports:{}},hh={exports:{}};hh.exports=function(s,i){var l,h,p,y,x,S,A,P;for(h=s.length-(l=3&s.length),p=i,x=3432918353,S=461845907,P=0;P<h;)A=255&s.charCodeAt(P)|(255&s.charCodeAt(++P))<<8|(255&s.charCodeAt(++P))<<16|(255&s.charCodeAt(++P))<<24,++P,p=27492+(65535&(y=5*(65535&(p=(p^=A=(65535&(A=(A=(65535&A)*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(A=0,l){case 3:A^=(255&s.charCodeAt(P+2))<<16;case 2:A^=(255&s.charCodeAt(P+1))<<8;case 1:p^=A=(65535&(A=(A=(65535&(A^=255&s.charCodeAt(P)))*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*S+(((A>>>16)*S&65535)<<16)&4294967295}return p^=s.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var eg=hh.exports,nI={exports:{}};nI.exports=function(s,i){for(var l,h=s.length,p=i^h,y=0;h>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(y)|(255&s.charCodeAt(++y))<<8|(255&s.charCodeAt(++y))<<16|(255&s.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:p^=(255&s.charCodeAt(y+2))<<16;case 2:p^=(255&s.charCodeAt(y+1))<<8;case 1:p=1540483477*(65535&(p^=255&s.charCodeAt(y)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var iI=eg,eq=nI.exports;Xf.exports=iI,Xf.exports.murmur3=iI,Xf.exports.murmur2=eq;var EE=R(Xf.exports);class y0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,h,p){this.ids.push(oI(i)),this.positions.push(l,h,p)}getPositions(i){const l=oI(i);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=l?p=x:h=x+1}const y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(i,l){const h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return TE(h,p,0,h.length-1),l&&l.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){const l=new y0;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function oI(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:EE(String(s))}function TE(s,i,l,h){for(;l<h;){const p=s[l+h>>1];let y=l-1,x=h+1;for(;;){do y++;while(s[y]<p);do x--;while(s[x]>p);if(y>=x)break;v0(s,y,x),v0(i,3*y,3*x),v0(i,3*y+1,3*x+1),v0(i,3*y+2,3*x+2)}x-l<h-x?(TE(s,i,l,x),l=x+1):(TE(s,i,x+1,h),h=x)}}function v0(s,i,l){const h=s[i];s[i]=s[l],s[l]=h}Rt(y0,"FeaturePositionMap");class bl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class _0 extends bl{constructor(i){super(i),this.current=0}set(i,l,h){this.fetchUniformLocation(i,l)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class aI extends bl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,h){this.fetchUniformLocation(i,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class sI extends bl{constructor(i){super(i),this.current=Tn.transparent}set(i,l,h){this.fetchUniformLocation(i,l)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const tq=new Float32Array(16),rq=new Float32Array(9),nq=new Float32Array(4);function AE(s){return[Pe(255*s.r,255*s.g),Pe(255*s.b,255*s.a)]}class tg{constructor(i,l,h){this.value=i,this.uniformNames=l.map(p=>`u_${p}`),this.type=h}setUniform(i,l,h,p,y){l.set(i,y,p.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new sI(i):new _0(i)}}class Kf{constructor(i,l){this.uniformNames=l.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,h,p,y){const x=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(i,y,x)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new aI(i):new _0(i)}}class wl{constructor(i,l,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,l,h,p,y,x){const S=this.paintVertexArray.length,A=this.expression.evaluate(new N(0),l,{},y,p,x);this.paintVertexArray.resize(i),this._setPaintValue(S,i,A)}updatePaintArray(i,l,h,p,y){const x=this.expression.evaluate({zoom:0},h,p,void 0,y);this._setPaintValue(i,l,x)}_setPaintValue(i,l,h){if(this.type==="color"){const p=AE(h);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=i;p<l;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qa{constructor(i,l,h,p,y,x){this.expression=i,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,h,p,y,x){const S=this.expression.evaluate(new N(this.zoom),l,{},y,p,x),A=this.expression.evaluate(new N(this.zoom+1),l,{},y,p,x),P=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(P,i,S,A)}updatePaintArray(i,l,h,p,y){const x=this.expression.evaluate({zoom:this.zoom},h,p,void 0,y),S=this.expression.evaluate({zoom:this.zoom+1},h,p,void 0,y);this._setPaintValue(i,l,x,S)}_setPaintValue(i,l,h,p){if(this.type==="color"){const y=AE(h),x=AE(p);for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,y[0],y[1],x[0],x[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,h,p,y){const x=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,S=ke(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(i,y,S)}getBinding(i,l){return new _0(i)}}class Oc{constructor(i,l,h,p,y){this.expression=i,this.layerId=y,this.paintVertexAttributes=(h==="array"?xl:Ms).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new p}populatePaintArray(i,l,h){const p=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(p,i,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(i,l,h,p,y,x){this._setPaintValues(i,l,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(i,l,h,p){if(!p||!h)return;const y=p[h];if(!y)return;const{tl:x,br:S,pixelRatio:A}=y;for(let P=i;P<l;P++)this.paintVertexArray.emplace(P,x[0],x[1],S[0],S[1],A)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Mc{constructor(i,l,h=()=>!0){this.binders={},this._buffers=[];const p=[];for(const y in i.paint._values){if(!h(y))continue;const x=i.paint.get(y);if(!(x instanceof ce&&bc(x.property.specification)))continue;const S=oq(y,i.type),A=x.value,P=x.property.specification.type,L=!!x.property.useIntegerZoom,z=y==="line-dasharray"||y.endsWith("pattern"),V=y==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(A.kind!=="constant"||V)if(A.kind==="source"||V||z){const G=lI(y,P,"source");this.binders[y]=z?new Oc(A,S,P,G,i.id):new wl(A,S,P,G),p.push(`/a_${y}`)}else{const G=lI(y,P,"composite");this.binders[y]=new Qa(A,S,P,L,l,G),p.push(`/z_${y}`)}else this.binders[y]=z?new Kf(A.value,S):new tg(A.value,S,P),p.push(`/u_${y}`)}this.cacheKey=p.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof wl||l instanceof Qa?l.maxValue:0}populatePaintArrays(i,l,h,p,y,x){for(const S in this.binders){const A=this.binders[S];(A instanceof wl||A instanceof Qa||A instanceof Oc)&&A.populatePaintArray(i,l,h,p,y,x)}}setConstantPatternPositions(i){for(const l in this.binders){const h=this.binders[l];h instanceof Kf&&h.setConstantPatternPositions(i)}}updatePaintArrays(i,l,h,p,y,x){let S=!1;for(const A in i){const P=l.getPositions(A);for(const L of P){const z=h.feature(L.index);for(const V in this.binders){const G=this.binders[V];if((G instanceof wl||G instanceof Qa||G instanceof Oc)&&G.expression.isStateDependent===!0){const Z=p.paint.get(V);G.expression=Z.value,G.updatePaintArray(L.start,L.end,z,i[A],y,x),S=!0}}}}return S}defines(){const i=[];for(const l in this.binders){const h=this.binders[l];(h instanceof tg||h instanceof Kf)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof wl||h instanceof Qa||h instanceof Oc)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof tg||h instanceof Kf||h instanceof Qa)for(const p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof tg||p instanceof Kf||p instanceof Qa)for(const y of p.uniformNames)l.push({name:y,property:h,binding:p.getBinding(i,y)})}return l}setUniforms(i,l,h,p,y){for(const{name:x,property:S,binding:A}of h)this.binders[S].setUniform(i,A,y,p.get(S),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof wl||l instanceof Qa||l instanceof Oc)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const h=this.binders[l];(h instanceof wl||h instanceof Qa||h instanceof Oc)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof wl||l instanceof Qa||l instanceof Oc)&&l.destroy()}}}class fh{constructor(i,l,h=()=>!0){this.programConfigurations={};for(const p of i)this.programConfigurations[p.id]=new Mc(p,l,h);this.needsUpload=!1,this._featureMap=new y0,this._bufferOffset=0}populatePaintArrays(i,l,h,p,y,x,S){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(i,l,p,y,x,S);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,h,p,y){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,l,x,p,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const iq={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function oq(s,i){return iq[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const aq={"line-pattern":{source:Ue,composite:Ue},"fill-pattern":{source:Ue,composite:Ue},"fill-extrusion-pattern":{source:Ue,composite:Ue},"line-dasharray":{source:tt,composite:tt}},sq={color:{source:fa,composite:lt},number:{source:zr,composite:fa}};function lI(s,i,l){const h=aq[s];return h&&h[l]||sq[i][l]}Rt(tg,"ConstantBinder"),Rt(Kf,"PatternConstantBinder"),Rt(wl,"SourceExpressionBinder"),Rt(Oc,"PatternCompositeBinder"),Rt(Qa,"CompositeExpressionBinder"),Rt(Mc,"ProgramConfiguration",{omit:["_buffers"]}),Rt(fh,"ProgramConfigurationSet");const cI="-transition";class es extends zu{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new ue(l.layout)),l.paint)){this._transitionablePaint=new K(l.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fe(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,h={}){l!=null&&this._validate(_E,`layers.${this.id}.layout.${i}`,i,l,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return Dt(i,cI)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,h={}){if(l!=null&&this._validate(vE,`layers.${this.id}.paint.${i}`,i,l,h))return!1;if(Dt(i,cI))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const p=this._transitionablePaint._values[i],y=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const S=this._transitionablePaint._values[i].value,A=S.isDataDriven(),P=Dt(i,"pattern")||i==="line-dasharray";return A||y||P||this._handleOverridablePaintPropertyUpdate(i,x,S)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),dt(i,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(i,l,h,p,y={}){return(!y||y.validate!==!1)&&d0(this,i.call(f0,{key:l,layerType:this.type,objectKey:h,value:p,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof ce&&bc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Wf(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const lq=Le([{name:"a_pos",components:2,type:"Int16"}],4),cq=Le([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Dn{constructor(i=[]){this.segments=i}prepareSegment(i,l,h,p){let y=this.segments[this.segments.length-1];return i>Dn.MAX_VERTEX_ARRAY_LENGTH&&Nt(`Max vertices per segment is ${Dn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>Dn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,h,p){return new Dn([{vertexOffset:i,primitiveOffset:l,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}Dn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rt(Dn,"SegmentVector");var Wt=8192;class kc{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Ur?new Ur(i.lng,i.lat):Ur.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ur?new Ur(i.lng,i.lat):Ur.convert(i),this}extend(i){const l=this._sw,h=this._ne;let p,y;if(i instanceof Ur)p=i,y=i;else{if(!(i instanceof kc))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(kc.convert(i)):this.extend(Ur.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Ur.convert(i)):this;if(p=i._sw,y=i._ne,!p||!y)return this}return l||h?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new Ur(p.lng,p.lat),this._ne=new Ur(y.lng,y.lat)),this}getCenter(){return new Ur((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ur(this.getWest(),this.getNorth())}getSouthEast(){return new Ur(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:h}=Ur.convert(i);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(i){return!i||i instanceof kc?i:new kc(i)}}var x0=1e-6,bo=typeof Float32Array<"u"?Float32Array:Array;function uI(){var s=new bo(9);return bo!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function hI(s,i,l){var h=i[0],p=i[1],y=i[2],x=i[3],S=i[4],A=i[5],P=i[6],L=i[7],z=i[8],V=l[0],G=l[1],Z=l[2],Q=l[3],ie=l[4],de=l[5],we=l[6],pe=l[7],xe=l[8];return s[0]=V*h+G*x+Z*P,s[1]=V*p+G*S+Z*L,s[2]=V*y+G*A+Z*z,s[3]=Q*h+ie*x+de*P,s[4]=Q*p+ie*S+de*L,s[5]=Q*y+ie*A+de*z,s[6]=we*h+pe*x+xe*P,s[7]=we*p+pe*S+xe*L,s[8]=we*y+pe*A+xe*z,s}function ts(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function CE(s,i){var l=i[0],h=i[1],p=i[2],y=i[3],x=i[4],S=i[5],A=i[6],P=i[7],L=i[8],z=i[9],V=i[10],G=i[11],Z=i[12],Q=i[13],ie=i[14],de=i[15],we=l*S-h*x,pe=l*A-p*x,xe=l*P-y*x,Ae=h*A-p*S,Te=h*P-y*S,qe=p*P-y*A,Fe=L*Q-z*Z,et=L*ie-V*Z,ht=L*de-G*Z,Ze=z*ie-V*Q,nt=z*de-G*Q,it=V*de-G*ie,at=we*it-pe*nt+xe*Ze+Ae*ht-Te*et+qe*Fe;return at?(s[0]=(S*it-A*nt+P*Ze)*(at=1/at),s[1]=(p*nt-h*it-y*Ze)*at,s[2]=(Q*qe-ie*Te+de*Ae)*at,s[3]=(V*Te-z*qe-G*Ae)*at,s[4]=(A*ht-x*it-P*et)*at,s[5]=(l*it-p*ht+y*et)*at,s[6]=(ie*xe-Z*qe-de*pe)*at,s[7]=(L*qe-V*xe+G*pe)*at,s[8]=(x*nt-S*ht+P*Fe)*at,s[9]=(h*ht-l*nt-y*Fe)*at,s[10]=(Z*Te-Q*xe+de*we)*at,s[11]=(z*xe-L*Te-G*we)*at,s[12]=(S*et-x*Ze-A*Fe)*at,s[13]=(l*Ze-h*et+p*Fe)*at,s[14]=(Q*pe-Z*Ae-ie*we)*at,s[15]=(L*Ae-z*pe+V*we)*at,s):null}function dh(s,i,l){var h=i[0],p=i[1],y=i[2],x=i[3],S=i[4],A=i[5],P=i[6],L=i[7],z=i[8],V=i[9],G=i[10],Z=i[11],Q=i[12],ie=i[13],de=i[14],we=i[15],pe=l[0],xe=l[1],Ae=l[2],Te=l[3];return s[0]=pe*h+xe*S+Ae*z+Te*Q,s[1]=pe*p+xe*A+Ae*V+Te*ie,s[2]=pe*y+xe*P+Ae*G+Te*de,s[3]=pe*x+xe*L+Ae*Z+Te*we,s[4]=(pe=l[4])*h+(xe=l[5])*S+(Ae=l[6])*z+(Te=l[7])*Q,s[5]=pe*p+xe*A+Ae*V+Te*ie,s[6]=pe*y+xe*P+Ae*G+Te*de,s[7]=pe*x+xe*L+Ae*Z+Te*we,s[8]=(pe=l[8])*h+(xe=l[9])*S+(Ae=l[10])*z+(Te=l[11])*Q,s[9]=pe*p+xe*A+Ae*V+Te*ie,s[10]=pe*y+xe*P+Ae*G+Te*de,s[11]=pe*x+xe*L+Ae*Z+Te*we,s[12]=(pe=l[12])*h+(xe=l[13])*S+(Ae=l[14])*z+(Te=l[15])*Q,s[13]=pe*p+xe*A+Ae*V+Te*ie,s[14]=pe*y+xe*P+Ae*G+Te*de,s[15]=pe*x+xe*L+Ae*Z+Te*we,s}function rg(s,i,l){var h,p,y,x,S,A,P,L,z,V,G,Z,Q=l[0],ie=l[1],de=l[2];return i===s?(s[12]=i[0]*Q+i[4]*ie+i[8]*de+i[12],s[13]=i[1]*Q+i[5]*ie+i[9]*de+i[13],s[14]=i[2]*Q+i[6]*ie+i[10]*de+i[14],s[15]=i[3]*Q+i[7]*ie+i[11]*de+i[15]):(p=i[1],y=i[2],x=i[3],S=i[4],A=i[5],P=i[6],L=i[7],z=i[8],V=i[9],G=i[10],Z=i[11],s[0]=h=i[0],s[1]=p,s[2]=y,s[3]=x,s[4]=S,s[5]=A,s[6]=P,s[7]=L,s[8]=z,s[9]=V,s[10]=G,s[11]=Z,s[12]=h*Q+S*ie+z*de+i[12],s[13]=p*Q+A*ie+V*de+i[13],s[14]=y*Q+P*ie+G*de+i[14],s[15]=x*Q+L*ie+Z*de+i[15]),s}function ph(s,i,l){var h=l[0],p=l[1],y=l[2];return s[0]=i[0]*h,s[1]=i[1]*h,s[2]=i[2]*h,s[3]=i[3]*h,s[4]=i[4]*p,s[5]=i[5]*p,s[6]=i[6]*p,s[7]=i[7]*p,s[8]=i[8]*y,s[9]=i[9]*y,s[10]=i[10]*y,s[11]=i[11]*y,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function PE(s,i,l){var h=Math.sin(l),p=Math.cos(l),y=i[4],x=i[5],S=i[6],A=i[7],P=i[8],L=i[9],z=i[10],V=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=y*p+P*h,s[5]=x*p+L*h,s[6]=S*p+z*h,s[7]=A*p+V*h,s[8]=P*p-y*h,s[9]=L*p-x*h,s[10]=z*p-S*h,s[11]=V*p-A*h,s}function b0(s,i,l){var h=Math.sin(l),p=Math.cos(l),y=i[0],x=i[1],S=i[2],A=i[3],P=i[8],L=i[9],z=i[10],V=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*p-P*h,s[1]=x*p-L*h,s[2]=S*p-z*h,s[3]=A*p-V*h,s[8]=y*h+P*p,s[9]=x*h+L*p,s[10]=S*h+z*p,s[11]=A*h+V*p,s}function fI(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function dI(s,i,l){var h,p,y,x=l[0],S=l[1],A=l[2],P=Math.hypot(x,S,A);return P<x0?null:(x*=P=1/P,S*=P,A*=P,h=Math.sin(i),p=Math.cos(i),s[0]=x*x*(y=1-p)+p,s[1]=S*x*y+A*h,s[2]=A*x*y-S*h,s[3]=0,s[4]=x*S*y-A*h,s[5]=S*S*y+p,s[6]=A*S*y+x*h,s[7]=0,s[8]=x*A*y+S*h,s[9]=S*A*y-x*h,s[10]=A*A*y+p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var uq=dh;function OE(){var s=new bo(3);return bo!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function pI(s){var i=new bo(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function ng(s){return Math.hypot(s[0],s[1],s[2])}function Yf(s,i,l){var h=new bo(3);return h[0]=s,h[1]=i,h[2]=l,h}function Sl(s,i,l){return s[0]=i[0]+l[0],s[1]=i[1]+l[1],s[2]=i[2]+l[2],s}function ME(s,i,l){return s[0]=i[0]-l[0],s[1]=i[1]-l[1],s[2]=i[2]-l[2],s}function mI(s,i,l){return s[0]=i[0]*l[0],s[1]=i[1]*l[1],s[2]=i[2]*l[2],s}function ig(s,i,l){return s[0]=Math.min(i[0],l[0]),s[1]=Math.min(i[1],l[1]),s[2]=Math.min(i[2],l[2]),s}function og(s,i,l){return s[0]=Math.max(i[0],l[0]),s[1]=Math.max(i[1],l[1]),s[2]=Math.max(i[2],l[2]),s}function Uo(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s}function ag(s,i,l,h){return s[0]=i[0]+l[0]*h,s[1]=i[1]+l[1]*h,s[2]=i[2]+l[2]*h,s}function Gi(s,i){var l=i[0],h=i[1],p=i[2],y=l*l+h*h+p*p;return y>0&&(y=1/Math.sqrt(y)),s[0]=i[0]*y,s[1]=i[1]*y,s[2]=i[2]*y,s}function da(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function kE(s,i,l){var h=i[0],p=i[1],y=i[2],x=l[0],S=l[1],A=l[2];return s[0]=p*A-y*S,s[1]=y*x-h*A,s[2]=h*S-p*x,s}function An(s,i,l){var h=i[0],p=i[1],y=i[2],x=l[3]*h+l[7]*p+l[11]*y+l[15];return s[0]=(l[0]*h+l[4]*p+l[8]*y+l[12])/(x=x||1),s[1]=(l[1]*h+l[5]*p+l[9]*y+l[13])/x,s[2]=(l[2]*h+l[6]*p+l[10]*y+l[14])/x,s}function gI(s,i,l){var h=l[0],p=l[1],y=l[2],x=i[0],S=i[1],A=i[2],P=p*A-y*S,L=y*x-h*A,z=h*S-p*x,V=p*z-y*L,G=y*P-h*z,Z=h*L-p*P,Q=2*l[3];return L*=Q,z*=Q,G*=2,Z*=2,s[0]=x+(P*=Q)+(V*=2),s[1]=S+L+G,s[2]=A+z+Z,s}var sg,rs=ME,hq=mI,fq=ng;function yI(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s[3]=i[3]*l,s}function vI(s,i){var l=i[0],h=i[1],p=i[2],y=i[3],x=l*l+h*h+p*p+y*y;return x>0&&(x=1/Math.sqrt(x)),s[0]=l*x,s[1]=h*x,s[2]=p*x,s[3]=y*x,s}function mh(s,i,l){var h=i[0],p=i[1],y=i[2],x=i[3];return s[0]=l[0]*h+l[4]*p+l[8]*y+l[12]*x,s[1]=l[1]*h+l[5]*p+l[9]*y+l[13]*x,s[2]=l[2]*h+l[6]*p+l[10]*y+l[14]*x,s[3]=l[3]*h+l[7]*p+l[11]*y+l[15]*x,s}function _I(){var s=new bo(4);return bo!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function xI(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function bI(s,i,l){l*=.5;var h=i[0],p=i[1],y=i[2],x=i[3],S=Math.sin(l),A=Math.cos(l);return s[0]=h*A+x*S,s[1]=p*A+y*S,s[2]=y*A-p*S,s[3]=x*A-h*S,s}function wI(s,i,l){l*=.5;var h=i[0],p=i[1],y=i[2],x=i[3],S=Math.sin(l),A=Math.cos(l);return s[0]=h*A-y*S,s[1]=p*A+x*S,s[2]=y*A+h*S,s[3]=x*A-p*S,s}OE(),sg=new bo(4),bo!=Float32Array&&(sg[0]=0,sg[1]=0,sg[2]=0,sg[3]=0);var dq=vI;OE(),Yf(1,0,0),Yf(0,1,0),_I(),_I(),uI();const pq=Le([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:SI}=pq,EI=Le([{name:"a_pos_3",components:3,type:"Int16"}]);var lg=Le([{name:"a_pos",type:"Int16",components:2}]);class IE{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,h){const p=da(l,this.dir);if(Math.abs(p)<1e-6)return!1;const y=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/p;return h[0]=this.pos[0]+this.dir[0]*y,h[1]=this.pos[1]+this.dir[1]*y,h[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,l,h){if(function(G,Z){var Q=G[0],ie=G[1],de=G[2],we=Z[0],pe=Z[1],xe=Z[2];return Math.abs(Q-we)<=x0*Math.max(1,Math.abs(Q),Math.abs(we))&&Math.abs(ie-pe)<=x0*Math.max(1,Math.abs(ie),Math.abs(pe))&&Math.abs(de-xe)<=x0*Math.max(1,Math.abs(de),Math.abs(xe))}(this.pos,i)||l===0)return h[0]=h[1]=h[2]=0,!1;const[p,y,x]=this.dir,S=this.pos[0]-i[0],A=this.pos[1]-i[1],P=this.pos[2]-i[2],L=p*p+y*y+x*x,z=2*(S*p+A*y+P*x),V=z*z-4*L*(S*S+A*A+P*P-l*l);if(V<0){const G=Math.max(-z/2,0),Z=S+p*G,Q=A+y*G,ie=P+x*G,de=Math.hypot(Z,Q,ie);return h[0]=Z*l/de,h[1]=Q*l/de,h[2]=ie*l/de,!1}{const G=(-z-Math.sqrt(V))/(2*L);if(G<0){const Z=Math.hypot(S,A,P);return h[0]=S*l/Z,h[1]=A*l/Z,h[2]=P*l/Z,!1}return h[0]=S+p*G,h[1]=A+y*G,h[2]=P+x*G,!0}}}class DE{constructor(i,l,h,p,y){this.TL=i,this.TR=l,this.BR=h,this.BL=p,this.horizon=y}static fromInvProjectionMatrix(i,l,h){const p=[-1,1,1],y=[1,1,1],x=[1,-1,1],S=[-1,-1,1],A=An(p,p,i),P=An(y,y,i),L=An(x,x,i),z=An(S,S,i);return new DE(A,P,L,z,l/h)}}class RE{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,h,p){const y=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const P=mh([],A,i),L=1/P[3]/l*y;return function(z,V,G){return z[0]=V[0]*G[0],z[1]=V[1]*G[1],z[2]=V[2]*G[2],z[3]=V[3]*G[3],z}(P,P,[L,L,p?1/P[3]:L,L])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const P=Gi([],kE([],rs([],x[A[0]],x[A[1]]),rs([],x[A[2]],x[A[1]]))),L=-da(P,x[A[1]]);return P.concat(L)});return new RE(x,S)}}class Hi{static fromPoints(i){const l=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const p of i)ig(l,l,p),og(h,h,p);return new Hi(l,h)}static applyTransform(i,l){const h=i.getCorners();for(let p=0;p<h.length;++p)An(h[p],h[p],l);return Hi.fromPoints(h)}constructor(i,l){this.min=i,this.max=l,this.center=Uo([],Sl([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],h=pI(this.min),p=pI(this.max);for(let y=0;y<l.length;y++)h[y]=l[y]?this.min[y]:this.center[y],p[y]=l[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new Hi(h,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let h=!0;for(let p=0;p<i.planes.length;p++){const y=i.planes[p];let x=0;for(let S=0;S<l.length;S++)x+=da(y,l[S])+y[3]>=0;if(x===0)return 0;x!==l.length&&(h=!1)}if(h)return 2;for(let p=0;p<3;p++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let S=0;S<i.points.length;S++){const A=i.points[S][p]-this.min[p];y=Math.min(y,A),x=Math.max(x,A)}if(x<0||y>this.max[p]-this.min[p])return 0}return 1}}const LE=5,TI=6,ks=Wt/Math.PI/2,mq=16383,gh=64,cg=[gh,32,16],pa=-ks,ma=ks,gq=[new Hi([pa,pa,pa],[ma,ma,ma]),new Hi([pa,pa,pa],[0,0,ma]),new Hi([0,pa,pa],[ma,0,ma]),new Hi([pa,0,pa],[0,ma,ma]),new Hi([0,0,pa],[ma,ma,ma])];function w0(s){return s*ks/fg}function AI(s,i,l,h=!0){const p=Uo([],s._camera.position,s.worldSize),y=[i,l,1,1];mh(y,y,s.pixelMatrixInverse),yI(y,y,1/y[3]);const x=Gi([],rs([],y,p)),S=s.globeMatrix,A=[S[12],S[13],S[14]],P=rs([],A,p),L=ng(P),z=Gi([],P),V=s.worldSize/(2*Math.PI),G=da(z,x),Z=Math.asin(V/L);if(Z<Math.acos(G)){if(!h)return null;const ht=[],Ze=[];Uo(ht,x,L/G),Gi(Ze,rs(Ze,ht,P)),Gi(x,Sl(x,P,Uo(x,Ze,Math.tan(Z)*L)))}const Q=[];new IE(p,x).closestPointOnSphere(A,V,Q);const ie=Gi([],Hn(S,0)),de=Gi([],Hn(S,1)),we=Gi([],Hn(S,2)),pe=da(ie,Q),xe=da(de,Q),Ae=da(we,Q),Te=Ee(Math.asin(-xe/V));let qe=Ee(Math.atan2(pe,Ae));qe=s.center.lng+function(ht,Ze){const nt=(Ze-ht+180)%360-180;return nt<-180?nt+360:nt}(s.center.lng,qe);const Fe=Ds(qe),et=ke(Rs(Te),0,1);return new td(Fe,et)}class yq{constructor(i,l,h){this.a=rs([],i,h),this.b=rs([],l,h),this.center=h;const p=Gi([],this.a),y=Gi([],this.b);this.angle=Math.acos(da(p,y))}}function jE(s,i){if(s.angle===0)return null;let l;return l=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),l<0||l>1?null:function(h,p,y,x){const S=Math.sin(y);return h*(Math.sin((1-x)*y)/S)+p*(Math.sin(x*y)/S)}(s.a[i],s.b[i],s.angle,ke(l,0,1))+s.center[i]}function Is(s){if(s.z<=1)return gq[s.z+2*s.y+s.x];const i=$E(S0(s));return Hi.fromPoints(i)}function yh(s,i,l){return Uo(s,s,1-l),ag(s,s,i,l)}function CI(s,i){const l=ed(i.zoom);if(l===0)return Is(s);const h=S0(s),p=$E(h),y=Ds(h.getWest())*i.worldSize,x=Ds(h.getEast())*i.worldSize,S=Rs(h.getNorth())*i.worldSize,A=Rs(h.getSouth())*i.worldSize,P=[y,S,0],L=[x,S,0],z=[y,A,0],V=[x,A,0],G=CE([],i.globeMatrix);return An(P,P,G),An(L,L,G),An(z,z,G),An(V,V,G),p[0]=yh(p[0],z,l),p[1]=yh(p[1],V,l),p[2]=yh(p[2],L,l),p[3]=yh(p[3],P,l),Hi.fromPoints(p)}function PI(s,i,l){for(const h of s)An(h,h,i),Uo(h,h,l)}function vq(s,i,l){const h=i/s.worldSize,p=s.globeMatrix;if(l.z<=1){const Fe=Is(l).getCorners();return PI(Fe,p,h),Hi.fromPoints(Fe)}const y=S0(l),x=$E(y);PI(x,p,h);const S=Number.MAX_VALUE,A=[-S,-S,-S],P=[S,S,S];if(y.contains(s.center)){for(const ht of x)ig(P,P,ht),og(A,A,ht);A[2]=0;const Fe=s.point,et=[Fe.x*h,Fe.y*h,0];return ig(P,P,et),og(A,A,et),new Hi(P,A)}const L=[p[12]*h,p[13]*h,p[14]*h],z=y.getCenter(),V=ke(s.center.lat,-Ai,Ai),G=ke(z.lat,-Ai,Ai),Z=Ds(s.center.lng),Q=Rs(V);let ie=Z-Ds(z.lng);const de=Q-Rs(G);ie>.5?ie-=1:ie<-.5&&(ie+=1);let we=0;Math.abs(ie)>Math.abs(de)?we=ie>=0?1:3:(we=de>=0?0:2,ag(L,L,[p[4]*h,p[5]*h,p[6]*h],-Math.sin(ve(de>=0?y.getSouth():y.getNorth()))*ks));const pe=x[we],xe=x[(we+1)%4],Ae=new yq(pe,xe,L),Te=[jE(Ae,0)||pe[0],jE(Ae,1)||pe[1],jE(Ae,2)||pe[2]],qe=ed(s.zoom);if(qe>0){const Fe=function({x:ht,y:Ze,z:nt},it,at,gt,Je){const Tt=1/(1<<nt);let $t=ht*Tt,At=$t+Tt,tr=Ze*Tt,yt=tr+Tt,Ft=0;const rr=($t+At)/2-gt;return rr>.5?Ft=-1:rr<-.5&&(Ft=1),$t=(($t+Ft)*it-(gt*=it))*at+gt,At=((At+Ft)*it-gt)*at+gt,tr=(tr*it-(Je*=it))*at+Je,yt=(yt*it-Je)*at+Je,[[$t,yt,0],[At,yt,0],[At,tr,0],[$t,tr,0]]}(l,i,s._pixelsPerMercatorPixel,Z,Q);for(let ht=0;ht<x.length;ht++)yh(x[ht],Fe[ht],qe);const et=Sl([],Fe[we],Fe[(we+1)%4]);Uo(et,et,.5),yh(Te,et,qe)}for(const Fe of x)ig(P,P,Fe),og(A,A,Fe);return P[2]=Math.min(pe[2],xe[2]),ig(P,P,Te),og(A,A,Te),new Hi(P,A)}function S0({x:s,y:i,z:l}){const h=1/(1<<l),p=new Ur(Vo(s*h),Ti((i+1)*h)),y=new Ur(Vo((s+1)*h),Ti(i*h));return new kc(p,y)}function $E(s){const i=ve(s.getNorth()),l=ve(s.getSouth()),h=Math.cos(i),p=Math.cos(l),y=Math.sin(i),x=Math.sin(l),S=s.getWest(),A=s.getEast();return[Jf(p,x,S),Jf(p,x,A),Jf(h,y,A),Jf(h,y,S)]}function Jf(s,i,l,h=ks){return l=ve(l),[s*Math.sin(l)*h,-i*h,s*Math.cos(l)*h]}function Qf(s,i,l){return Jf(Math.cos(ve(s)),Math.sin(ve(s)),i,l)}function ug(s,i,l,h){const p=1<<l.z,y=(s/Wt+l.x)/p;return Qf(Ti((i/Wt+l.y)/p),Vo(y),h)}function E0({min:s,max:i}){return mq/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const OI=new Float64Array(16);function hg(s){const i=E0(s),l=fI(OI,[i,i,i]);return rg(l,l,((h=[])[0]=-(p=s.min)[0],h[1]=-p[1],h[2]=-p[2],h));var h,p}function NE(s){const i=(h=s.min,(l=OI)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=h[0],l[13]=h[1],l[14]=h[2],l[15]=1,l);var l,h;const p=1/E0(s);return ph(i,i,[p,p,p])}function MI(s,i,l,h,p){const y=function(A){const P=Wt/(2*Math.PI);return A/(2*Math.PI)/P}(l),x=[s,i,-l/(2*Math.PI)],S=ts(new Float64Array(16));return rg(S,S,x),ph(S,S,[y,y,y]),PE(S,S,ve(-p)),b0(S,S,ve(-h)),S}function ed(s){return Ge(LE,TI,s)}function kI(s,i){const l=Qf(i.lat,i.lng),h=function(Z){const Q=Qf(Z._center.lat,Z._center.lng);let ie=kE([],Yf(0,1,0),Q);const de=dI([],-Z.angle,Q);ie=An(ie,ie,de),dI(de,-Z._pitch,ie);const we=Gi([],Q);return Uo(we,we,w0(Z.cameraToCenterDistance/Z.pixelsPerMeter)),An(we,we,de),Sl([],Q,we)}(s);return x=(p=ME([],h,l))[0],S=p[1],A=p[2],P=(y=l)[0],L=y[1],z=y[2],G=(V=Math.sqrt(x*x+S*S+A*A)*Math.sqrt(P*P+L*L+z*z))&&da(p,y)/V,Math.acos(Math.min(Math.max(G,-1),1));var p,y,x,S,A,P,L,z,V,G}function zE(s,i){return kI(s,i)>Math.PI/2*1.01}const II=ve(85),_q=Math.cos(II),xq=Math.sin(II),fg=63710088e-1,DI=2*Math.PI*fg;class Ic{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ic(Ye(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,h=this.lat*l,p=i.lat*l,y=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*l);return fg*Math.acos(Math.min(y,1))}toBounds(i=0){const l=360*i/40075017,h=l/Math.cos(Math.PI/180*this.lat);return new kc(new Ic(this.lng-h,this.lat-l),new Ic(this.lng+h,this.lat+l))}toEcef(i){const l=w0(i);return Qf(this.lat,this.lng,ks+l)}static convert(i){if(i instanceof Ic)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ic(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ic(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ur=Ic;function BE(s){return DI*Math.cos(s*Math.PI/180)}function Ds(s){return(180+s)/360}function Rs(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function ns(s,i){return s/BE(i)}function Vo(s){return 360*s-180}function Ti(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function RI(s,i){return s*BE(Ti(i))}const Ai=85.051129;function LI(s){return 1/Math.cos(s*Math.PI/180)}class td{constructor(i,l,h=0){this.x=+i,this.y=+l,this.z=+h}static fromLngLat(i,l=0){const h=Ur.convert(i);return new td(Ds(h.lng),Rs(h.lat),ns(l,h.lat))}toLngLat(){return new Ur(Vo(this.x),Ti(this.y))}toAltitude(){return RI(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/DI*LI(Ti(this.y))}}function FE(s,i,l,h,p,y,x,S,A){const P=(i+h)/2,L=(l+p)/2,z=new ae(P,L);S(z),function(V,G,Z,Q,ie,de){const we=Z-ie,pe=Q-de;return Math.abs((Q-G)*we-(Z-V)*pe)/Math.hypot(we,pe)}(z.x,z.y,y.x,y.y,x.x,x.y)>=A?(FE(s,i,l,P,L,y,z,S,A),FE(s,P,L,h,p,z,x,S,A)):s.push(x)}function jI(s,i,l){let h=s[0],p=h.x,y=h.y;i(h);const x=[h];for(let S=1;S<s.length;S++){const A=s[S],{x:P,y:L}=A;i(A),FE(x,p,y,P,L,h,A,i,l),p=P,y=L,h=A}return x}function UE(s,i,l,h){if(h(i,l)){const p=i.add(l)._mult(.5);UE(s,i,p,h),UE(s,p,l,h)}else s.push(l)}function bq(s,i){let l=s[0];const h=[l];for(let p=1;p<s.length;p++){const y=s[p];UE(h,l,y,i),l=y}return h}const VE=Math.pow(2,14)-1,$I=-VE-1;function wq(s,i){const l=Math.round(s.x*i),h=Math.round(s.y*i);return s.x=ke(l,$I,VE),s.y=ke(h,$I,VE),(l<s.x||l>s.x+1||h<s.y||h>s.y+1)&&Nt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function El(s,i,l){const h=s.loadGeometry(),p=s.extent,y=Wt/p;if(i&&l&&l.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:S,x:A,y:P,projection:L}=l,z=V=>{const G=Vo((i.x+V.x/p)/x),Z=Ti((i.y+V.y/p)/x),Q=L.project(G,Z);V.x=(Q.x*S-A)*p,V.y=(Q.y*S-P)*p};for(let V=0;V<h.length;V++)if(s.type!==1)h[V]=jI(h[V],z,1);else{const G=[];for(const Z of h[V])Z.x<0||Z.x>=p||Z.y<0||Z.y>=p||(z(Z),G.push(Z));h[V]=G}}for(const x of h)for(const S of x)wq(S,y);return h}function vh(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?El(s):[]}}function T0(s,i,l,h,p){s.emplaceBack(2*i+(h+1)/2,2*l+(p+1)/2)}function A0(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class WE{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new ut,this.indexArray=new zt,this.segments=new Dn,this.programConfigurations=new fh(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h,p){const y=this.layers[0],x=[];let S=null;y.type==="circle"&&(S=y.layout.get("circle-sort-key"));for(const{feature:P,id:L,index:z,sourceLayerIndex:V}of i){const G=this.layers[0]._featureFilter.needGeometry,Z=vh(P,G);if(!this.layers[0]._featureFilter.filter(new N(this.zoom),Z,h))continue;const Q=S?S.evaluate(Z,{},h):void 0,ie={id:L,properties:P.properties,type:P.type,sourceLayerIndex:V,index:z,geometry:G?Z.geometry:El(P,h,p),patterns:{},sortKey:Q};x.push(ie)}S&&x.sort((P,L)=>P.sortKey-L.sortKey);let A=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new ft,A=p.projection);for(const P of x){const{geometry:L,index:z,sourceLayerIndex:V}=P,G=i[z].feature;this.addFeature(P,L,z,l.availableImages,h,A),l.featureIndex.insert(G,L,z,V,this.index)}}update(i,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lq.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,cq.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,h,p,y,x){for(const S of l)for(const A of S){const P=A.x,L=A.y;if(P<0||P>=Wt||L<0||L>=Wt)continue;if(x){const G=x.projectTilePoint(P,L,y),Z=x.upVector(y,P,L),Q=this.globeExtVertexArray;A0(Q,G,Z),A0(Q,G,Z),A0(Q,G,Z),A0(Q,G,Z)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),V=z.vertexLength;T0(this.layoutVertexArray,P,L,-1,-1),T0(this.layoutVertexArray,P,L,1,-1),T0(this.layoutVertexArray,P,L,1,1),T0(this.layoutVertexArray,P,L,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+2,V+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p,y)}}function NI(s,i){for(let l=0;l<s.length;l++)if(_h(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(_h(s,i[l]))return!0;return!!qE(s,i)}function Sq(s,i,l){return!!_h(s,i)||!!GE(i,s,l)}function zI(s,i){if(s.length===1)return FI(i,s[0]);for(let l=0;l<i.length;l++){const h=i[l];for(let p=0;p<h.length;p++)if(_h(s,h[p]))return!0}for(let l=0;l<s.length;l++)if(FI(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(qE(s,i[l]))return!0;return!1}function Eq(s,i,l){if(s.length>1){if(qE(s,i))return!0;for(let h=0;h<i.length;h++)if(GE(i[h],s,l))return!0}for(let h=0;h<s.length;h++)if(GE(s[h],i,l))return!0;return!1}function qE(s,i){if(s.length===0||i.length===0)return!1;for(let l=0;l<s.length-1;l++){const h=s[l],p=s[l+1];for(let y=0;y<i.length-1;y++)if(Tq(h,p,i[y],i[y+1]))return!0}return!1}function Tq(s,i,l,h){return vr(s,l,h)!==vr(i,l,h)&&vr(s,i,l)!==vr(s,i,h)}function GE(s,i,l){const h=l*l;if(i.length===1)return s.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(BI(s,i[p-1],i[p])<h)return!0;return!1}function BI(s,i,l){const h=i.distSqr(l);if(h===0)return s.distSqr(i);const p=((s.x-i.x)*(l.x-i.x)+(s.y-i.y)*(l.y-i.y))/h;return s.distSqr(p<0?i:p>1?l:l.sub(i)._mult(p)._add(i))}function FI(s,i){let l,h,p,y=!1;for(let x=0;x<s.length;x++){l=s[x];for(let S=0,A=l.length-1;S<l.length;A=S++)h=l[S],p=l[A],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(y=!y)}return y}function _h(s,i){let l=!1;for(let h=0,p=s.length-1;h<s.length;p=h++){const y=s[h],x=s[p];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(l=!l)}return l}function UI(s,i,l,h,p){for(const x of s)if(i<=x.x&&l<=x.y&&h>=x.x&&p>=x.y)return!0;const y=[new ae(i,l),new ae(i,p),new ae(h,p),new ae(h,l)];if(s.length>2){for(const x of y)if(_h(s,x))return!0}for(let x=0;x<s.length-1;x++)if(Aq(s[x],s[x+1],y))return!0;return!1}function Aq(s,i,l){const h=l[0],p=l[2];if(s.x<h.x&&i.x<h.x||s.x>p.x&&i.x>p.x||s.y<h.y&&i.y<h.y||s.y>p.y&&i.y>p.y)return!1;const y=vr(s,i,l[0]);return y!==vr(s,i,l[1])||y!==vr(s,i,l[2])||y!==vr(s,i,l[3])}function rd(s,i,l){const h=i.paint.get(s).value;return h.kind==="constant"?h.value:l.programConfigurations.get(i.id).getMaxValue(s)}function C0(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function VI(s,i,l,h,p){if(!i[0]&&!i[1])return s;const y=ae.convert(i)._mult(p);l==="viewport"&&y._rotate(-h);const x=[];for(let S=0;S<s.length;S++)x.push(s[S].sub(y));return x}function WI(s,i,l,h){const p=ae.convert(s)._mult(h);return i==="viewport"&&p._rotate(-l),p}Rt(WE,"CircleBucket",{omit:["layers"]});const Cq=new ye({"circle-sort-key":new se(Qe.layout_circle["circle-sort-key"])});var Pq={paint:new ye({"circle-radius":new se(Qe.paint_circle["circle-radius"]),"circle-color":new se(Qe.paint_circle["circle-color"]),"circle-blur":new se(Qe.paint_circle["circle-blur"]),"circle-opacity":new se(Qe.paint_circle["circle-opacity"]),"circle-translate":new J(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new J(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new J(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new J(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(Qe.paint_circle["circle-stroke-opacity"])}),layout:Cq};function qI(s,i,l,h,p,y,x,S,A){if(y&&s.queryGeometry.isAboveHorizon)return!1;y&&(A*=s.pixelToTileUnitsFactor);const P=s.tileID.canonical,L=l.projection.upVectorScale(P,l.center.lat,l.worldSize).metersToTile;for(const z of i)for(const V of z){const G=V.add(S),Z=p&&l.elevation?l.elevation.exaggeration()*p.getElevationAt(G.x,G.y,!0):0,Q=l.projection.projectTilePoint(G.x,G.y,P);if(Z>0){const pe=l.projection.upVector(P,G.x,G.y);Q.x+=pe[0]*L*Z,Q.y+=pe[1]*L*Z,Q.z+=pe[2]*L*Z}const ie=y?G:Oq(Q.x,Q.y,Q.z,h),de=y?s.tilespaceRays.map(pe=>kq(pe,Z)):s.queryGeometry.screenGeometry,we=mh([],[Q.x,Q.y,Q.z,1],h);if(!x&&y?A*=we[3]/l.cameraToCenterDistance:x&&!y&&(A*=l.cameraToCenterDistance/we[3]),y){const pe=Ti((V.y/Wt+P.y)/(1<<P.z));A/=l.projection.pixelsPerMeter(pe,1)/ns(1,pe)}if(Sq(de,ie,A))return!0}return!1}function Oq(s,i,l,h){const p=mh([],[s,i,l,1],h);return new ae(p[0]/p[3],p[1]/p[3])}const GI=Yf(0,0,0),Mq=Yf(0,0,1);function kq(s,i){const l=OE();return GI[2]=i,s.intersectsPlane(GI,Mq,l),new ae(l[0],l[1])}class HI extends WE{}function ZI(s,{width:i,height:l},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*l*h)throw new RangeError("mismatched image size")}else p=new Uint8Array(i*l*h);return s.width=i,s.height=l,s.data=p,s}function XI(s,i,l){const{width:h,height:p}=i;h===s.width&&p===s.height||(HE(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,h),height:Math.min(s.height,p)},l),s.width=h,s.height=p,s.data=i.data)}function HE(s,i,l,h,p,y){if(p.width===0||p.height===0)return i;if(p.width>s.width||p.height>s.height||l.x>s.width-p.width||l.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,S=i.data;for(let A=0;A<p.height;A++){const P=((l.y+A)*s.width+l.x)*y,L=((h.y+A)*i.width+h.x)*y;for(let z=0;z<p.width*y;z++)S[L+z]=x[P+z]}return i}Rt(HI,"HeatmapBucket",{omit:["layers"]});class Tl{constructor(i,l){ZI(this,i,1,l)}resize(i){XI(this,new Tl(i),1)}clone(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,p,y){HE(i,l,h,p,y,1)}}class wo{constructor(i,l){ZI(this,i,4,l)}resize(i){XI(this,new wo(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new wo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,p,y){HE(i,l,h,p,y,4)}}Rt(Tl,"AlphaImage"),Rt(wo,"RGBAImage");var Iq={paint:new ye({"heatmap-radius":new se(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new J(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new me(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new J(Qe.paint_heatmap["heatmap-opacity"])})};function ZE(s){const i={},l=s.resolution||256,h=s.clips?s.clips.length:1,p=s.image||new wo({width:l,height:h}),y=(x,S,A)=>{i[s.evaluationKey]=A;const P=s.expression.evaluate(i);p.data[x+S+0]=Math.floor(255*P.r/P.a),p.data[x+S+1]=Math.floor(255*P.g/P.a),p.data[x+S+2]=Math.floor(255*P.b/P.a),p.data[x+S+3]=Math.floor(255*P.a)};if(s.clips)for(let x=0,S=0;x<h;++x,S+=4*l)for(let A=0,P=0;A<l;A++,P+=4){const L=A/(l-1),{start:z,end:V}=s.clips[x];y(S,P,z*(1-L)+V*L)}else for(let x=0,S=0;x<l;x++,S+=4)y(0,S,x/(l-1));return p}var Dq={paint:new ye({"hillshade-illumination-direction":new J(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new J(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new J(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new J(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new J(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new J(Qe.paint_hillshade["hillshade-accent-color"])})};const Rq=Le([{name:"a_pos",components:2,type:"Int16"}],4),{members:Lq}=Rq;var XE={exports:{}};function P0(s,i,l){l=l||2;var h,p,y,x,S,A,P,L=i&&i.length,z=L?i[0]*l:s.length,V=KI(s,0,z,l,!0),G=[];if(!V||V.next===V.prev)return G;if(L&&(V=function(Q,ie,de,we){var pe,xe,Ae,Te=[];for(pe=0,xe=ie.length;pe<xe;pe++)(Ae=KI(Q,ie[pe]*we,pe<xe-1?ie[pe+1]*we:Q.length,we,!1))===Ae.next&&(Ae.steiner=!0),Te.push(Vq(Ae));for(Te.sort(Bq),pe=0;pe<Te.length;pe++)de=Fq(Te[pe],de);return de}(s,i,V,l)),s.length>80*l){h=y=s[0],p=x=s[1];for(var Z=l;Z<z;Z+=l)(S=s[Z])<h&&(h=S),(A=s[Z+1])<p&&(p=A),S>y&&(y=S),A>x&&(x=A);P=(P=Math.max(y-h,x-p))!==0?32767/P:0}return dg(V,G,l,h,p,P,0),G}function KI(s,i,l,h,p){var y,x;if(p===JE(s,i,l,h)>0)for(y=i;y<l;y+=h)x=QI(y,s[y],s[y+1],x);else for(y=l-h;y>=i;y-=h)x=QI(y,s[y],s[y+1],x);return x&&O0(x,x.next)&&(mg(x),x=x.next),x}function xh(s,i){if(!s)return s;i||(i=s);var l,h=s;do if(l=!1,h.steiner||!O0(h,h.next)&&Rn(h.prev,h,h.next)!==0)h=h.next;else{if(mg(h),(h=i=h.prev)===h.next)break;l=!0}while(l||h!==i);return i}function dg(s,i,l,h,p,y,x){if(s){!x&&y&&function(L,z,V,G){var Z=L;do Z.z===0&&(Z.z=KE(Z.x,Z.y,z,V,G)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==L);Z.prevZ.nextZ=null,Z.prevZ=null,function(Q){var ie,de,we,pe,xe,Ae,Te,qe,Fe=1;do{for(de=Q,Q=null,xe=null,Ae=0;de;){for(Ae++,we=de,Te=0,ie=0;ie<Fe&&(Te++,we=we.nextZ);ie++);for(qe=Fe;Te>0||qe>0&&we;)Te!==0&&(qe===0||!we||de.z<=we.z)?(pe=de,de=de.nextZ,Te--):(pe=we,we=we.nextZ,qe--),xe?xe.nextZ=pe:Q=pe,pe.prevZ=xe,xe=pe;de=we}xe.nextZ=null,Fe*=2}while(Ae>1)}(Z)}(s,h,p,y);for(var S,A,P=s;s.prev!==s.next;)if(S=s.prev,A=s.next,y?$q(s,h,p,y):jq(s))i.push(S.i/l|0),i.push(s.i/l|0),i.push(A.i/l|0),mg(s),s=A.next,P=A.next;else if((s=A)===P){x?x===1?dg(s=Nq(xh(s),i,l),i,l,h,p,y,2):x===2&&zq(s,i,l,h,p,y):dg(xh(s),i,l,h,p,y,1);break}}}function jq(s){var i=s.prev,l=s,h=s.next;if(Rn(i,l,h)>=0)return!1;for(var p=i.x,y=l.x,x=h.x,S=i.y,A=l.y,P=h.y,L=p<y?p<x?p:x:y<x?y:x,z=S<A?S<P?S:P:A<P?A:P,V=p>y?p>x?p:x:y>x?y:x,G=S>A?S>P?S:P:A>P?A:P,Z=h.next;Z!==i;){if(Z.x>=L&&Z.x<=V&&Z.y>=z&&Z.y<=G&&nd(p,S,y,A,x,P,Z.x,Z.y)&&Rn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function $q(s,i,l,h){var p=s.prev,y=s,x=s.next;if(Rn(p,y,x)>=0)return!1;for(var S=p.x,A=y.x,P=x.x,L=p.y,z=y.y,V=x.y,G=S<A?S<P?S:P:A<P?A:P,Z=L<z?L<V?L:V:z<V?z:V,Q=S>A?S>P?S:P:A>P?A:P,ie=L>z?L>V?L:V:z>V?z:V,de=KE(G,Z,i,l,h),we=KE(Q,ie,i,l,h),pe=s.prevZ,xe=s.nextZ;pe&&pe.z>=de&&xe&&xe.z<=we;){if(pe.x>=G&&pe.x<=Q&&pe.y>=Z&&pe.y<=ie&&pe!==p&&pe!==x&&nd(S,L,A,z,P,V,pe.x,pe.y)&&Rn(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,xe.x>=G&&xe.x<=Q&&xe.y>=Z&&xe.y<=ie&&xe!==p&&xe!==x&&nd(S,L,A,z,P,V,xe.x,xe.y)&&Rn(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;pe&&pe.z>=de;){if(pe.x>=G&&pe.x<=Q&&pe.y>=Z&&pe.y<=ie&&pe!==p&&pe!==x&&nd(S,L,A,z,P,V,pe.x,pe.y)&&Rn(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;xe&&xe.z<=we;){if(xe.x>=G&&xe.x<=Q&&xe.y>=Z&&xe.y<=ie&&xe!==p&&xe!==x&&nd(S,L,A,z,P,V,xe.x,xe.y)&&Rn(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function Nq(s,i,l){var h=s;do{var p=h.prev,y=h.next.next;!O0(p,y)&&YI(p,h,h.next,y)&&pg(p,y)&&pg(y,p)&&(i.push(p.i/l|0),i.push(h.i/l|0),i.push(y.i/l|0),mg(h),mg(h.next),h=s=y),h=h.next}while(h!==s);return xh(h)}function zq(s,i,l,h,p,y){var x=s;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&Wq(x,S)){var A=JI(x,S);return x=xh(x,x.next),A=xh(A,A.next),dg(x,i,l,h,p,y,0),void dg(A,i,l,h,p,y,0)}S=S.next}x=x.next}while(x!==s)}function Bq(s,i){return s.x-i.x}function Fq(s,i){var l=function(p,y){var x,S=y,A=p.x,P=p.y,L=-1/0;do{if(P<=S.y&&P>=S.next.y&&S.next.y!==S.y){var z=S.x+(P-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(z<=A&&z>L&&(L=z,x=S.x<S.next.x?S:S.next,z===A))return x}S=S.next}while(S!==y);if(!x)return null;var V,G=x,Z=x.x,Q=x.y,ie=1/0;S=x;do A>=S.x&&S.x>=Z&&A!==S.x&&nd(P<Q?A:L,P,Z,Q,P<Q?L:A,P,S.x,S.y)&&(V=Math.abs(P-S.y)/(A-S.x),pg(S,p)&&(V<ie||V===ie&&(S.x>x.x||S.x===x.x&&Uq(x,S)))&&(x=S,ie=V)),S=S.next;while(S!==G);return x}(s,i);if(!l)return i;var h=JI(l,s);return xh(h,h.next),xh(l,l.next)}function Uq(s,i){return Rn(s.prev,s,i.prev)<0&&Rn(i.next,s,s.next)<0}function KE(s,i,l,h,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Vq(s){var i=s,l=s;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==s);return l}function nd(s,i,l,h,p,y,x,S){return(p-x)*(i-S)>=(s-x)*(y-S)&&(s-x)*(h-S)>=(l-x)*(i-S)&&(l-x)*(y-S)>=(p-x)*(h-S)}function Wq(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(l,h){var p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==h.i&&p.next.i!==h.i&&YI(p,p.next,l,h))return!0;p=p.next}while(p!==l);return!1}(s,i)&&(pg(s,i)&&pg(i,s)&&function(l,h){var p=l,y=!1,x=(l.x+h.x)/2,S=(l.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next;while(p!==l);return y}(s,i)&&(Rn(s.prev,s,i.prev)||Rn(s,i.prev,i))||O0(s,i)&&Rn(s.prev,s,s.next)>0&&Rn(i.prev,i,i.next)>0)}function Rn(s,i,l){return(i.y-s.y)*(l.x-i.x)-(i.x-s.x)*(l.y-i.y)}function O0(s,i){return s.x===i.x&&s.y===i.y}function YI(s,i,l,h){var p=k0(Rn(s,i,l)),y=k0(Rn(s,i,h)),x=k0(Rn(l,h,s)),S=k0(Rn(l,h,i));return p!==y&&x!==S||!(p!==0||!M0(s,l,i))||!(y!==0||!M0(s,h,i))||!(x!==0||!M0(l,s,h))||!(S!==0||!M0(l,i,h))}function M0(s,i,l){return i.x<=Math.max(s.x,l.x)&&i.x>=Math.min(s.x,l.x)&&i.y<=Math.max(s.y,l.y)&&i.y>=Math.min(s.y,l.y)}function k0(s){return s>0?1:s<0?-1:0}function pg(s,i){return Rn(s.prev,s,s.next)<0?Rn(s,i,s.next)>=0&&Rn(s,s.prev,i)>=0:Rn(s,i,s.prev)<0||Rn(s,s.next,i)<0}function JI(s,i){var l=new YE(s.i,s.x,s.y),h=new YE(i.i,i.x,i.y),p=s.next,y=i.prev;return s.next=i,i.prev=s,l.next=p,p.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function QI(s,i,l,h){var p=new YE(s,i,l);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function mg(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function YE(s,i,l){this.i=s,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JE(s,i,l,h){for(var p=0,y=i,x=l-h;y<l;y+=h)p+=(s[x]-s[y])*(s[y+1]+s[x+1]),x=y;return p}XE.exports=P0,XE.exports.default=P0,P0.deviation=function(s,i,l,h){var p=i&&i.length,y=Math.abs(JE(s,0,p?i[0]*l:s.length,l));if(p)for(var x=0,S=i.length;x<S;x++)y-=Math.abs(JE(s,i[x]*l,x<S-1?i[x+1]*l:s.length,l));var A=0;for(x=0;x<h.length;x+=3){var P=h[x]*l,L=h[x+1]*l,z=h[x+2]*l;A+=Math.abs((s[P]-s[z])*(s[L+1]-s[P+1])-(s[P]-s[L])*(s[z+1]-s[P+1]))}return y===0&&A===0?0:Math.abs((A-y)/y)},P0.flatten=function(s){for(var i=s[0][0].length,l={vertices:[],holes:[],dimensions:i},h=0,p=0;p<s.length;p++){for(var y=0;y<s[p].length;y++)for(var x=0;x<i;x++)l.vertices.push(s[p][y][x]);p>0&&l.holes.push(h+=s[p-1].length)}return l};var QE=R(XE.exports);function qq(s,i,l,h,p){eD(s,i,l||0,h||s.length-1,p||Gq)}function eD(s,i,l,h,p){for(;h>l;){if(h-l>600){var y=h-l+1,x=i-l+1,S=Math.log(y),A=.5*Math.exp(2*S/3),P=.5*Math.sqrt(S*A*(y-A)/y)*(x-y/2<0?-1:1);eD(s,i,Math.max(l,Math.floor(i-x*A/y+P)),Math.min(h,Math.floor(i+(y-x)*A/y+P)),p)}var L=s[i],z=l,V=h;for(gg(s,l,i),p(s[h],L)>0&&gg(s,l,h);z<V;){for(gg(s,z,V),z++,V--;p(s[z],L)<0;)z++;for(;p(s[V],L)>0;)V--}p(s[l],L)===0?gg(s,l,V):gg(s,++V,h),V<=i&&(l=V+1),i<=V&&(h=V-1)}}function gg(s,i,l){var h=s[i];s[i]=s[l],s[l]=h}function Gq(s,i){return s<i?-1:s>i?1:0}function eT(s,i){const l=s.length;if(l<=1)return[s];const h=[];let p,y;for(let x=0;x<l;x++){const S=nn(s[x]);S!==0&&(s[x].area=Math.abs(S),y===void 0&&(y=S<0),y===S<0?(p&&h.push(p),p=[s[x]]):p.push(s[x]))}if(p&&h.push(p),i>1)for(let x=0;x<h.length;x++)h[x].length<=i||(qq(h[x],i,1,h[x].length-1,Hq),h[x]=h[x].slice(0,i));return h}function Hq(s,i){return i.area-s.area}function tT(s,i,l){const h=l.patternDependencies;let p=!1;for(const y of i){const x=y.paint.get(`${s}-pattern`);x.isConstant()||(p=!0);const S=x.constantOr(null);S&&(p=!0,h[S]=!0)}return p}function rT(s,i,l,h,p){const y=p.patternDependencies;for(const x of i){const S=x.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let A=S.evaluate({zoom:h},l,{},p.availableImages);A=A&&A.name?A.name:A,y[A]=!0,l.patterns[x.id]=A}}return l}class I0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ut,this.indexArray=new zt,this.indexArray2=new ti,this.programConfigurations=new fh(i.layers,i.zoom),this.segments=new Dn,this.segments2=new Dn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=i.projection}populate(i,l,h,p){this.hasPattern=tT("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:S,id:A,index:P,sourceLayerIndex:L}of i){const z=this.layers[0]._featureFilter.needGeometry,V=vh(S,z);if(!this.layers[0]._featureFilter.filter(new N(this.zoom),V,h))continue;const G=y?y.evaluate(V,{},h,l.availableImages):void 0,Z={id:A,properties:S.properties,type:S.type,sourceLayerIndex:L,index:P,geometry:z?V.geometry:El(S,h,p),patterns:{},sortKey:G};x.push(Z)}y&&x.sort((S,A)=>S.sortKey-A.sortKey);for(const S of x){const{geometry:A,index:P,sourceLayerIndex:L}=S;if(this.hasPattern){const z=rT("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(S,A,P,h,{},l.availableImages);l.featureIndex.insert(i[P].feature,A,P,L,this.index)}}update(i,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,p)}addFeatures(i,l,h,p,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Lq),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,h,p,y,x=[]){for(const S of eT(l,500)){let A=0;for(const Z of S)A+=Z.length;const P=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),L=P.vertexLength,z=[],V=[];for(const Z of S){if(Z.length===0)continue;Z!==S[0]&&V.push(z.length/2);const Q=this.segments2.prepareSegment(Z.length,this.layoutVertexArray,this.indexArray2),ie=Q.vertexLength;this.layoutVertexArray.emplaceBack(Z[0].x,Z[0].y),this.indexArray2.emplaceBack(ie+Z.length-1,ie),z.push(Z[0].x),z.push(Z[0].y);for(let de=1;de<Z.length;de++)this.layoutVertexArray.emplaceBack(Z[de].x,Z[de].y),this.indexArray2.emplaceBack(ie+de-1,ie+de),z.push(Z[de].x),z.push(Z[de].y);Q.vertexLength+=Z.length,Q.primitiveLength+=Z.length}const G=QE(z,V);for(let Z=0;Z<G.length;Z+=3)this.indexArray.emplaceBack(L+G[Z],L+G[Z+1],L+G[Z+2]);P.vertexLength+=A,P.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,p)}}Rt(I0,"FillBucket",{omit:["layers","patternFeatures"]});const Zq=new ye({"fill-sort-key":new se(Qe.layout_fill["fill-sort-key"])});var Xq={paint:new ye({"fill-antialias":new J(Qe.paint_fill["fill-antialias"]),"fill-opacity":new se(Qe.paint_fill["fill-opacity"]),"fill-color":new se(Qe.paint_fill["fill-color"]),"fill-outline-color":new se(Qe.paint_fill["fill-outline-color"]),"fill-translate":new J(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new J(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new se(Qe.paint_fill["fill-pattern"])}),layout:Zq};const Kq=Le([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Yq=Le([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Jq=Le([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Qq}=Kq;var D0={},eG=ee,tD=id;function id(s,i,l,h,p){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=p,s.readFields(tG,this,i)}function tG(s,i,l){s==1?i.id=l.readVarint():s==2?function(h,p){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[x]=S}}(l,i):s==3?i.type=l.readVarint():s==4&&(i._geometry=l.pos)}function rG(s){for(var i,l,h=0,p=0,y=s.length,x=y-1;p<y;x=p++)h+=((l=s[x]).x-(i=s[p]).x)*(i.y+l.y);return h}id.types=["Unknown","Point","LineString","Polygon"],id.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,l=s.readVarint()+s.pos,h=1,p=0,y=0,x=0,S=[];s.pos<l;){if(p<=0){var A=s.readVarint();h=7&A,p=A>>3}if(p--,h===1||h===2)y+=s.readSVarint(),x+=s.readSVarint(),h===1&&(i&&S.push(i),i=[]),i.push(new eG(y,x));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&S.push(i),S},id.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,l=1,h=0,p=0,y=0,x=1/0,S=-1/0,A=1/0,P=-1/0;s.pos<i;){if(h<=0){var L=s.readVarint();l=7&L,h=L>>3}if(h--,l===1||l===2)(p+=s.readSVarint())<x&&(x=p),p>S&&(S=p),(y+=s.readSVarint())<A&&(A=y),y>P&&(P=y);else if(l!==7)throw new Error("unknown command "+l)}return[x,A,S,P]},id.prototype.toGeoJSON=function(s,i,l){var h,p,y=this.extent*Math.pow(2,l),x=this.extent*s,S=this.extent*i,A=this.loadGeometry(),P=id.types[this.type];function L(G){for(var Z=0;Z<G.length;Z++){var Q=G[Z];G[Z]=[360*(Q.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(h=0;h<A.length;h++)z[h]=A[h][0];L(A=z);break;case 2:for(h=0;h<A.length;h++)L(A[h]);break;case 3:for(A=function(G){var Z=G.length;if(Z<=1)return[G];for(var Q,ie,de=[],we=0;we<Z;we++){var pe=rG(G[we]);pe!==0&&(ie===void 0&&(ie=pe<0),ie===pe<0?(Q&&de.push(Q),Q=[G[we]]):Q.push(G[we]))}return Q&&de.push(Q),de}(A),h=0;h<A.length;h++)for(p=0;p<A[h].length;p++)L(A[h][p])}A.length===1?A=A[0]:P="Multi"+P;var V={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(V.id=this.id),V};var nG=tD,rD=nD;function nD(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(iG,this,i),this.length=this._features.length}function iG(s,i,l){s===15?i.version=l.readVarint():s===1?i.name=l.readString():s===5?i.extent=l.readVarint():s===2?i._features.push(l.pos):s===3?i._keys.push(l.readString()):s===4&&i._values.push(function(h){for(var p=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(l))}nD.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new nG(this._pbf,i,this.extent,this._keys,this._values)};var oG=rD;function aG(s,i,l){if(s===3){var h=new oG(l,l.readVarint()+l.pos);h.length&&(i[h.name]=h)}}var nT=D0.VectorTile=function(s,i){this.layers=s.readFields(aG,{},i)},R0=D0.VectorTileFeature=tD;function L0(s,i,l,h){const p=[],y=h===0?(x,S,A,P,L,z)=>{x.push(new ae(z,A+(z-S)/(P-S)*(L-A)))}:(x,S,A,P,L,z)=>{x.push(new ae(S+(z-A)/(L-A)*(P-S),z))};for(const x of s){const S=[];for(const A of x){if(A.length<=2)continue;const P=[];for(let V=0;V<A.length-1;V++){const G=A[V].x,Z=A[V].y,Q=A[V+1].x,ie=A[V+1].y,de=h===0?G:Z,we=h===0?Q:ie;de<i?we>i&&y(P,G,Z,Q,ie,i):de>l?we<l&&y(P,G,Z,Q,ie,l):P.push(A[V]),we<i&&de>=i&&y(P,G,Z,Q,ie,i),we>l&&de<=l&&y(P,G,Z,Q,ie,l)}let L=A[A.length-1];const z=h===0?L.x:L.y;z>=i&&z<=l&&P.push(L),P.length&&(L=P[P.length-1],P[0].x===L.x&&P[0].y===L.y||P.push(P[0]),S.push(P))}S.length&&p.push(S)}return p}D0.VectorTileLayer=rD;const sG=R0.types,lG=Math.pow(2,13);function yg(s,i,l,h,p,y,x,S){s.emplaceBack((i<<1)+x,(l<<1)+y,(Math.floor(h*lG)<<1)+p,Math.round(S))}function vg(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class iD{constructor(){this.acc=new ae(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ae(i.x,i.y),this.max=new ae(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const h=this.min,p=this.max;i.x<h.x?h.x=i.x:i.x>p.x&&(p.x=i.x),i.y<h.y?h.y=i.y:i.y>p.y&&(p.y=i.y),((i.x===0||i.x===Wt)&&i.x===l.x)!=((i.y===0||i.y===Wt)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,Sr(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>Wt!=i.x>Wt&&this.addBorderIntersection(1,Sr(l.y,i.y,(Wt-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,Sr(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>Wt!=i.y>Wt&&this.addBorderIntersection(3,Sr(l.x,i.x,(Wt-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];l<h[0]&&(h[0]=l),l>h[1]&&(h[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,l.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,l.x),this.addBorderIntersection(h,i.x)}}centroid(){const i=this.polyCount.reduce((l,h)=>l+h.edges,0);return i!==0?this.acc.div(i)._round():new ae(0,0)}span(){return new ae(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,l)=>i+ +(l[0]!==Number.MAX_VALUE),0)}}class _g{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new rt,this.centroidVertexArray=new Ja,this.indexArray=new zt,this.programConfigurations=new fh(i.layers,i.zoom),this.segments=new Dn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=i.enableTerrain}populate(i,l,h,p){this.features=[],this.hasPattern=tT("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const x=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*x/(x*x+1)/Wt/(1<<y.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:x,index:S,sourceLayerIndex:A}of i){const P=this.layers[0]._featureFilter.needGeometry,L=vh(y,P);if(!this.layers[0]._featureFilter.filter(new N(this.zoom),L,h))continue;const z={id:x,sourceLayerIndex:A,index:S,geometry:P?L.geometry:El(y,h,p),properties:y.properties,type:y.type,patterns:{}},V=this.layoutVertexArray.length;this.hasPattern?this.features.push(rT("fill-extrusion",this.layers,z,this.zoom,l)):this.addFeature(z,z.geometry,S,h,{},l.availableImages,p),l.featureIndex.insert(y,z.geometry,S,A,this.index,V)}this.sortBorders()}addFeatures(i,l,h,p,y){for(const x of this.features){const{geometry:S}=x;this.addFeature(x,S,x.index,l,h,p,y)}this.sortBorders()}update(i,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Qq),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,Jq.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Yq.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,h,p,y,x,S){const A=[new ae(0,0),new ae(Wt,Wt)],P=S.projection,L=P.name==="globe",z=this.enableTerrain&&!L?new iD:null,V=sG[i.type]==="Polygon";L&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ft);const G=eT(l,500);for(let de=G.length-1;de>=0;de--){const we=G[de];(we.length===0||(Z=we[0]).every(pe=>pe.x<=0)||Z.every(pe=>pe.x>=Wt)||Z.every(pe=>pe.y<=0)||Z.every(pe=>pe.y>=Wt))&&G.splice(de,1)}var Z;let Q;if(L)Q=hD(G,A,p);else{Q=[];for(const de of G)Q.push({polygon:de,bounds:A})}const ie=V?this.edgeRadius:0;for(const{polygon:de,bounds:we}of Q){let pe=0,xe=0;for(const Te of de)V&&!Te[0].equals(Te[Te.length-1])&&Te.push(Te[0]),xe+=V?Te.length-1:Te.length;const Ae=this.segments.prepareSegment((V?5:4)*xe,this.layoutVertexArray,this.indexArray);if(V){const Te=[],qe=[];pe=Ae.vertexLength;for(const et of de){let ht,Ze;et.length&&et!==de[0]&&qe.push(Te.length/2),ht=et[1].sub(et[0])._perp()._unit();for(let nt=1;nt<et.length;nt++){const it=et[nt],at=et[nt===et.length-1?1:nt+1];let{x:gt,y:Je}=it;if(ie){Ze=at.sub(it)._perp()._unit();const Tt=ht.add(Ze)._unit(),$t=ie*Math.min(4,1/(ht.x*Tt.x+ht.y*Tt.y));gt+=$t*Tt.x,Je+=$t*Tt.y,ht=Ze}yg(this.layoutVertexArray,gt,Je,0,0,1,1,0),Ae.vertexLength++,Te.push(it.x,it.y),L&&vg(this.layoutVertexExtArray,P.projectTilePoint(gt,Je,p),P.upVector(p,gt,Je))}}const Fe=QE(Te,qe);for(let et=0;et<Fe.length;et+=3)this.indexArray.emplaceBack(pe+Fe[et],pe+Fe[et+2],pe+Fe[et+1]),Ae.primitiveLength++}for(const Te of de){z&&Te.length&&z.startRing(Te[0]);let qe,Fe,et,ht=Te.length>4&&lD(Te[Te.length-2],Te[0],Te[1]),Ze=ie?cG(Te[Te.length-2],Te[0],Te[1],ie):0;Fe=Te[1].sub(Te[0])._perp()._unit();let nt=!0;for(let it=1,at=0;it<Te.length;it++){let gt=Te[it-1],Je=Te[it];const Tt=Te[it===Te.length-1?1:it+1];if(z&&V&&z.currentPolyCount.top++,sD(Je,gt,we)){ie&&(Fe=Tt.sub(Je)._perp()._unit(),nt=!nt);continue}z&&z.append(Je,gt);const $t=Je.sub(gt)._perp(),At=$t.x/(Math.abs($t.x)+Math.abs($t.y)),tr=$t.y>0?1:0,yt=gt.dist(Je);if(at+yt>32768&&(at=0),ie){et=Tt.sub(Je)._perp()._unit();let nr=aD(gt,Je,Tt,oD(Fe,et),ie);isNaN(nr)&&(nr=0);const Gt=Je.sub(gt)._unit();gt=gt.add(Gt.mult(Ze))._round(),Je=Je.add(Gt.mult(-nr))._round(),Ze=nr,Fe=et}const Ft=Ae.vertexLength,rr=Te.length>4&&lD(gt,Je,Tt);let Tr=cD(at,ht,nt);if(yg(this.layoutVertexArray,gt.x,gt.y,At,tr,0,0,Tr),yg(this.layoutVertexArray,gt.x,gt.y,At,tr,0,1,Tr),at+=yt,Tr=cD(at,rr,!nt),ht=rr,yg(this.layoutVertexArray,Je.x,Je.y,At,tr,0,0,Tr),yg(this.layoutVertexArray,Je.x,Je.y,At,tr,0,1,Tr),Ae.vertexLength+=4,this.indexArray.emplaceBack(Ft+0,Ft+1,Ft+2),this.indexArray.emplaceBack(Ft+1,Ft+3,Ft+2),Ae.primitiveLength+=2,ie){const nr=pe+(it===1?Te.length-2:it-2),Gt=it===1?pe:nr+1;if(this.indexArray.emplaceBack(Ft+1,nr,Ft+3),this.indexArray.emplaceBack(nr,Gt,Ft+3),Ae.primitiveLength+=2,qe===void 0&&(qe=Ft),!sD(Tt,Te[it],we)){const Jr=it===Te.length-1?qe:Ae.vertexLength;this.indexArray.emplaceBack(Ft+2,Ft+3,Jr),this.indexArray.emplaceBack(Ft+3,Jr+1,Jr),this.indexArray.emplaceBack(Ft+3,Gt,Jr+1),Ae.primitiveLength+=3}nt=!nt}if(L){const nr=this.layoutVertexExtArray,Gt=P.projectTilePoint(gt.x,gt.y,p),Jr=P.projectTilePoint(Je.x,Je.y,p),sr=P.upVector(p,gt.x,gt.y),lr=P.upVector(p,Je.x,Je.y);vg(nr,Gt,sr),vg(nr,Gt,sr),vg(nr,Jr,lr),vg(nr,Jr,lr)}}V&&(pe+=Te.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const de=z.borders,we=this.featuresOnBorder.push(z)-1;for(let pe=0;pe<4;pe++)de[pe][0]!==Number.MAX_VALUE&&this.borders[pe].push(we)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,p)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((l,h)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}encodeCentroid(i,l,h=!0){let p,y;if(i)if(i.y!==0){const S=l.span()._mult(this.tileToMeter);p=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(S.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(S.y/10))}else p=Math.ceil(7*(i.x+450)),y=0;else p=0,y=+h;let x=h?this.centroidVertexArray.length:l.vertexArrayOffset;for(const S of l.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*S.edges+S.top);for(let A=0;A<S.top;A++)this.centroidVertexArray.emplace(x++,p,y);for(let A=0;A<2*S.edges;A++)this.centroidVertexArray.emplace(x++,0,y),this.centroidVertexArray.emplace(x++,p,y)}}}function oD(s,i){const l=s.add(i)._unit();return s.x*l.x+s.y*l.y}function cG(s,i,l,h){const p=i.sub(s)._perp()._unit(),y=l.sub(i)._perp()._unit();return aD(s,i,l,oD(p,y),h)}function aD(s,i,l,h,p){const y=Math.sqrt(1-h*h);return Math.min(s.dist(i)/3,i.dist(l)/3,p*y/h)}function sD(s,i,l){return s.x<l[0].x&&i.x<l[0].x||s.x>l[1].x&&i.x>l[1].x||s.y<l[0].y&&i.y<l[0].y||s.y>l[1].y&&i.y>l[1].y}function lD(s,i,l){if(s.x<0||s.x>=Wt||i.x<0||i.x>=Wt||l.x<0||l.x>=Wt)return!1;const h=l.sub(i),p=h.perp(),y=s.sub(i);return(h.x*y.x+h.y*y.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(y.x*y.x+y.y*y.y))>-.866&&p.x*y.x+p.y*y.y<0}function cD(s,i,l){const h=i?2|s:-3&s;return l?1|h:-2&h}function uD(){const s=Math.PI/32,i=Math.tan(s),l=fg;return l*Math.sqrt(1+2*i*i)-l}function hD(s,i,l){const h=1<<l.z,p=Vo(l.x/h),y=Vo((l.x+1)/h),x=Ti(l.y/h),S=Ti((l.y+1)/h);return function(A,P,L,z,V=0,G){const Z=[];if(!A.length||!L||!z)return Z;const Q=(Te,qe)=>{for(const Fe of Te)Z.push({polygon:Fe,bounds:qe})},ie=Math.ceil(Math.log2(L)),de=Math.ceil(Math.log2(z)),we=ie-de,pe=[];for(let Te=0;Te<Math.abs(we);Te++)pe.push(we>0?0:1);for(let Te=0;Te<Math.min(ie,de);Te++)pe.push(0),pe.push(1);let xe=A;if(xe=L0(xe,P[0].y-V,P[1].y+V,1),xe=L0(xe,P[0].x-V,P[1].x+V,0),!xe.length)return Z;const Ae=[];for(pe.length?Ae.push({polygons:xe,bounds:P,depth:0}):Q(xe,P);Ae.length;){const Te=Ae.pop(),qe=Te.depth,Fe=pe[qe],et=Te.bounds[0],ht=Te.bounds[1],Ze=Fe===0?et.x:et.y,nt=Fe===0?ht.x:ht.y,it=G?G(Fe,Ze,nt):.5*(Ze+nt),at=L0(Te.polygons,Ze-V,it+V,Fe),gt=L0(Te.polygons,it-V,nt+V,Fe);if(at.length){const Je=[et,new ae(Fe===0?it:ht.x,Fe===1?it:ht.y)];pe.length>qe+1?Ae.push({polygons:at,bounds:Je,depth:qe+1}):Q(at,Je)}if(gt.length){const Je=[new ae(Fe===0?it:et.x,Fe===1?it:et.y),ht];pe.length>qe+1?Ae.push({polygons:gt,bounds:Je,depth:qe+1}):Q(gt,Je)}}return Z}(s,i,Math.ceil((y-p)/11.25),Math.ceil((x-S)/11.25),1,(A,P,L)=>{if(A===0)return .5*(P+L);{const z=Ti((l.y+P/Wt)/h);return(Rs(.5*(Ti((l.y+L/Wt)/h)+z))*h-l.y)*Wt}})}Rt(_g,"FillExtrusionBucket",{omit:["layers","features"]}),Rt(iD,"PartMetadata");const uG=new ye({"fill-extrusion-edge-radius":new J(Qe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var hG={paint:new ye({"fill-extrusion-opacity":new J(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new J(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new J(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new se(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new J(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new J(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new J(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new J(Qe["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:uG};function fD(s,i,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[s*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class j0{constructor(i,l,h){this.z=i,this.x=l,this.y=h,this.key=xg(0,i,i,l,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const h=function(y,x,S){var A=fD(256*y,256*(x=Math.pow(2,S)-x-1),S),P=fD(256*(y+1),256*(x+1),S);return A[0]+","+A[1]+","+P[0]+","+P[1]}(this.x,this.y,this.z),p=function(y,x,S){let A,P="";for(let L=y;L>0;L--)A=1<<L-1,P+=(x&A?1:0)+(S&A?2:0);return P}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dD{constructor(i,l){this.wrap=i,this.canonical=l,this.key=xg(i,l.z,l.z,l.x,l.y)}}class Zi{constructor(i,l,h,p,y){this.overscaledZ=i,this.wrap=l,this.canonical=new j0(h,+p,+y),this.key=l===0&&i===h?this.canonical.key:xg(l,i,h,p,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new Zi(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zi(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return xg(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return xg(this.wrap*+l,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Zi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Zi(l,this.wrap,l,h,p),new Zi(l,this.wrap,l,h+1,p),new Zi(l,this.wrap,l,h,p+1),new Zi(l,this.wrap,l,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Zi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Zi(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function xg(s,i,l,h,p){const y=1<<Math.min(l,22);let x=y*(p%y)+h%y;return s&&l<22&&(x+=y*y*((s<0?-2*s-1:2*s)%(1<<2*(22-l)))),16*(32*x+l)+(i-l)}Rt(j0,"CanonicalTileID"),Rt(Zi,"OverscaledTileID",{omit:["projMatrix"]});class od extends ae{constructor(i,l,h){super(i,l),this.z=h}}function bg(s,i){return s.x*i.x+s.y*i.y}function pD(s,i){if(s.length===1){let l=0;const h=i[l++];let p;for(;!p||h.equals(p);)if(p=i[l++],!p)return 1/0;for(;l<i.length;l++){const y=i[l],x=s[0],S=p.sub(h),A=y.sub(h),P=x.sub(h),L=bg(S,S),z=bg(S,A),V=bg(A,A),G=bg(P,S),Z=bg(P,A),Q=L*V-z*z,ie=(V*G-z*Z)/Q,de=(L*Z-z*G)/Q,we=h.z*(1-ie-de)+p.z*ie+y.z*de;if(isFinite(we))return we}return 1/0}{let l=1/0;for(const h of i)l=Math.min(l,h.z);return l}}function mD(s,i,l,h,p,y,x,S){const A=x*p.getElevationAt(s,i,!0,!0),P=y[0]!==0,L=P?y[1]===0?x*(y[0]/7-450):x*function(z,V,G){const Z=Math.floor(V[0]/8),Q=Math.floor(V[1]/8),ie=10*(V[0]-8*Z),de=10*(V[1]-8*Q),we=z.getElevationAt(Z,Q,!0,!0),pe=z.getMeterToDEM(G),xe=Math.floor(.5*(ie*pe-1)),Ae=Math.floor(.5*(de*pe-1)),Te=z.tileCoordToPixel(Z,Q),qe=2*xe+1,Fe=2*Ae+1,et=function(gt,Je,Tt,$t,At){return[gt.getElevationAtPixel(Je,Tt,!0),gt.getElevationAtPixel(Je+At,Tt,!0),gt.getElevationAtPixel(Je,Tt+At,!0),gt.getElevationAtPixel(Je+$t,Tt+At,!0)]}(z,Te.x-xe,Te.y-Ae,qe,Fe),ht=Math.abs(et[0]-et[1]),Ze=Math.abs(et[2]-et[3]),nt=Math.abs(et[0]-et[2])+Math.abs(et[1]-et[3]),it=Math.min(.25,.5*pe*(ht+Ze)/qe),at=Math.min(.25,.5*pe*nt/Fe);return we+Math.max(it*ie,at*de)}(p,y,S):A;return{base:A+(l===0)?-1:l,top:P?Math.max(L+h,A+l+2):A+h}}const fG=Le([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:dG}=fG,pG=Le([{name:"a_packed",components:4,type:"Float32"}]),{members:mG}=pG,gG=R0.types,yG=Math.cos(Math.PI/180*37.5);class $0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new He,this.layoutVertexArray2=new lt,this.indexArray=new zt,this.programConfigurations=new fh(i.layers,i.zoom),this.segments=new Dn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h,p){this.hasPattern=tT("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:L,id:z,index:V,sourceLayerIndex:G}of i){const Z=this.layers[0]._featureFilter.needGeometry,Q=vh(L,Z);if(!this.layers[0]._featureFilter.filter(new N(this.zoom),Q,h))continue;const ie=y?y.evaluate(Q,{},h):void 0,de={id:z,properties:L.properties,type:L.type,sourceLayerIndex:G,index:V,geometry:Z?Q.geometry:El(L,h,p),patterns:{},sortKey:ie};x.push(de)}y&&x.sort((L,z)=>L.sortKey-z.sortKey);const{lineAtlas:S,featureIndex:A}=l,P=this.addConstantDashes(S);for(const L of x){const{geometry:z,index:V,sourceLayerIndex:G}=L;if(P&&this.addFeatureDashes(L,S),this.hasPattern){const Z=rT("line",this.layers,L,this.zoom,l);this.patternFeatures.push(Z)}else this.addFeature(L,z,V,h,S.positions,l.availableImages);A.insert(i[V].feature,z,V,G,this.index)}}addConstantDashes(i){let l=!1;for(const h of this.layers){const p=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if(p.kind!=="constant"||y.kind!=="constant")l=!0;else{const x=y.value,S=p.value;if(!S)continue;i.addDash(S,x)}}return l}addFeatureDashes(i,l){const h=this.zoom;for(const p of this.layers){const y=p.paint.get("line-dasharray").value,x=p.layout.get("line-cap").value;if(y.kind==="constant"&&x.kind==="constant")continue;let S,A;if(y.kind==="constant"){if(S=y.value,!S)continue}else S=y.evaluate({zoom:h},i);A=x.kind==="constant"?x.value:x.evaluate({zoom:h},i),l.addDash(S,A),i.patterns[p.id]=l.getKey(S,A)}}update(i,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,p)}addFeatures(i,l,h,p,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,mG)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,dG),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,h,p,y,x){const S=this.layers[0].layout,A=S.get("line-join").evaluate(i,{}),P=S.get("line-cap").evaluate(i,{}),L=S.get("line-miter-limit"),z=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const V of l)this.addLine(V,i,A,P,L,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,p)}addLine(i,l,h,p,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<i.length-1;de++)this.totalDistance+=i[de].dist(i[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=gG[l.type]==="Polygon";let A=i.length;for(;A>=2&&i[A-1].equals(i[A-2]);)A--;let P=0;for(;P<A-1&&i[P].equals(i[P+1]);)P++;if(A<(S?3:2))return;h==="bevel"&&(y=1.05);const L=this.overscaling<=16?15*Wt/(512*this.overscaling):0,z=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let V,G,Z,Q,ie;this.e1=this.e2=-1,S&&(V=i[A-2],ie=i[P].sub(V)._unit()._perp());for(let de=P;de<A;de++){if(Z=de===A-1?S?i[P+1]:void 0:i[de+1],Z&&i[de].equals(Z))continue;ie&&(Q=ie),V&&(G=V),V=i[de],ie=Z?Z.sub(V)._unit()._perp():Q,Q=Q||ie;let we=Q.add(ie);we.x===0&&we.y===0||we._unit();const pe=Q.x*ie.x+Q.y*ie.y,xe=we.x*ie.x+we.y*ie.y,Ae=xe!==0?1/xe:1/0,Te=2*Math.sqrt(2-2*xe),qe=xe<yG&&G&&Z,Fe=Q.x*ie.y-Q.y*ie.x>0;if(qe&&de>P){const Ze=V.dist(G);if(Ze>2*L){const nt=V.sub(V.sub(G)._mult(L/Ze)._round());this.updateDistance(G,nt),this.addCurrentVertex(nt,Q,0,0,z),G=nt}}const et=G&&Z;let ht=et?h:S?"butt":p;if(et&&ht==="round"&&(Ae<x?ht="miter":Ae<=2&&(ht="fakeround")),ht==="miter"&&Ae>y&&(ht="bevel"),ht==="bevel"&&(Ae>2&&(ht="flipbevel"),Ae<y&&(ht="miter")),G&&this.updateDistance(G,V),ht==="miter")we._mult(Ae),this.addCurrentVertex(V,we,0,0,z);else if(ht==="flipbevel"){if(Ae>100)we=ie.mult(-1);else{const Ze=Ae*Q.add(ie).mag()/Q.sub(ie).mag();we._perp()._mult(Ze*(Fe?-1:1))}this.addCurrentVertex(V,we,0,0,z),this.addCurrentVertex(V,we.mult(-1),0,0,z)}else if(ht==="bevel"||ht==="fakeround"){const Ze=-Math.sqrt(Ae*Ae-1),nt=Fe?Ze:0,it=Fe?0:Ze;if(G&&this.addCurrentVertex(V,Q,nt,it,z),ht==="fakeround"){const at=Math.round(180*Te/Math.PI/20);for(let gt=1;gt<at;gt++){let Je=gt/at;if(Je!==.5){const $t=Je-.5;Je+=Je*$t*(Je-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*$t*$t+(.848013+pe*(.215638*pe-1.06021)))}const Tt=ie.sub(Q)._mult(Je)._add(Q)._unit()._mult(Fe?-1:1);this.addHalfVertex(V,Tt.x,Tt.y,!1,Fe,0,z)}}Z&&this.addCurrentVertex(V,ie,-nt,-it,z)}else if(ht==="butt")this.addCurrentVertex(V,we,0,0,z);else if(ht==="square"){const Ze=G?1:-1;G||this.addCurrentVertex(V,we,Ze,Ze,z),this.addCurrentVertex(V,we,0,0,z),G&&this.addCurrentVertex(V,we,Ze,Ze,z)}else ht==="round"&&(G&&(this.addCurrentVertex(V,Q,0,0,z),this.addCurrentVertex(V,Q,1,1,z,!0)),Z&&(this.addCurrentVertex(V,ie,-1,-1,z,!0),this.addCurrentVertex(V,ie,0,0,z)));if(qe&&de<A-1){const Ze=V.dist(Z);if(Ze>2*L){const nt=V.add(Z.sub(V)._mult(L/Ze)._round());this.updateDistance(V,nt),this.addCurrentVertex(nt,ie,0,0,z),V=nt}}}}addCurrentVertex(i,l,h,p,y,x=!1){const S=l.y*p-l.x,A=-l.y-l.x*p;this.addHalfVertex(i,l.x+l.y*h,l.y-l.x*h,x,!1,h,y),this.addHalfVertex(i,S,A,x,!0,-p,y)}addHalfVertex({x:i,y:l},h,p,y,x,S,A){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const P=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),A.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}Rt($0,"LineBucket",{omit:["layers","patternFeatures"]});const vG=new ye({"line-cap":new se(Qe.layout_line["line-cap"]),"line-join":new se(Qe.layout_line["line-join"]),"line-miter-limit":new J(Qe.layout_line["line-miter-limit"]),"line-round-limit":new J(Qe.layout_line["line-round-limit"]),"line-sort-key":new se(Qe.layout_line["line-sort-key"])});var gD={paint:new ye({"line-opacity":new se(Qe.paint_line["line-opacity"]),"line-color":new se(Qe.paint_line["line-color"]),"line-translate":new J(Qe.paint_line["line-translate"]),"line-translate-anchor":new J(Qe.paint_line["line-translate-anchor"]),"line-width":new se(Qe.paint_line["line-width"]),"line-gap-width":new se(Qe.paint_line["line-gap-width"]),"line-offset":new se(Qe.paint_line["line-offset"]),"line-blur":new se(Qe.paint_line["line-blur"]),"line-dasharray":new se(Qe.paint_line["line-dasharray"]),"line-pattern":new se(Qe.paint_line["line-pattern"]),"line-gradient":new me(Qe.paint_line["line-gradient"]),"line-trim-offset":new J(Qe.paint_line["line-trim-offset"])}),layout:vG};const yD=new class extends se{possiblyEvaluate(s,i){return i=new N(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,l,h){return i=bt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,l,h)}}(gD.paint.properties["line-width"].specification);function vD(s,i){return i>0?i+2*s:s}yD.useIntegerZoom=!0;const _G=Le([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xG=Le([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),bG=Le([{name:"a_projected_pos",components:4,type:"Float32"}],4);Le([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wG=Le([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),SG=Le([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Le([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _D=Le([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EG=Le([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Le([{name:"triangle",components:3,type:"Uint16"}]),Le([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Le([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Le([{type:"Float32",name:"offsetX"}]),Le([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var fi=24;const is=128;function iT(s,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new N(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=l;let y=0;for(;y<h.length&&h[y]<=s;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const S=h[y],A=h[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:A,minSize:l.evaluate(new N(S)),maxSize:l.evaluate(new N(A)),interpolationType:p}}}function N0(s,{uSize:i,uSizeT:l},{lowerSize:h,upperSize:p}){return s.kind==="source"?h/is:s.kind==="composite"?Sr(h/is,p/is,l):i}function ad(s,i){let l=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:p,minZoom:y,maxZoom:x}=s,S=p?ke(ua.interpolationFactor(p,i,y,x),0,1):0;s.kind==="camera"?h=Sr(s.minSize,s.maxSize,S):l=S}return{uSizeT:l,uSize:h}}var TG=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:is,evaluateSizeForFeature:N0,evaluateSizeForZoom:ad,getSizeData:iT});function AG(s,i,l){return s.sections.forEach(h=>{h.text=function(p,y,x){const S=y.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),k.applyArabicShaping&&(p=k.applyArabicShaping(p)),p}(h.text,i,l)}),s}const wg={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function CG(s){return s==="︶"||s==="﹈"||s==="︸"||s==="﹄"||s==="﹂"||s==="︾"||s==="︼"||s==="︺"||s==="︘"||s==="﹀"||s==="︐"||s==="︓"||s==="︔"||s==="｀"||s==="￣"||s==="︑"||s==="︒"}function PG(s){return s==="︵"||s==="﹇"||s==="︷"||s==="﹃"||s==="﹁"||s==="︽"||s==="︻"||s==="︹"||s==="︗"||s==="︿"}var xD=Zr,bD=function(s,i,l,h,p){var y,x,S=8*p-h-1,A=(1<<S)-1,P=A>>1,L=-7,z=l?p-1:0,V=l?-1:1,G=s[i+z];for(z+=V,y=G&(1<<-L)-1,G>>=-L,L+=S;L>0;y=256*y+s[i+z],z+=V,L-=8);for(x=y&(1<<-L)-1,y>>=-L,L+=h;L>0;x=256*x+s[i+z],z+=V,L-=8);if(y===0)y=1-P;else{if(y===A)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,h),y-=P}return(G?-1:1)*x*Math.pow(2,y-h)},wD=function(s,i,l,h,p,y){var x,S,A,P=8*y-p-1,L=(1<<P)-1,z=L>>1,V=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=h?0:y-1,Z=h?1:-1,Q=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,x=L):(x=Math.floor(Math.log(i)/Math.LN2),i*(A=Math.pow(2,-x))<1&&(x--,A*=2),(i+=x+z>=1?V/A:V*Math.pow(2,1-z))*A>=2&&(x++,A/=2),x+z>=L?(S=0,x=L):x+z>=1?(S=(i*A-1)*Math.pow(2,p),x+=z):(S=i*Math.pow(2,z-1)*Math.pow(2,p),x=0));p>=8;s[l+G]=255&S,G+=Z,S/=256,p-=8);for(x=x<<p|S,P+=p;P>0;s[l+G]=255&x,G+=Z,x/=256,P-=8);s[l+G-Z]|=128*Q};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Zr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var oT=4294967296,SD=1/oT,ED=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Al(s){return s.type===Zr.Bytes?s.readVarint()+s.pos:s.pos+1}function sd(s,i,l){return l?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function TD(s,i,l){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(h);for(var p=l.pos-1;p>=s;p--)l.buf[p+h]=l.buf[p]}function OG(s,i){for(var l=0;l<s.length;l++)i.writeVarint(s[l])}function MG(s,i){for(var l=0;l<s.length;l++)i.writeSVarint(s[l])}function kG(s,i){for(var l=0;l<s.length;l++)i.writeFloat(s[l])}function IG(s,i){for(var l=0;l<s.length;l++)i.writeDouble(s[l])}function DG(s,i){for(var l=0;l<s.length;l++)i.writeBoolean(s[l])}function RG(s,i){for(var l=0;l<s.length;l++)i.writeFixed32(s[l])}function LG(s,i){for(var l=0;l<s.length;l++)i.writeSFixed32(s[l])}function jG(s,i){for(var l=0;l<s.length;l++)i.writeFixed64(s[l])}function $G(s,i){for(var l=0;l<s.length;l++)i.writeSFixed64(s[l])}function z0(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function ld(s,i,l){s[l]=i,s[l+1]=i>>>8,s[l+2]=i>>>16,s[l+3]=i>>>24}function AD(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}Zr.prototype={destroy:function(){this.buf=null},readFields:function(s,i,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),p=h>>3,y=this.pos;this.type=7&h,s(p,i,this),this.pos===y&&this.skip(h)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=z0(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=AD(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=z0(this.buf,this.pos)+z0(this.buf,this.pos+4)*oT;return this.pos+=8,s},readSFixed64:function(){var s=z0(this.buf,this.pos)+AD(this.buf,this.pos+4)*oT;return this.pos+=8,s},readFloat:function(){var s=bD(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=bD(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,l,h=this.buf;return i=127&(l=h[this.pos++]),l<128?i:(i|=(127&(l=h[this.pos++]))<<7,l<128?i:(i|=(127&(l=h[this.pos++]))<<14,l<128?i:(i|=(127&(l=h[this.pos++]))<<21,l<128?i:function(p,y,x){var S,A,P=x.buf;if(S=(112&(A=P[x.pos++]))>>4,A<128||(S|=(127&(A=P[x.pos++]))<<3,A<128)||(S|=(127&(A=P[x.pos++]))<<10,A<128)||(S|=(127&(A=P[x.pos++]))<<17,A<128)||(S|=(127&(A=P[x.pos++]))<<24,A<128)||(S|=(1&(A=P[x.pos++]))<<31,A<128))return sd(p,S,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&ED?function(l,h,p){return ED.decode(l.subarray(h,p))}(this.buf,i,s):function(l,h,p){for(var y="",x=h;x<p;){var S,A,P,L=l[x],z=null,V=L>239?4:L>223?3:L>191?2:1;if(x+V>p)break;V===1?L<128&&(z=L):V===2?(192&(S=l[x+1]))==128&&(z=(31&L)<<6|63&S)<=127&&(z=null):V===3?(A=l[x+2],(192&(S=l[x+1]))==128&&(192&A)==128&&((z=(15&L)<<12|(63&S)<<6|63&A)<=2047||z>=55296&&z<=57343)&&(z=null)):V===4&&(A=l[x+2],P=l[x+3],(192&(S=l[x+1]))==128&&(192&A)==128&&(192&P)==128&&((z=(15&L)<<18|(63&S)<<12|(63&A)<<6|63&P)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,V=1):z>65535&&(z-=65536,y+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),y+=String.fromCharCode(z),x+=V}return y}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Zr.Bytes)return s.push(this.readVarint(i));var l=Al(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Zr.Bytes)return s.push(this.readSVarint());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Zr.Bytes)return s.push(this.readBoolean());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Zr.Bytes)return s.push(this.readFloat());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Zr.Bytes)return s.push(this.readDouble());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Zr.Bytes)return s.push(this.readFixed32());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Zr.Bytes)return s.push(this.readSFixed32());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Zr.Bytes)return s.push(this.readFixed64());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Zr.Bytes)return s.push(this.readSFixed64());var i=Al(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Zr.Fixed32)this.pos+=4;else{if(i!==Zr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),ld(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),ld(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),ld(this.buf,-1&s,this.pos),ld(this.buf,Math.floor(s*SD),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),ld(this.buf,-1&s,this.pos),ld(this.buf,Math.floor(s*SD),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,l){var h,p;if(i>=0?(h=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,l),function(y,x){var S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(p,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(h,p,y){for(var x,S,A=0;A<p.length;A++){if((x=p.charCodeAt(A))>55295&&x<57344){if(!S){x>56319||A+1===p.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,s,this.pos);var l=this.pos-i;l>=128&&TD(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),wD(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),wD(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,i){this.pos++;var l=this.pos;s(i,this);var h=this.pos-l;h>=128&&TD(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,i,l){this.writeTag(s,Zr.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,OG,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,MG,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,DG,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,kG,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,IG,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,RG,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,LG,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,jG,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,$G,i)},writeBytesField:function(s,i){this.writeTag(s,Zr.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Zr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Zr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Zr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Zr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Zr.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Zr.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Zr.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Zr.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Zr.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,!!i)}};var B0=R(xD);const aT=3;function NG(s,i,l){i.glyphs=[],s===1&&l.readMessage(zG,i)}function zG(s,i,l){if(s===3){const{id:h,bitmap:p,width:y,height:x,left:S,top:A,advance:P}=l.readMessage(BG,{});i.glyphs.push({id:h,bitmap:new Tl({width:y+2*aT,height:x+2*aT},p),metrics:{width:y,height:x,left:S,top:A,advance:P}})}else s===4?i.ascender=l.readSVarint():s===5&&(i.descender=l.readSVarint())}function BG(s,i,l){s===1?i.id=l.readVarint():s===2?i.bitmap=l.readBytes():s===3?i.width=l.readVarint():s===4?i.height=l.readVarint():s===5?i.left=l.readSVarint():s===6?i.top=l.readSVarint():s===7&&(i.advance=l.readVarint())}const CD=aT;function sT(s){let i=0,l=0;for(const x of s)i+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let p=0,y=0;for(const x of s)for(let S=h.length-1;S>=0;S--){const A=h[S];if(!(x.w>A.w||x.h>A.h)){if(x.x=A.x,x.y=A.y,y=Math.max(y,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===A.w&&x.h===A.h){const P=h.pop();S<h.length&&(h[S]=P)}else x.h===A.h?(A.x+=x.w,A.w-=x.w):x.w===A.w?(A.y+=x.h,A.h-=x.h):(h.push({x:A.x+x.w,y:A.y,w:A.w-x.w,h:x.h}),A.y+=x.h,A.h-=x.h);break}}return{w:p,h:y,fill:i/(p*y)||0}}const ao=1;class lT{constructor(i,{pixelRatio:l,version:h,stretchX:p,stretchY:y,content:x}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=p,this.stretchY=y,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+ao,this.paddedRect.y+ao]}get br(){return[this.paddedRect.x+this.paddedRect.w-ao,this.paddedRect.y+this.paddedRect.h-ao]}get displaySize(){return[(this.paddedRect.w-2*ao)/this.pixelRatio,(this.paddedRect.h-2*ao)/this.pixelRatio]}}class PD{constructor(i,l){const h={},p={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,h,y),this.addImages(l,p,y);const{w:x,h:S}=sT(y),A=new wo({width:x||1,height:S||1});for(const P in i){const L=i[P],z=h[P].paddedRect;wo.copy(L.data,A,{x:0,y:0},{x:z.x+ao,y:z.y+ao},L.data)}for(const P in l){const L=l[P],z=p[P].paddedRect,V=z.x+ao,G=z.y+ao,Z=L.data.width,Q=L.data.height;wo.copy(L.data,A,{x:0,y:0},{x:V,y:G},L.data),wo.copy(L.data,A,{x:0,y:Q-1},{x:V,y:G-1},{width:Z,height:1}),wo.copy(L.data,A,{x:0,y:0},{x:V,y:G+Q},{width:Z,height:1}),wo.copy(L.data,A,{x:Z-1,y:0},{x:V-1,y:G},{width:1,height:Q}),wo.copy(L.data,A,{x:0,y:0},{x:V+Z,y:G},{width:1,height:Q})}this.image=A,this.iconPositions=h,this.patternPositions=p}addImages(i,l,h){for(const p in i){const y=i[p],x={x:0,y:0,w:y.data.width+2*ao,h:y.data.height+2*ao};h.push(x),l[p]=new lT(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>i.hasImage(h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),l)}patchUpdatedImage(i,l,h){if(!i||!l||i.version===l.version)return;i.version=l.version;const[p,y]=i.tl;h.update(l.data,void 0,{x:p,y})}}Rt(lT,"ImagePosition"),Rt(PD,"ImageAtlas");const Wo={horizontal:1,vertical:2,horizontalOnly:3},OD=-17;class Sg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const h=new Sg;return h.scale=i||1,h.fontStack=l,h}static forImage(i){const l=new Sg;return l.imageName=i,l}}class cd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const h=new cd;for(let p=0;p<i.sections.length;p++){const y=i.sections[p];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(l,h){let p="";for(let y=0;y<l.length;y++){const x=l.charCodeAt(y+1)||null,S=l.charCodeAt(y-1)||null;p+=!h&&(x&&m0(x)&&!wg[l[y+1]]||S&&m0(S)&&!wg[l[y-1]])||!wg[l[y]]?l[y]:wg[l[y]]}return p}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&F0[this.text.charCodeAt(h)];h++)i++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&F0[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const h=new cd;return h.text=this.text.substring(i,l),h.sectionIndex=this.sectionIndex.slice(i,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Sg.forText(i.scale,i.fontStack||l));const h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Nt("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Sg.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Nt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cT(s,i,l,h,p,y,x,S,A,P,L,z,V,G,Z){const Q=cd.fromFeature(s,p);z===Wo.vertical&&Q.verticalizePunctuation(V);let ie=[];const de=function(Te,qe,Fe,et,ht,Ze){if(!Te)return[];const nt=[],it=function(Tt,$t,At,tr,yt,Ft){let rr=0;for(let Tr=0;Tr<Tt.length();Tr++){const nr=Tt.getSection(Tr);rr+=MD(Tt.getCharCode(Tr),nr,tr,yt,$t,Ft)}return rr/Math.max(1,Math.ceil(rr/At))}(Te,qe,Fe,et,ht,Ze),at=Te.text.indexOf("​")>=0;let gt=0;for(let Tt=0;Tt<Te.length();Tt++){const $t=Te.getSection(Tt),At=Te.getCharCode(Tt);if(F0[At]||(gt+=MD(At,$t,et,ht,qe,Ze)),Tt<Te.length()-1){const tr=!((Je=At)<11904||!(Ct["Bopomofo Extended"](Je)||Ct.Bopomofo(Je)||Ct["CJK Compatibility Forms"](Je)||Ct["CJK Compatibility Ideographs"](Je)||Ct["CJK Compatibility"](Je)||Ct["CJK Radicals Supplement"](Je)||Ct["CJK Strokes"](Je)||Ct["CJK Symbols and Punctuation"](Je)||Ct["CJK Unified Ideographs Extension A"](Je)||Ct["CJK Unified Ideographs"](Je)||Ct["Enclosed CJK Letters and Months"](Je)||Ct["Halfwidth and Fullwidth Forms"](Je)||Ct.Hiragana(Je)||Ct["Ideographic Description Characters"](Je)||Ct["Kangxi Radicals"](Je)||Ct["Katakana Phonetic Extensions"](Je)||Ct.Katakana(Je)||Ct["Vertical Forms"](Je)||Ct["Yi Radicals"](Je)||Ct["Yi Syllables"](Je)));(FG[At]||tr||$t.imageName)&&nt.push(ID(Tt+1,gt,it,nt,UG(At,Te.getCharCode(Tt+1),tr&&at),!1))}}var Je;return DD(ID(Te.length(),gt,it,nt,0,!0))}(Q,P,y,i,h,G),{processBidirectionalText:we,processStyledBidirectionalText:pe}=k;if(we&&Q.sections.length===1){const Te=we(Q.toString(),de);for(const qe of Te){const Fe=new cd;Fe.text=qe,Fe.sections=Q.sections;for(let et=0;et<qe.length;et++)Fe.sectionIndex.push(0);ie.push(Fe)}}else if(pe){const Te=pe(Q.text,Q.sectionIndex,de);for(const qe of Te){const Fe=new cd;Fe.text=qe[0],Fe.sectionIndex=qe[1],Fe.sections=Q.sections,ie.push(Fe)}}else ie=function(Te,qe){const Fe=[],et=Te.text;let ht=0;for(const Ze of qe)Fe.push(Te.substring(ht,Ze)),ht=Ze;return ht<et.length&&Fe.push(Te.substring(ht,et.length)),Fe}(Q,de);const xe=[],Ae={positionedLines:xe,text:Q.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Te,qe,Fe,et,ht,Ze,nt,it,at,gt,Je,Tt){let $t=0,At=0,tr=0;const yt=it==="right"?1:it==="left"?0:.5;let Ft=!1;for(const sr of ht){const lr=sr.getSections();for(const Vr of lr){if(Vr.imageName)continue;const Xr=qe[Vr.fontStack];if(Xr&&(Ft=Xr.ascender!==void 0&&Xr.descender!==void 0,!Ft))break}if(!Ft)break}let rr=0;for(const sr of ht){sr.trim();const lr=sr.getMaxScale(),Vr=(lr-1)*fi,Xr={positionedGlyphs:[],lineOffset:0};Te.positionedLines[rr]=Xr;const Kr=Xr.positionedGlyphs;let Wr=0;if(!sr.length()){At+=Ze,++rr;continue}let un=0,vn=0;for(let qr=0;qr<sr.length();qr++){const Vn=sr.getSection(qr),jn=sr.getSectionIndex(qr),fn=sr.getCharCode(qr);let Cr=Vn.scale,$n=null,Yr=null,Xi=null,Nn=fi,di=0;const ri=!(at===Wo.horizontal||!Je&&!Km(fn)||Je&&(F0[fn]||(Tr=fn,Ct.Arabic(Tr)||Ct["Arabic Supplement"](Tr)||Ct["Arabic Extended-A"](Tr)||Ct["Arabic Presentation Forms-A"](Tr)||Ct["Arabic Presentation Forms-B"](Tr))));if(Vn.imageName){const Ki=et[Vn.imageName];if(!Ki)continue;Xi=Vn.imageName,Te.iconsInText=Te.iconsInText||!0,Yr=Ki.paddedRect;const ni=Ki.displaySize;Cr=Cr*fi/Tt,$n={width:ni[0],height:ni[1],left:ao,top:-CD,advance:ri?ni[1]:ni[0],localGlyph:!1},di=Ft?-$n.height*Cr:OD+lr*fi-ni[1]*Cr,Nn=$n.advance;const ss=(ri?ni[0]:ni[1])*Cr-fi*lr;ss>0&&ss>Wr&&(Wr=ss)}else{const Ki=Fe[Vn.fontStack];if(!Ki)continue;Ki[fn]&&(Yr=Ki[fn]);const ni=qe[Vn.fontStack];if(!ni)continue;const ss=ni.glyphs[fn];if(!ss)continue;if($n=ss.metrics,Nn=fn!==8203?fi:0,Ft){const gd=ni.ascender!==void 0?Math.abs(ni.ascender):0,Dg=ni.descender!==void 0?Math.abs(ni.descender):0,Rg=(gd+Dg)*Cr;un<Rg&&(un=Rg,vn=(gd-Dg)/2*Cr),di=-gd*Cr}else di=OD+(lr-Cr)*fi}ri?(Te.verticalizable=!0,Kr.push({glyph:fn,imageName:Xi,x:$t,y:At+di,vertical:ri,scale:Cr,localGlyph:$n.localGlyph,fontStack:Vn.fontStack,sectionIndex:jn,metrics:$n,rect:Yr}),$t+=Nn*Cr+gt):(Kr.push({glyph:fn,imageName:Xi,x:$t,y:At+di,vertical:ri,scale:Cr,localGlyph:$n.localGlyph,fontStack:Vn.fontStack,sectionIndex:jn,metrics:$n,rect:Yr}),$t+=$n.advance*Cr+gt)}Kr.length!==0&&(tr=Math.max($t-gt,tr),Ft?RD(Kr,yt,Wr,vn,Ze*lr/2):RD(Kr,yt,Wr,0,Ze/2)),$t=0;const Ln=Ze*lr+Wr;Xr.lineOffset=Math.max(Wr,Vr),At+=Ln,++rr}var Tr;const nr=At,{horizontalAlign:Gt,verticalAlign:Jr}=uT(nt);(function(sr,lr,Vr,Xr,Kr,Wr){const un=(lr-Vr)*Kr,vn=-Wr*Xr;for(const Ln of sr)for(const qr of Ln.positionedGlyphs)qr.x+=un,qr.y+=vn})(Te.positionedLines,yt,Gt,Jr,tr,nr),Te.top+=-Jr*nr,Te.bottom=Te.top+nr,Te.left+=-Gt*tr,Te.right=Te.left+tr,Te.hasBaseline=Ft}(Ae,i,l,h,ie,x,S,A,z,P,V,Z),!function(Te){for(const qe of Te)if(qe.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Ae}const F0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},FG={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function MD(s,i,l,h,p,y){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*fi/y+p:0}{const x=l[i.fontStack],S=x&&x.glyphs[s];return S?S.metrics.advance*i.scale+p:0}}function kD(s,i,l,h){const p=Math.pow(s-i,2);return h?s<i?p/2:2*p:p+Math.abs(l)*l}function UG(s,i,l){let h=0;return s===10&&(h-=1e4),l&&(h+=150),s!==40&&s!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function ID(s,i,l,h,p,y){let x=null,S=kD(i,l,p,y);for(const A of h){const P=kD(i-A.x,l,p,y)+A.badness;P<=S&&(x=A,S=P)}return{index:s,x:i,priorBreak:x,badness:S}}function DD(s){return s?DD(s.priorBreak).concat(s.index):[]}function uT(s){let i=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function RD(s,i,l,h,p){if(!(i||l||h||p))return;const y=s.length-1,x=s[y],S=(x.x+x.metrics.advance*x.scale)*i;for(let A=0;A<=y;A++)s[A].x-=S,s[A].y+=l+h+p}function VG(s,i,l){const{horizontalAlign:h,verticalAlign:p}=uT(l),y=i[0]-s.displaySize[0]*h,x=i[1]-s.displaySize[1]*p;return{image:s,top:x,bottom:x+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function LD(s,i,l,h,p,y){const x=s.image;let S;if(x.content){const ie=x.content,de=x.pixelRatio||1;S=[ie[0]/de,ie[1]/de,x.displaySize[0]-ie[2]/de,x.displaySize[1]-ie[3]/de]}const A=i.left*y,P=i.right*y;let L,z,V,G;l==="width"||l==="both"?(G=p[0]+A-h[3],z=p[0]+P+h[1]):(G=p[0]+(A+P-x.displaySize[0])/2,z=G+x.displaySize[0]);const Z=i.top*y,Q=i.bottom*y;return l==="height"||l==="both"?(L=p[1]+Z-h[0],V=p[1]+Q+h[2]):(L=p[1]+(Z+Q-x.displaySize[1])/2,V=L+x.displaySize[1]),{image:x,top:L,right:z,bottom:V,left:G,collisionPadding:S}}class Cl extends ae{constructor(i,l,h,p,y){super(i,l),this.angle=p,this.z=h,y!==void 0&&(this.segment=y)}clone(){return new Cl(this.x,this.y,this.z,this.angle,this.segment)}}function jD(s,i,l,h,p){if(i.segment===void 0)return!0;let y=i,x=i.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=s[x].dist(y),y=s[x]}S+=s[x].dist(s[x+1]),x++;const A=[];let P=0;for(;S<l/2;){const L=s[x],z=s[x+1];if(!z)return!1;let V=s[x-1].angleTo(L)-L.angleTo(z);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:S,angleDelta:V}),P+=V;S-A[0].distance>h;)P-=A.shift().angleDelta;if(P>p)return!1;x++,S+=L.dist(z)}return!0}function $D(s){let i=0;for(let l=0;l<s.length-1;l++)i+=s[l].dist(s[l+1]);return i}function ND(s,i,l){return s?.6*i*l:0}function zD(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function WG(s,i,l,h,p,y){const x=ND(l,p,y),S=zD(l,h)*y;let A=0;const P=$D(s)/2;for(let L=0;L<s.length-1;L++){const z=s[L],V=s[L+1],G=z.dist(V);if(A+G>P){const Z=(P-A)/G,Q=Sr(z.x,V.x,Z),ie=Sr(z.y,V.y,Z),de=new Cl(Q,ie,0,V.angleTo(z),L);return!x||jD(s,de,S,x,i)?de:void 0}A+=G}}function qG(s,i,l,h,p,y,x,S,A){const P=ND(h,y,x),L=zD(h,p),z=L*x,V=s[0].x===0||s[0].x===A||s[0].y===0||s[0].y===A;return i-z<i/4&&(i=z+i/4),BD(s,V?i/2*S%i:(L/2+2*y)*x*S%i,i,P,l,z,V,!1,A)}function BD(s,i,l,h,p,y,x,S,A){const P=y/2,L=$D(s);let z=0,V=i-l,G=[];for(let Z=0;Z<s.length-1;Z++){const Q=s[Z],ie=s[Z+1],de=Q.dist(ie),we=ie.angleTo(Q);for(;V+l<z+de;){V+=l;const pe=(V-z)/de,xe=Sr(Q.x,ie.x,pe),Ae=Sr(Q.y,ie.y,pe);if(xe>=0&&xe<A&&Ae>=0&&Ae<A&&V-P>=0&&V+P<=L){const Te=new Cl(xe,Ae,0,we,Z);Te._round(),h&&!jD(s,Te,y,h,p)||G.push(Te)}}z+=de}return S||G.length||x||(G=BD(s,z/2,l,h,p,y,x,!0,A)),G}function FD(s,i,l,h,p){const y=[];for(let x=0;x<s.length;x++){const S=s[x];let A;for(let P=0;P<S.length-1;P++){let L=S[P],z=S[P+1];L.x<i&&z.x<i||(L.x<i?L=new ae(i,L.y+(i-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x<i&&(z=new ae(i,L.y+(i-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y<l&&z.y<l||(L.y<l?L=new ae(L.x+(l-L.y)/(z.y-L.y)*(z.x-L.x),l)._round():z.y<l&&(z=new ae(L.x+(l-L.y)/(z.y-L.y)*(z.x-L.x),l)._round()),L.x>=h&&z.x>=h||(L.x>=h?L=new ae(h,L.y+(h-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x>=h&&(z=new ae(h,L.y+(h-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y>=p&&z.y>=p||(L.y>=p?L=new ae(L.x+(p-L.y)/(z.y-L.y)*(z.x-L.x),p)._round():z.y>=p&&(z=new ae(L.x+(p-L.y)/(z.y-L.y)*(z.x-L.x),p)._round()),A&&L.equals(A[A.length-1])||(A=[L],y.push(A)),A.push(z)))))}}return y}Rt(Cl,"Anchor");const Eg=1e20;function UD(s,i,l,h,p,y,x,S,A){for(let P=i;P<i+h;P++)VD(s,l*y+P,y,p,x,S,A);for(let P=l;P<l+p;P++)VD(s,P*y+i,1,h,x,S,A)}function VD(s,i,l,h,p,y,x){y[0]=0,x[0]=-Eg,x[1]=Eg,p[0]=s[i];for(let S=1,A=0,P=0;S<h;S++){p[S]=s[i+S*l];const L=S*S;do{const z=y[A];P=(p[S]-p[z]+L-z*z)/(S-z)/2}while(P<=x[A]&&--A>-1);A++,y[A]=S,x[A]=P,x[A+1]=Eg}for(let S=0,A=0;S<h;S++){for(;x[A+1]<S;)A++;const P=y[A],L=S-P;s[i+S*l]=p[P]+L*L}}const os=2,hT={none:0,ideographs:1,all:2};class ud{constructor(i,l,h){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const h=[];for(const p in i)for(const y of i[p])h.push({stack:p,id:y});_t(h,({stack:p,id:y},x)=>{let S=this.entries[p];S||(S=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=S.glyphs[y];if(A!==void 0)return void x(null,{stack:p,id:y,glyph:A});if(A=this._tinySDF(S,p,y),A)return S.glyphs[y]=A,void x(null,{stack:p,id:y,glyph:A});const P=Math.floor(y/256);if(256*P>65535)return void x(new Error("glyphs > 65535 not supported"));if(S.ranges[P])return void x(null,{stack:p,id:y,glyph:A});let L=S.requests[P];L||(L=S.requests[P]=[],ud.loadGlyphRange(p,P,this.url,this.requestManager,(z,V)=>{if(V){S.ascender=V.ascender,S.descender=V.descender;for(const G in V.glyphs)this._doesCharSupportLocalGlyph(+G)||(S.glyphs[+G]=V.glyphs[+G]);S.ranges[P]=!0}for(const G of L)G(z,V);delete S.requests[P]})),L.push((z,V)=>{z?x(z):V&&x(null,{stack:p,id:y,glyph:V.glyphs[y]||null})})},(p,y)=>{if(p)l(p);else if(y){const x={};for(const{stack:S,id:A,glyph:P}of y)x[S]===void 0&&(x[S]={}),x[S].glyphs===void 0&&(x[S].glyphs={}),x[S].glyphs[A]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics},x[S].ascender=this.entries[S].ascender,x[S].descender=this.entries[S].descender;l(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==hT.none&&(this.localGlyphMode===hT.all?!!this.localFontFamily:!!this.localFontFamily&&(Ct["CJK Unified Ideographs"](i)||Ct["Hangul Syllables"](i)||Ct.Hiragana(i)||Ct.Katakana(i)||Ct["CJK Symbols and Punctuation"](i)))}_tinySDF(i,l,h){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let y=i.tinySDF;if(!y){let Q="400";/bold/i.test(l)?Q="900":/medium/i.test(l)?Q="500":/light/i.test(l)&&(Q="200"),y=i.tinySDF=new ud.TinySDF({fontFamily:p,fontWeight:Q,fontSize:24*os,buffer:3*os,radius:8*os}),y.fontWeight=Q}if(this.localGlyphs[y.fontWeight][h])return this.localGlyphs[y.fontWeight][h];const x=String.fromCharCode(h),{data:S,width:A,height:P,glyphWidth:L,glyphHeight:z,glyphLeft:V,glyphTop:G,glyphAdvance:Z}=y.draw(x);return this.localGlyphs[y.fontWeight][h]={id:h,bitmap:new Tl({width:A,height:P},S),metrics:{width:L/os,height:z/os,left:V/os,top:G/os-27,advance:Z/os,localGlyph:!0}}}}ud.loadGlyphRange=function(s,i,l,h,p){const y=256*i,x=y+255,S=h.transformRequest(h.normalizeGlyphsURL(l).replace("{fontstack}",s).replace("{range}",`${y}-${x}`),sl.Glyphs);cc(S,(A,P)=>{if(A)p(A);else if(P){const L={},z=function(V){return new B0(V).readFields(NG,{})}(P);for(const V of z.glyphs)L[V.id]=V;p(null,{glyphs:L,ascender:z.ascender,descender:z.descender})}})},ud.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:l=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=l;const S=this.size=s+4*i,A=this._createCanvas(S),P=this.ctx=A.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${y} ${s}px ${p}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(s),x=Math.ceil(l),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),A=Math.min(this.size-this.buffer,x+Math.ceil(h)),P=S+2*this.buffer,L=A+2*this.buffer,z=Math.max(P*L,0),V=new Uint8ClampedArray(z),G={data:V,width:P,height:L,glyphWidth:S,glyphHeight:A,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(S===0||A===0)return G;const{ctx:Z,buffer:Q,gridInner:ie,gridOuter:de}=this;Z.clearRect(Q,Q,S,A),Z.fillText(s,Q,Q+x);const we=Z.getImageData(Q,Q,S,A);de.fill(Eg,0,z),ie.fill(0,0,z);for(let pe=0;pe<A;pe++)for(let xe=0;xe<S;xe++){const Ae=we.data[4*(pe*S+xe)+3]/255;if(Ae===0)continue;const Te=(pe+Q)*P+xe+Q;if(Ae===1)de[Te]=0,ie[Te]=Eg;else{const qe=.5-Ae;de[Te]=qe>0?qe*qe:0,ie[Te]=qe<0?qe*qe:0}}UD(de,0,0,P,L,P,this.f,this.v,this.z),UD(ie,Q,Q,S,A,P,this.f,this.v,this.z);for(let pe=0;pe<z;pe++){const xe=Math.sqrt(de[pe])-Math.sqrt(ie[pe]);V[pe]=Math.round(255-255*(xe/this.radius+this.cutoff))}return G}};const hd=ao;function WD(s,i,l,h){const p=[],y=s.image,x=y.pixelRatio,S=y.paddedRect.w-2*hd,A=y.paddedRect.h-2*hd,P=s.right-s.left,L=s.bottom-s.top,z=y.stretchX||[[0,S]],V=y.stretchY||[[0,A]],G=(Ze,nt)=>Ze+nt[1]-nt[0],Z=z.reduce(G,0),Q=V.reduce(G,0),ie=S-Z,de=A-Q;let we=0,pe=Z,xe=0,Ae=Q,Te=0,qe=ie,Fe=0,et=de;if(y.content&&h){const Ze=y.content;we=U0(z,0,Ze[0]),xe=U0(V,0,Ze[1]),pe=U0(z,Ze[0],Ze[2]),Ae=U0(V,Ze[1],Ze[3]),Te=Ze[0]-we,Fe=Ze[1]-xe,qe=Ze[2]-Ze[0]-pe,et=Ze[3]-Ze[1]-Ae}const ht=(Ze,nt,it,at)=>{const gt=V0(Ze.stretch-we,pe,P,s.left),Je=W0(Ze.fixed-Te,qe,Ze.stretch,Z),Tt=V0(nt.stretch-xe,Ae,L,s.top),$t=W0(nt.fixed-Fe,et,nt.stretch,Q),At=V0(it.stretch-we,pe,P,s.left),tr=W0(it.fixed-Te,qe,it.stretch,Z),yt=V0(at.stretch-xe,Ae,L,s.top),Ft=W0(at.fixed-Fe,et,at.stretch,Q),rr=new ae(gt,Tt),Tr=new ae(At,Tt),nr=new ae(At,yt),Gt=new ae(gt,yt),Jr=new ae(Je/x,$t/x),sr=new ae(tr/x,Ft/x),lr=i*Math.PI/180;if(lr){const Kr=Math.sin(lr),Wr=Math.cos(lr),un=[Wr,-Kr,Kr,Wr];rr._matMult(un),Tr._matMult(un),Gt._matMult(un),nr._matMult(un)}const Vr=Ze.stretch+Ze.fixed,Xr=nt.stretch+nt.fixed;return{tl:rr,tr:Tr,bl:Gt,br:nr,tex:{x:y.paddedRect.x+hd+Vr,y:y.paddedRect.y+hd+Xr,w:it.stretch+it.fixed-Vr,h:at.stretch+at.fixed-Xr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:sr,minFontScaleX:qe/x/P,minFontScaleY:et/x/L,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){const Ze=qD(z,ie,Z),nt=qD(V,de,Q);for(let it=0;it<Ze.length-1;it++){const at=Ze[it],gt=Ze[it+1];for(let Je=0;Je<nt.length-1;Je++)p.push(ht(at,nt[Je],gt,nt[Je+1]))}}else p.push(ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:A+1}));return p}function U0(s,i,l){let h=0;for(const p of s)h+=Math.max(i,Math.min(l,p[1]))-Math.max(i,Math.min(l,p[0]));return h}function qD(s,i,l){const h=[{fixed:-hd,stretch:0}];for(const[p,y]of s){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(y-p)})}return h.push({fixed:i+hd,stretch:l}),h}function V0(s,i,l,h){return s/i*l+h}function W0(s,i,l,h){return s-i*l/h}function GG(s,i,l,h){const p=i+s.positionedLines[h].lineOffset;return h===0?l+p/2:l+(p+(i+s.positionedLines[h-1].lineOffset))/2}class HG{constructor(i=[],l=ZG){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:h}=this,p=l[i];for(;i>0;){const y=i-1>>1,x=l[y];if(h(p,x)>=0)break;l[i]=x,i=y}l[i]=p}_down(i){const{data:l,compare:h}=this,p=this.length>>1,y=l[i];for(;i<p;){let x=1+(i<<1),S=l[x];const A=x+1;if(A<this.length&&h(l[A],S)<0&&(x=A,S=l[A]),h(S,y)>=0)break;l[i]=S,i=x}l[i]=y}}function ZG(s,i){return s<i?-1:s>i?1:0}function XG(s,i=1,l=!1){let h=1/0,p=1/0,y=-1/0,x=-1/0;const S=s[0];for(let G=0;G<S.length;G++){const Z=S[G];(!G||Z.x<h)&&(h=Z.x),(!G||Z.y<p)&&(p=Z.y),(!G||Z.x>y)&&(y=Z.x),(!G||Z.y>x)&&(x=Z.y)}const A=Math.min(y-h,x-p);let P=A/2;const L=new HG([],KG);if(A===0)return new ae(h,p);for(let G=h;G<y;G+=A)for(let Z=p;Z<x;Z+=A)L.push(new fd(G+P,Z+P,P,s));let z=function(G){let Z=0,Q=0,ie=0;const de=G[0];for(let we=0,pe=de.length,xe=pe-1;we<pe;xe=we++){const Ae=de[we],Te=de[xe],qe=Ae.x*Te.y-Te.x*Ae.y;Q+=(Ae.x+Te.x)*qe,ie+=(Ae.y+Te.y)*qe,Z+=3*qe}return new fd(Q/Z,ie/Z,0,G)}(s),V=L.length;for(;L.length;){const G=L.pop();(G.d>z.d||!z.d)&&(z=G,l&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,V)),G.max-z.d<=i||(P=G.h/2,L.push(new fd(G.p.x-P,G.p.y-P,P,s)),L.push(new fd(G.p.x+P,G.p.y-P,P,s)),L.push(new fd(G.p.x-P,G.p.y+P,P,s)),L.push(new fd(G.p.x+P,G.p.y+P,P,s)),V+=4)}return l&&(console.log(`num probes: ${V}`),console.log(`best distance: ${z.d}`)),z.p}function KG(s,i){return i.max-s.max}class fd{constructor(i,l,h,p){this.p=new ae(i,l),this.h=h,this.d=function(y,x){let S=!1,A=1/0;for(let P=0;P<x.length;P++){const L=x[P];for(let z=0,V=L.length,G=V-1;z<V;G=z++){const Z=L[z],Q=L[G];Z.y>y.y!=Q.y>y.y&&y.x<(Q.x-Z.x)*(y.y-Z.y)/(Q.y-Z.y)+Z.x&&(S=!S),A=Math.min(A,BI(y,Z,Q))}}return(S?1:-1)*Math.sqrt(A)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const dd=7,fT=Number.POSITIVE_INFINITY,YG=Math.sqrt(2);function GD(s,[i,l]){let h=0,p=0;if(l===fT){i<0&&(i=0);const y=i/YG;switch(s){case"top-right":case"top-left":p=y-dd;break;case"bottom-right":case"bottom-left":p=-y+dd;break;case"bottom":p=-i+dd;break;case"top":p=i-dd}switch(s){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=i;break;case"right":h=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),s){case"top-right":case"top-left":case"top":p=l-dd;break;case"bottom-right":case"bottom-left":case"bottom":p=-l+dd}switch(s){case"top-right":case"bottom-right":case"right":h=-i;break;case"top-left":case"bottom-left":case"left":h=i}}return[h,p]}function JG(s,i,l,h,p,y,x,S,A,P){s.createArrays(),s.tilePixelRatio=Wt/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const L=s.layers[0].layout,z=s.layers[0]._unevaluatedLayout._values,V={};if(s.textSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ie}=s.textSizeData;V.compositeTextSizes=[z["text-size"].possiblyEvaluate(new N(Q),S),z["text-size"].possiblyEvaluate(new N(ie),S)]}if(s.iconSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ie}=s.iconSizeData;V.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new N(Q),S),z["icon-size"].possiblyEvaluate(new N(ie),S)]}V.layoutTextSize=z["text-size"].possiblyEvaluate(new N(A+1),S),V.layoutIconSize=z["icon-size"].possiblyEvaluate(new N(A+1),S),V.textMaxSize=z["text-size"].possiblyEvaluate(new N(18),S);const G=L.get("text-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Z=L.get("text-size");for(const Q of s.features){const ie=L.get("text-font").evaluate(Q,{},S).join(","),de=Z.evaluate(Q,{},S),we=V.layoutTextSize.evaluate(Q,{},S),pe=(V.layoutIconSize.evaluate(Q,{},S),{horizontal:{},vertical:void 0}),xe=Q.text;let Ae,Te=[0,0];if(xe){const et=xe.toString(),ht=L.get("text-letter-spacing").evaluate(Q,{},S)*fi,Ze=L.get("text-line-height").evaluate(Q,{},S)*fi,nt=bE(et)?ht:0,it=L.get("text-anchor").evaluate(Q,{},S),at=L.get("text-variable-anchor");if(!at){const At=L.get("text-radial-offset").evaluate(Q,{},S);Te=At?GD(it,[At*fi,fT]):L.get("text-offset").evaluate(Q,{},S).map(tr=>tr*fi)}let gt=G?"center":L.get("text-justify").evaluate(Q,{},S);const Je=L.get("symbol-placement")==="point",Tt=Je?L.get("text-max-width").evaluate(Q,{},S)*fi:1/0,$t=At=>{s.allowVerticalPlacement&&Xm(et)&&(pe.vertical=cT(xe,i,l,p,ie,Tt,Ze,it,At,nt,Te,Wo.vertical,!0,we,de))};if(!G&&at){const At=gt==="auto"?at.map(yt=>dT(yt)):[gt];let tr=!1;for(let yt=0;yt<At.length;yt++){const Ft=At[yt];if(!pe.horizontal[Ft])if(tr)pe.horizontal[Ft]=pe.horizontal[0];else{const rr=cT(xe,i,l,p,ie,Tt,Ze,"center",Ft,nt,Te,Wo.horizontal,!1,we,de);rr&&(pe.horizontal[Ft]=rr,tr=rr.positionedLines.length===1)}}$t("left")}else{if(gt==="auto"&&(gt=dT(it)),Je||L.get("text-writing-mode").indexOf("horizontal")>=0||!Xm(et)){const At=cT(xe,i,l,p,ie,Tt,Ze,it,gt,nt,Te,Wo.horizontal,!1,we,de);At&&(pe.horizontal[gt]=At)}$t(Je?"left":gt)}}let qe=!1;if(Q.icon&&Q.icon.name){const et=h[Q.icon.name];et&&(Ae=VG(p[Q.icon.name],L.get("icon-offset").evaluate(Q,{},S),L.get("icon-anchor").evaluate(Q,{},S)),qe=et.sdf,s.sdfIcons===void 0?s.sdfIcons=et.sdf:s.sdfIcons!==et.sdf&&Nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(et.pixelRatio!==s.pixelRatio||L.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const Fe=ZD(pe.horizontal)||pe.vertical;s.iconsInText||(s.iconsInText=!!Fe&&Fe.iconsInText),(Fe||Ae)&&QG(s,Q,pe,Ae,h,V,we,0,Te,qe,x,S,P)}y&&s.generateCollisionDebugBuffers(A,s.collisionBoxArray)}function dT(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function QG(s,i,l,h,p,y,x,S,A,P,L,z,V){let G=y.textMaxSize.evaluate(i,{},z);G===void 0&&(G=x);const Z=s.layers[0].layout,Q=Z.get("icon-offset").evaluate(i,{},z),ie=ZD(l.horizontal)||l.vertical,de=V.name==="globe",we=fi,pe=x/we,xe=s.tilePixelRatio*G/we,Ae=(it=s.overscaling,s.zoom>18&&it>2&&(it>>=1),Math.max(Wt/(512*it),1)*Z.get("symbol-spacing")),Te=Z.get("text-padding")*s.tilePixelRatio,qe=Z.get("icon-padding")*s.tilePixelRatio,Fe=ve(Z.get("text-max-angle")),et=Z.get("text-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",ht=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",Ze=Z.get("symbol-placement"),nt=Ae/2;var it;const at=Z.get("icon-text-fit");let gt;h&&at!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(gt=LD(h,l.vertical,at,Z.get("icon-text-fit-padding"),Q,pe)),ie&&(h=LD(h,ie,at,Z.get("icon-text-fit-padding"),Q,pe)));const Je=(Tt,$t,At)=>{if($t.x<0||$t.x>=Wt||$t.y<0||$t.y>=Wt)return;let tr=null;if(de){const{x:yt,y:Ft,z:rr}=V.projectTilePoint($t.x,$t.y,At);tr={anchor:new Cl(yt,Ft,rr,0,void 0),up:V.upVector(At,$t.x,$t.y)}}(function(yt,Ft,rr,Tr,nr,Gt,Jr,sr,lr,Vr,Xr,Kr,Wr,un,vn,Ln,qr,Vn,jn,fn,Cr,$n,Yr,Xi,Nn){const di=yt.addToLineVertexArray(Ft,Tr);let ri,Ki,ni,ss,gd,Dg,Rg,CR=0,PR=0,OR=0,MR=0,PT=-1,OT=-1;const Ns={};let kR=EE("");const Sh=rr?rr.anchor:Ft;let MT=0,kT=0;if(lr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[MT,kT]=lr.layout.get("text-offset").evaluate(Cr,{},Nn).map(So=>So*fi):(MT=lr.layout.get("text-radial-offset").evaluate(Cr,{},Nn)*fi,kT=fT),yt.allowVerticalPlacement&&nr.vertical){const So=nr.vertical;if(vn)Dg=pT(So),sr&&(Rg=pT(sr));else{const Eo=lr.layout.get("text-rotate").evaluate(Cr,{},Nn)+90;ni=q0(Vr,Sh,Ft,Xr,Kr,Wr,So,un,Eo,Ln),sr&&(ss=q0(Vr,Sh,Ft,Xr,Kr,Wr,sr,Vn,Eo))}}if(Gt){const So=lr.layout.get("icon-rotate").evaluate(Cr,{},Nn),Eo=lr.layout.get("icon-text-fit")!=="none",Lg=WD(Gt,So,Yr,Eo),DT=sr?WD(sr,So,Yr,Eo):void 0;Ki=q0(Vr,Sh,Ft,Xr,Kr,Wr,Gt,Vn,So),CR=4*Lg.length;const IR=yt.iconSizeData;let Eh=null;IR.kind==="source"?(Eh=[is*lr.layout.get("icon-size").evaluate(Cr,{},Nn)],Eh[0]>Dc&&Nt(`${yt.layerIds[0]}: Value for "icon-size" is >= ${Tg}. Reduce your "icon-size".`)):IR.kind==="composite"&&(Eh=[is*$n.compositeIconSizes[0].evaluate(Cr,{},Nn),is*$n.compositeIconSizes[1].evaluate(Cr,{},Nn)],(Eh[0]>Dc||Eh[1]>Dc)&&Nt(`${yt.layerIds[0]}: Value for "icon-size" is >= ${Tg}. Reduce your "icon-size".`)),yt.addSymbols(yt.icon,Lg,Eh,fn,jn,Cr,!1,rr,Ft,di.lineStartIndex,di.lineLength,-1,Xi,Nn),PT=yt.icon.placedSymbolArray.length-1,DT&&(PR=4*DT.length,yt.addSymbols(yt.icon,DT,Eh,fn,jn,Cr,Wo.vertical,rr,Ft,di.lineStartIndex,di.lineLength,-1,Xi,Nn),OT=yt.icon.placedSymbolArray.length-1)}for(const So in nr.horizontal){const Eo=nr.horizontal[So];ri||(kR=EE(Eo.text),vn?gd=pT(Eo):ri=q0(Vr,Sh,Ft,Xr,Kr,Wr,Eo,un,lr.layout.get("text-rotate").evaluate(Cr,{},Nn),Ln));const Lg=Eo.positionedLines.length===1;if(OR+=HD(yt,rr,Ft,Eo,Jr,lr,vn,Cr,Ln,di,nr.vertical?Wo.horizontal:Wo.horizontalOnly,Lg?Object.keys(nr.horizontal):[So],Ns,PT,$n,Xi,Nn),Lg)break}nr.vertical&&(MR+=HD(yt,rr,Ft,nr.vertical,Jr,lr,vn,Cr,Ln,di,Wo.vertical,["vertical"],Ns,OT,$n,Xi,Nn));let zc=-1;const IT=(So,Eo)=>So?Math.max(So,Eo):Eo;zc=IT(gd,zc),zc=IT(Dg,zc),zc=IT(Rg,zc);const C9=zc>-1?1:0;yt.glyphOffsetArray.length>=Lc.MAX_GLYPHS&&Nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cr.sortKey!==void 0&&yt.addToSortKeyRanges(yt.symbolInstances.length,Cr.sortKey),yt.symbolInstances.emplaceBack(Sh.x,Sh.y,Sh.z,Ft.x,Ft.y,Ns.right>=0?Ns.right:-1,Ns.center>=0?Ns.center:-1,Ns.left>=0?Ns.left:-1,Ns.vertical>=0?Ns.vertical:-1,PT,OT,kR,ri!==void 0?ri:yt.collisionBoxArray.length,ri!==void 0?ri+1:yt.collisionBoxArray.length,ni!==void 0?ni:yt.collisionBoxArray.length,ni!==void 0?ni+1:yt.collisionBoxArray.length,Ki!==void 0?Ki:yt.collisionBoxArray.length,Ki!==void 0?Ki+1:yt.collisionBoxArray.length,ss||yt.collisionBoxArray.length,ss?ss+1:yt.collisionBoxArray.length,Xr,OR,MR,CR,PR,C9,0,MT,kT,zc)})(s,$t,tr,Tt,l,h,p,gt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,Te,et,A,0,qe,ht,Q,i,y,P,L,z)};if(Ze==="line")for(const Tt of FD(i.geometry,0,0,Wt,Wt)){const $t=qG(Tt,Ae,Fe,l.vertical||ie,h,we,xe,s.overscaling,Wt);for(const At of $t)ie&&e9(s,ie.text,nt,At)||Je(Tt,At,z)}else if(Ze==="line-center"){for(const Tt of i.geometry)if(Tt.length>1){const $t=WG(Tt,Fe,l.vertical||ie,h,we,xe);$t&&Je(Tt,$t,z)}}else if(i.type==="Polygon")for(const Tt of eT(i.geometry,0)){const $t=XG(Tt,16);Je(Tt[0],new Cl($t.x,$t.y,0,0,void 0),z)}else if(i.type==="LineString")for(const Tt of i.geometry)Je(Tt,new Cl(Tt[0].x,Tt[0].y,0,0,void 0),z);else if(i.type==="Point")for(const Tt of i.geometry)for(const $t of Tt)Je([$t],new Cl($t.x,$t.y,0,0,void 0),z)}const Tg=255,Dc=Tg*is;function HD(s,i,l,h,p,y,x,S,A,P,L,z,V,G,Z,Q,ie){const de=function(xe,Ae,Te,qe,Fe,et,ht,Ze){const nt=[];if(Ae.positionedLines.length===0)return nt;const it=qe.layout.get("text-rotate").evaluate(et,{})*Math.PI/180,at=function(At){const tr=At[0],yt=At[1],Ft=tr*yt;return Ft>0?[tr,-yt]:Ft<0?[-tr,yt]:tr===0?[yt,tr]:[yt,-tr]}(Te);let gt=Math.abs(Ae.top-Ae.bottom);for(const At of Ae.positionedLines)gt-=At.lineOffset;const Je=Ae.positionedLines.length,Tt=gt/Je;let $t=Ae.top-Te[1];for(let At=0;At<Je;++At){const tr=Ae.positionedLines[At];$t=GG(Ae,Tt,$t,At);for(const yt of tr.positionedGlyphs){if(!yt.rect)continue;const Ft=yt.rect||{};let rr=CD+1,Tr=!0,nr=1,Gt=0;if(yt.imageName){const Yr=ht[yt.imageName];if(!Yr)continue;if(Yr.sdf){Nt("SDF images are not supported in formatted text and will be ignored.");continue}Tr=!1,nr=Yr.pixelRatio,rr=ao/nr}const Jr=(Fe||Ze)&&yt.vertical,sr=yt.metrics.advance*yt.scale/2,lr=yt.metrics,Vr=yt.rect;if(Vr===null)continue;Ze&&Ae.verticalizable&&(Gt=yt.imageName?sr-yt.metrics.width*yt.scale/2:0);const Xr=Fe?[yt.x+sr,yt.y]:[0,0];let Kr=[0,0],Wr=[0,0],un=!1;Fe||(Jr?(Wr=[yt.x+sr+at[0],yt.y+at[1]-Gt],un=!0):Kr=[yt.x+sr+Te[0],yt.y+Te[1]-Gt]);const vn=Vr.w*yt.scale/(nr*(yt.localGlyph?os:1)),Ln=Vr.h*yt.scale/(nr*(yt.localGlyph?os:1));let qr,Vn,jn,fn;if(Jr){const Yr=yt.y-$t,Xi=new ae(-sr,sr-Yr),Nn=-Math.PI/2,di=new ae(...Wr);qr=new ae(-sr+Kr[0],Kr[1]),qr._rotateAround(Nn,Xi)._add(di),qr.x+=-Yr+sr,qr.y-=(lr.left-rr)*yt.scale;const ri=yt.imageName?lr.advance*yt.scale:fi*yt.scale,Ki=String.fromCharCode(yt.glyph);CG(Ki)?qr.x+=(1-rr)*yt.scale:PG(Ki)?qr.x+=ri-lr.height*yt.scale+(-rr-1)*yt.scale:qr.x+=yt.imageName||lr.width+2*rr===Vr.w&&lr.height+2*rr===Vr.h?(ri-Ln)/2:(ri-(lr.height+2*rr)*yt.scale)/2,Vn=new ae(qr.x,qr.y-vn),jn=new ae(qr.x+Ln,qr.y),fn=new ae(qr.x+Ln,qr.y-vn)}else{const Yr=(lr.left-rr)*yt.scale-sr+Kr[0],Xi=(-lr.top-rr)*yt.scale+Kr[1],Nn=Yr+vn,di=Xi+Ln;qr=new ae(Yr,Xi),Vn=new ae(Nn,Xi),jn=new ae(Yr,di),fn=new ae(Nn,di)}if(it){let Yr;Yr=Fe?new ae(0,0):un?new ae(at[0],at[1]):new ae(Te[0],Te[1]),qr._rotateAround(it,Yr),Vn._rotateAround(it,Yr),jn._rotateAround(it,Yr),fn._rotateAround(it,Yr)}const Cr=new ae(0,0),$n=new ae(0,0);nt.push({tl:qr,tr:Vn,bl:jn,br:fn,tex:Ft,writingMode:Ae.writingMode,glyphOffset:Xr,sectionIndex:yt.sectionIndex,isSDF:Tr,pixelOffsetTL:Cr,pixelOffsetBR:$n,minFontScaleX:0,minFontScaleY:0})}}return nt}(0,h,A,y,x,S,p,s.allowVerticalPlacement),we=s.textSizeData;let pe=null;we.kind==="source"?(pe=[is*y.layout.get("text-size").evaluate(S,{},ie)],pe[0]>Dc&&Nt(`${s.layerIds[0]}: Value for "text-size" is >= ${Tg}. Reduce your "text-size".`)):we.kind==="composite"&&(pe=[is*Z.compositeTextSizes[0].evaluate(S,{},ie),is*Z.compositeTextSizes[1].evaluate(S,{},ie)],(pe[0]>Dc||pe[1]>Dc)&&Nt(`${s.layerIds[0]}: Value for "text-size" is >= ${Tg}. Reduce your "text-size".`)),s.addSymbols(s.text,de,pe,A,x,S,L,i,l,P.lineStartIndex,P.lineLength,G,Q,ie);for(const xe of z)V[xe]=s.text.placedSymbolArray.length-1;return 4*de.length}function ZD(s){for(const i in s)return s[i];return null}function q0(s,i,l,h,p,y,x,S,A,P){let L=x.top,z=x.bottom,V=x.left,G=x.right;const Z=x.collisionPadding;if(Z&&(V-=Z[0],L-=Z[1],G+=Z[2],z+=Z[3]),A){const Q=new ae(V,L),ie=new ae(G,L),de=new ae(V,z),we=new ae(G,z),pe=ve(A);let xe=new ae(0,0);P&&(xe=new ae(P[0],P[1])),Q._rotateAround(pe,xe),ie._rotateAround(pe,xe),de._rotateAround(pe,xe),we._rotateAround(pe,xe),V=Math.min(Q.x,ie.x,de.x,we.x),G=Math.max(Q.x,ie.x,de.x,we.x),L=Math.min(Q.y,ie.y,de.y,we.y),z=Math.max(Q.y,ie.y,de.y,we.y)}return s.emplaceBack(i.x,i.y,i.z,l.x,l.y,V,L,G,z,S,h,p,y),s.length-1}function pT(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function e9(s,i,l,h){const p=s.compareText;if(i in p){const y=p[i];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<l)return!0}else p[i]=[];return p[i].push(h),!1}function XD(s,i){const l=s.fovAboveCenter,h=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,p=(s._camera.position[2]*s.worldSize-h)/Math.cos(s._pitch),y=Math.sin(l)*p/Math.sin(Math.max(Math.PI/2-s._pitch-l,.01)),x=Math.sin(s._pitch)*y+p;return Math.min(1.01*x,p*(1/s._horizonShift))}function bh(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const l=Math.pow(2,-s.z),h=s.x*l,p=(s.x+1)*l,y=s.y*l,x=(s.y+1)*l,S=Vo(h),A=Vo(p),P=Ti(y),L=Ti(x),z=i.project(S,P),V=i.project(A,P),G=i.project(A,L),Z=i.project(S,L);let Q=Math.min(z.x,V.x,G.x,Z.x),ie=Math.min(z.y,V.y,G.y,Z.y),de=Math.max(z.x,V.x,G.x,Z.x),we=Math.max(z.y,V.y,G.y,Z.y);const pe=l/16;function xe(Te,qe,Fe,et,ht,Ze){const nt=(Fe+ht)/2,it=(et+Ze)/2,at=i.project(Vo(nt),Ti(it)),gt=Math.max(0,Q-at.x,ie-at.y,at.x-de,at.y-we);Q=Math.min(Q,at.x),de=Math.max(de,at.x),ie=Math.min(ie,at.y),we=Math.max(we,at.y),gt>pe&&(xe(Te,at,Fe,et,nt,it),xe(at,qe,nt,it,ht,Ze))}xe(z,V,h,y,p,y),xe(V,G,p,y,p,x),xe(G,Z,p,x,h,x),xe(Z,z,h,x,h,y),Q-=pe,ie-=pe,de+=pe,we+=pe;const Ae=1/Math.max(de-Q,we-ie);return{scale:Ae,x:Q*Ae,y:ie*Ae,x2:de*Ae,y2:we*Ae,projection:i}}const t9=ts(new Float32Array(16));class Rc{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new Ur(0,0)}projectTilePoint(i,l,h){return{x:i,y:l,z:0}}locationPoint(i,l,h=!0){return i._coordinatePoint(i.locationCoordinate(l),h)}pixelsPerMeter(i,l){return ns(1,i)*l}pixelSpaceConversion(i,l,h){return 1}farthestPixelDistance(i){return XD(i,i.pixelsPerMeter)}pointCoordinate(i,l,h,p){const y=i.horizonLineFromTop(!1),x=new ae(l,Math.max(y,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,p))}pointCoordinate3D(i,l,h){const p=new ae(l,h);if(i.elevation)return i.elevation.pointCoordinate(p);{const y=this.pointCoordinate(i,p.x,p.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const h=i.horizonLineFromTop();return l.y<h}createInversionMatrix(i,l){return t9}createTileMatrix(i,l,h){let p,y,x;const S=h.canonical,A=ts(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=bh(S,this);p=1,y=P.x+h.wrap*P.scale,x=P.y,ph(A,A,[p/P.scale,p/P.scale,i.pixelsPerMeter/l])}else p=l/i.zoomScale(S.z),y=(S.x+Math.pow(2,S.z)*h.wrap)*p,x=S.y*p;return rg(A,A,[y,x,0]),ph(A,A,[p/Wt,p/Wt,1]),A}upVector(i,l,h){return[0,0,1]}upVectorScale(i,l,h){return{metersToTile:1}}}class r9 extends Rc{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,h]=this.parallels=i.parallels||[29.5,45.5],p=Math.sin(ve(l));this.n=(p+Math.sin(ve(h)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:h,c:p,r0:y}=this,x=ve(i-this.center[0]),S=ve(l),A=Math.sqrt(p-2*h*Math.sin(S))/h;return{x:A*Math.sin(x*h),y:A*Math.cos(x*h)-y,z:0}}unproject(i,l){const{n:h,c:p,r0:y}=this,x=y+l;let S=Math.atan2(i,Math.abs(x))*Math.sign(x);x*h<0&&(S-=Math.PI*Math.sign(i)*Math.sign(x));const A=ve(this.center[0])*h;S=Ye(S,-Math.PI-A,Math.PI-A);const P=ke(Ee(S/h)+this.center[0],-180,180),L=Math.asin(ke((p-(i*i+x*x)*h*h)/(2*h),-1,1)),z=ke(Ee(L),-Ai,Ai);return new Ur(P,z)}}const Ag=1.340264,Cg=-.081106,Pg=893e-6,Og=.003796,G0=Math.sqrt(3)/2;class n9 extends Rc{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(G0*Math.sin(l)),p=h*h,y=p*p*p;return{x:.5*(i*Math.cos(h)/(G0*(Ag+3*Cg*p+y*(7*Pg+9*Og*p)))/Math.PI+.5),y:1-.5*(h*(Ag+Cg*p+y*(Pg+Og*p))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,p=h*h,y=p*p*p;for(let L,z,V,G=0;G<12&&(z=h*(Ag+Cg*p+y*(Pg+Og*p))-l,V=Ag+3*Cg*p+y*(7*Pg+9*Og*p),L=z/V,h=ke(h-L,-Math.PI/3,Math.PI/3),p=h*h,y=p*p*p,!(Math.abs(L)<1e-12));++G);const x=G0*i*(Ag+3*Cg*p+y*(7*Pg+9*Og*p))/Math.cos(h),S=Math.asin(Math.sin(h)/G0),A=ke(180*x/Math.PI,-180,180),P=ke(180*S/Math.PI,-Ai,Ai);return new Ur(A,P)}}class i9 extends Rc{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const h=360*(i-.5),p=ke(360*(.5-l),-Ai,Ai);return new Ur(h,p)}}const pd=Math.PI/2;function H0(s){return Math.tan((pd+s)/2)}class o9 extends Rc{constructor(i){super(i),this.center=i.center||[0,30];const[l,h]=this.parallels=i.parallels||[30,30];let p=ve(l),y=ve(h);this.southernCenter=p+y<0,this.southernCenter&&(p=-p,y=-y);const x=Math.cos(p),S=H0(p);this.n=p===y?Math.sin(p):Math.log(x/Math.cos(y))/Math.log(H0(y)/S),this.f=x*Math.pow(H0(p),this.n)/this.n}project(i,l){l=ve(l),this.southernCenter&&(l=-l),i=ve(i-this.center[0]);const h=1e-6,{n:p,f:y}=this;y>0?l<-pd+h&&(l=-pd+h):l>pd-h&&(l=pd-h);const x=y/Math.pow(H0(l),p);let S=x*Math.sin(p*i),A=y-x*Math.cos(p*i);return S=.5*(S/Math.PI+.5),A=.5*(A/Math.PI+.5),{x:S,y:this.southernCenter?A:1-A,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:h,f:p}=this,y=p-l,x=Math.sign(y),S=Math.sign(h)*Math.sqrt(i*i+y*y);let A=Math.atan2(i,Math.abs(y))*x;y*h<0&&(A-=Math.PI*Math.sign(i)*x);const P=ke(Ee(A/h)+this.center[0],-180,180),L=ke(Ee(2*Math.atan(Math.pow(p/S,1/h))-pd),-Ai,Ai);return new Ur(P,this.southernCenter?-L:L)}}class KD extends Rc{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:Ds(i),y:Rs(l),z:0}}unproject(i,l){const h=Vo(i),p=Ti(l);return new Ur(h,p)}}const YD=ve(Ai);class a9 extends Rc{project(i,l){const h=(l=ve(l))*l,p=h*h;return{x:.5*((i=ve(i))*(.8707-.131979*h+p*(p*(.003971*h-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+h*(.015085+p*(.028874*h-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,p=25,y=0,x=h*h;do{x=h*h;const P=x*x;y=(h*(1.007226+x*(.015085+P*(.028874*x-.044475-.005916*P)))-l)/(1.007226+x*(.045255+P*(.259866*x-.311325-.005916*11*P))),h=ke(h-y,-YD,YD)}while(Math.abs(y)>1e-6&&--p>0);x=h*h;const S=ke(Ee(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),A=Ee(h);return new Ur(S,A)}}const JD=ve(Ai);class s9 extends Rc{project(i,l){l=ve(l),i=ve(i);const h=Math.cos(l),p=2/Math.PI,y=Math.acos(h*Math.cos(i/2)),x=Math.sin(y)/y,S=.5*(i*p+2*h*Math.sin(i/2)/x)||0,A=.5*(l+Math.sin(l)/x)||0;return{x:.5*(S/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(i,l){let h=i=(2*i-.5)*Math.PI,p=l=(2*(1-l)-1)*Math.PI,y=25;const x=1e-6;let S=0,A=0;do{const P=Math.cos(p),L=Math.sin(p),z=2*L*P,V=L*L,G=P*P,Z=Math.cos(h/2),Q=Math.sin(h/2),ie=2*Z*Q,de=Q*Q,we=1-G*Z*Z,pe=we?1/we:0,xe=we?Math.acos(P*Z)*Math.sqrt(1/we):0,Ae=.5*(2*xe*P*Q+2*h/Math.PI)-i,Te=.5*(xe*L+p)-l,qe=.5*pe*(G*de+xe*P*Z*V)+1/Math.PI,Fe=pe*(ie*z/4-xe*L*Q),et=.125*pe*(z*Q-xe*L*G*ie),ht=.5*pe*(V*Z+xe*de*P)+.5,Ze=Fe*et-ht*qe;S=(Te*Fe-Ae*ht)/Ze,A=(Ae*et-Te*qe)/Ze,h=ke(h-S,-Math.PI,Math.PI),p=ke(p-A,-JD,JD)}while((Math.abs(S)>x||Math.abs(A)>x)&&--y>0);return new Ur(Ee(h),Ee(p))}}class QD extends Rc{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ve(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:h,cosPhi:p}=this;return{x:ve(i)*p*h+.5,y:-Math.sin(ve(l))/p*h+.5,z:0}}unproject(i,l){const{scale:h,cosPhi:p}=this,y=-(l-.5)/h,x=ke(Ee((i-.5)/h)/p,-180,180),S=Math.asin(ke(y*p,-1,1)),A=ke(Ee(S),-Ai,Ai);return new Ur(x,A)}}class l9 extends KD{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,h){const p=ug(i,l,h);return An(p,p,hg(Is(h))),{x:p[0],y:p[1],z:p[2]}}locationPoint(i,l){const h=Qf(l.lat,l.lng),p=Gi([],h),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;ag(h,h,p,ns(1,0)*Wt*y);const x=ts(new Float64Array(16));return dh(x,i.pixelMatrix,i.globeMatrix),An(h,h,x),new ae(h[0],h[1])}pixelsPerMeter(i,l){return ns(1,0)*l}pixelSpaceConversion(i,l,h){const p=ns(1,i)*l,y=Sr(ns(1,45)*l,p,h);return this.pixelsPerMeter(i,l)/y}createTileMatrix(i,l,h){const p=NE(Is(h.canonical));return dh(new Float64Array(16),i.globeMatrix,p)}createInversionMatrix(i,l){const{center:h}=i,p=hg(Is(l));return b0(p,p,ve(h.lng)),PE(p,p,ve(h.lat)),ph(p,p,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(i,l,h,p){return AI(i,l,h,!0)||new td(0,0)}pointCoordinate3D(i,l,h){const p=this.pointCoordinate(i,l,h,0);return[p.x,p.y,p.z]}isPointAboveHorizon(i,l){return!AI(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=function(p,y){const x=p.cameraToCenterDistance,S=p._centerAltitude*y,A=p._camera,P=p._camera.forward(),L=Sl([],Uo([],P,-x),[0,0,S]),z=p.worldSize/(2*Math.PI),V=[0,0,-z],G=p.width/p.height,Z=Math.tan(p.fovAboveCenter),Q=Uo([],A.up(),Z),ie=Uo([],A.right(),Z*G),de=Gi([],Sl([],Sl([],P,Q),ie)),we=[];let pe;if(new IE(L,de).closestPointOnSphere(V,z,we)){const xe=Sl([],we,V),Ae=rs([],xe,L);pe=Math.cos(p.fovAboveCenter)*ng(Ae)}else{const xe=rs([],L,V),Ae=rs([],V,L);Gi(Ae,Ae);const Te=ng(xe)-z;pe=Math.sqrt(Te*(Te+2*z));const qe=Math.acos(pe/(z+Te))-Math.acos(da(P,Ae));pe*=Math.cos(qe)}return 1.01*pe}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=ed(i.zoom);if(h>0){const p=XD(i,ns(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Sr(l,p+y*(1-Math.cos(x)),Math.pow(h,10))}return l}upVector(i,l,h){return ug(l,h,i,1)}upVectorScale(i){return{metersToTile:w0(E0(Is(i)))}}}function eR(s){const i=s.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new KD(s);case"equirectangular":return new i9(s);case"naturalEarth":return new a9(s);case"equalEarth":return new n9(s);case"winkelTripel":return new s9(s);case"albers":return l?new QD(s):new r9(s);case"lambertConformalConic":return l?new QD(s):new o9(s);case"globe":return new l9(s)}throw new Error(`Invalid projection name: ${s.name}`)}const c9=R0.types,u9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Z0(s,i,l,h,p,y,x,S,A,P,L,z,V){const G=S?Math.min(Dc,Math.round(S[0])):0,Z=S?Math.min(Dc,Math.round(S[1])):0;s.emplaceBack(i,l,Math.round(32*h),Math.round(32*p),y,x,(G<<1)+(A?1:0),Z,16*P,16*L,256*z,256*V)}function X0(s,i,l,h,p,y,x){s.emplaceBack(i,l,h,p,y,x)}function K0(s,i,l,h,p){s.emplaceBack(i,l,h,p),s.emplaceBack(i,l,h,p),s.emplaceBack(i,l,h,p),s.emplaceBack(i,l,h,p)}function h9(s){for(const i of s.sections)if(SE(i.text))return!0;return!1}class mT{constructor(i){this.layoutVertexArray=new ot,this.indexArray=new zt,this.programConfigurations=i,this.segments=new Dn,this.dynamicLayoutVertexArray=new lt,this.opacityVertexArray=new Bt,this.placedSymbolArray=new In,this.globeExtVertexArray=new pt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_G.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,bG.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,u9,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,xG.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Rt(mT,"SymbolBuffers");class gT{constructor(i,l,h){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Dn,this.collisionVertexArray=new gr,this.collisionVertexArrayExt=new fr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,wG.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,SG.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Rt(gT,"CollisionBuffers");class Lc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ts([]),this.placementViewportMatrix=ts([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=iT(this.zoom,l["text-size"]),this.iconSizeData=iT(this.zoom,l["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(x=>Wo[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new mT(new fh(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new mT(new fh(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new qi,this.lineVertexArray=new Zf,this.symbolInstances=new Qr}calculateGlyphDependencies(i,l,h,p,y){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,p&&y){const S=wg[i.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(i,l,h,p){const y=this.layers[0],x=y.layout,S=this.projection.name==="globe",A=x.get("text-font"),P=x.get("text-field"),L=x.get("icon-image"),z=(P.value.kind!=="constant"||P.value.value instanceof Wi&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),V=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,G=x.get("symbol-sort-key");if(this.features=[],!z&&!V)return;const Z=l.iconDependencies,Q=l.glyphDependencies,ie=l.availableImages,de=new N(this.zoom);for(const{feature:we,id:pe,index:xe,sourceLayerIndex:Ae}of i){const Te=y._featureFilter.needGeometry,qe=vh(we,Te);if(!y._featureFilter.filter(de,qe,h))continue;if(Te||(qe.geometry=El(we,h,p)),S&&we.type!==1&&h.z<=5){const Ze=qe.geometry,nt=.98078528056,it=(at,gt)=>da(ug(at.x,at.y,h,1),ug(gt.x,gt.y,h,1))<nt;for(let at=0;at<Ze.length;at++)Ze[at]=bq(Ze[at],it)}let Fe,et;if(z){const Ze=y.getValueAndResolveTokens("text-field",qe,h,ie),nt=Wi.factory(Ze);h9(nt)&&(this.hasRTLText=!0),(!this.hasRTLText||T()==="unavailable"||this.hasRTLText&&k.isParsed())&&(Fe=AG(nt,y,qe))}if(V){const Ze=y.getValueAndResolveTokens("icon-image",qe,h,ie);et=Ze instanceof yo?Ze:yo.fromString(Ze)}if(!Fe&&!et)continue;const ht=this.sortFeaturesByKey?G.evaluate(qe,{},h):void 0;if(this.features.push({id:pe,text:Fe,icon:et,index:xe,sourceLayerIndex:Ae,geometry:qe.geometry,properties:we.properties,type:c9[we.type],sortKey:ht}),et&&(Z[et.name]=!0),Fe){const Ze=A.evaluate(qe,{},h).join(","),nt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wo.vertical)>=0;for(const it of Fe.sections)if(it.image)Z[it.image.name]=!0;else{const at=Xm(Fe.toString()),gt=it.fontStack||Ze,Je=Q[gt]=Q[gt]||{};this.calculateGlyphDependencies(it.text,Je,nt,this.allowVerticalPlacement,at)}}}x.get("symbol-placement")==="line"&&(this.features=function(we){const pe={},xe={},Ae=[];let Te=0;function qe(Ze){Ae.push(we[Ze]),Te++}function Fe(Ze,nt,it){const at=xe[Ze];return delete xe[Ze],xe[nt]=at,Ae[at].geometry[0].pop(),Ae[at].geometry[0]=Ae[at].geometry[0].concat(it[0]),at}function et(Ze,nt,it){const at=pe[nt];return delete pe[nt],pe[Ze]=at,Ae[at].geometry[0].shift(),Ae[at].geometry[0]=it[0].concat(Ae[at].geometry[0]),at}function ht(Ze,nt,it){const at=it?nt[0][nt[0].length-1]:nt[0][0];return`${Ze}:${at.x}:${at.y}`}for(let Ze=0;Ze<we.length;Ze++){const nt=we[Ze],it=nt.geometry,at=nt.text?nt.text.toString():null;if(!at){qe(Ze);continue}const gt=ht(at,it),Je=ht(at,it,!0);if(gt in xe&&Je in pe&&xe[gt]!==pe[Je]){const Tt=et(gt,Je,it),$t=Fe(gt,Je,Ae[Tt].geometry);delete pe[gt],delete xe[Je],xe[ht(at,Ae[$t].geometry,!0)]=$t,Ae[Tt].geometry=null}else gt in xe?Fe(gt,Je,it):Je in pe?et(gt,Je,it):(qe(Ze),pe[gt]=Te-1,xe[Je]=Te-1)}return Ae.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((we,pe)=>we.sortKey-pe.sortKey)}update(i,l,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,h,p),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,h,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=eR(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const h=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:p,y}of l)this.lineVertexArray.emplaceBack(p,y);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,l,h,p,y,x,S,A,P,L,z,V,G,Z){const Q=i.indexArray,ie=i.layoutVertexArray,de=i.globeExtVertexArray,we=i.segments.prepareSegment(4*l.length,ie,Q,this.canOverlap?x.sortKey:void 0),pe=this.glyphOffsetArray.length,xe=we.vertexLength,Ae=this.allowVerticalPlacement&&S===Wo.vertical?Math.PI/2:0,Te=x.text&&x.text.sections;for(let Fe=0;Fe<l.length;Fe++){const{tl:et,tr:ht,bl:Ze,br:nt,tex:it,pixelOffsetTL:at,pixelOffsetBR:gt,minFontScaleX:Je,minFontScaleY:Tt,glyphOffset:$t,isSDF:At,sectionIndex:tr}=l[Fe],yt=we.vertexLength,Ft=$t[1];if(Z0(ie,P.x,P.y,et.x,Ft+et.y,it.x,it.y,h,At,at.x,at.y,Je,Tt),Z0(ie,P.x,P.y,ht.x,Ft+ht.y,it.x+it.w,it.y,h,At,gt.x,at.y,Je,Tt),Z0(ie,P.x,P.y,Ze.x,Ft+Ze.y,it.x,it.y+it.h,h,At,at.x,gt.y,Je,Tt),Z0(ie,P.x,P.y,nt.x,Ft+nt.y,it.x+it.w,it.y+it.h,h,At,gt.x,gt.y,Je,Tt),A){const{x:rr,y:Tr,z:nr}=A.anchor,[Gt,Jr,sr]=A.up;X0(de,rr,Tr,nr,Gt,Jr,sr),X0(de,rr,Tr,nr,Gt,Jr,sr),X0(de,rr,Tr,nr,Gt,Jr,sr),X0(de,rr,Tr,nr,Gt,Jr,sr),K0(i.dynamicLayoutVertexArray,rr,Tr,nr,Ae)}else K0(i.dynamicLayoutVertexArray,P.x,P.y,P.z,Ae);Q.emplaceBack(yt,yt+1,yt+2),Q.emplaceBack(yt+1,yt+2,yt+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),Fe!==l.length-1&&tr===l[Fe+1].sectionIndex||i.programConfigurations.populatePaintArrays(ie.length,x,x.index,{},G,Z,Te&&Te[tr])}const qe=A?A.anchor:P;i.placedSymbolArray.emplaceBack(qe.x,qe.y,qe.z,P.x,P.y,pe,this.glyphOffsetArray.length-pe,xe,L,z,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,V,0)}_commitLayoutVertex(i,l,h,p,y,x,S){i.emplaceBack(l,h,p,y,x,Math.round(S.x),Math.round(S.y))}_addCollisionDebugVertices(i,l,h,p,y,x,S){const A=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=A.vertexLength,L=S.tileAnchorX,z=S.tileAnchorY;for(let G=0;G<4;G++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),h.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(h.layoutVertexArray,p,y,x,L,z,new ae(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,y,x,L,z,new ae(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,y,x,L,z,new ae(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,p,y,x,L,z,new ae(i.x1,i.y2)),A.vertexLength+=4;const V=h.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),A.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,h,p,y,x){for(let S=p;S<y;S++){const A=h.get(S),P=this.getSymbolInstanceTextSize(i,x,l,S);this._addCollisionDebugVertices(A,P,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,l,h,p,y,x){for(let S=p;S<y;S++){const A=h.get(S),P=this.getSymbolInstanceIconSize(i,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(A,P,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gT(jt,_D.members,ti),this.iconCollisionBox=new gT(jt,_D.members,ti);const h=ad(this.iconSizeData,i),p=ad(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(p,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(p,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,l,h,p){const y=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:p),x=N0(this.textSizeData,i,y)/fi;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,l,h){const p=this.icon.placedSymbolArray.get(h),y=N0(this.iconSizeData,i,p);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,l,h){i.emplaceBack(l,-h,-h),i.emplaceBack(l,h,-h),i.emplaceBack(l,h,h),i.emplaceBack(l,-h,h)}_updateTextDebugCollisionBoxes(i,l,h,p,y,x){for(let S=p;S<y;S++){const A=h.get(S),P=this.getSymbolInstanceTextSize(i,x,l,S);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,A.padding)}}_updateIconDebugCollisionBoxes(i,l,h,p,y,x){for(let S=p;S<y;S++){const A=h.get(S),P=this.getSymbolInstanceIconSize(i,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,A.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=ad(this.iconSizeData,i),p=ad(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(p,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(p,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(h,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,h,p,y,x,S,A,P){const L={};if(l<h){const{x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe,featureIndex:Ae}=i.get(l);L.textBox={x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe},L.textFeatureIndex=Ae}if(p<y){const{x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe,featureIndex:Ae}=i.get(p);L.verticalTextBox={x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe},L.verticalTextFeatureIndex=Ae}if(x<S){const{x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe,featureIndex:Ae}=i.get(x);L.iconBox={x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe},L.iconFeatureIndex=Ae}if(A<P){const{x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe,featureIndex:Ae}=i.get(A);L.verticalIconBox={x1:z,y1:V,x2:G,y2:Z,padding:Q,projectedAnchorX:ie,projectedAnchorY:de,projectedAnchorZ:we,tileAnchorX:pe,tileAnchorY:xe},L.verticalIconFeatureIndex=Ae}return L}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const h=i.placedSymbolArray.get(l),p=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<p;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),h=Math.cos(i),p=[],y=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const A=this.symbolInstances.get(S);p.push(0|Math.round(l*A.tileAnchorX+h*A.tileAnchorY)),y.push(A.featureIndex)}return x.sort((S,A)=>p[S]-p[A]||y[A]-y[S]),x}addToSortKeyRanges(i,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:S,placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:P}=h;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),y>=0&&y!==p&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&x!==y&&x!==p&&this.addIndicesForPlacedSymbol(this.text,x),S>=0&&this.addIndicesForPlacedSymbol(this.text,S),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Rt(Lc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Lc.MAX_GLYPHS=65535,Lc.addDynamicAttributes=K0;const f9=new ye({"symbol-placement":new J(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new J(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new J(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new J(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new J(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new J(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new J(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new J(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(Qe.layout_symbol["icon-size"]),"icon-text-fit":new J(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new J(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(Qe.layout_symbol["icon-image"]),"icon-rotate":new se(Qe.layout_symbol["icon-rotate"]),"icon-padding":new J(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new J(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new se(Qe.layout_symbol["icon-offset"]),"icon-anchor":new se(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new J(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new J(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new J(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new se(Qe.layout_symbol["text-field"]),"text-font":new se(Qe.layout_symbol["text-font"]),"text-size":new se(Qe.layout_symbol["text-size"]),"text-max-width":new se(Qe.layout_symbol["text-max-width"]),"text-line-height":new se(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new se(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new se(Qe.layout_symbol["text-justify"]),"text-radial-offset":new se(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new J(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new se(Qe.layout_symbol["text-anchor"]),"text-max-angle":new J(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new J(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new se(Qe.layout_symbol["text-rotate"]),"text-padding":new J(Qe.layout_symbol["text-padding"]),"text-keep-upright":new J(Qe.layout_symbol["text-keep-upright"]),"text-transform":new se(Qe.layout_symbol["text-transform"]),"text-offset":new se(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new J(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new J(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new J(Qe.layout_symbol["text-optional"])});var yT={paint:new ye({"icon-opacity":new se(Qe.paint_symbol["icon-opacity"]),"icon-color":new se(Qe.paint_symbol["icon-color"]),"icon-halo-color":new se(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new J(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new J(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(Qe.paint_symbol["text-opacity"]),"text-color":new se(Qe.paint_symbol["text-color"],{runtimeType:io,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new se(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new se(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new se(Qe.paint_symbol["text-halo-blur"]),"text-translate":new J(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new J(Qe.paint_symbol["text-translate-anchor"])}),layout:f9};class tR{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:hc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rt(tR,"FormatSectionOverride",{omit:["defaultValue"]});class Y0 extends es{constructor(i){super(i,yT)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const y of h)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,h,p){const y=this.layout.get(i).evaluate(l,{},h,p),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Sc(x.value)||!y?y:function(S,A){return A.replace(/{([^{}]+)}/g,(P,L)=>L in S?String(S[L]):"")}(l.properties,y)}createBucket(i){return new Lc(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of yT.paint.overridableProperties){if(!Y0.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),h=new tR(l),p=new Bf(h,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new Nm("source",p):new nh("composite",p,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new ce(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Y0.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const h=i.get("text-field"),p=yT.paint.properties[l];let y=!1;const x=S=>{for(const A of S)if(p.overrides&&p.overrides.hasOverride(A))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Wi)x(h.value.value.sections);else if(h.value.kind==="source"){const S=P=>{y||(P instanceof fl&&yn(P.value)===Bu?x(P.value.sections):P instanceof Ps?x(P.sections):P.eachChild(S))},A=h.value;A._styleExpression&&S(A._styleExpression.expression)}return y}getProgramConfiguration(i){return new Mc(this,i)}}var d9={paint:new ye({"background-color":new J(Qe.paint_background["background-color"]),"background-pattern":new J(Qe.paint_background["background-pattern"]),"background-opacity":new J(Qe.paint_background["background-opacity"])})},p9={paint:new ye({"raster-opacity":new J(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new J(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new J(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new J(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new J(Qe.paint_raster["raster-saturation"]),"raster-contrast":new J(Qe.paint_raster["raster-contrast"]),"raster-resampling":new J(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new J(Qe.paint_raster["raster-fade-duration"])})};class m9 extends es{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var g9={paint:new ye({"sky-type":new J(Qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new J(Qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new J(Qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new J(Qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new J(Qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new me(Qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new J(Qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new J(Qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new J(Qe.paint_sky["sky-opacity"])})};function vT(s,i,l){const h=[0,0,1],p=xI([]);return wI(p,p,l?-ve(s)+Math.PI:ve(s)),bI(p,p,-ve(i)),gI(h,h,p),Gi(h,h)}const y9={circle:class extends es{constructor(s){super(s,Pq)}createBucket(s){return new WE(s)}queryRadius(s){const i=s;return rd("circle-radius",this,i)+rd("circle-stroke-width",this,i)+C0(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,l,h,p,y,x,S){const A=WI(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return qI(s,h,y,x,S,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",A,P)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Mc(this,s)}},heatmap:class extends es{createBucket(s){return new HI(s)}constructor(s){super(s,Iq),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ZE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return rd("heatmap-radius",this,s)}queryIntersectsFeature(s,i,l,h,p,y,x,S){const A=this.paint.get("heatmap-radius").evaluate(i,l);return qI(s,h,y,x,S,!0,!0,new ae(0,0),A)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Mc(this,s)}},hillshade:class extends es{constructor(s){super(s,Dq)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends es{constructor(s){super(s,Xq)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(s){return new Mc(this,s)}recalculate(s,i){super.recalculate(s,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new I0(s)}queryRadius(){return C0(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,l,h,p,y){return!s.queryGeometry.isAboveHorizon&&zI(VI(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends es{constructor(s){super(s,hG)}createBucket(s){return new _g(s)}queryRadius(){return C0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Mc(this,s)}queryIntersectsFeature(s,i,l,h,p,y,x,S,A){const P=WI(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),L=this.paint.get("fill-extrusion-height").evaluate(i,l),z=this.paint.get("fill-extrusion-base").evaluate(i,l),V=[0,0],G=S&&y.elevation,Z=y.elevation?y.elevation.exaggeration():1,Q=s.tile.getBucket(this);if(G&&Q instanceof _g){const xe=Q.centroidVertexArray,Ae=A+1;Ae<xe.length&&(V[0]=xe.geta_centroid_pos0(Ae),V[1]=xe.geta_centroid_pos1(Ae))}if(V[0]===0&&V[1]===1)return!1;y.projection.name==="globe"&&(h=hD([h],[new ae(0,0),new ae(Wt,Wt)],s.tileID.canonical).map(xe=>xe.polygon).flat());const ie=G?S:null,[de,we]=function(xe,Ae,Te,qe,Fe,et,ht,Ze,nt,it,at){return xe.projection.name==="globe"?function(gt,Je,Tt,$t,At,tr,yt,Ft,rr,Tr,nr){const Gt=[],Jr=[],sr=gt.projection.upVectorScale(nr,gt.center.lat,gt.worldSize).metersToTile,lr=[0,0,0,1],Vr=[0,0,0,1],Xr=(Wr,un,vn,Ln)=>{Wr[0]=un,Wr[1]=vn,Wr[2]=Ln,Wr[3]=1},Kr=uD();Tt>0&&(Tt+=Kr),$t+=Kr;for(const Wr of Je){const un=[],vn=[];for(const Ln of Wr){const qr=Ln.x+At.x,Vn=Ln.y+At.y,jn=gt.projection.projectTilePoint(qr,Vn,nr),fn=gt.projection.upVector(nr,Ln.x,Ln.y);let Cr=Tt,$n=$t;if(yt){const Yr=mD(qr,Vn,Tt,$t,yt,Ft,rr,Tr);Cr+=Yr.base,$n+=Yr.top}Tt!==0?Xr(lr,jn.x+fn[0]*sr*Cr,jn.y+fn[1]*sr*Cr,jn.z+fn[2]*sr*Cr):Xr(lr,jn.x,jn.y,jn.z),Xr(Vr,jn.x+fn[0]*sr*$n,jn.y+fn[1]*sr*$n,jn.z+fn[2]*sr*$n),An(lr,lr,tr),An(Vr,Vr,tr),un.push(new od(lr[0],lr[1],lr[2])),vn.push(new od(Vr[0],Vr[1],Vr[2]))}Gt.push(un),Jr.push(vn)}return[Gt,Jr]}(xe,Ae,Te,qe,Fe,et,ht,Ze,nt,it,at):ht?function(gt,Je,Tt,$t,At,tr,yt,Ft,rr){const Tr=[],nr=[],Gt=[0,0,0,1];for(const Jr of gt){const sr=[],lr=[];for(const Vr of Jr){const Xr=Vr.x+$t.x,Kr=Vr.y+$t.y,Wr=mD(Xr,Kr,Je,Tt,tr,yt,Ft,rr);Gt[0]=Xr,Gt[1]=Kr,Gt[2]=Wr.base,Gt[3]=1,mh(Gt,Gt,At),Gt[3]=Math.max(Gt[3],1e-5);const un=new od(Gt[0]/Gt[3],Gt[1]/Gt[3],Gt[2]/Gt[3]);Gt[0]=Xr,Gt[1]=Kr,Gt[2]=Wr.top,Gt[3]=1,mh(Gt,Gt,At),Gt[3]=Math.max(Gt[3],1e-5);const vn=new od(Gt[0]/Gt[3],Gt[1]/Gt[3],Gt[2]/Gt[3]);sr.push(un),lr.push(vn)}Tr.push(sr),nr.push(lr)}return[Tr,nr]}(Ae,Te,qe,Fe,et,ht,Ze,nt,it):function(gt,Je,Tt,$t,At){const tr=[],yt=[],Ft=At[8]*Je,rr=At[9]*Je,Tr=At[10]*Je,nr=At[11]*Je,Gt=At[8]*Tt,Jr=At[9]*Tt,sr=At[10]*Tt,lr=At[11]*Tt;for(const Vr of gt){const Xr=[],Kr=[];for(const Wr of Vr){const un=Wr.x+$t.x,vn=Wr.y+$t.y,Ln=At[0]*un+At[4]*vn+At[12],qr=At[1]*un+At[5]*vn+At[13],Vn=At[2]*un+At[6]*vn+At[14],jn=At[3]*un+At[7]*vn+At[15],fn=Ln+Ft,Cr=qr+rr,$n=Vn+Tr,Yr=Math.max(jn+nr,1e-5),Xi=Ln+Gt,Nn=qr+Jr,di=Vn+sr,ri=Math.max(jn+lr,1e-5);Xr.push(new od(fn/Yr,Cr/Yr,$n/Yr)),Kr.push(new od(Xi/ri,Nn/ri,di/ri))}tr.push(Xr),yt.push(Kr)}return[tr,yt]}(Ae,Te,qe,Fe,et)}(y,h,z,L,P,x,ie,V,Z,y.center.lat,s.tileID.canonical),pe=s.queryGeometry;return function(xe,Ae,Te){let qe=1/0;zI(Te,Ae)&&(qe=pD(Te,Ae[0]));for(let Fe=0;Fe<Ae.length;Fe++){const et=Ae[Fe],ht=xe[Fe];for(let Ze=0;Ze<et.length-1;Ze++){const nt=et[Ze],it=[nt,et[Ze+1],ht[Ze+1],ht[Ze],nt];NI(Te,it)&&(qe=Math.min(qe,pD(Te,it)))}}return qe!==1/0&&qe}(de,we,pe.isPointQuery()?pe.screenBounds:pe.screenGeometry)}},line:class extends es{constructor(s){super(s,gD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Tm,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=yD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new $0(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new Mc(this,s)}queryRadius(s){const i=s,l=vD(rd("line-width",this,i),rd("line-gap-width",this,i)),h=rd("line-offset",this,i);return l/2+Math.abs(h)+C0(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,l,h,p,y){if(s.queryGeometry.isAboveHorizon)return!1;const x=VI(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),S=s.pixelToTileUnitsFactor/2*vD(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),A=this.paint.get("line-offset").evaluate(i,l);return A&&(h=function(P,L){const z=[],V=new ae(0,0);for(let G=0;G<P.length;G++){const Z=P[G],Q=[];for(let ie=0;ie<Z.length;ie++){const de=Z[ie],we=Z[ie+1],pe=ie===0?V:de.sub(Z[ie-1])._unit()._perp(),xe=ie===Z.length-1?V:we.sub(de)._unit()._perp(),Ae=pe._add(xe)._unit();Ae._mult(1/(Ae.x*xe.x+Ae.y*xe.y)),Q.push(Ae._mult(L)._add(de))}z.push(Q)}return z}(h,A*s.pixelToTileUnitsFactor)),function(P,L,z){for(let V=0;V<L.length;V++){const G=L[V];if(P.length>=3){for(let Z=0;Z<G.length;Z++)if(_h(P,G[Z]))return!0}if(Eq(P,G,z))return!0}return!1}(x,h,S)}isTileClipped(){return!0}},symbol:Y0,background:class extends es{constructor(s){super(s,d9)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends es{constructor(s){super(s,p9)}getProgramIds(){return["raster"]}},sky:class extends es{constructor(s){super(s,g9),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ZE({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),p=!h,y=s.style.light,x=y.properties.get("position");return p&&y.properties.get("anchor")==="viewport"&&Nt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?vT(x.azimuthal,90-x.polar,i):vT(h[0],90-h[1],i)}const l=this.paint.get("sky-gradient-center");return vT(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class Mg{constructor(i,l,h,p){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,p)}update(i,l,h){const{width:p,height:y}=i,{context:x}=this,{gl:S}=x,{HTMLImageElement:A,HTMLCanvasElement:P,HTMLVideoElement:L,ImageData:z,ImageBitmap:V}=m;if(S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!l||l.premultiply!==!1)),h||this.size&&this.size[0]===p&&this.size[1]===y){const{x:G,y:Z}=h||{x:0,y:0};i instanceof A||i instanceof P||i instanceof L||i instanceof z||V&&i instanceof V?S.texSubImage2D(S.TEXTURE_2D,0,G,Z,S.RGBA,S.UNSIGNED_BYTE,i):S.texSubImage2D(S.TEXTURE_2D,0,G,Z,p,y,S.RGBA,S.UNSIGNED_BYTE,i.data)}else this.size=[p,y],i instanceof A||i instanceof P||i instanceof L||i instanceof z||V&&i instanceof V?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,i):S.texImage2D(S.TEXTURE_2D,0,this.format,p,y,0,this.format,S.UNSIGNED_BYTE,i.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&S.generateMipmap(S.TEXTURE_2D)}bind(i,l){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_2D,this.texture),i!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?i===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,l),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class v9{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class _9{constructor(){this.tasks={},this.taskQueue=[],St(["process"],this),this.invoker=new v9(this.process),this.nextId=0}add(i,l){const h=this.nextId++,p=function({type:y,isSymbolTile:x,zoom:S}){return S=S||0,y==="message"?0:y!=="maybePrepare"||x?y!=="parseTile"||x?y==="parseTile"&&x?300-S:y==="maybePrepare"&&x?400-S:500:200-S:100-S}(l);if(p===0){mn();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:i,metadata:l,priority:p,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){mn();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let p=0;p<this.taskQueue.length;p++){const y=this.tasks[this.taskQueue[p]];y.priority<l&&(l=y.priority,i=p)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class rR{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const h=i[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const x9=["tile","layer","source","sourceLayer","state"];class nR{constructor(i,l,h,p,y){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=h,this._y=p,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of x9)this[l]!==void 0&&(i[l]=this[l]);return i}}const ga=32,Ls=33,jc=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,l=0,h=0,p=0,y=0,x=0,S=0;for(1&i?p=y=x=ga:l=h=S=ga;(i>>=1)>1;){const P=l+p>>1,L=h+y>>1;1&i?(p=l,y=h,l=x,h=S):(l=p,h=y,p=x,y=S),x=P,S=L}const A=4*s;jc[A+0]=l,jc[A+1]=h,jc[A+2]=p,jc[A+3]=y}const js=new Uint16Array(2178),$c=new Uint8Array(1089),J0=new Uint16Array(1089);function iR(s){return s===0?-.03125:s===32?.03125:0}var oR=Le([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const aR={type:2,extent:Wt,loadGeometry:()=>[[new ae(0,0),new ae(Wt+1,0),new ae(Wt+1,Wt+1),new ae(0,Wt+1),new ae(0,0)]]};class _T{constructor(i,l,h,p,y){this.tileID=i,this.uid=Xt(),this.uses=0,this.tileSize=l,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<Ua.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=bh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,h){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,y){const x={};if(!y)return x;for(const S of p){const A=S.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(A.length!==0){S.layers=A,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(P=>A.filter(L=>L.id===P)[0]));for(const P of A)x[P.id]=S}}return x}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof Lc){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof Lc&&y.hasRTLText){this.hasRTLText=!0,k.isLoading()||k.isLoaded()||T()!=="deferred"||O();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Fr}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mg(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mg(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Mg(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,h,p,y,x,S,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:S,transform:x,params:y,tileTransform:this.tileTransform},i,l,h):{}}querySourceFeatures(i,l){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),y=l?l.sourceLayer:"",x=p._geojsonTileLayer||p[y];if(!x)return;const S=Wf(l&&l.filter),{z:A,x:P,y:L}=this.tileID.canonical,z={z:A,x:P,y:L};for(let V=0;V<x.length;V++){const G=x.feature(V);if(S.needGeometry){const ie=vh(G,!0);if(!S.filter(new N(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!S.filter(new N(this.tileID.overscaledZ),G))continue;const Z=h.getId(G,y),Q=new nR(G,A,P,L,Z);Q.tile=z,i.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const h=En(i.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const y=this.expirationTime-l;y?this.expirationTime=h+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const h=this.latestFeatureIndex.loadVTLayers(),p=l.style.listImages();for(const y in this.buckets){if(!l.style.hasLayer(y))continue;const x=this.buckets[y],S=x.layers[0].sourceLayer||"_geojsonTileLayer",A=h[S],P=i[S];if(!A||!P||Object.keys(P).length===0)continue;if(x.update(P,A,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof $0||x instanceof I0){const z=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&z&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(z.id,this.tileID)}const L=l&&l.style&&l.style.getLayer(y);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ua.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Ua.now()+i}setTexture(i,l){const h=l.context,p=h.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new Mg(h,i,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(i,l){const h={};for(const p of l)h[p]=!0;this.dependencies[i]=h}hasDependency(i,l){for(const h of i){const p=this.dependencies[h];if(p){for(const y of l)if(p[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const h=El(aR,this.tileID.canonical,this.tileTransform)[0],p=new ut,y=new xo;for(let x=0;x<h.length;x++){const{x:S,y:A}=h[x];p.emplaceBack(S,A),y.emplaceBack(x)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(p,lg.members),this._tileDebugSegments=Dn.simpleSegment(0,0,p.length,y.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const h=El(aR,this.tileID.canonical,this.tileTransform)[0];let p,y;if(this.isRaster){const x=function(S,A){const P=bh(S,A),L=Math.pow(2,S.z);for(let ie=0;ie<Ls;ie++)for(let de=0;de<Ls;de++){const we=Vo((S.x+(de+iR(de))/ga)/L),pe=Ti((S.y+(ie+iR(ie))/ga)/L),xe=A.project(we,pe),Ae=ie*Ls+de;js[2*Ae+0]=Math.round((xe.x*P.scale-P.x)*Wt),js[2*Ae+1]=Math.round((xe.y*P.scale-P.y)*Wt)}$c.fill(0),J0.fill(0);for(let ie=2045;ie>=0;ie--){const de=4*ie,we=jc[de+0],pe=jc[de+1],xe=jc[de+2],Ae=jc[de+3],Te=we+xe>>1,qe=pe+Ae>>1,Fe=Te+qe-pe,et=qe+we-Te,ht=pe*Ls+we,Ze=Ae*Ls+xe,nt=qe*Ls+Te,it=Math.hypot((js[2*ht+0]+js[2*Ze+0])/2-js[2*nt+0],(js[2*ht+1]+js[2*Ze+1])/2-js[2*nt+1])>=16;$c[nt]=$c[nt]||(it?1:0),ie<1022&&($c[nt]=$c[nt]||$c[(pe+et>>1)*Ls+(we+Fe>>1)]||$c[(Ae+et>>1)*Ls+(xe+Fe>>1)])}const z=new rt,V=new zt;let G=0;function Z(ie,de){const we=de*Ls+ie;return J0[we]===0&&(z.emplaceBack(js[2*we+0],js[2*we+1],ie*Wt/ga,de*Wt/ga),J0[we]=++G),J0[we]-1}function Q(ie,de,we,pe,xe,Ae){const Te=ie+we>>1,qe=de+pe>>1;if(Math.abs(ie-xe)+Math.abs(de-Ae)>1&&$c[qe*Ls+Te])Q(xe,Ae,ie,de,Te,qe),Q(we,pe,xe,Ae,Te,qe);else{const Fe=Z(ie,de),et=Z(we,pe),ht=Z(xe,Ae);V.emplaceBack(Fe,et,ht)}}return Q(0,0,ga,ga,ga,0),Q(ga,ga,0,0,0,ga),{vertices:z,indices:V}}(this.tileID.canonical,l);p=x.vertices,y=x.indices}else{p=new rt,y=new zt;for(const{x:S,y:A}of h)p.emplaceBack(S,A,0,0);const x=QE(p.int16,void 0,4);for(let S=0;S<x.length;S+=3)y.emplaceBack(x[S],x[S+1],x[S+2])}this._tileBoundsBuffer=i.createVertexBuffer(p,oR.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=Dn.simpleSegment(0,0,p.length,y.length)}_makeGlobeTileDebugBuffers(i,l){const h=l.projection;if(!h||h.name!=="globe"||l.freezeTileCoverage)return;const p=this.tileID.canonical,y=hg(CI(p,l)),x=ed(l.zoom);let S;x>0&&(S=CE(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,p,l,y,S,x),this._makeGlobeTileDebugTextBuffer(i,p,l,y,S,x)}_globePoint(i,l,h,p,y,x,S){let A=ug(i,l,h);if(x){const P=1<<h.z,L=Ds(p.center.lng),z=Rs(p.center.lat),V=(h.x+.5)/P-L;let G=0;V>.5?G=-1:V<-.5&&(G=1);let Z=(i/Wt+h.x)/P+G,Q=(l/Wt+h.y)/P;Z=(Z-L)*p._pixelsPerMercatorPixel+L,Q=(Q-z)*p._pixelsPerMercatorPixel+z;const ie=[Z*p.worldSize,Q*p.worldSize,0];An(ie,ie,x),A=yh(A,ie,S)}return An(A,A,y)}_makeGlobeTileDebugBorderBuffer(i,l,h,p,y,x){const S=new ut,A=new xo,P=new Be,L=(V,G,Z,Q,ie)=>{const de=(Z-V)/(ie-1),we=(Q-G)/(ie-1),pe=S.length;for(let xe=0;xe<ie;xe++){const Ae=V+xe*de,Te=G+xe*we;S.emplaceBack(Ae,Te);const qe=this._globePoint(Ae,Te,l,h,p,y,x);P.emplaceBack(qe[0],qe[1],qe[2]),A.emplaceBack(pe+xe)}},z=Wt;L(0,0,z,0,16),L(z,0,z,z,16),L(z,z,0,z,16),L(0,z,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(A),this._tileDebugBuffer=i.createVertexBuffer(S,lg.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(P,EI.members),this._tileDebugSegments=Dn.simpleSegment(0,0,S.length,A.length)}_makeGlobeTileDebugTextBuffer(i,l,h,p,y,x){const S=Wt/4,A=new ut,P=new zt,L=new Be,z=25;P.reserve(32),A.reserve(z),L.reserve(z);const V=(G,Z)=>z*G+Z;for(let G=0;G<z;G++){const Z=G*S;for(let Q=0;Q<z;Q++){const ie=Q*S;A.emplaceBack(ie,Z);const de=this._globePoint(ie,Z,l,h,p,y,x);L.emplaceBack(de[0],de[1],de[2])}}for(let G=0;G<4;G++)for(let Z=0;Z<4;Z++){const Q=V(G,Z),ie=V(G,Z+1),de=V(G+1,Z),we=V(G+1,Z+1);P.emplaceBack(Q,ie,de),P.emplaceBack(de,ie,we)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(P),this._tileDebugTextBuffer=i.createVertexBuffer(A,lg.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(L,EI.members),this._tileDebugTextSegments=Dn.simpleSegment(0,0,z,32)}}class b9{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,h){const p=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},bt(this.stateChanges[i][p],h),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==p&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const y in this.state[i][p])h[y]||(this.deletedStates[i][p][y]=null)}else for(const y in h)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][y]===null&&delete this.deletedStates[i][p][y]}removeFeatureState(i,l,h){if(this.deletedStates[i]===null)return;const p=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},h&&l!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][h]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(h in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][h]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,l){const h=String(l),p=bt({},(this.state[i]||{})[h],(this.stateChanges[i]||{})[h]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][l];if(y===null)return{};for(const x in y)delete p[x]}return p}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const x in this.stateChanges[p])this.state[p][x]||(this.state[p][x]={}),bt(this.state[p][x],this.stateChanges[p][x]),y[x]=this.state[p][x];h[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const x in this.state[p])y[x]={},this.state[p][x]={};else for(const x in this.deletedStates[p]){if(this.deletedStates[p][x]===null)this.state[p][x]={};else if(this.state[p][x])for(const S of Object.keys(this.deletedStates[p][x]))delete this.state[p][x][S];y[x]=this.state[p][x]}h[p]=h[p]||{},bt(h[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in i)i[p].setFeatureState(h,l)}}class sR{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const h=this.toIdx(i,l);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function lR(s,i,l,h){let p=0,y=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(h[x])<1e-15){if(l[x]<s[x]||l[x]>i[x])return null}else{const S=1/h[x];let A=(s[x]-l[x])*S,P=(i[x]-l[x])*S;if(A>P){const L=A;A=P,P=L}if(A>p&&(p=A),P<y&&(y=P),p>y)return null}return p}function cR(s,i,l,h,p,y,x,S,A,P,L){const z=h-s,V=p-i,G=y-l,Z=x-s,Q=S-i,ie=A-l,de=L[1]*ie-L[2]*Q,we=L[2]*Z-L[0]*ie,pe=L[0]*Q-L[1]*Z,xe=z*de+V*we+G*pe;if(Math.abs(xe)<1e-15)return null;const Ae=1/xe,Te=P[0]-s,qe=P[1]-i,Fe=P[2]-l,et=(Te*de+qe*we+Fe*pe)*Ae;if(et<0||et>1)return null;const ht=qe*G-Fe*V,Ze=Fe*z-Te*G,nt=Te*V-qe*z,it=(L[0]*ht+L[1]*Ze+L[2]*nt)*Ae;return it<0||et+it>1?null:(Z*ht+Q*Ze+ie*nt)*Ae}function uR(s,i,l){return(s-i)/(l-i)}function hR(s,i,l,h,p,y,x,S,A){const P=1<<l,L=y-h,z=x-p,V=(s+1)/P*L+h,G=(i+0)/P*z+p,Z=(i+1)/P*z+p;S[0]=(s+0)/P*L+h,S[1]=G,A[0]=V,A[1]=Z}class fR{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(y){const x=Math.ceil(Math.log2(y.dim/8)),S=[];let A=Math.ceil(Math.pow(2,x));const P=1/A,L=(G,Z,Q,ie,de)=>{const we=ie?1:0,pe=(G+1)*Q-we,xe=Z*Q,Ae=(Z+1)*Q-we;de[0]=G*Q,de[1]=xe,de[2]=pe,de[3]=Ae};let z=new sR(A);const V=[];for(let G=0;G<A*A;G++){L(G%A,Math.floor(G/A),P,!1,V);const Z=Nc(V[0],V[1],y),Q=Nc(V[2],V[1],y),ie=Nc(V[2],V[3],y),de=Nc(V[0],V[3],y);z.minimums.push(Math.min(Z,Q,ie,de)),z.maximums.push(Math.max(Z,Q,ie,de)),z.leaves.push(1)}for(S.push(z),A/=2;A>=1;A/=2){const G=S[S.length-1];z=new sR(A);for(let Z=0;Z<A*A;Z++){L(Z%A,Math.floor(Z/A),2,!0,V);const Q=G.getElevation(V[0],V[1]),ie=G.getElevation(V[2],V[1]),de=G.getElevation(V[2],V[3]),we=G.getElevation(V[0],V[3]),pe=G.isLeaf(V[0],V[1]),xe=G.isLeaf(V[2],V[1]),Ae=G.isLeaf(V[2],V[3]),Te=G.isLeaf(V[0],V[3]),qe=Math.min(Q.min,ie.min,de.min,we.min),Fe=Math.max(Q.max,ie.max,de.max,we.max),et=pe&&xe&&Ae&&Te;z.maximums.push(Fe),z.minimums.push(qe),z.leaves.push(Fe-qe<=5&&et?1:0)}S.push(z)}return S}(this.dem),h=l.length-1,p=l[h];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(l,0,0,h,0)}raycastRoot(i,l,h,p,y,x,S=1){return lR([i,l,-100],[h,p,this.maximums[0]*S],y,x)}raycast(i,l,h,p,y,x,S=1){if(!this.nodeCount)return null;const A=this.raycastRoot(i,l,h,p,y,x,S);if(A==null)return null;const P=[],L=[],z=[],V=[],G=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;G.length>0;){const{idx:Z,t:Q,nodex:ie,nodey:de,depth:we}=G.pop();if(this.leaves[Z]){hR(ie,de,we,i,l,h,p,z,V);const xe=1<<we,Ae=(ie+0)/xe,Te=(ie+1)/xe,qe=(de+0)/xe,Fe=(de+1)/xe,et=Nc(Ae,qe,this.dem)*S,ht=Nc(Te,qe,this.dem)*S,Ze=Nc(Te,Fe,this.dem)*S,nt=Nc(Ae,Fe,this.dem)*S,it=cR(z[0],z[1],et,V[0],z[1],ht,V[0],V[1],Ze,y,x),at=cR(V[0],V[1],Ze,z[0],V[1],nt,z[0],z[1],et,y,x),gt=Math.min(it!==null?it:Number.MAX_VALUE,at!==null?at:Number.MAX_VALUE);if(gt!==Number.MAX_VALUE)return gt;{const Je=ag([],y,x,Q);if(dR(et,ht,nt,Ze,uR(Je[0],z[0],V[0]),uR(Je[1],z[1],V[1]))>=Je[2])return Q}continue}let pe=0;for(let xe=0;xe<this._siblingOffset.length;xe++){hR((ie<<1)+this._siblingOffset[xe][0],(de<<1)+this._siblingOffset[xe][1],we+1,i,l,h,p,z,V),z[2]=-100,V[2]=this.maximums[this.childOffsets[Z]+xe]*S;const Ae=lR(z,V,y,x);if(Ae!=null){const Te=Ae;P[xe]=Te;let qe=!1;for(let Fe=0;Fe<pe&&!qe;Fe++)Te>=P[L[Fe]]&&(L.splice(Fe,0,xe),qe=!0);qe||(L[pe]=xe),pe++}}for(let xe=0;xe<pe;xe++){const Ae=L[xe];G.push({idx:this.childOffsets[Z]+Ae,t:P[Ae],nodex:(ie<<1)+this._siblingOffset[Ae][0],nodey:(de<<1)+this._siblingOffset[Ae][1],depth:we+1})}}return null}_addNode(i,l,h){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,h,p,y){if(i[p].isLeaf(l,h)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const x=p-1,S=i[x];let A=0,P=0;for(let L=0;L<this._siblingOffset.length;L++){const z=2*l+this._siblingOffset[L][0],V=2*h+this._siblingOffset[L][1],G=S.getElevation(z,V),Z=S.isLeaf(z,V),Q=this._addNode(G.min,G.max,Z);Z&&(A|=1<<L),P||(P=Q)}for(let L=0;L<this._siblingOffset.length;L++)A&1<<L||this._construct(i,2*l+this._siblingOffset[L][0],2*h+this._siblingOffset[L][1],x,P+L)}}function dR(s,i,l,h,p,y){return Sr(Sr(s,l,y),Sr(i,h,y),p)}function Nc(s,i,l){const h=l.dim,p=ke(s*h-.5,0,h-1),y=ke(i*h-.5,0,h-1),x=Math.floor(p),S=Math.floor(y),A=Math.min(x+1,h-1),P=Math.min(S+1,h-1);return dR(l.get(x,S),l.get(A,S),l.get(x,P),l.get(A,P),p-x,y-S)}const pR={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function w9(s,i,l){return(256*s*256+256*i+l)/10-1e4}function S9(s,i,l){return 256*s+i+l/256-32768}class Q0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,h,p=!1,y=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return Nt(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,S=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=h||"mapbox",this.borderReady=p,!p){for(let A=0;A<x;A++)S[this._idx(-1,A)]=S[this._idx(0,A)],S[this._idx(x,A)]=S[this._idx(x-1,A)],S[this._idx(A,-1)]=S[this._idx(A,0)],S[this._idx(A,x)]=S[this._idx(A,x-1)];S[this._idx(-1,-1)]=S[this._idx(0,0)],S[this._idx(x,-1)]=S[this._idx(x-1,0)],S[this._idx(-1,x)]=S[this._idx(0,x-1)],S[this._idx(x,x)]=S[this._idx(x-1,x-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new fR(this)}get(i,l,h=!1){h&&(i=ke(i,-1,this.dim),l=ke(l,-1,this.dim));const p=4*this._idx(i,l);return(this.encoding==="terrarium"?S9:w9)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(i){return pR[i]}get unpackVector(){return pR[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const h=[0,0,0,0],p=Q0.getUnpackVector(l);let y=Math.floor((i+p[3])/p[2]);return h[2]=y%256,y=Math.floor(y/256),h[1]=y%256,y=Math.floor(y/256),h[0]=y,h}getPixels(){return new wo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,y=l*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(l){case-1:p=y-1;break;case 1:y=p+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const A=-l*this.dim,P=-h*this.dim;for(let L=x;L<S;L++)for(let z=p;z<y;z++){const V=4*this._idx(z,L),G=4*this._idx(z+A,L+P);this.pixels[V+0]=i.pixels[G+0],this.pixels[V+1]=i.pixels[G+1],this.pixels[V+2]=i.pixels[G+2],this.pixels[V+3]=i.pixels[G+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Rt(Q0,"DEMData"),Rt(fR,"DemMinMaxQuadTree",{omit:["dem"]});class E9{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,h){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:l,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},h)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const h=i.wrapped().key,p=l===void 0?0:this.data[h].indexOf(l),y=this.data[h][p];return this.data[h].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const h in this.data)for(const p of this.data[h])i(p.value)||l.push(p);for(const h of l)this.remove(h.value.tileID,h)}}class md{constructor(i,l,h){this.func=i,this.mask=l,this.range=h}}md.ReadOnly=!1,md.ReadWrite=!0,md.disabled=new md(519,md.ReadOnly,[0,1]);const xT=7680;class bT{constructor(i,l,h,p,y,x){this.test=i,this.ref=l,this.mask=h,this.fail=p,this.depthFail=y,this.pass=x}}bT.disabled=new bT({func:519,mask:0},0,0,xT,xT,xT);class $s{constructor(i,l,h){this.blendFunction=i,this.blendColor=l,this.mask=h}}$s.Replace=[1,0],$s.disabled=new $s($s.Replace,Tn.transparent,[!1,!1,!1,!1]),$s.unblended=new $s($s.Replace,Tn.transparent,[!0,!0,!0,!0]),$s.alphaBlended=new $s([1,771],Tn.transparent,[!0,!0,!0,!0]);const wT=1029,ST=2305;class as{constructor(i,l,h){this.enable=i,this.mode=l,this.frontFace=h}}as.disabled=new as(!1,wT,ST),as.backCCW=new as(!0,wT,ST),as.backCW=new as(!0,wT,2304),as.frontCW=new as(!0,1028,2304),as.frontCCW=new as(!0,1028,ST);class wh extends zu{constructor(i,l,h){super(),this.id=i,this._onlySymbols=h,l.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new E9(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new b9,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const h=this._tiles[l];h.upload(i),h.prepare(this.map.style.imageManager)}}getIds(){return Ot(this._tiles).map(i=>i.tileID).sort(mR).map(i=>i.key)}getRenderableIds(i){const l=[];for(const h in this._tiles)this._isIdRenderable(+h,i)&&l.push(this._tiles[h]);return i?l.sort((h,p)=>{const y=h.tileID,x=p.tileID,S=new ae(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),A=new ae(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||A.y-S.y||A.x-S.x}).map(h=>h.tileID.key):l.map(h=>h.tileID).sort(mR).map(h=>h.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const h=this._tiles[i];h&&(h.state!=="loading"&&(h.state=l),this._loadTile(h,this._tileLoaded.bind(this,h,i,l)))}_tileLoaded(i,l,h,p){if(p)if(i.state="errored",p.status!==404)this._source.fire(new Va(p,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Ua.now(),h==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new ul("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const y=l[p];if(i.neighboringTiles&&i.neighboringTiles[y]){const x=this.getTileByID(y);h(i,x),h(x,i)}}function h(p,y){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let x=y.tileID.canonical.x-p.tileID.canonical.x;const S=y.tileID.canonical.y-p.tileID.canonical.y,A=Math.pow(2,p.tileID.canonical.z),P=y.tileID.key;x===0&&S===0||Math.abs(S)>1||(Math.abs(x)>1&&(Math.abs(x+A)===1?x+=A:Math.abs(x-A)===1&&(x-=A)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,x,S),p.neighboringTiles&&p.neighboringTiles[P]&&(p.neighboringTiles[P].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,h,p){for(const y in this._tiles){let x=this._tiles[y];if(p[y]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>h)continue;let S=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const P=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[P.key],x&&x.hasData()&&(S=P)}let A=S;for(;A.overscaledZ>l;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){p[S.key]=S;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const h=this._loadedParentTiles[i.key];return h&&h.tileID.overscaledZ>=l?h:null}for(let h=i.overscaledZ-1;h>=l;h--){const p=i.scaledTo(h),y=this._getLoadedTile(p);if(y)return y}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const h=Math.ceil(i.width/l)+1,p=Math.ceil(i.height/l)+1,y=Math.floor(h*p*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(S)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const h={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),h[y.tileID.key]=y}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(i,l,h){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let p;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(S=>new Zi(S.canonical.z,S.wrap,S.canonical.z,S.canonical.x,S.canonical.y)):(p=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(S=>this._source.hasTile(S)))):p=[];const y=this._updateRetainedTiles(p);if(gR(this._source.type)&&p.length!==0){const S={},A={},P=Object.keys(y);for(const z of P){const V=y[z],G=this._tiles[z];if(!G||G.fadeEndTime&&G.fadeEndTime<=Ua.now())continue;const Z=this.findLoadedParent(V,Math.max(V.overscaledZ-wh.maxOverzooming,this._source.minzoom));Z&&(this._addTile(Z.tileID),S[Z.tileID.key]=Z.tileID),A[z]=V}const L=p[p.length-1].overscaledZ;for(const z in this._tiles){const V=this._tiles[z];if(y[z]||!V.hasData())continue;let G=V.tileID;for(;G.overscaledZ>L;){G=G.scaledTo(G.overscaledZ-1);const Z=this._tiles[G.key];if(Z&&Z.hasData()&&A[G.key]){y[z]=V.tileID;break}}}for(const z in S)y[z]||(this._coveredTiles[z]=!0,y[z]=S[z])}for(const S in y)this._tiles[S].clearFadeHold();const x=function(S,A){const P=[];for(const L in S)L in A||P.push(L);return P}(this._tiles,y);for(const S of x){const A=this._tiles[S];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+S)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const h={},p=i.reduce((P,L)=>Math.min(P,L.overscaledZ),1/0),y=i[0].overscaledZ,x=Math.max(y-wh.maxOverzooming,this._source.minzoom),S=Math.max(y+wh.maxUnderzooming,this._source.minzoom),A={};for(const P of i){const L=this._addTile(P);l[P.key]=P,L.hasData()||p<this._source.maxzoom&&(A[P.key]=P)}this._retainLoadedChildren(A,p,S,l);for(const P of i){let L=this._tiles[P.key];if(L.hasData())continue;if(P.canonical.z>=this._source.maxzoom){const V=P.children(this._source.maxzoom)[0],G=this.getTile(V);if(G&&G.hasData()){l[V.key]=V;continue}}else{const V=P.children(this._source.maxzoom);if(l[V[0].key]&&l[V[1].key]&&l[V[2].key]&&l[V[3].key])continue}let z=L.wasRequested();for(let V=P.overscaledZ-1;V>=x;--V){const G=P.scaledTo(V);if(h[G.key]||(h[G.key]=!0,L=this.getTile(G),!L&&z&&(L=this._addTile(G)),L&&(l[G.key]=G,z=L.wasRequested(),L.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let h,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}l.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;p=y}for(const y of l)this._loadedParentTiles[y]=h}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const h=!!l;if(!h){const p=this.map?this.map.painter:null;l=new _T(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,h||this._source.fire(new ul("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const h=l.getExpiryTimeout();h&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},h))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,h){const p=[],y=this.transform;if(!y)return p;const x=y.projection.name==="globe",S=Ds(y.center.lng);for(const A in this._tiles){const P=this._tiles[A];if(h&&P.clearQueryDebugViz(),P.holdingForFade())continue;let L;if(x){const z=P.tileID.canonical;if(z.z===0){const V=[Math.abs(ke(S,...kg(z,-1))-S),Math.abs(ke(S,...kg(z,1))-S)];L=[0,2*V.indexOf(Math.min(...V))-1]}else{const V=[Math.abs(ke(S,...kg(z,-1))-S),Math.abs(ke(S,...kg(z,0))-S),Math.abs(ke(S,...kg(z,1))-S)];L=[V.indexOf(Math.min(...V))-1]}}else L=[0];for(const z of L){const V=i.containsTile(P,y,l,z);V&&p.push(V)}}return p}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(h=>this._tiles[h].tileID);for(const h of l)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(gR(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=Ua.now())return!0}return!1}setFeatureState(i,l,h){this._state.updateState(i=i||"_geojsonTileLayer",l,h)}removeFeatureState(i,l,h){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,h)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,h){const p=this._tiles[i];p&&p.setDependencies(l,h)}reloadTilesForDependencies(i,l){for(const h in this._tiles)this._tiles[h].hasDependency(i,l)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(i,l))}_preloadTiles(i,l){if(!this._sourceLoaded){const S=()=>{this._sourceLoaded&&(this._source.off("data",S),this._preloadTiles(i,l))};return void this._source.on("data",S)}const h=new Map,p=Array.isArray(i)?i:[i],y=this.map.painter.terrain,x=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const S of p){const A=S.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const P of A)h.set(P.key,P);this.usedForTerrain&&S.updateElevation(!1)}_t(Array.from(h.values()),(S,A)=>{const P=new _T(S,this._source.tileSize*S.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(P,L=>{this._source.type==="raster-dem"&&P.dem&&this._backfillDEM(P),A(L,P)})},l)}}function mR(s,i){const l=Math.abs(2*s.wrap)-+(s.wrap<0),h=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||h-l||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function gR(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function kg(s,i){const l=1<<s.z;return[s.x/l+i,(s.x+1)/l+i]}wh.maxOverzooming=10,wh.maxUnderzooming=3;class ex{constructor(i,l,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=h}static create(i,l,h){const p=h||i.findDEMTileFor(l);if(!p||!p.dem)return;const y=p.dem,x=p.tileID,S=1<<l.canonical.z-x.canonical.z;return new ex(p,p.tileSize/Wt/S,[(l.canonical.x/S-x.canonical.x)*y.dim,(l.canonical.y/S-x.canonical.y)*y.dim])}tileCoordToPixel(i,l){const h=l*this._scale+this._offset[1],p=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(h);return new ae(p,y)}getElevationAt(i,l,h,p){const y=i*this._scale+this._offset[0],x=l*this._scale+this._offset[1],S=Math.floor(y),A=Math.floor(x),P=this._dem;return p=!!p,h?Sr(Sr(P.get(S,A,p),P.get(S,A+1,p),x-A),Sr(P.get(S+1,A,p),P.get(S+1,A+1,p),x-A),y-S):P.get(S,A,p)}getElevationAtPixel(i,l,h){return this._dem.get(i,l,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*ns(1,i)*this._dem.stride}}class yR{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new yl(Wt,16,0),this.featureIndexArray=new uh,this.promoteId=l}insert(i,l,h,p,y,x=0){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,y,x);const A=this.grid;for(let P=0;P<l.length;P++){const L=l[P],z=[1/0,1/0,-1/0,-1/0];for(let V=0;V<L.length;V++){const G=L[V];z[0]=Math.min(z[0],G.x),z[1]=Math.min(z[1],G.y),z[2]=Math.max(z[2],G.x),z[3]=Math.max(z[3],G.y)}z[0]<Wt&&z[1]<Wt&&z[2]>=0&&z[3]>=0&&A.insert(S,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new nT(new B0(this.rawTileData)).layers,this.sourceLayerCoder=new rR(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,h,p){this.loadVTLayers();const y=i.params||{},x=Wf(y.filter),S=i.tileResult,A=i.transform,P=S.bufferedTilespaceBounds,L=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(Z,Q,ie,de)=>UI(S.bufferedTilespaceGeometry,Z,Q,ie,de));L.sort(T9);let z=null;A.elevation&&L.length>0&&(z=ex.create(A.elevation,this.tileID));const V={};let G;for(let Z=0;Z<L.length;Z++){const Q=L[Z];if(Q===G)continue;G=Q;const ie=this.featureIndexArray.get(Q);let de=null;this.loadMatchingFeature(V,ie,x,y.layers,y.availableImages,l,h,p,(we,pe,xe,Ae=0)=>(de||(de=El(we,this.tileID.canonical,i.tileTransform)),pe.queryIntersectsFeature(S,we,xe,de,this.z,i.transform,i.pixelPosMatrix,z,Ae)))}return V}loadMatchingFeature(i,l,h,p,y,x,S,A,P){const{featureIndex:L,bucketIndex:z,sourceLayerIndex:V,layoutVertexArrayOffset:G}=l,Z=this.bucketLayerIDs[z];if(p&&!function(we,pe){for(let xe=0;xe<we.length;xe++)if(pe.indexOf(we[xe])>=0)return!0;return!1}(p,Z))return;const Q=this.sourceLayerCoder.decode(V),ie=this.vtLayers[Q].feature(L);if(h.needGeometry){const we=vh(ie,!0);if(!h.filter(new N(this.tileID.overscaledZ),we,this.tileID.canonical))return}else if(!h.filter(new N(this.tileID.overscaledZ),ie))return;const de=this.getId(ie,Q);for(let we=0;we<Z.length;we++){const pe=Z[we];if(p&&p.indexOf(pe)<0)continue;const xe=x[pe];if(!xe)continue;let Ae={};de!==void 0&&A&&(Ae=A.getState(xe.sourceLayer||"_geojsonTileLayer",de));const Te=bt({},S[pe]);Te.paint=vR(Te.paint,xe.paint,ie,Ae,y),Te.layout=vR(Te.layout,xe.layout,ie,Ae,y);const qe=!P||P(ie,xe,Ae,G);if(!qe)continue;const Fe=new nR(ie,this.z,this.x,this.y,de);Fe.layer=Te;let et=i[pe];et===void 0&&(et=i[pe]=[]),et.push({featureIndex:L,feature:Fe,intersectionZ:qe})}}lookupSymbolFeatures(i,l,h,p,y,x,S,A){const P={};this.loadVTLayers();const L=Wf(y);for(const z of i)this.loadMatchingFeature(P,{bucketIndex:h,sourceLayerIndex:p,featureIndex:z,layoutVertexArrayOffset:0},L,x,S,A,l);return P}loadFeature(i){const{featureIndex:l,sourceLayerIndex:h}=i;this.loadVTLayers();const p=this.sourceLayerCoder.decode(h),y=this.vtFeatures[p];if(y[l])return y[l];const x=this.vtLayers[p].feature(l);return y[l]=x,x}hasLayer(i){for(const l of this.bucketLayerIDs)for(const h of l)if(i===h)return!0;return!1}getId(i,l){let h=i.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];p!=null&&(h=i.properties[p]),typeof h=="boolean"&&(h=Number(h))}return h}}function vR(s,i,l,h,p){return xt(s,(y,x)=>{const S=i instanceof fe?i.get(x):null;return S&&S.evaluate?S.evaluate(l,h,p):S})}function T9(s,i){return i-s}Rt(yR,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class _R{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new Tl({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const h=this.getKey(i,l);return this.positions[h]}trim(){const i=this.width,l=this.height=Mt(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,h){const p=[];let y=i.length%2==1?-i[i.length-1]*h:0,x=i[0]*h,S=!0;p.push({left:y,right:x,isDash:S,zeroLength:i[0]===0});let A=i[0];for(let P=1;P<i.length;P++){S=!S;const L=i[P];y=A*h,A+=L,x=A*h,p.push({left:y,right:x,isDash:S,zeroLength:L===0})}return p}addRoundDash(i,l,h){const p=l/2;for(let y=-h;y<=h;y++){const x=this.width*(this.nextRow+h+y);let S=0,A=i[S];for(let P=0;P<this.width;P++){P/A.right>1&&(A=i[++S]);const L=Math.abs(P-A.left),z=Math.abs(P-A.right),V=Math.min(L,z);let G;const Z=y/h*(p+1);if(A.isDash){const Q=p-Math.abs(Z);G=Math.sqrt(V*V+Q*Q)}else G=p-Math.sqrt(V*V+Z*Z);this.image.data[x+P]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(i,l){for(let A=i.length-1;A>=0;--A){const P=i[A],L=i[A+1];P.zeroLength?i.splice(A,1):L&&L.isDash===P.isDash&&(L.left=P.left,i.splice(A,1))}const h=i[0],p=i[i.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const y=this.width*this.nextRow;let x=0,S=i[x];for(let A=0;A<this.width;A++){A/S.right>1&&(S=i[++x]);const P=Math.abs(A-S.left),L=Math.abs(A-S.right),z=Math.min(P,L);this.image.data[y+A]=Math.max(0,Math.min(255,(S.isDash?z:-z)+l+128))}}addDash(i,l){const h=this.getKey(i,l);if(this.positions[h])return this.positions[h];const p=l==="round",y=p?7:0,x=2*y+1;if(this.nextRow+x>this.height)return Nt("LineAtlas out of space"),null;i.length===0&&i.push(1);let S=0;for(let L=0;L<i.length;L++)i[L]<0&&(Nt("Negative value is found in line dasharray, replacing values with 0"),i[L]=0),S+=i[L];if(S!==0){const L=this.width/S,z=this.getDashRanges(i,this.width,L);p?this.addRoundDash(z,L,y):this.addRegularDash(z,l==="square"?.5*L:0)}const A=this.nextRow+y;this.nextRow+=x;const P={tl:[A,y],br:[S,0]};return this.positions[h]=P,P}}Rt(_R,"LineAtlas");const xR=1*os;class bR{constructor(i){const l={},h=[];for(const S in i){const A=i[S],P=l[S]={};for(const L in A.glyphs){const z=A.glyphs[+L];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const V=z.metrics.localGlyph?xR:1,G={x:0,y:0,w:z.bitmap.width+2*V,h:z.bitmap.height+2*V};h.push(G),P[L]=G}}const{w:p,h:y}=sT(h),x=new Tl({width:p||1,height:y||1});for(const S in i){const A=i[S];for(const P in A.glyphs){const L=A.glyphs[+P];if(!L||L.bitmap.width===0||L.bitmap.height===0)continue;const z=l[S][P],V=L.metrics.localGlyph?xR:1;Tl.copy(L.bitmap,x,{x:0,y:0},{x:z.x+V,y:z.y+V},L.bitmap)}}this.image=x,this.positions=l}}Rt(bR,"GlyphAtlas");class A9{constructor(i){this.tileID=new Zi(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=bh(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,h,p,y){this.status="parsing",this.data=i,this.collisionBoxArray=new Fr;const x=new rR(Object.keys(i.layers).sort()),S=new yR(this.tileID,this.promoteId);S.bucketLayerIDs=[];const A={},P=new _R(256,256),L={featureIndex:S,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:P,availableImages:h},z=l.familiesBySource[this.source];for(const Ae in z){const Te=i.layers[Ae];if(!Te)continue;let qe=!1,Fe=!1;for(const Ze of z[Ae])Ze[0].type==="symbol"?qe=!0:Fe=!0;if(this.isSymbolTile===!0&&!qe||this.isSymbolTile===!1&&!Fe)continue;Te.version===1&&Nt(`Vector tile source "${this.source}" layer "${Ae}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const et=x.encode(Ae),ht=[];for(let Ze=0;Ze<Te.length;Ze++){const nt=Te.feature(Ze),it=S.getId(nt,Ae);ht.push({feature:nt,id:it,index:Ze,sourceLayerIndex:et})}for(const Ze of z[Ae]){const nt=Ze[0];this.isSymbolTile!==void 0&&nt.type==="symbol"!==this.isSymbolTile||nt.minzoom&&this.zoom<Math.floor(nt.minzoom)||nt.maxzoom&&this.zoom>=nt.maxzoom||nt.visibility!=="none"&&(ET(Ze,this.zoom,h),(A[nt.id]=nt.createBucket({index:S.bucketLayerIDs.length,layers:Ze,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:et,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(ht,L,this.tileID.canonical,this.tileTransform),S.bucketLayerIDs.push(Ze.map(it=>it.id)))}}let V,G,Z,Q;P.trim();const ie={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},de=()=>{if(V)return y(V);if(G&&Z&&Q){const Ae=new bR(G),Te=new PD(Z,Q);for(const qe in A){const Fe=A[qe];Fe instanceof Lc?(ET(Fe.layers,this.zoom,h),JG(Fe,G,Ae.positions,Z,Te.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):Fe.hasPattern&&(Fe instanceof $0||Fe instanceof I0||Fe instanceof _g)&&(ET(Fe.layers,this.zoom,h),Fe.addFeatures(L,this.tileID.canonical,Te.patternPositions,h,this.tileTransform))}this.status="done",y(null,{buckets:Ot(A).filter(qe=>!qe.isEmpty()),featureIndex:S,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ae.image,lineAtlas:P,imageAtlas:Te,glyphMap:this.returnDependencies?G:null,iconMap:this.returnDependencies?Z:null,glyphPositions:this.returnDependencies?Ae.positions:null})}},we=xt(L.glyphDependencies,Ae=>Object.keys(Ae).map(Number));Object.keys(we).length?p.send("getGlyphs",{uid:this.uid,stacks:we},(Ae,Te)=>{V||(V=Ae,G=Te,de())},void 0,!1,ie):G={};const pe=Object.keys(L.iconDependencies);pe.length?p.send("getImages",{icons:pe,source:this.source,tileID:this.tileID,type:"icons"},(Ae,Te)=>{V||(V=Ae,Z=Te,de())},void 0,!1,ie):Z={};const xe=Object.keys(L.patternDependencies);xe.length?p.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"patterns"},(Ae,Te)=>{V||(V=Ae,Q=Te,de())},void 0,!1,ie):Q={},de()}}function ET(s,i,l){const h=new N(i);for(const p of s)p.recalculate(h,l)}class wR{constructor(i){this.entries={},this.scheduler=i}request(i,l,h,p){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[x,S]=y.result;return this.scheduler?this.scheduler.add(()=>{p(x,S)},l):p(x,S),()=>{}}return y.callbacks.push(p),y.cancel||(y.cancel=h((x,S)=>{y.result=[x,S];for(const A of y.callbacks)this.scheduler?this.scheduler.add(()=>{A(x,S)},l):A(x,S);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(x=>x!==p),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function SR(s,i,l){const h=JSON.stringify(s.request);return s.data&&(this.deduped.entries[h]={result:[null,s.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},p=>{const y=cc(s.request,(x,S,A,P)=>{x?p(x):S&&p(null,{vectorTile:l?void 0:new nT(new B0(S)),rawData:S,cacheControl:A,expires:P})});return()=>{y.cancel(),p()}},i)}const ER=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class TT{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const y=ER[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[S]=new Uint32Array(i,4,1);return new TT(S,x,y,i)}constructor(i,l=64,h=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const y=ER.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,S=i*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+A,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+A),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+A,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=l,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return AT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:S}=this,A=[0,y.length-1,0],P=[];for(;A.length;){const L=A.pop()||0,z=A.pop()||0,V=A.pop()||0;if(z-V<=S){for(let ie=V;ie<=z;ie++){const de=x[2*ie],we=x[2*ie+1];de>=i&&de<=h&&we>=l&&we<=p&&P.push(y[ie])}continue}const G=V+z>>1,Z=x[2*G],Q=x[2*G+1];Z>=i&&Z<=h&&Q>=l&&Q<=p&&P.push(y[G]),(L===0?i<=Z:l<=Q)&&(A.push(V),A.push(G-1),A.push(1-L)),(L===0?h>=Z:p>=Q)&&(A.push(G+1),A.push(z),A.push(1-L))}return P}within(i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:y,nodeSize:x}=this,S=[0,p.length-1,0],A=[],P=h*h;for(;S.length;){const L=S.pop()||0,z=S.pop()||0,V=S.pop()||0;if(z-V<=x){for(let ie=V;ie<=z;ie++)AR(y[2*ie],y[2*ie+1],i,l)<=P&&A.push(p[ie]);continue}const G=V+z>>1,Z=y[2*G],Q=y[2*G+1];AR(Z,Q,i,l)<=P&&A.push(p[G]),(L===0?i-h<=Z:l-h<=Q)&&(S.push(V),S.push(G-1),S.push(1-L)),(L===0?i+h>=Z:l+h>=Q)&&(S.push(G+1),S.push(z),S.push(1-L))}return A}}function AT(s,i,l,h,p,y){if(p-h<=l)return;const x=h+p>>1;TR(s,i,x,h,p,y),AT(s,i,l,h,x-1,1-y),AT(s,i,l,x+1,p,1-y)}function TR(s,i,l,h,p,y){for(;p>h;){if(p-h>600){const P=p-h+1,L=l-h+1,z=Math.log(P),V=.5*Math.exp(2*z/3),G=.5*Math.sqrt(z*V*(P-V)/P)*(L-P/2<0?-1:1);TR(s,i,l,Math.max(h,Math.floor(l-L*V/P+G)),Math.min(p,Math.floor(l+(P-L)*V/P+G)),y)}const x=i[2*l+y];let S=h,A=p;for(Ig(s,i,h,l),i[2*p+y]>x&&Ig(s,i,h,p);S<A;){for(Ig(s,i,S,A),S++,A--;i[2*S+y]<x;)S++;for(;i[2*A+y]>x;)A--}i[2*h+y]===x?Ig(s,i,h,A):(A++,Ig(s,i,A,p)),A<=l&&(h=A+1),l<=A&&(p=A-1)}}function Ig(s,i,l,h){CT(s,l,h),CT(i,2*l,2*h),CT(i,2*l+1,2*h+1)}function CT(s,i,l){const h=s[i];s[i]=s[l],s[l]=h}function AR(s,i,l,h){const p=s-l,y=i-h;return p*p+y*y}o.ARRAY_TYPE=bo,o.AUTH_ERR_MSG=Ce,o.Aabb=Hi,o.Actor=class{constructor(s,i,l){this.target=s,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},St(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=mn()?s:m,this.scheduler=new _9}send(s,i,l,h,p=!1,y){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=y,this.callbacks[x]=l);const S=Gn(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:s,hasCallback:!!l,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Cc(i,S)},S),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(s){const i=s.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const h=this.cancelCallbacks[l];delete this.cancelCallbacks[l],h&&h.cancel()}else if(i.mustQueue||mn()){const h=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,i),h&&h.metadata||{type:"message"})}else this.processTask(l,i)}processTask(s,i){if(i.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(i.error?l(vl(i.error)):l(null,vl(i.data)))}else{const l=Gn(this.globalScope)?void 0:[],h=i.hasCallback?(y,x)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:y?Cc(y):null,data:Cc(x,l)},l)}:y=>{},p=vl(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,p,h);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],p.source)[y[1]](p,h)}else h(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=j0,o.Color=Tn,o.ColorMode=$s,o.CullFaceMode=as,o.DEMData=Q0,o.DataConstantProperty=J,o.DedupedRequest=wR,o.DepthMode=md,o.EXTENT=Wt,o.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const l=i.getSource().maxzoom,h=1<<l,p=Math.floor(s.x),y=Math.floor((s.x-p)*h),x=Math.floor(s.y*h),S=this.findDEMTileFor(new Zi(l,p,l,y,x));return!(!S||!S.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const h=this._source();if(!h||s.y<0||s.y>1)return i;const p=h.getSource().maxzoom,y=1<<p,x=Math.floor(s.x),S=s.x-x,A=new Zi(p,x,p,Math.floor(S*y),Math.floor(s.y*y)),P=this.findDEMTileFor(A);if(!P||!P.dem)return i;const L=P.dem,z=1<<P.tileID.canonical.z,V=(S*z-P.tileID.canonical.x)*L.dim,G=(s.y*z-P.tileID.canonical.y)*L.dim,Z=Math.floor(V),Q=Math.floor(G);return(l?this.exaggeration():1)*Sr(Sr(L.get(Z,Q),L.get(Z,Q+1),G-Q),Sr(L.get(Z+1,Q),L.get(Z+1,Q+1),G-Q),V-Z)}getAtTileOffset(s,i,l){const h=1<<s.canonical.z;return this.getAtPointOrZero(new td(s.wrap+(s.canonical.x+i/Wt)/h,(s.canonical.y+l/Wt)/h))}getAtTileOffsetFunc(s,i,l,h){return p=>{const y=this.getAtTileOffset(s,p.x,p.y),x=h.upVector(s.canonical,p.x,p.y);return Uo(x,x,y*h.upVectorScale(s.canonical,i,l).metersToTile),x}}getForTilePoints(s,i,l,h){if(this.isUsingMockSource())return!1;const p=ex.create(this,s,h);return!!p&&(i.forEach(y=>{y[2]=this.exaggeration()*p.getElevationAt(y[0],y[1],l)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const l=i.dem.tree,h=i.tileID,p=1<<s.canonical.z-h.canonical.z;let y=s.canonical.x/p-h.canonical.x,x=s.canonical.y/p-h.canonical.y,S=0;for(let A=0;A<s.canonical.z-h.canonical.z&&!l.leaves[S];A++){y*=2,x*=2;const P=2*Math.floor(x)+Math.floor(y);S=l.childOffsets[S]+P,y%=1,x%=1}return{min:this.exaggeration()*l.minimums[S],max:this.exaggeration()*l.maximums[S]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Va,o.EvaluationParameters=N,o.Event=ul,o.Evented=zu,o.FillExtrusionBucket=_g,o.Frustum=RE,o.FrustumCorners=DE,o.GLOBE_RADIUS=ks,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=TI,o.GLOBE_ZOOM_THRESHOLD_MIN=LE,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.withSkirts.destroy(),s.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_fillGridMeshWithLods(s,i){const l=new ut,h=new zt,p=[],y=s+1+2,x=i[0]+1,S=i[0]+1+(1+i.length),A=(P,L,z)=>{let V=P===y-1?P-2:P===0?P:P-1;return V+=z?24575:0,[V,L]};for(let P=0;P<y;++P)l.emplaceBack(...A(P,0,!0));for(let P=0;P<x;++P)for(let L=0;L<y;++L)l.emplaceBack(...A(L,P,(L===0||L===y-1)&&!0));for(let P=0;P<i.length;++P){const L=i[P];for(let z=0;z<y;++z)l.emplaceBack(...A(z,L,!0))}for(let P=0;P<i.length;++P){const L=h.length,z=i[P]+1+2,V=new zt;for(let Q=0;Q<z-1;Q++){const ie=Q===z-2,de=ie?y*(S-i.length+P-Q):y;for(let we=0;we<y-1;we++){const pe=Q*y+we;Q===0||ie||we===0||we===y-2?(V.emplaceBack(pe+1,pe,pe+de),V.emplaceBack(pe+de,pe+de+1,pe+1)):(h.emplaceBack(pe+1,pe,pe+de),h.emplaceBack(pe+de,pe+de+1,pe+1))}}const G=Dn.simpleSegment(0,L,l.length,h.length-L);for(let Q=0;Q<V.uint16.length;Q+=3)h.emplaceBack(V.uint16[Q],V.uint16[Q+1],V.uint16[Q+2]);const Z=Dn.simpleSegment(0,L,l.length,h.length-L);p.push({withoutSkirts:G,withSkirts:Z})}return{vertices:l,indices:h,segments:p}}_createGrid(s){const i=this._fillGridMeshWithLods(gh,cg);this._gridSegments=i.segments,this._gridBuffer=s.createVertexBuffer(i.vertices,lg.members),this._gridIndexBuffer=s.createIndexBuffer(i.indices,!0)}_createPoles(s){const i=new zt;for(let p=0;p<=gh;p++)i.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const l=new Br,h=new Br;this._poleSegments=[];for(let p=0,y=0;p<LE;p++){const x=360/(1<<p);l.emplaceBack(0,-ks,0,.5,0),h.emplaceBack(0,-ks,0,.5,1);for(let S=0;S<=gh;S++){const A=S/gh,P=Sr(0,x,A),[L,z,V]=Jf(_q,xq,P,ks);l.emplaceBack(L,z,V,A,0),h.emplaceBack(L,z,V,A,1)}this._poleSegments.push(Dn.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(l,SI,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(h,SI,!1)}getGridBuffers(s,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[s].withSkirts:this._gridSegments[s].withoutSkirts]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const l=new ti,h=gh,p=h+1+2,y=1;this._wireframeSegments=[];for(let x=0,S=0;x<cg.length;x++){const A=cg[x];for(let L=y;L<A+y;L++)for(let z=y;z<h+y;z++){const V=L*p+z;l.emplaceBack(V,V+1),l.emplaceBack(V,V+p),l.emplaceBack(V,V+p+1)}const P=A*h*3;this._wireframeSegments.push(Dn.simpleSegment(0,S,(A+1)*p,P)),S+=P}this._wireframeIndexBuffer=s.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=ud,o.ImagePosition=lT,o.KDBush=TT,o.LivePerformanceUtils=tE,o.LngLat=Ur,o.LngLatBounds=kc,o.LocalGlyphMode=hT,o.MAX_MERCATOR_LATITUDE=Ai,o.MercatorCoordinate=td,o.ONE_EM=fi,o.OverscaledTileID=Zi,o.PerformanceMarkers=uc,o.Point=ae,o.Properties=ye,o.RGBAImage=wo,o.Ray=IE,o.RequestManager=class{constructor(s,i,l){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",F,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!De(s))return s;const l=wt(s);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!De(s))return s;const l=wt(s);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(s,i,l,h){if(!De(s))return s;const p=wt(s);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),l&&p.params.push(`language=${l}`),h&&p.params.push(`worldview=${h}`),this._makeAPIURL(p,this._customAccessToken||i)}normalizeSpriteURL(s,i,l,h){const p=wt(s);return De(s)?(p.path=`/styles/v1${p.path}/sprite${i}${l}`,this._makeAPIURL(p,this._customAccessToken||h)):(p.path+=`${i}${l}`,mt(p))}normalizeTileURL(s,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!De(s))return s;const h=wt(s);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&h.authority!=="raster"&&l===512?"@2x":""}${C.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${E.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${E.TILE_URL_VERSION}${h.path}`);const p=this._customAccessToken||function(y){for(const x of y){const S=x.match(/^access_token=(.*)$/);if(S)return S[1]}return null}(h.params)||E.ACCESS_TOKEN;return E.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,p)}canonicalizeTileURL(s,i){const l=wt(s);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return s;let h="mapbox://";l.path.match(/^\/raster\/v1\//)?h+=`raster/${l.path.replace(`/${E.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${l.path.replace(`/${E.TILE_URL_VERSION}/`,"")}`;let p=l.params;return i&&(p=p.filter(y=>!y.match(/^access_token=/))),p.length&&(h+=`?${p.join("&")}`),h}canonicalizeTileset(s,i){const l=!!i&&De(i),h=[];for(const p of s.tiles||[])ze(p)?h.push(this.canonicalizeTileURL(p,l)):h.push(p);return h}_makeAPIURL(s,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=wt(E.API_URL);if(s.protocol=h.protocol,s.authority=h.authority,s.protocol==="http"){const p=s.params.indexOf("secure");p>=0&&s.params.splice(p,1)}if(h.path!=="/"&&(s.path=`${h.path}${s.path}`),!E.REQUIRE_ACCESS_TOKEN)return mt(s);if(i=i||E.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return s.params=s.params.filter(p=>p.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),mt(s)}},o.ResourceType=sl,o.SegmentVector=Dn,o.SourceCache=wh,o.StencilMode=bT,o.StructArrayLayout1ui2=xo,o.StructArrayLayout2f1f2i16=qt,o.StructArrayLayout2i4=ut,o.StructArrayLayout2ui4=ti,o.StructArrayLayout3f12=fr,o.StructArrayLayout3ui6=zt,o.StructArrayLayout4i8=rt,o.StructArrayLayout5f20=Br,o.Texture=Mg,o.Tile=_T,o.Transitionable=K,o.Uniform1f=_0,o.Uniform1i=class extends bl{constructor(s){super(s),this.current=0}set(s,i,l){this.fetchUniformLocation(s,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends bl{constructor(s){super(s),this.current=[0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends bl{constructor(s){super(s),this.current=[0,0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=aI,o.UniformColor=sI,o.UniformMatrix2f=class extends bl{constructor(s){super(s),this.current=nq}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let h=0;h<4;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends bl{constructor(s){super(s),this.current=rq}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let h=0;h<9;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends bl{constructor(s){super(s),this.current=tq}set(s,i,l){if(this.fetchUniformLocation(s,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let h=1;h<16;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=dD,o.ValidationError=It,o.VectorTileFeature=R0,o.VectorTileWorkerSource=class extends zu{constructor(s,i,l,h,p){super(),this.actor=s,this.layerIndex=i,this.availableImages=l,this.loadVectorData=p||SR,this.loading={},this.loaded={},this.deduped=new wR(s.scheduler),this.isSpriteLoaded=h,this.scheduler=s.scheduler}loadTile(s,i){const l=s.uid,h=s&&s.request,p=h&&h.collectResourceTiming,y=this.loading[l]=new A9(s);y.abort=this.loadVectorData(s,(x,S)=>{const A=!this.loading[l];if(delete this.loading[l],A||x||!S)return y.status="done",A||(this.loaded[l]=y),i(x);const P=S.rawData,L={};S.expires&&(L.expires=S.expires),S.cacheControl&&(L.cacheControl=S.cacheControl),y.vectorTile=S.vectorTile||new nT(new B0(P));const z=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(V,G)=>{if(V||!G)return i(V);const Z={};if(p){const Q=om(h);Q.length>0&&(Z.resourceTiming=JSON.parse(JSON.stringify(Q)))}i(null,bt({rawTileData:P.slice(0)},G,L,Z))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[l]=y})}reloadTile(s,i){const l=this.loaded,h=s.uid,p=this;if(l&&l[h]){const y=l[h];y.showCollisionBoxes=s.showCollisionBoxes,y.enableTerrain=!!s.enableTerrain,y.projection=s.projection,y.tileTransform=bh(s.tileID.canonical,s.projection);const x=(S,A)=>{const P=y.reloadCallback;P&&(delete y.reloadCallback,y.parse(y.vectorTile,p.layerIndex,this.availableImages,p.actor,P)),i(S,A)};y.status==="parsing"?y.reloadCallback=x:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(s,i){const l=s.uid,h=this.loading[l];h&&(h.abort&&h.abort(),delete this.loading[l]),i()}removeTile(s,i){const l=this.loaded,h=s.uid;l&&l[h]&&delete l[h],i()}},o.WritingMode=Wo,o.ZoomDependentExpression=nh,o.add=Sl,o.addDynamicAttributes=K0,o.adjoint=function(s,i){var l=i[0],h=i[1],p=i[2],y=i[3],x=i[4],S=i[5],A=i[6],P=i[7],L=i[8];return s[0]=x*L-S*P,s[1]=p*P-h*L,s[2]=h*S-p*x,s[3]=S*A-y*L,s[4]=l*L-p*A,s[5]=p*y-l*S,s[6]=y*P-x*A,s[7]=h*A-l*P,s[8]=l*x-h*y,s},o.asyncAll=_t,o.bezier=Ve,o.bindAll=St,o.boundsAttributes=oR,o.bufferConvexPolygon=function(s,i){const l=[];for(let h=0;h<s.length;h++){const p=Ye(h-1,-1,s.length-1),y=Ye(h+1,-1,s.length-1),x=s[h],S=s[y],A=s[p].sub(x).unit(),P=S.sub(x).unit(),L=P.angleWithSep(A.x,A.y),z=A.add(P).unit().mult(-1*i/Math.sin(L/2));l.push(x.add(z))}return l},o.cacheEntryPossiblyAdded=function(s){$u++,$u>ui&&(s.getActor().send("enforceCacheSizeLimit",_r),$u=0)},o.calculateGlobeLabelMatrix=function(s,i){const{x:l,y:h}=s.point,p=MI(l,h,s.worldSize/s._pixelsPerMercatorPixel,0,0);return dh(p,p,NE(Is(i)))},o.calculateGlobeMatrix=function(s){const{x:i,y:l}=s.point,{lng:h,lat:p}=s._center;return MI(i,l,s.worldSize,h,p)},o.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,l=i/ns(1,s.center.lat),h=ts(new Float64Array(16));return rg(h,h,[s.point.x,s.point.y,0]),ph(h,h,[l,l,i]),Float32Array.from(h)},o.circumferenceAtLatitude=BE,o.clamp=ke,o.clearTileCache=function(s){if(!ju())return;const i=m.caches.delete(bi);s&&i.catch(s).then(()=>s())},o.clipLine=FD,o.clone=function(s){var i=new bo(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},o.clone$1=er,o.collisionCircleLayout=EG,o.config=E,o.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},o.create=function(){var s=new bo(16);return bo!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=uI,o.createExpression=Ec,o.createLayout=Le,o.createStyleLayer=function(s){return s.type==="custom"?new m9(s):new y9[s.type](s)},o.cross=kE,o.degToRad=ve,o.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},o.div=function(s,i,l){return s[0]=i[0]/l[0],s[1]=i[1]/l[1],s[2]=i[2]/l[2],s},o.dot=da,o.earthRadius=fg,o.ease=Ke,o.easeCubicInOut=Ne,o.ecefToLatLng=function([s,i,l]){const h=Math.hypot(s,i,l),p=Math.atan2(s,l),y=.5*Math.PI-Math.acos(-i/h);return new Ur(Ee(p),Ee(y))},o.emitValidationErrors=d0,o.endsWith=Dt,o.enforceCacheSizeLimit=function(s){al(),Yn&&Yn.then(i=>{i.keys().then(l=>{for(let h=0;h<l.length-s;h++)i.delete(l[h])})})},o.evaluateSizeForFeature=N0,o.evaluateSizeForZoom=ad,o.evaluateVariableOffset=GD,o.evented=b,o.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},o.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},o.exported=Ua,o.exported$1=C,o.extend=bt,o.extend$1=Wa,o.fillExtrusionHeightLift=uD,o.filterObject=dt,o.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},o.fromQuat=function(s,i){var l=i[0],h=i[1],p=i[2],y=i[3],x=l+l,S=h+h,A=p+p,P=l*x,L=h*x,z=h*S,V=p*x,G=p*S,Z=p*A,Q=y*x,ie=y*S,de=y*A;return s[0]=1-z-Z,s[1]=L+de,s[2]=V-ie,s[3]=0,s[4]=L-de,s[5]=1-P-Z,s[6]=G+Q,s[7]=0,s[8]=V+ie,s[9]=G-Q,s[10]=1-P-z,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,i){var l=Math.sin(i),h=Math.cos(i);return s[0]=h,s[1]=l,s[2]=0,s[3]=-l,s[4]=h,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=fI,o.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return Re[i]},o.getAABBPointSquareDist=function(s,i,l){let h=0;for(let p=0;p<2;++p){const y=l?l[p]:0;s[p]>y&&(h+=(s[p]-y)*(s[p]-y)),i[p]<y&&(h+=(y-i[p])*(y-i[p]))}return h},o.getAnchorAlignment=uT,o.getAnchorJustification=dT,o.getBounds=function(s){let i=1/0,l=1/0,h=-1/0,p=-1/0;for(const y of s)i=Math.min(i,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return{min:new ae(i,l),max:new ae(h,p)}},o.getColumn=Hn,o.getDefaultExportFromCjs=R,o.getGridMatrix=function(s,i,l,h){const p=i.getNorth(),y=i.getSouth(),x=i.getWest(),S=i.getEast(),A=1<<s.z,P=S-x,L=p-y,z=P/gh,V=-L/cg[l],G=[0,z,0,V,0,0,p,x,0];if(s.z>0){const Z=180/h;hI(G,G,[Z/P+1,0,0,0,Z/L+1,0,-.5*Z/z,.5*Z/V,1])}return G[2]=A,G[5]=s.x,G[8]=s.y,G},o.getImage=_e,o.getJSON=function(s,i){return cl(bt(s,{type:"json"}),i)},o.getLatitudinalLod=function(s){const i=Ai-5;s=ke(s,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(ve(s))),3);return Math.round(l*(cg.length-1))},o.getMapSessionAPI=Jn,o.getPerformanceMeasurement=om,o.getProjection=eR,o.getRTLTextPluginStatus=T,o.getReferrer=ll,o.getTilePoint=function(s,{x:i,y:l},h=0){return new ae(((i-h)*s.scale-s.x)*Wt,(l*s.scale-s.y)*Wt)},o.getTileVec3=function(s,i,l=0){return Yf(((i.x-l)*s.scale-s.x)*Wt,(i.y*s.scale-s.y)*Wt,RI(i.z,i.y))},o.getVideo=function(s,i){const l=m.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let h=0;h<s.length;h++){const p=m.document.createElement("source");_f(s[h])||(l.crossOrigin="Anonymous"),p.src=s[h],l.appendChild(p)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const i=[0,0,0],l=ts(new Float64Array(16));return dh(l,s.pixelMatrix,s.globeMatrix),An(i,i,l),new ae(i[0],i[1])},o.globeDenormalizeECEF=NE,o.globeECEFOrigin=function(s,i){const l=[0,0,0];return An(l,l,hg(Is(i.canonical))),An(l,l,s),l},o.globeMetersToEcef=w0,o.globeNormalizeECEF=hg,o.globePixelsToTileUnits=function(s,i){return Wt/(512*Math.pow(2,s))*E0(Is(i))},o.globePoleMatrixForTile=function(s,i,l){const h=ts(new Float64Array(16)),p=(i/(1<<s)-.5)*Math.PI*2;return b0(h,l.globeMatrix,p),Float32Array.from(h)},o.globeTileBounds=Is,o.globeTiltAtLngLat=kI,o.globeToMercatorTransition=ed,o.globeUseCustomAntiAliasing=function(s,i,l){const h=ed(l.zoom),p=s.style.map._antialias,y=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return h===0&&!p&&!x&&y},o.identity=ts,o.identity$1=xI,o.invert=CE,o.isFullscreen=function(){return!!m.document.fullscreenElement||!!m.document.webkitFullscreenElement},o.isLngLatBehindGlobe=zE,o.isMapAuthenticated=function(s){return Ri.has(s)},o.isMapboxURL=De,o.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!Gn(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Ti,o.latLngToECEF=Qf,o.len=fq,o.length=ng,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=Vo,o.loadVectorTile=SR,o.makeRequest=cl,o.mapValue=function(s,i,l,h,p){return ke((s-i)/(l-i)*(p-h)+h,h,p)},o.mercatorScale=LI,o.mercatorXfromLng=Ds,o.mercatorYfromLat=Rs,o.mercatorZfromAltitude=ns,o.mul=uq,o.mul$1=hq,o.multiply=dh,o.multiply$1=hI,o.multiply$2=mI,o.nextPowerOfTwo=Mt,o.normalize=Gi,o.normalize$1=dq,o.normalize$2=vI,o.number=Sr,o.ortho=function(s,i,l,h,p,y,x){var S=1/(i-l),A=1/(h-p),P=1/(y-x);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*A,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*P,s[11]=0,s[12]=(i+l)*S,s[13]=(p+h)*A,s[14]=(x+y)*P,s[15]=1,s},o.pbf=xD,o.perspective=function(s,i,l,h,p){var y,x=1/Math.tan(i/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0?(s[10]=(p+h)*(y=1/(h-p)),s[14]=2*p*h*y):(s[10]=-1,s[14]=-2*h),s},o.pick=function(s,i){const l={};for(let h=0;h<i.length;h++){const p=i[h];p in s&&(l[p]=s[p])}return l},o.plugin=k,o.pointGeometry=ee,o.polesInViewport=function(s){const i=ts(new Float64Array(16));dh(i,s.pixelMatrix,s.globeMatrix);const l=[0,pa,0],h=[0,ma,0];return An(l,l,i),An(h,h,i),[l[0]>0&&l[0]<=s.width&&l[1]>0&&l[1]<=s.height&&!zE(s,new Ur(s.center.lat,90)),h[0]>0&&h[0]<=s.width&&h[1]>0&&h[1]<=s.height&&!zE(s,new Ur(s.center.lat,-90))]},o.polygonContainsPoint=_h,o.polygonIntersectsBox=UI,o.polygonIntersectsPolygon=NI,o.polygonizeBounds=function(s,i,l=0,h=!0){const p=new ae(l,l),y=s.sub(p),x=i.add(p),S=[y,new ae(x.x,y.y),x,new ae(y.x,x.y)];return h&&S.push(y.clone()),S},o.posAttributes=lg,o.postMapLoadEvent=Mn,o.postPerformanceEvent=Un,o.postTurnstileEvent=br,o.potpack=sT,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=Ee,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:g,pluginURL:u}),b.on("pluginStateChange",s),s},o.removeAuthState=function(s){Ri.delete(s)},o.renderColorRamp=ZE,o.resample=jI,o.rotateX=PE,o.rotateX$1=bI,o.rotateY=b0,o.rotateY$1=wI,o.rotateZ=function(s,i,l){var h=Math.sin(l),p=Math.cos(l),y=i[0],x=i[1],S=i[2],A=i[3],P=i[4],L=i[5],z=i[6],V=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*p+P*h,s[1]=x*p+L*h,s[2]=S*p+z*h,s[3]=A*p+V*h,s[4]=P*p-y*h,s[5]=L*p-x*h,s[6]=z*p-S*h,s[7]=V*p-A*h,s},o.rotateZ$1=function(s,i,l){l*=.5;var h=i[0],p=i[1],y=i[2],x=i[3],S=Math.sin(l),A=Math.cos(l);return s[0]=h*A+p*S,s[1]=p*A-h*S,s[2]=y*A+x*S,s[3]=x*A-y*S,s},o.scale=ph,o.scale$1=yI,o.scale$2=Uo,o.scaleAndAdd=ag,o.set=function(s,i,l,h){return s[0]=i,s[1]=l,s[2]=h,s},o.setCacheLimits=function(s,i){_r=s,ui=i},o.setColumn=function(s,i,l){s[4*i+0]=l[0],s[4*i+1]=l[1],s[4*i+2]=l[2],s[4*i+3]=l[3]},o.setRTLTextPlugin=function(s,i,l=!1){if(g===Ym||g===Jm||g===Qm)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=Ua.resolveURL(s),g=Ym,Pc=i,v(),l||O()},o.smoothstep=Ge,o.spec=Qe,o.squaredLength=function(s){var i=s[0],l=s[1],h=s[2];return i*i+l*l+h*h},o.storeAuthState=function(s,i){i?Ri.add(s):Ri.delete(s)},o.sub=rs,o.subtract=ME,o.symbolSize=TG,o.tileAABB=function(s,i,l,h,p,y,x,S,A){if(A.name==="globe")return vq(s,i,new j0(l,h,p));const P=bh({z:l,x:h,y:p},A);return new Hi([(y+P.x/P.scale)*i,i*(P.y/P.scale),x],[(y+P.x2/P.scale)*i,i*(P.y2/P.scale),S])},o.tileCornersToBounds=S0,o.tileTransform=bh,o.transformMat3=function(s,i,l){var h=i[0],p=i[1],y=i[2];return s[0]=h*l[0]+p*l[3]+y*l[6],s[1]=h*l[1]+p*l[4]+y*l[7],s[2]=h*l[2]+p*l[5]+y*l[8],s},o.transformMat4=An,o.transformMat4$1=mh,o.transformQuat=gI,o.transitionTileAABBinECEF=CI,o.translate=rg,o.transpose=function(s,i){if(s===i){var l=i[1],h=i[2],p=i[5];s[1]=i[3],s[2]=i[6],s[3]=l,s[5]=i[7],s[6]=h,s[7]=p}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},o.triggerPluginCompletionEvent=d,o.uniqueId=Xt,o.updateGlobeVertexNormal=function(s,i,l,h,p){const y=5*i+2;s.float32[y+0]=l,s.float32[y+1]=h,s.float32[y+2]=p},o.validateCustomStyleLayer=function(s){const i=[],l=s.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=s=>_o(lh(s)),o.validateFog=s=>_o(u0(s)),o.validateLayer=s=>_o(a0(s)),o.validateLight=s=>_o(c0(s)),o.validateSource=s=>_o(l0(s)),o.validateStyle=f0,o.validateTerrain=s=>_o(Gm(s)),o.values=Ot,o.vectorTile=D0,o.version=_,o.warnOnce=Nt,o.window=m,o.wrap=Ye}),c(["./shared"],function(o){function m(be){if(typeof be=="number"||typeof be=="boolean"||typeof be=="string"||be==null)return JSON.stringify(be);if(Array.isArray(be)){let re="[";for(const _e of be)re+=`${m(_e)},`;return`${re}]`}let te="{";for(const re of Object.keys(be).sort())te+=`${re}:${m(be[re])},`;return`${te}}`}function _(be){let te="";for(const re of o.refProperties)te+=`/${m(be[re])}`;return te}class w{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,re){for(const Ce of te)this._layerConfigs[Ce.id]=Ce,(this._layers[Ce.id]=o.createStyleLayer(Ce)).compileFilter(),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id];for(const Ce of re)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const _e=function(Ce,De){const ze={};for(let Ie=0;Ie<Ce.length;Ie++){const Xe=De&&De[Ce[Ie].id]||_(Ce[Ie]);De&&(De[Ce[Ie].id]=Xe);let vt=ze[Xe];vt||(vt=ze[Xe]=[]),vt.push(Ce[Ie])}const $e=[];for(const Ie in ze)$e.push(ze[Ie]);return $e}(o.values(this._layerConfigs),this.keyCache);for(const Ce of _e){const De=Ce.map(wt=>this._layers[wt.id]),ze=De[0];if(ze.visibility==="none")continue;const $e=ze.source||"";let Ie=this.familiesBySource[$e];Ie||(Ie=this.familiesBySource[$e]={});const Xe=ze.sourceLayer||"_geojsonTileLayer";let vt=Ie[Xe];vt||(vt=Ie[Xe]=[]),vt.push(De)}}}class E{loadTile(te,re){const{uid:_e,encoding:Ce,rawImageData:De,padding:ze,buildQuadTree:$e}=te,Ie=o.window.ImageBitmap&&De instanceof o.window.ImageBitmap?this.getImageData(De,ze):De;re(null,new o.DEMData(_e,Ie,Ce,ze<1,$e))}getImageData(te,re){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(te.width,te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=te.width,this.offscreenCanvas.height=te.height,this.offscreenCanvasContext.drawImage(te,0,0,te.width,te.height);const _e=this.offscreenCanvasContext.getImageData(-re,-re,te.width+2*re,te.height+2*re);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),_e}}function C(be,te){if(be.length!==0){M(be[0],te);for(var re=1;re<be.length;re++)M(be[re],!te)}}function M(be,te){for(var re=0,_e=0,Ce=0,De=be.length,ze=De-1;Ce<De;ze=Ce++){var $e=(be[Ce][0]-be[ze][0])*(be[ze][1]+be[Ce][1]),Ie=re+$e;_e+=Math.abs(re)>=Math.abs($e)?re-Ie+$e:$e-Ie+re,re=Ie}re+_e>=0!=!!te&&be.reverse()}var I=o.getDefaultExportFromCjs(function be(te,re){var _e,Ce=te&&te.type;if(Ce==="FeatureCollection")for(_e=0;_e<te.features.length;_e++)be(te.features[_e],re);else if(Ce==="GeometryCollection")for(_e=0;_e<te.geometries.length;_e++)be(te.geometries[_e],re);else if(Ce==="Feature")be(te.geometry,re);else if(Ce==="Polygon")C(te.coordinates,re);else if(Ce==="MultiPolygon")for(_e=0;_e<te.coordinates.length;_e++)C(te.coordinates[_e],re);return te});const D=o.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},B=o.pointGeometry,F=o.vectorTile.VectorTileFeature,R=U;function U(be,te){this.options=te||{},this.features=be,this.length=be.length}function H(be,te){this.id=typeof be.id=="number"?be.id:void 0,this.type=be.type,this.rawGeometry=be.type===1?[be.geometry]:be.geometry,this.properties=be.tags,this.extent=te||4096}U.prototype.feature=function(be){return new H(this.features[be],this.options.extent)},H.prototype.loadGeometry=function(){var be=this.rawGeometry;this.geometry=[];for(var te=0;te<be.length;te++){for(var re=be[te],_e=[],Ce=0;Ce<re.length;Ce++)_e.push(new B(re[Ce][0],re[Ce][1]));this.geometry.push(_e)}return this.geometry},H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var be=this.geometry,te=1/0,re=-1/0,_e=1/0,Ce=-1/0,De=0;De<be.length;De++)for(var ze=be[De],$e=0;$e<ze.length;$e++){var Ie=ze[$e];te=Math.min(te,Ie.x),re=Math.max(re,Ie.x),_e=Math.min(_e,Ie.y),Ce=Math.max(Ce,Ie.y)}return[te,_e,re,Ce]},H.prototype.toGeoJSON=F.prototype.toGeoJSON;var X=o.pbf,ee=R;function oe(be){var te=new X;return function(re,_e){for(var Ce in re.layers)_e.writeMessage(3,ae,re.layers[Ce])}(be,te),te.finish()}function ae(be,te){var re;te.writeVarintField(15,be.version||1),te.writeStringField(1,be.name||""),te.writeVarintField(5,be.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(re=0;re<be.length;re++)_e.feature=be.feature(re),te.writeMessage(2,ge,_e);var Ce=_e.keys;for(re=0;re<Ce.length;re++)te.writeStringField(3,Ce[re]);var De=_e.values;for(re=0;re<De.length;re++)te.writeMessage(4,Ne,De[re])}function ge(be,te){var re=be.feature;re.id!==void 0&&te.writeVarintField(1,re.id),te.writeMessage(2,he,be),te.writeVarintField(3,re.type),te.writeMessage(4,Re,re)}function he(be,te){var re=be.feature,_e=be.keys,Ce=be.values,De=be.keycache,ze=be.valuecache;for(var $e in re.properties){var Ie=re.properties[$e],Xe=De[$e];if(Ie!==null){Xe===void 0&&(_e.push($e),De[$e]=Xe=_e.length-1),te.writeVarint(Xe);var vt=typeof Ie;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(Ie=JSON.stringify(Ie));var wt=vt+":"+Ie,mt=ze[wt];mt===void 0&&(Ce.push(Ie),ze[wt]=mt=Ce.length-1),te.writeVarint(mt)}}}function ve(be,te){return(te<<3)+(7&be)}function Ee(be){return be<<1^be>>31}function Re(be,te){for(var re=be.loadGeometry(),_e=be.type,Ce=0,De=0,ze=re.length,$e=0;$e<ze;$e++){var Ie=re[$e],Xe=1;_e===1&&(Xe=Ie.length),te.writeVarint(ve(1,Xe));for(var vt=_e===3?Ie.length-1:Ie.length,wt=0;wt<vt;wt++){wt===1&&_e!==1&&te.writeVarint(ve(2,vt-1));var mt=Ie[wt].x-Ce,or=Ie[wt].y-De;te.writeVarint(Ee(mt)),te.writeVarint(Ee(or)),Ce+=mt,De+=or}_e===3&&te.writeVarint(ve(7,1))}}function Ne(be,te){var re=typeof be;re==="string"?te.writeStringField(1,be):re==="boolean"?te.writeBooleanField(7,be):re==="number"&&(be%1!=0?te.writeDoubleField(3,be):be<0?te.writeSVarintField(6,be):te.writeVarintField(5,be))}$.exports=oe,$.exports.fromVectorTileJs=oe,$.exports.fromGeojsonVt=function(be,te){te=te||{};var re={};for(var _e in be)re[_e]=new ee(be[_e].features,te),re[_e].name=_e,re[_e].version=te.version,re[_e].extent=te.extent;return oe({layers:re})},$.exports.GeoJSONWrapper=ee;var Ve=o.getDefaultExportFromCjs($.exports);const Ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:be=>be},ke=Math.fround||(Ge=new Float32Array(1),be=>(Ge[0]=+be,Ge[0]));var Ge;const Ye=3,_t=5,Ot=6;class bt{constructor(te){this.options=Object.assign(Object.create(Ke),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:re,minZoom:_e,maxZoom:Ce}=this.options;re&&console.time("total time");const De=`prepare ${te.length} points`;re&&console.time(De),this.points=te;const ze=[];for(let Ie=0;Ie<te.length;Ie++){const Xe=te[Ie];if(!Xe.geometry)continue;const[vt,wt]=Xe.geometry.coordinates,mt=ke(kt(vt)),or=ke(Mt(wt));ze.push(mt,or,1/0,Ie,-1,1),this.options.reduce&&ze.push(0)}let $e=this.trees[Ce+1]=this._createTree(ze);re&&console.timeEnd(De);for(let Ie=Ce;Ie>=_e;Ie--){const Xe=+Date.now();$e=this.trees[Ie]=this._createTree(this._cluster($e,Ie)),re&&console.log("z%d: %d clusters in %dms",Ie,$e.numItems,+Date.now()-Xe)}return re&&console.timeEnd("total time"),this}getClusters(te,re){let _e=((te[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,te[1]));let De=te[2]===180?180:((te[2]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)_e=-180,De=180;else if(_e>De){const wt=this.getClusters([_e,Ce,180,ze],re),mt=this.getClusters([-180,Ce,De,ze],re);return wt.concat(mt)}const $e=this.trees[this._limitZoom(re)],Ie=$e.range(kt(_e),Mt(ze),kt(De),Mt(Ce)),Xe=$e.data,vt=[];for(const wt of Ie){const mt=this.stride*wt;vt.push(Xe[mt+_t]>1?Zt(Xe,mt,this.clusterProps):this.points[Xe[mt+Ye]])}return vt}getChildren(te){const re=this._getOriginId(te),_e=this._getOriginZoom(te),Ce="No cluster with the specified id.",De=this.trees[_e];if(!De)throw new Error(Ce);const ze=De.data;if(re*this.stride>=ze.length)throw new Error(Ce);const $e=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Ie=De.within(ze[re*this.stride],ze[re*this.stride+1],$e),Xe=[];for(const vt of Ie){const wt=vt*this.stride;ze[wt+4]===te&&Xe.push(ze[wt+_t]>1?Zt(ze,wt,this.clusterProps):this.points[ze[wt+Ye]])}if(Xe.length===0)throw new Error(Ce);return Xe}getLeaves(te,re,_e){const Ce=[];return this._appendLeaves(Ce,te,re=re||10,_e=_e||0,0),Ce}getTile(te,re,_e){const Ce=this.trees[this._limitZoom(te)],De=Math.pow(2,te),{extent:ze,radius:$e}=this.options,Ie=$e/ze,Xe=(_e-Ie)/De,vt=(_e+1+Ie)/De,wt={features:[]};return this._addTileFeatures(Ce.range((re-Ie)/De,Xe,(re+1+Ie)/De,vt),Ce.data,re,_e,De,wt),re===0&&this._addTileFeatures(Ce.range(1-Ie/De,Xe,1,vt),Ce.data,De,_e,De,wt),re===De-1&&this._addTileFeatures(Ce.range(0,Xe,Ie/De,vt),Ce.data,-1,_e,De,wt),wt.features.length?wt:null}getClusterExpansionZoom(te){let re=this._getOriginZoom(te)-1;for(;re<=this.options.maxZoom;){const _e=this.getChildren(te);if(re++,_e.length!==1)break;te=_e[0].properties.cluster_id}return re}_appendLeaves(te,re,_e,Ce,De){const ze=this.getChildren(re);for(const $e of ze){const Ie=$e.properties;if(Ie&&Ie.cluster?De+Ie.point_count<=Ce?De+=Ie.point_count:De=this._appendLeaves(te,Ie.cluster_id,_e,Ce,De):De<Ce?De++:te.push($e),te.length===_e)break}return De}_createTree(te){const re=new o.KDBush(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<te.length;_e+=this.stride)re.add(te[_e],te[_e+1]);return re.finish(),re.data=te,re}_addTileFeatures(te,re,_e,Ce,De,ze){for(const $e of te){const Ie=$e*this.stride,Xe=re[Ie+_t]>1;let vt,wt,mt;if(Xe)vt=Xt(re,Ie,this.clusterProps),wt=re[Ie],mt=re[Ie+1];else{const ar=this.points[re[Ie+Ye]];vt=ar.properties;const[hr,br]=ar.geometry.coordinates;wt=kt(hr),mt=Mt(br)}const or={type:1,geometry:[[Math.round(this.options.extent*(wt*De-_e)),Math.round(this.options.extent*(mt*De-Ce))]],tags:vt};let ur;ur=Xe||this.options.generateId?re[Ie+Ye]:this.points[re[Ie+Ye]].id,ur!==void 0&&(or.id=ur),ze.features.push(or)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,re){const{radius:_e,extent:Ce,reduce:De,minPoints:ze}=this.options,$e=_e/(Ce*Math.pow(2,re)),Ie=te.data,Xe=[],vt=this.stride;for(let wt=0;wt<Ie.length;wt+=vt){if(Ie[wt+2]<=re)continue;Ie[wt+2]=re;const mt=Ie[wt],or=Ie[wt+1],ur=te.within(Ie[wt],Ie[wt+1],$e),ar=Ie[wt+_t];let hr=ar;for(const br of ur){const cn=br*vt;Ie[cn+2]>re&&(hr+=Ie[cn+_t])}if(hr>ar&&hr>=ze){let br,cn=mt*ar,Mn=or*ar,wi=-1;const Un=((wt/vt|0)<<5)+(re+1)+this.points.length;for(const aa of ur){const Jn=aa*vt;if(Ie[Jn+2]<=re)continue;Ie[Jn+2]=re;const Ri=Ie[Jn+_t];cn+=Ie[Jn]*Ri,Mn+=Ie[Jn+1]*Ri,Ie[Jn+4]=Un,De&&(br||(br=this._map(Ie,wt,!0),wi=this.clusterProps.length,this.clusterProps.push(br)),De(br,this._map(Ie,Jn)))}Ie[wt+4]=Un,Xe.push(cn/hr,Mn/hr,1/0,Un,-1,hr),De&&Xe.push(wi)}else{for(let br=0;br<vt;br++)Xe.push(Ie[wt+br]);if(hr>1)for(const br of ur){const cn=br*vt;if(!(Ie[cn+2]<=re)){Ie[cn+2]=re;for(let Mn=0;Mn<vt;Mn++)Xe.push(Ie[cn+Mn])}}}}return Xe}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,re,_e){if(te[re+_t]>1){const ze=this.clusterProps[te[re+Ot]];return _e?Object.assign({},ze):ze}const Ce=this.points[te[re+Ye]].properties,De=this.options.map(Ce);return _e&&De===Ce?Object.assign({},De):De}}function Zt(be,te,re){return{type:"Feature",id:be[te+Ye],properties:Xt(be,te,re),geometry:{type:"Point",coordinates:[(_e=be[te],360*(_e-.5)),$r(be[te+1])]}};var _e}function Xt(be,te,re){const _e=be[te+_t],Ce=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,De=be[te+Ot],ze=De===-1?{}:Object.assign({},re[De]);return Object.assign(ze,{cluster:!0,cluster_id:be[te+Ye],point_count:_e,point_count_abbreviated:Ce})}function kt(be){return be/360+.5}function Mt(be){const te=Math.sin(be*Math.PI/180),re=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return re<0?0:re>1?1:re}function $r(be){const te=(180-360*be)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function St(be,te,re,_e){for(var Ce,De=_e,ze=re-te>>1,$e=re-te,Ie=be[te],Xe=be[te+1],vt=be[re],wt=be[re+1],mt=te+3;mt<re;mt+=3){var or=Dt(be[mt],be[mt+1],Ie,Xe,vt,wt);if(or>De)Ce=mt,De=or;else if(or===De){var ur=Math.abs(mt-ze);ur<$e&&(Ce=mt,$e=ur)}}De>_e&&(Ce-te>3&&St(be,te,Ce,_e),be[Ce+2]=De,re-Ce>3&&St(be,Ce,re,_e))}function Dt(be,te,re,_e,Ce,De){var ze=Ce-re,$e=De-_e;if(ze!==0||$e!==0){var Ie=((be-re)*ze+(te-_e)*$e)/(ze*ze+$e*$e);Ie>1?(re=Ce,_e=De):Ie>0&&(re+=ze*Ie,_e+=$e*Ie)}return(ze=be-re)*ze+($e=te-_e)*$e}function xt(be,te,re,_e){var Ce={id:be===void 0?null:be,type:te,geometry:re,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var ze=De.geometry,$e=De.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")dt(De,ze);else if($e==="Polygon"||$e==="MultiLineString")for(var Ie=0;Ie<ze.length;Ie++)dt(De,ze[Ie]);else if($e==="MultiPolygon")for(Ie=0;Ie<ze.length;Ie++)for(var Xe=0;Xe<ze[Ie].length;Xe++)dt(De,ze[Ie][Xe])}(Ce),Ce}function dt(be,te){for(var re=0;re<te.length;re+=3)be.minX=Math.min(be.minX,te[re]),be.minY=Math.min(be.minY,te[re+1]),be.maxX=Math.max(be.maxX,te[re]),be.maxY=Math.max(be.maxY,te[re+1])}function er(be,te,re,_e){if(te.geometry){var Ce=te.geometry.coordinates,De=te.geometry.type,ze=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2),$e=[],Ie=te.id;if(re.promoteId?Ie=te.properties[re.promoteId]:re.generateId&&(Ie=_e||0),De==="Point")Kt(Ce,$e);else if(De==="MultiPoint")for(var Xe=0;Xe<Ce.length;Xe++)Kt(Ce[Xe],$e);else if(De==="LineString")Nt(Ce,$e,ze,!1);else if(De==="MultiLineString"){if(re.lineMetrics){for(Xe=0;Xe<Ce.length;Xe++)Nt(Ce[Xe],$e=[],ze,!1),be.push(xt(Ie,"LineString",$e,te.properties));return}vr(Ce,$e,ze,!1)}else if(De==="Polygon")vr(Ce,$e,ze,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(Xe=0;Xe<te.geometry.geometries.length;Xe++)er(be,{id:Ie,geometry:te.geometry.geometries[Xe],properties:te.properties},re,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<Ce.length;Xe++){var vt=[];vr(Ce[Xe],vt,ze,!0),$e.push(vt)}}be.push(xt(Ie,De,$e,te.properties))}}function Kt(be,te){te.push(nn(be[0])),te.push(mn(be[1])),te.push(0)}function Nt(be,te,re,_e){for(var Ce,De,ze=0,$e=0;$e<be.length;$e++){var Ie=nn(be[$e][0]),Xe=mn(be[$e][1]);te.push(Ie),te.push(Xe),te.push(0),$e>0&&(ze+=_e?(Ce*Xe-Ie*De)/2:Math.sqrt(Math.pow(Ie-Ce,2)+Math.pow(Xe-De,2))),Ce=Ie,De=Xe}var vt=te.length-3;te[2]=1,St(te,0,vt,re),te[vt+2]=1,te.size=Math.abs(ze),te.start=0,te.end=te.size}function vr(be,te,re,_e){for(var Ce=0;Ce<be.length;Ce++){var De=[];Nt(be[Ce],De,re,_e),te.push(De)}}function nn(be){return be/360+.5}function mn(be){var te=Math.sin(be*Math.PI/180),re=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return re<0?0:re>1?1:re}function En(be,te,re,_e,Ce,De,ze,$e){if(_e/=te,De>=(re/=te)&&ze<_e)return be;if(ze<re||De>=_e)return null;for(var Ie=[],Xe=0;Xe<be.length;Xe++){var vt=be[Xe],wt=vt.geometry,mt=vt.type,or=Ce===0?vt.minX:vt.minY,ur=Ce===0?vt.maxX:vt.maxY;if(or>=re&&ur<_e)Ie.push(vt);else if(!(ur<re||or>=_e)){var ar=[];if(mt==="Point"||mt==="MultiPoint")gn(wt,ar,re,_e,Ce);else if(mt==="LineString")Gn(wt,ar,re,_e,Ce,!1,$e.lineMetrics);else if(mt==="MultiLineString")Hn(wt,ar,re,_e,Ce,!1);else if(mt==="Polygon")Hn(wt,ar,re,_e,Ce,!0);else if(mt==="MultiPolygon")for(var hr=0;hr<wt.length;hr++){var br=[];Hn(wt[hr],br,re,_e,Ce,!0),br.length&&ar.push(br)}if(ar.length){if($e.lineMetrics&&mt==="LineString"){for(hr=0;hr<ar.length;hr++)Ie.push(xt(vt.id,mt,ar[hr],vt.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(ar.length===1?(mt="LineString",ar=ar[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=ar.length===3?"Point":"MultiPoint"),Ie.push(xt(vt.id,mt,ar,vt.tags))}}}return Ie.length?Ie:null}function gn(be,te,re,_e,Ce){for(var De=0;De<be.length;De+=3){var ze=be[De+Ce];ze>=re&&ze<=_e&&(te.push(be[De]),te.push(be[De+1]),te.push(be[De+2]))}}function Gn(be,te,re,_e,Ce,De,ze){for(var $e,Ie,Xe=xi(be),vt=Ce===0?_r:ui,wt=be.start,mt=0;mt<be.length-3;mt+=3){var or=be[mt],ur=be[mt+1],ar=be[mt+2],hr=be[mt+3],br=be[mt+4],cn=Ce===0?or:ur,Mn=Ce===0?hr:br,wi=!1;ze&&($e=Math.sqrt(Math.pow(or-hr,2)+Math.pow(ur-br,2))),cn<re?Mn>re&&(Ie=vt(Xe,or,ur,hr,br,re),ze&&(Xe.start=wt+$e*Ie)):cn>_e?Mn<_e&&(Ie=vt(Xe,or,ur,hr,br,_e),ze&&(Xe.start=wt+$e*Ie)):bi(Xe,or,ur,ar),Mn<re&&cn>=re&&(Ie=vt(Xe,or,ur,hr,br,re),wi=!0),Mn>_e&&cn<=_e&&(Ie=vt(Xe,or,ur,hr,br,_e),wi=!0),!De&&wi&&(ze&&(Xe.end=wt+$e*Ie),te.push(Xe),Xe=xi(be)),ze&&(wt+=$e)}var Un=be.length-3;or=be[Un],ur=be[Un+1],ar=be[Un+2],(cn=Ce===0?or:ur)>=re&&cn<=_e&&bi(Xe,or,ur,ar),Un=Xe.length-3,De&&Un>=3&&(Xe[Un]!==Xe[0]||Xe[Un+1]!==Xe[1])&&bi(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&te.push(Xe)}function xi(be){var te=[];return te.size=be.size,te.start=be.start,te.end=be.end,te}function Hn(be,te,re,_e,Ce,De){for(var ze=0;ze<be.length;ze++)Gn(be[ze],te,re,_e,Ce,De,!1)}function bi(be,te,re,_e){be.push(te),be.push(re),be.push(_e)}function _r(be,te,re,_e,Ce,De){var ze=(De-te)/(_e-te);return be.push(De),be.push(re+(Ce-re)*ze),be.push(1),ze}function ui(be,te,re,_e,Ce,De){var ze=(De-re)/(Ce-re);return be.push(te+(_e-te)*ze),be.push(De),be.push(1),ze}function Yn(be,te){for(var re=[],_e=0;_e<be.length;_e++){var Ce,De=be[_e],ze=De.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Ce=No(De.geometry,te);else if(ze==="MultiLineString"||ze==="Polygon"){Ce=[];for(var $e=0;$e<De.geometry.length;$e++)Ce.push(No(De.geometry[$e],te))}else if(ze==="MultiPolygon")for(Ce=[],$e=0;$e<De.geometry.length;$e++){for(var Ie=[],Xe=0;Xe<De.geometry[$e].length;Xe++)Ie.push(No(De.geometry[$e][Xe],te));Ce.push(Ie)}re.push(xt(De.id,ze,Ce,De.tags))}return re}function No(be,te){var re=[];re.size=be.size,be.start!==void 0&&(re.start=be.start,re.end=be.end);for(var _e=0;_e<be.length;_e+=3)re.push(be[_e]+te,be[_e+1],be[_e+2]);return re}function ju(be,te){if(be.transformed)return be;var re,_e,Ce,De=1<<be.z,ze=be.x,$e=be.y;for(re=0;re<be.features.length;re++){var Ie=be.features[re],Xe=Ie.geometry,vt=Ie.type;if(Ie.geometry=[],vt===1)for(_e=0;_e<Xe.length;_e+=2)Ie.geometry.push(al(Xe[_e],Xe[_e+1],te,De,ze,$e));else for(_e=0;_e<Xe.length;_e++){var wt=[];for(Ce=0;Ce<Xe[_e].length;Ce+=2)wt.push(al(Xe[_e][Ce],Xe[_e][Ce+1],te,De,ze,$e));Ie.geometry.push(wt)}}return be.transformed=!0,be}function al(be,te,re,_e,Ce,De){return[Math.round(re*(be*_e-Ce)),Math.round(re*(te*_e-De))]}function lc(be,te,re,_e,Ce){for(var De=te===Ce.maxZoom?0:Ce.tolerance/((1<<te)*Ce.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:re,y:_e,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<be.length;$e++){ze.numFeatures++,$u(ze,be[$e],De,Ce);var Ie=be[$e].minX,Xe=be[$e].minY,vt=be[$e].maxX,wt=be[$e].maxY;Ie<ze.minX&&(ze.minX=Ie),Xe<ze.minY&&(ze.minY=Xe),vt>ze.maxX&&(ze.maxX=vt),wt>ze.maxY&&(ze.maxY=wt)}return ze}function $u(be,te,re,_e){var Ce=te.geometry,De=te.type,ze=[];if(De==="Point"||De==="MultiPoint")for(var $e=0;$e<Ce.length;$e+=3)ze.push(Ce[$e]),ze.push(Ce[$e+1]),be.numPoints++,be.numSimplified++;else if(De==="LineString")sl(ze,Ce,be,re,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for($e=0;$e<Ce.length;$e++)sl(ze,Ce[$e],be,re,De==="Polygon",$e===0);else if(De==="MultiPolygon")for(var Ie=0;Ie<Ce.length;Ie++){var Xe=Ce[Ie];for($e=0;$e<Xe.length;$e++)sl(ze,Xe[$e],be,re,!0,$e===0)}if(ze.length){var vt=te.tags||null;if(De==="LineString"&&_e.lineMetrics){for(var wt in vt={},te.tags)vt[wt]=te.tags[wt];vt.mapbox_clip_start=Ce.start/Ce.size,vt.mapbox_clip_end=Ce.end/Ce.size}var mt={geometry:ze,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:vt};te.id!==null&&(mt.id=te.id),be.features.push(mt)}}function sl(be,te,re,_e,Ce,De){var ze=_e*_e;if(_e>0&&te.size<(Ce?ze:_e))re.numPoints+=te.length/3;else{for(var $e=[],Ie=0;Ie<te.length;Ie+=3)(_e===0||te[Ie+2]>ze)&&(re.numSimplified++,$e.push(te[Ie]),$e.push(te[Ie+1])),re.numPoints++;Ce&&function(Xe,vt){for(var wt=0,mt=0,or=Xe.length,ur=or-2;mt<or;ur=mt,mt+=2)wt+=(Xe[mt]-Xe[ur])*(Xe[mt+1]+Xe[ur+1]);if(wt>0===vt)for(mt=0,or=Xe.length;mt<or/2;mt+=2){var ar=Xe[mt],hr=Xe[mt+1];Xe[mt]=Xe[or-2-mt],Xe[mt+1]=Xe[or-1-mt],Xe[or-2-mt]=ar,Xe[or-1-mt]=hr}}($e,De),be.push($e)}}function Cs(be,te){var re=(te=this.options=function(Ce,De){for(var ze in De)Ce[ze]=De[ze];return Ce}(Object.create(this.options),te)).debug;if(re&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e=function(Ce,De){var ze=[];if(Ce.type==="FeatureCollection")for(var $e=0;$e<Ce.features.length;$e++)er(ze,Ce.features[$e],De,$e);else er(ze,Ce.type==="Feature"?Ce:{geometry:Ce},De);return ze}(be,te);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Ce,De){var ze=De.buffer/De.extent,$e=Ce,Ie=En(Ce,1,-1-ze,ze,0,-1,2,De),Xe=En(Ce,1,1-ze,2+ze,0,-1,2,De);return(Ie||Xe)&&($e=En(Ce,1,-ze,1+ze,0,-1,2,De)||[],Ie&&($e=Yn(Ie,1).concat($e)),Xe&&($e=$e.concat(Yn(Xe,-1)))),$e}(_e,te),_e.length&&this.splitTile(_e,0,0,0),re&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ll(be,te,re){return 32*((1<<be)*re+te)+be}function cl(be,te){const re=be.tileID.canonical;if(!this._geoJSONIndex)return te(null,null);const _e=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!_e)return te(null,null);const Ce=new class{constructor(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=ze.length,this._features=ze}feature(ze){return new class{constructor($e){this._feature=$e,this.extent=o.EXTENT,this.type=$e.type,this.properties=$e.tags,"id"in $e&&!isNaN($e.id)&&(this.id=parseInt($e.id,10))}loadGeometry(){if(this._feature.type===1){const $e=[];for(const Ie of this._feature.geometry)$e.push([new o.Point(Ie[0],Ie[1])]);return $e}{const $e=[];for(const Ie of this._feature.geometry){const Xe=[];for(const vt of Ie)Xe.push(new o.Point(vt[0],vt[1]));$e.push(Xe)}return $e}}toGeoJSON($e,Ie,Xe){return D.call(this,$e,Ie,Xe)}}(this._features[ze])}}(_e.features);let De=Ve(Ce);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),te(null,{vectorTile:Ce,rawData:De.buffer})}Cs.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Cs.prototype.splitTile=function(be,te,re,_e,Ce,De,ze){for(var $e=[be,te,re,_e],Ie=this.options,Xe=Ie.debug;$e.length;){_e=$e.pop(),re=$e.pop(),te=$e.pop(),be=$e.pop();var vt=1<<te,wt=ll(te,re,_e),mt=this.tiles[wt];if(!mt&&(Xe>1&&console.time("creation"),mt=this.tiles[wt]=lc(be,te,re,_e,Ie),this.tileCoords.push({z:te,x:re,y:_e}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,re,_e,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var or="z"+te;this.stats[or]=(this.stats[or]||0)+1,this.total++}if(mt.source=be,Ce){if(te===Ie.maxZoom||te===Ce)continue;var ur=1<<Ce-te;if(re!==Math.floor(De/ur)||_e!==Math.floor(ze/ur))continue}else if(te===Ie.indexMaxZoom||mt.numPoints<=Ie.indexMaxPoints)continue;if(mt.source=null,be.length!==0){Xe>1&&console.time("clipping");var ar,hr,br,cn,Mn,wi,Un=.5*Ie.buffer/Ie.extent,aa=.5-Un,Jn=.5+Un,Ri=1+Un;ar=hr=br=cn=null,Mn=En(be,vt,re-Un,re+Jn,0,mt.minX,mt.maxX,Ie),wi=En(be,vt,re+aa,re+Ri,0,mt.minX,mt.maxX,Ie),be=null,Mn&&(ar=En(Mn,vt,_e-Un,_e+Jn,1,mt.minY,mt.maxY,Ie),hr=En(Mn,vt,_e+aa,_e+Ri,1,mt.minY,mt.maxY,Ie),Mn=null),wi&&(br=En(wi,vt,_e-Un,_e+Jn,1,mt.minY,mt.maxY,Ie),cn=En(wi,vt,_e+aa,_e+Ri,1,mt.minY,mt.maxY,Ie),wi=null),Xe>1&&console.timeEnd("clipping"),$e.push(ar||[],te+1,2*re,2*_e),$e.push(hr||[],te+1,2*re,2*_e+1),$e.push(br||[],te+1,2*re+1,2*_e),$e.push(cn||[],te+1,2*re+1,2*_e+1)}}},Cs.prototype.getTile=function(be,te,re){var _e=this.options,Ce=_e.extent,De=_e.debug;if(be<0||be>24)return null;var ze=1<<be,$e=ll(be,te=(te%ze+ze)%ze,re);if(this.tiles[$e])return ju(this.tiles[$e],Ce);De>1&&console.log("drilling down to z%d-%d-%d",be,te,re);for(var Ie,Xe=be,vt=te,wt=re;!Ie&&Xe>0;)Xe--,vt=Math.floor(vt/2),wt=Math.floor(wt/2),Ie=this.tiles[ll(Xe,vt,wt)];return Ie&&Ie.source?(De>1&&console.log("found parent tile z%d-%d-%d",Xe,vt,wt),De>1&&console.time("drilling down"),this.splitTile(Ie.source,Xe,vt,wt,be,te,re),De>1&&console.timeEnd("drilling down"),this.tiles[$e]?ju(this.tiles[$e],Ce):null):null};class cc extends o.VectorTileWorkerSource{constructor(te,re,_e,Ce,De){super(te,re,_e,Ce,cl),De&&(this.loadGeoJSON=De)}loadData(te,re){const _e=te&&te.request,Ce=_e&&_e.collectResourceTiming;this.loadGeoJSON(te,(De,ze)=>{if(De||!ze)return re(De);if(typeof ze!="object")return re(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));{I(ze,!0);try{if(te.filter){const Ie=o.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(vt=>`${vt.key}: ${vt.message}`).join(", "));ze={type:"FeatureCollection",features:ze.features.filter(vt=>Ie.value.evaluate({zoom:0},vt))}}this._geoJSONIndex=te.cluster?new bt(function({superclusterOptions:Ie,clusterProperties:Xe}){if(!Xe||!Ie)return Ie;const vt={},wt={},mt={accumulated:null,zoom:0},or={properties:null},ur=Object.keys(Xe);for(const ar of ur){const[hr,br]=Xe[ar],cn=o.createExpression(br),Mn=o.createExpression(typeof hr=="string"?[hr,["accumulated"],["get",ar]]:hr);vt[ar]=cn.value,wt[ar]=Mn.value}return Ie.map=ar=>{or.properties=ar;const hr={};for(const br of ur)hr[br]=vt[br].evaluate(mt,or);return hr},Ie.reduce=(ar,hr)=>{or.properties=hr;for(const br of ur)mt.accumulated=ar[br],ar[br]=wt[br].evaluate(mt,or)},Ie}(te)).load(ze.features):function(Ie,Xe){return new Cs(Ie,Xe)}(ze,te.geojsonVtOptions)}catch(Ie){return re(Ie)}this.loaded={};const $e={};if(Ce){const Ie=o.getPerformanceMeasurement(_e);Ie&&($e.resourceTiming={},$e.resourceTiming[te.source]=JSON.parse(JSON.stringify(Ie)))}re(null,$e)}})}reloadTile(te,re){const _e=this.loaded;return _e&&_e[te.uid]?super.reloadTile(te,re):this.loadTile(te,re)}loadGeoJSON(te,re){if(te.request)o.getJSON(te.request,re);else{if(typeof te.data!="string")return re(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));try{return re(null,JSON.parse(te.data))}catch{return re(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(te,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(te.clusterId))}catch(_e){re(_e)}}getClusterChildren(te,re){try{re(null,this._geoJSONIndex.getChildren(te.clusterId))}catch(_e){re(_e)}}getClusterLeaves(te,re){try{re(null,this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset))}catch(_e){re(_e)}}}class _f{constructor(te){this.self=te,this.actor=new o.Actor(te,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:cc},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(re,_e)=>{if(this.workerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.workerSourceTypes[re]=_e},this.self.registerRTLTextPlugin=re=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=re.applyArabicShaping,o.plugin.processBidirectionalText=re.processBidirectionalText,o.plugin.processStyledBidirectionalText=re.processStyledBidirectionalText}}clearCaches(te,re,_e){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te],_e()}checkIfReady(te,re,_e){_e()}setReferrer(te,re){this.referrer=re}spriteLoaded(te,re){this.isSpriteLoaded[te]=re;for(const _e in this.workerSources[te]){const Ce=this.workerSources[te][_e];for(const De in Ce)Ce[De]instanceof o.VectorTileWorkerSource&&(Ce[De].isSpriteLoaded=re,Ce[De].fire(new o.Event("isSpriteLoaded")))}}setImages(te,re,_e){this.availableImages[te]=re;for(const Ce in this.workerSources[te]){const De=this.workerSources[te][Ce];for(const ze in De)De[ze].availableImages=re}_e()}enableTerrain(te,re,_e){this.terrain=re,_e()}setProjection(te,re){this.projections[te]=o.getProjection(re)}setLayers(te,re,_e){this.getLayerIndex(te).replace(re),_e()}updateLayers(te,re,_e){this.getLayerIndex(te).update(re.layers,re.removedIds),_e()}loadTile(te,re,_e){const Ce=this.enableTerrain?o.extend({enableTerrain:this.terrain},re):re;Ce.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,re.type,re.source).loadTile(Ce,_e)}loadDEMTile(te,re,_e){const Ce=this.enableTerrain?o.extend({buildQuadTree:this.terrain},re):re;this.getDEMWorkerSource(te,re.source).loadTile(Ce,_e)}reloadTile(te,re,_e){const Ce=this.enableTerrain?o.extend({enableTerrain:this.terrain},re):re;Ce.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,re.type,re.source).reloadTile(Ce,_e)}abortTile(te,re,_e){this.getWorkerSource(te,re.type,re.source).abortTile(re,_e)}removeTile(te,re,_e){this.getWorkerSource(te,re.type,re.source).removeTile(re,_e)}removeSource(te,re,_e){if(!this.workerSources[te]||!this.workerSources[te][re.type]||!this.workerSources[te][re.type][re.source])return;const Ce=this.workerSources[te][re.type][re.source];delete this.workerSources[te][re.type][re.source],Ce.removeSource!==void 0?Ce.removeSource(re,_e):_e()}loadWorkerSource(te,re,_e){try{this.self.importScripts(re.url),_e()}catch(Ce){_e(Ce.toString())}}syncRTLPluginState(te,re,_e){try{o.plugin.setState(re);const Ce=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Ce!=null){this.self.importScripts(Ce);const De=o.plugin.isParsed();_e(De?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ce}`),De)}}catch(Ce){_e(Ce.toString())}}getAvailableImages(te){let re=this.availableImages[te];return re||(re=[]),re}getLayerIndex(te){let re=this.layerIndexes[te];return re||(re=this.layerIndexes[te]=new w),re}getWorkerSource(te,re,_e){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][re]||(this.workerSources[te][re]={}),!this.workerSources[te][re][_e]){const Ce={send:(De,ze,$e,Ie,Xe,vt)=>{this.actor.send(De,ze,$e,te,Xe,vt)},scheduler:this.actor.scheduler};this.workerSources[te][re][_e]=new this.workerSourceTypes[re](Ce,this.getLayerIndex(te),this.getAvailableImages(te),this.isSpriteLoaded[te])}return this.workerSources[te][re][_e]}getDEMWorkerSource(te,re){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][re]||(this.demWorkerSources[te][re]=new E),this.demWorkerSources[te][re]}enforceCacheSizeLimit(te,re){o.enforceCacheSizeLimit(re)}getWorkerPerformanceMetrics(te,re,_e){_e(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new _f(self)),_f}),c(["./shared"],function(o){function m(g,u){if(Array.isArray(g)){if(!Array.isArray(u)||g.length!==u.length)return!1;for(let d=0;d<g.length;d++)if(!m(g[d],u[d]))return!1;return!0}if(typeof g=="object"&&g!==null&&u!==null){if(typeof u!="object"||Object.keys(g).length!==Object.keys(u).length)return!1;for(const d in g)if(!m(g[d],u[d]))return!1;return!0}return g===u}var _=w;function w(g){return!function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var v,b,T=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(T);try{b=new Worker(O),v=!0}catch{v=!1}return b&&b.terminate(),URL.revokeObjectURL(O),v}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var v=document.createElement("canvas");v.width=v.height=1;var b=v.getContext("2d");if(!b)return!1;var T=b.getImageData(0,0,1,1);return T&&T.width===v.width}()?(E[d=u&&u.failIfMajorPerformanceCaveat]===void 0&&(E[d]=function(v){var b,T=function(O){var k=document.createElement("canvas"),N=Object.create(w.webGLContextAttributes);return N.failIfMajorPerformanceCaveat=O,k.getContext("webgl",N)||k.getContext("experimental-webgl",N)}(v);if(!T)return!1;try{b=T.createShader(T.VERTEX_SHADER)}catch{return!1}return!(!b||T.isContextLost())&&(T.shaderSource(b,"void main() {}"),T.compileShader(b),T.getShaderParameter(b,T.COMPILE_STATUS)===!0)}(d)),E[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(g)}var E={};function C(g,u,d){const v=o.window.document.createElement(g);return u!==void 0&&(v.className=u),d&&d.appendChild(v),v}function M(g,u,d){const v=o.window.document.createElementNS("http://www.w3.org/2000/svg",g);for(const b of Object.keys(u))v.setAttributeNS(null,b,u[b]);return d&&d.appendChild(v),v}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const I=o.window.document&&o.window.document.documentElement.style,D=I&&I.userSelect!==void 0?"userSelect":"WebkitUserSelect";let $;function B(){I&&D&&($=I[D],I[D]="none")}function F(){I&&D&&(I[D]=$)}function R(g){g.preventDefault(),g.stopPropagation(),o.window.removeEventListener("click",R,!0)}function U(){o.window.addEventListener("click",R,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",R,!0)},0)}function H(g,u){const d=g.getBoundingClientRect();return oe(g,d,u)}function X(g,u){const d=g.getBoundingClientRect(),v=[];for(let b=0;b<u.length;b++)v.push(oe(g,d,u[b]));return v}function ee(g){return o.window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function oe(g,u,d){const v=g.offsetWidth===u.width?1:g.offsetWidth/u.width;return new o.Point((d.clientX-u.left)*v,(d.clientY-u.top)*v)}function ae(g,u){var d=u[0],v=u[1],b=u[2],T=u[3],O=d*T-b*v;return O?(g[0]=T*(O=1/O),g[1]=-v*O,g[2]=-b*O,g[3]=d*O,g):null}function ge(g){const{userImage:u}=g;return!!(u&&u.render&&u.render())&&(g.data.replace(new Uint8Array(u.data.buffer)),!0)}class he extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:d,callback:v}of this.requestors)this._notify(d,v);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,d){this._validate(u,d)&&(this.images[u]=d)}_validate(u,d){let v=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),v=!1),v}_validateStretch(u,d){if(!u)return!0;let v=0;for(const b of u){if(b[0]<v||b[1]<b[0]||d<b[1])return!1;v=b[1]}return!0}_validateContent(u,d){return!(u&&(u.length!==4||u[0]<0||d.data.width<u[0]||u[1]<0||d.data.height<u[1]||u[2]<0||d.data.width<u[2]||u[3]<0||d.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,d){d.version=this.images[u].version+1,this.images[u]=d,this.updatedImages[u]=!0}removeImage(u){const d=this.images[u];delete this.images[u],delete this.patterns[u],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,d){let v=!0;if(!this.isLoaded())for(const b of u)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(u,d):this.requestors.push({ids:u,callback:d})}_notify(u,d){const v={};for(const b of u){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const T=this.images[b];T?v[b]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:!!(T.userImage&&T.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,v)}getPixelSize(){const{width:u,height:d}=this.atlasImage;return{width:u,height:d}}getPattern(u){const d=this.patterns[u],v=this.getImage(u);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new o.ImagePosition(b,v);this.patterns[u]={bin:b,position:T}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const d=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const T in this.patterns)u.push(this.patterns[T].bin);const{w:d,h:v}=o.potpack(u),b=this.atlasImage;b.resize({width:d||1,height:v||1});for(const T in this.patterns){const{bin:O}=this.patterns[T],k=O.x+1,N=O.y+1,q=this.images[T].data,W=q.width,K=q.height;o.RGBAImage.copy(q,b,{x:0,y:0},{x:k,y:N},{width:W,height:K}),o.RGBAImage.copy(q,b,{x:0,y:K-1},{x:k,y:N-1},{width:W,height:1}),o.RGBAImage.copy(q,b,{x:0,y:0},{x:k,y:N+K},{width:W,height:1}),o.RGBAImage.copy(q,b,{x:W-1,y:0},{x:k-1,y:N},{width:1,height:K}),o.RGBAImage.copy(q,b,{x:0,y:0},{x:k+W,y:N},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const d of u){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.images[d];ge(v)&&this.updateImage(d,v)}}}const ve=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(g,u){return function([d,v,b]){const T=o.degToRad(v+90),O=o.degToRad(b);return{x:d*Math.cos(T)*Math.sin(O),y:d*Math.sin(T)*Math.sin(O),z:d*Math.cos(O),azimuthal:v,polar:b}}(g.expression.evaluate(u))}interpolate(g,u,d){return{x:o.number(g.x,u.x,d),y:o.number(g.y,u.y,d),z:o.number(g.z,u.z,d),azimuthal:o.number(g.azimuthal,u.azimuthal,d),polar:o.number(g.polar,u.polar,d)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Ee extends o.Evented{constructor(u){super(),this._transitionable=new o.Transitionable(ve),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,d={}){if(!this._validate(o.validateLight,u,d))for(const v in u){const b=u[v];o.endsWith(v,"-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,d,v){return(!v||v.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Re=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let Ne=class extends o.Evented{constructor(g,u){super(),this._transitionable=new o.Transitionable(Re),this.set(g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(g){for(const u in g){const d=g[u];o.endsWith(u,"-transition")?this._transitionable.setTransition(u.slice(0,-11),d):this._transitionable.setValue(u,d)}}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}};function Ve(g,u,d,v){const b=o.smoothstep(45,65,d),[T,O]=Ke(g,v),k=o.length(u);let N=1-Math.min(1,Math.exp((k-T)/(O-T)*-6));return N*=N*N,N=Math.min(1,1.00747*N),N*b*g.alpha}function Ke(g,u){const d=.5/Math.tan(.5*u);return[g.range[0]+d,g.range[1]+d]}const ke=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class Ge extends o.Evented{constructor(u,d){super(),this._transitionable=new o.Transitionable(ke),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const u=this._transform,d=u.projection.name==="globe",v=o.globeToMercatorTransition(u.zoom),b=this.properties.get("range"),T=[.5,3];return{range:d?[o.number(T[0],b[0],v),o.number(T[1],b[1],v)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,d={}){if(!this._validate(o.validateFog,u,d)){for(const v of Object.keys(o.spec.fog))u&&u[v]===void 0&&(u[v]=o.spec.fog[v].default);for(const v in u){const b=u[v];o.endsWith(v,"-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,u))*d.a}getOpacityAtLatLng(u,d){return this._transform.projection.supportsFog?function(v,b,T){const O=o.MercatorCoordinate.fromLngLat(b),k=T.elevation?T.elevation.getAtPointOrZero(O):0,N=[O.x,O.y,k];return o.transformMat4(N,N,T.mercatorFogMatrix),Ve(v,N,T.pitch,T._fov)}(this.state,u,d):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?Ke(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,d,v){return(!v||v.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Ye{constructor(u,d){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const v=this.workerPool.acquire(this.id);for(let b=0;b<v.length;b++){const T=new Ye.Actor(v[b],d,this.id);T.name=`Worker ${b}`,this.actors.push(T)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(u,d,v){o.asyncAll(this.actors,(b,T)=>{b.send(u,d,T)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function _t(g,u,d){return u*(o.EXTENT/(g.tileSize*Math.pow(2,d-g.tileID.overscaledZ)))}Ye.Actor=o.Actor;class Ot{constructor(u,d,v,b){this.screenBounds=u,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(u,d){let v,b;if(u instanceof o.Point||typeof u[0]=="number"){const T=o.Point.convert(u);v=[T],b=d.isPointAboveHorizon(T)}else{const T=o.Point.convert(u[0]),O=o.Point.convert(u[1]);v=[T,O],b=o.polygonizeBounds(T,O).every(k=>d.isPointAboveHorizon(k))}return new Ot(v,d.getCameraPoint(),b,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],b=o.polygonizeBounds(d,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<v.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?b[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,u)}bufferedCameraGeometryGlobe(u){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],b=o.polygonizeBounds(d,v,u),T=this.cameraPoint.clone();switch(3*((T.y>d.y)+(T.y>v.y))+((T.x>d.x)+(T.x>v.x))){case 0:b[0]=T,b[4]=T.clone();break;case 1:b.splice(1,0,T);break;case 2:b[1]=T;break;case 3:b.splice(4,0,T);break;case 5:b.splice(2,0,T);break;case 6:b[3]=T;break;case 7:b.splice(3,0,T);break;case 8:b[2]=T}return b}containsTile(u,d,v,b=0){const T=u.queryPadding/d._pixelsPerMercatorPixel+1,O=v?this._bufferedCameraMercator(T,d):this._bufferedScreenMercator(T,d);let k=u.tileID.wrap+(O.unwrapped?b:0);const N=O.polygon.map(fe=>o.getTilePoint(u.tileTransform,fe,k));if(!o.polygonIntersectsBox(N,0,0,o.EXTENT,o.EXTENT))return;k=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const q=this.screenGeometryMercator.polygon.map(fe=>o.getTileVec3(u.tileTransform,fe,k)),W=q.map(fe=>new o.Point(fe[0],fe[1])),K=d.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ne=o.getTileVec3(u.tileTransform,K,k),le=q.map(fe=>{const J=o.sub(fe,fe,ne);return o.normalize(J,J),new o.Ray(ne,J)}),ue=_t(u,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:le,bufferedTilespaceGeometry:N,bufferedTilespaceBounds:(ce=o.getBounds(N),ce.min.x=o.clamp(ce.min.x,0,o.EXTENT),ce.min.y=o.clamp(ce.min.y,0,o.EXTENT),ce.max.x=o.clamp(ce.max.x,0,o.EXTENT),ce.max.y=o.clamp(ce.max.y,0,o.EXTENT),ce),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:ue};var ce}_bufferedScreenMercator(u,d){const v=Xt(u);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let b;return b=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),d):{polygon:this.bufferedScreenGeometry(u).map(T=>d.pointCoordinate3D(T)),unwrapped:!0},this._screenRaycastCache[v]=b,b}}_bufferedCameraMercator(u,d){const v=Xt(u);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let b;return b=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),d):{polygon:this.bufferedCameraGeometry(u).map(T=>d.pointCoordinate3D(T)),unwrapped:!0},this._cameraRaycastCache[v]=b,b}}_projectAndResample(u,d){const v=function(T,O){const k=o.multiply([],O.pixelMatrix,O.globeMatrix),N=[0,-o.GLOBE_RADIUS,0,1],q=[0,o.GLOBE_RADIUS,0,1],W=[0,0,0,1];o.transformMat4$1(N,N,k),o.transformMat4$1(q,q,k),o.transformMat4$1(W,W,k);const K=new o.Point(N[0]/N[3],N[1]/N[3]),ne=new o.Point(q[0]/q[3],q[1]/q[3]),le=o.polygonContainsPoint(T,K)&&N[3]<W[3],ue=o.polygonContainsPoint(T,ne)&&q[3]<W[3];if(!le&&!ue)return null;const ce=function(Oe,je,Le){for(let We=1;We<Oe.length;We++){const ut=Zt(je.pointCoordinate3D(Oe[We-1]).x),Be=Zt(je.pointCoordinate3D(Oe[We]).x);if(Le<0){if(ut<Be)return{idx:We,t:-ut/(Be-1-ut)}}else if(Be<ut)return{idx:We,t:(1-ut)/(Be+1-ut)}}return null}(T,O,le?-1:1);if(!ce)return null;const{idx:fe,t:J}=ce;let se=fe>1?bt(T.slice(0,fe),O):[],me=fe<T.length?bt(T.slice(fe),O):[];se=se.map(Oe=>new o.Point(Zt(Oe.x),Oe.y)),me=me.map(Oe=>new o.Point(Zt(Oe.x),Oe.y));const ye=[...se];ye.length===0&&ye.push(me[me.length-1]);const Pe=o.number(ye[ye.length-1].y,(me.length===0?se[0]:me[0]).y,J);let Me;return Me=le?[new o.Point(0,Pe),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Pe)]:[new o.Point(1,Pe),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Pe)],ye.push(...Me),me.length===0?ye.push(se[0]):ye.push(...me),{polygon:ye.map(Oe=>new o.MercatorCoordinate(Oe.x,Oe.y)),unwrapped:!1}}(u,d);if(v)return v;const b=function(T,O){let k=!1,N=-1/0,q=0;for(let K=0;K<T.length-1;K++)T[K].x>N&&(N=T[K].x,q=K);for(let K=0;K<T.length-1;K++){const ne=(q+K)%(T.length-1),le=T[ne],ue=T[ne+1];Math.abs(le.x-ue.x)>.5&&(le.x<ue.x?(le.x+=1,ne===0&&(T[T.length-1].x+=1)):(ue.x+=1,ne+1===T.length-1&&(T[0].x+=1)),k=!0)}const W=o.mercatorXfromLng(O.center.lng);return k&&W<Math.abs(W-1)&&T.forEach(K=>{K.x-=1}),{polygon:T,unwrapped:k}}(bt(u,d).map(T=>new o.Point(Zt(T.x),T.y)),d);return{polygon:b.polygon.map(T=>new o.MercatorCoordinate(T.x,T.y)),unwrapped:b.unwrapped}}}function bt(g,u){return o.resample(g,d=>{const v=u.pointCoordinate3D(d);d.x=v.x,d.y=v.y},1/256)}function Zt(g){return g<0?1+g%1:g%1}function Xt(g){return 100*g|0}function kt(g,u,d,v,b){const T=function(O,k){if(O)return b(O);if(k){g.url&&k.tiles&&g.tiles&&delete g.tiles;const N=o.pick(o.extend(k,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(N.vectorLayers=k.vector_layers,N.vectorLayerIds=N.vectorLayers.map(q=>q.id)),N.tiles=u.canonicalizeTileset(N,g.url),b(null,N)}};return g.url?o.getJSON(u.transformRequest(u.normalizeSourceURL(g.url,null,d,v),o.ResourceType.Source),T):o.exported.frame(()=>T(null,g))}class Mt{constructor(u,d,v){this.bounds=o.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const d=Math.pow(2,u.z),v=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*d),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*d),T=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*d),O=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*d);return u.x>=v&&u.x<T&&u.y>=b&&u.y<O}}class $r{constructor(u,d,v){this.context=u;const b=u.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const St={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dt{constructor(u,d,v,b){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=b,this.context=u;const T=u.gl;this.buffer=T.createBuffer(),u.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,d){for(let v=0;v<this.attributes.length;v++){const b=d.attributes[this.attributes[v].name];b!==void 0&&u.enableVertexAttribArray(b)}}setVertexAttribPointers(u,d,v){for(let b=0;b<this.attributes.length;b++){const T=this.attributes[b],O=d.attributes[T.name];O!==void 0&&u.vertexAttribPointer(O,T.components,u[St[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class xt{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dt extends xt{getDefault(){return o.Color.transparent}set(u){const d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class er extends xt{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Kt extends xt{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Nt extends xt{getDefault(){return[!0,!0,!0,!0]}set(u){const d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class vr extends xt{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class nn extends xt{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class mn extends xt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const d=this.current;(u.func!==d.func||u.ref!==d.ref||u.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class En extends xt{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class gn extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;u?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=u,this.dirty=!1}}class Gn extends xt{getDefault(){return[0,1]}set(u){const d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class xi extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;u?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=u,this.dirty=!1}}class Hn extends xt{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class bi extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;u?d.enable(d.BLEND):d.disable(d.BLEND),this.current=u,this.dirty=!1}}class _r extends xt{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class ui extends xt{getDefault(){return o.Color.transparent}set(u){const d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Yn extends xt{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class No extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;u?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=u,this.dirty=!1}}class ju extends xt{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class al extends xt{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}let lc,$u=class extends xt{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class sl extends xt{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Cs extends xt{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class ll extends xt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class cl extends xt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class cc extends xt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class _f extends xt{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class be extends xt{getDefault(){return null}set(u){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class te extends xt{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class re extends xt{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class _e extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Ce extends xt{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class De extends xt{constructor(u,d){super(u),this.context=u,this.parent=d}getDefault(){return null}}class ze extends De{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class $e extends De{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Ie extends $e{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Xe{constructor(u,d,v,b){this.context=u,this.width=d,this.height=v;const T=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new ze(u,T),b&&(this.depthAttachment=new $e(u,T))}destroy(){const u=this.context.gl,d=this.colorAttachment.get();if(d&&u.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&u.deleteRenderbuffer(v)}u.deleteFramebuffer(this.framebuffer)}}class vt{constructor(u,d=!1){if(this.gl=u,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const v=u;this.extVertexArrayObject={createVertexArrayOES:v.createVertexArray.bind(u),deleteVertexArrayOES:v.deleteVertexArray.bind(u),bindVertexArrayOES:v.bindVertexArray.bind(u)}}this.clearColor=new dt(this),this.clearDepth=new er(this),this.clearStencil=new Kt(this),this.colorMask=new Nt(this),this.depthMask=new vr(this),this.stencilMask=new nn(this),this.stencilFunc=new mn(this),this.stencilOp=new En(this),this.stencilTest=new gn(this),this.depthRange=new Gn(this),this.depthTest=new xi(this),this.depthFunc=new Hn(this),this.blend=new bi(this),this.blendFunc=new _r(this),this.blendColor=new ui(this),this.blendEquation=new Yn(this),this.cullFace=new No(this),this.cullFaceSide=new ju(this),this.frontFace=new al(this),this.program=new $u(this),this.activeTexture=new sl(this),this.viewport=new Cs(this),this.bindFramebuffer=new ll(this),this.bindRenderbuffer=new cl(this),this.bindTexture=new cc(this),this.bindVertexBuffer=new _f(this),this.bindElementBuffer=new be(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new te(this),this.pixelStoreUnpack=new re(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new Ce(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,d){return new $r(this,u,d)}createVertexBuffer(u,d,v){return new Dt(this,u,d,v)}createRenderbuffer(u,d,v){const b=this.gl,T=b.createRenderbuffer();return this.bindRenderbuffer.set(T),b.renderbufferStorage(b.RENDERBUFFER,u,d,v),this.bindRenderbuffer.set(null),T}createFramebuffer(u,d,v){return new Xe(this,u,d,v)}clear({color:u,depth:d,stencil:v}){const b=this.gl;let T=0;u&&(T|=b.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(T|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(T)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){m(u.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wt extends o.Evented{constructor(u,d,v,b){if(super(),this.id=u,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(d,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map._worldview;this._tileJSONRequest=kt(this._options,this.map._requestManager,d,v,(b,T)=>{this._tileJSONRequest=null,this._loaded=!0,b?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),v&&v.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new o.ErrorEvent(b))):T&&(o.extend(this,T),T.bounds&&(this.tileBounds=new Mt(T.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(b)})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(u,d){const v=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(v,o.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=d:u.request=u.actor.send("reloadTile",b,T.bind(this));else if(u.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",b,T.bind(this),void 0,!0);else{const O=o.loadVectorTile.call({deduped:this._deduped},b,(k,N)=>{k||!N?T.call(this,k):(b.data={cacheControl:N.cacheControl,expires:N.expires,rawData:N.rawData.slice(0)},u.actor&&u.actor.send("loadTile",b,T.bind(this),void 0,!0))},!0);u.request={cancel:O}}function T(O,k){return delete u.request,u.aborted?d(null):O&&O.status!==404?d(O):(k&&k.resourceTiming&&(u.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&u.setExpiryData(k),u.loadVectorData(k,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class mt extends o.Evented{constructor(u,d,v,b){super(),this.id=u,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},d),o.extend(this,o.pick(d,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kt(this._options,this.map._requestManager,null,null,(d,v)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new o.ErrorEvent(d)):v&&(o.extend(this,v),v.bounds&&(this.tileBounds=new Mt(v.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(v.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(d)})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,d){const v=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(T,O,k,N)=>(delete u.request,u.aborted?(u.state="unloaded",d(null)):T?(u.state="errored",d(T)):O?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:k,expires:N}),u.setTexture(O,this.map.painter),u.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(u,d,v){u.setTexture(d,v)}static unloadTileData(u,d){u.texture&&d.saveTileTexture(u.texture)}abortTile(u,d){u.request&&(u.request.cancel(),delete u.request),d()}unloadTile(u,d){u.texture&&this.map.painter.saveTileTexture(u.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function or(g,u,d,v,b,T,O,k){const N=[g,d,b,u,v,T,1,1,1],q=[O,k,1],W=o.adjoint([],N),[K,ne,le]=o.transformMat3(q,q,o.transpose(W,W));return o.multiply$1(N,[K,0,0,0,ne,0,0,0,le],N)}class ur extends o.Evented{constructor(u,d,v,b){super(),this.id=u,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=d,this._dirty=!1}load(u,d){this._loaded=d||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(v,b)=>{if(this._imageRequest=null,this._loaded=!0,v)this.fire(new o.ErrorEvent(v));else if(b){const{HTMLImageElement:T}=o.window;this.image=b instanceof T?o.exported.getImageData(b):b,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const d=u.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(v){let b=1/0,T=1/0,O=-1/0,k=-1/0;for(const K of v)b=Math.min(b,K.x),T=Math.min(T,K.y),O=Math.max(O,K.x),k=Math.max(k,K.y);const N=Math.max(O-b,k-T),q=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),W=Math.pow(2,q);return new o.CanonicalTileID(q,Math.floor((b+O)/2*W),Math.floor((T+k)/2*W))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const N in this.tiles){const q=this.tiles[N];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}if(this._boundsArray)return;const d=o.tileTransform(this.tileID,this.map.transform.projection),[v,b,T,O]=this.coordinates.map(N=>{const q=d.projection.project(N[0],N[1]);return o.getTilePoint(d,q)._round()});this.perspectiveTransform=function(N,q,W,K,ne,le,ue,ce,fe,J){const se=or(0,0,N,0,0,q,N,q),me=or(W,K,ne,le,ue,ce,fe,J);return o.multiply$1(me,o.adjoint(se,se),me),[me[6]/me[8]*N/o.EXTENT,me[7]/me[8]*q/o.EXTENT]}(this.width,this.height,v.x,v.y,b.x,b.y,O.x,O.y,T.x,T.y);const k=this._boundsArray=new o.StructArrayLayout4i8;k.emplaceBack(v.x,v.y,0,0),k.emplaceBack(b.x,b.y,o.EXTENT,0),k.emplaceBack(O.x,O.y,0,o.EXTENT),k.emplaceBack(T.x,T.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(k,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,d=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(u,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,d){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},d(null)):(u.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ar={vector:wt,raster:mt,"raster-dem":class extends mt{constructor(g,u,d,v){super(g,u,d,v),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(g,u){const d=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(b,T){b&&(g.state="errored",u(b)),T&&(g.dem=T,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",u(null))}g.request=o.getImage(this.map._requestManager.transformRequest(d,o.ResourceType.Tile),(function(b,T,O,k){if(delete g.request,g.aborted)g.state="unloaded",u(null);else if(b)g.state="errored",u(b);else if(T){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:O,expires:k});const N=o.window.ImageBitmap&&T instanceof o.window.ImageBitmap&&(lc==null&&(lc=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),lc),q=1-(T.width-o.prevPowerOfTwo(T.width))/2;q<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const W=N?T:o.exported.getImageData(T,q),K={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:W,encoding:this.encoding,padding:q};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",K,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const u=g.canonical,d=Math.pow(2,u.z),v=(u.x-1+d)%d,b=u.x===0?g.wrap-1:g.wrap,T=(u.x+1+d)%d,O=u.x+1===d?g.wrap+1:g.wrap,k={};return k[new o.OverscaledTileID(g.overscaledZ,b,u.z,v,u.y).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,O,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(k[new o.OverscaledTileID(g.overscaledZ,b,u.z,v,u.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,g.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,O,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<d&&(k[new o.OverscaledTileID(g.overscaledZ,b,u.z,v,u.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,g.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,O,u.z,T,u.y+1).key]={backfilled:!1}),k}unloadTile(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded"}},geojson:class extends o.Evented{constructor(g,u,d,v){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=u.data,this._options=o.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*b,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*b,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},u),this}getClusterChildren(g,u){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},u),this}getClusterLeaves(g,u,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:u,offset:d},v),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const g=o.extend({},this.workerOptions),u=this._data;typeof u=="string"?(g.request=this.map._requestManager.transformRequest(o.exported.resolveURL(u),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(d,v)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new o.ErrorEvent(d));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,u){const d=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(d,{type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(v,b)=>(delete g.request,g.unloadVectorData(),g.aborted?u(null):v?u(v):(g.loadVectorData(b,this.map.painter,d==="reloadTile"),u(null))),void 0,d==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ur{constructor(g,u,d,v){super(g,u,d,v),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const u of g.urls)this.urls.push(this.map._requestManager.transformRequest(u,o.ResourceType.Source).url);o.getVideo(this.urls,(u,d)=>{this._loaded=!0,u?this.fire(new o.ErrorEvent(u)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const u=this.video.seekable;g<u.start(0)||g>u.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,u=g.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(g,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ur,canvas:class extends ur{constructor(g,u,d,v){super(g,u,d,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(T=>typeof T!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends o.Evented{constructor(g,u,d,v){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=u,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Mt(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:u,y:d,z:v}=g.canonical;return this._implementation.hasTile({x:u,y:d,z:v})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,u){const{x:d,y:v,z:b}=g.tileID.canonical,T=new o.window.AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:d,y:v,z:b},{signal:T.signal})).then((function(O){return delete g.request,g.aborted?(g.state="unloaded",u(null)):O===void 0?(g.state="errored",u(null)):O===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",u(null)):function(k){return k instanceof o.window.ImageData||k instanceof o.window.HTMLCanvasElement||k instanceof o.window.ImageBitmap||k instanceof o.window.HTMLImageElement}(O)?(this.loadTileData(g,O),g.state="loaded",void u(null)):(g.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(O=>{O.code!==20&&(g.state="errored",u(O))}),g.request.cancel=()=>T.abort()}loadTileData(g,u){mt.loadTileData(g,u,this._map.painter)}unloadTileData(g){mt.unloadTileData(g,this._map.painter)}unloadTile(g,u){if(this.unloadTileData(g),this._implementation.unloadTile){const{x:d,y:v,z:b}=g.tileID.canonical;this._implementation.unloadTile({x:d,y:v,z:b})}u()}abortTile(g,u){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},hr=function(g,u,d,v){const b=new ar[u.type](g,u,d,v);if(b.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function br(g,u){const d=o.identity([]);return o.scale(d,d,[.5*g.width,.5*-g.height,1]),o.translate(d,d,[1,-1,0]),o.multiply(d,d,g.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(d)}function cn(g,u,d,v,b,T,O,k=!1){const N=g.tilesIn(v,O,k);N.sort(wi);const q=[];for(const K of N)q.push({wrappedTileID:K.tile.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(u,d,g._state,K,b,T,br(g.transform,K.tile.tileID),k)});const W=function(K){const ne={},le={};for(const ue of K){const ce=ue.queryResults,fe=ue.wrappedTileID,J=le[fe]=le[fe]||{};for(const se in ce){const me=ce[se],ye=J[se]=J[se]||{},Pe=ne[se]=ne[se]||[];for(const Me of me)ye[Me.featureIndex]||(ye[Me.featureIndex]=!0,Pe.push(Me))}}return ne}(q);for(const K in W)W[K].forEach(ne=>{const le=ne.feature,ue=le.layer;ue&&ue.type!=="background"&&ue.type!=="sky"&&(le.source=ue.source,ue["source-layer"]&&(le.sourceLayer=ue["source-layer"]),le.state=le.id!==void 0?g.getFeatureState(ue["source-layer"],le.id):{})});return W}function Mn(g,u){const d=g.getRenderableIds().map(T=>g.getTileByID(T)),v=[],b={};for(let T=0;T<d.length;T++){const O=d[T],k=O.tileID.canonical.key;b[k]||(b[k]=!0,O.querySourceFeatures(v,u))}return v}function wi(g,u){const d=g.tileID,v=u.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Un(){return Pc.workerClass!=null?new Pc.workerClass:new o.window.Worker(Pc.workerUrl)}const aa="mapboxgl_preloaded_worker_pool";class Jn{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Jn.workerCount;)this.workers.push(new Un);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[aa]}numActive(){return Object.keys(this.active).length}}let Ri;function uc(){return Ri||(Ri=new Jn),Ri}function tE(g,u){const d={};for(const v in g)v!=="ref"&&(d[v]=g[v]);return o.refProperties.forEach(v=>{v in u&&(d[v]=u[v])}),d}function M_(g){g=g.slice();const u=Object.create(null);for(let d=0;d<g.length;d++)u[g[d].id]=g[d];for(let d=0;d<g.length;d++)"ref"in g[d]&&(g[d]=tE(g[d],u[g[d].ref]));return g}Jn.workerCount=2;const Or={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function om(g,u,d){d.push({command:Or.addSource,args:[g,u[g]]})}function Nu(g,u,d){u.push({command:Or.removeSource,args:[g]}),d[g]=!0}function am(g,u,d,v){Nu(g,d,v),om(g,u,d)}function xf(g,u,d){let v;for(v in g[d])if(g[d].hasOwnProperty(v)&&v!=="data"&&!m(g[d][v],u[d][v]))return!1;for(v in u[d])if(u[d].hasOwnProperty(v)&&v!=="data"&&!m(g[d][v],u[d][v]))return!1;return!0}function sa(g,u,d,v,b,T){let O;for(O in u=u||{},g=g||{})g.hasOwnProperty(O)&&(m(g[O],u[O])||d.push({command:T,args:[v,O,u[O],b]}));for(O in u)u.hasOwnProperty(O)&&!g.hasOwnProperty(O)&&(m(g[O],u[O])||d.push({command:T,args:[v,O,u[O],b]}))}function Ua(g){return g.id}function sm(g,u){return g[u.id]=u,g}class lm{constructor(u,d){this.reset(u,d)}reset(u,d){this.points=u||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.clamp(u,0,1);let d=1,v=this._distances[d];const b=u*this.paddedLength+this.padding;for(;v<b&&d<this._distances.length;)v=this._distances[++d];const T=d-1,O=this._distances[T],k=v-O,N=k>0?(b-O)/k:0;return this.points[T].mult(1-N).add(this.points[d].mult(N))}}class ul{constructor(u,d,v){const b=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(u/v),this.yCellCount=Math.ceil(d/v);for(let O=0;O<this.xCellCount*this.yCellCount;O++)b.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=d,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,d,v,b,T){this._forEachCell(d,v,b,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(T)}insertCircle(u,d,v,b){this._forEachCell(d-b,v-b,d+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(d),this.circles.push(v),this.circles.push(b)}_insertBoxCell(u,d,v,b,T,O){this.boxCells[T].push(O)}_insertCircleCell(u,d,v,b,T,O){this.circleCells[T].push(O)}_query(u,d,v,b,T,O){if(v<0||u>this.width||b<0||d>this.height)return!T&&[];const k=[];if(u<=0&&d<=0&&this.width<=v&&this.height<=b){if(T)return!0;for(let N=0;N<this.boxKeys.length;N++)k.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const q=this.circles[3*N],W=this.circles[3*N+1],K=this.circles[3*N+2];k.push({key:this.circleKeys[N],x1:q-K,y1:W-K,x2:q+K,y2:W+K})}return O?k.filter(O):k}return this._forEachCell(u,d,v,b,this._queryCell,k,{hitTest:T,seenUids:{box:{},circle:{}}},O),T?k.length>0:k}_queryCircle(u,d,v,b,T){const O=u-v,k=u+v,N=d-v,q=d+v;if(k<0||O>this.width||q<0||N>this.height)return!b&&[];const W=[];return this._forEachCell(O,N,k,q,this._queryCellCircle,W,{hitTest:b,circle:{x:u,y:d,radius:v},seenUids:{box:{},circle:{}}},T),b?W.length>0:W}query(u,d,v,b,T){return this._query(u,d,v,b,!1,T)}hitTest(u,d,v,b,T){return this._query(u,d,v,b,!0,T)}hitTestCircle(u,d,v,b){return this._queryCircle(u,d,v,!0,b)}_queryCell(u,d,v,b,T,O,k,N){const q=k.seenUids,W=this.boxCells[T];if(W!==null){const ne=this.bboxes;for(const le of W)if(!q.box[le]){q.box[le]=!0;const ue=4*le;if(u<=ne[ue+2]&&d<=ne[ue+3]&&v>=ne[ue+0]&&b>=ne[ue+1]&&(!N||N(this.boxKeys[le]))){if(k.hitTest)return O.push(!0),!0;O.push({key:this.boxKeys[le],x1:ne[ue],y1:ne[ue+1],x2:ne[ue+2],y2:ne[ue+3]})}}}const K=this.circleCells[T];if(K!==null){const ne=this.circles;for(const le of K)if(!q.circle[le]){q.circle[le]=!0;const ue=3*le;if(this._circleAndRectCollide(ne[ue],ne[ue+1],ne[ue+2],u,d,v,b)&&(!N||N(this.circleKeys[le]))){if(k.hitTest)return O.push(!0),!0;{const ce=ne[ue],fe=ne[ue+1],J=ne[ue+2];O.push({key:this.circleKeys[le],x1:ce-J,y1:fe-J,x2:ce+J,y2:fe+J})}}}}}_queryCellCircle(u,d,v,b,T,O,k,N){const q=k.circle,W=k.seenUids,K=this.boxCells[T];if(K!==null){const le=this.bboxes;for(const ue of K)if(!W.box[ue]){W.box[ue]=!0;const ce=4*ue;if(this._circleAndRectCollide(q.x,q.y,q.radius,le[ce+0],le[ce+1],le[ce+2],le[ce+3])&&(!N||N(this.boxKeys[ue])))return O.push(!0),!0}}const ne=this.circleCells[T];if(ne!==null){const le=this.circles;for(const ue of ne)if(!W.circle[ue]){W.circle[ue]=!0;const ce=3*ue;if(this._circlesCollide(le[ce],le[ce+1],le[ce+2],q.x,q.y,q.radius)&&(!N||N(this.circleKeys[ue])))return O.push(!0),!0}}}_forEachCell(u,d,v,b,T,O,k,N){const q=this._convertToXCellCoord(u),W=this._convertToYCellCoord(d),K=this._convertToXCellCoord(v),ne=this._convertToYCellCoord(b);for(let le=q;le<=K;le++)for(let ue=W;ue<=ne;ue++)if(T.call(this,u,d,v,b,this.xCellCount*ue+le,O,k,N))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,d,v,b,T,O){const k=b-u,N=T-d,q=v+O;return q*q>k*k+N*N}_circleAndRectCollide(u,d,v,b,T,O,k){const N=(O-b)/2,q=Math.abs(u-(b+N));if(q>N+v)return!1;const W=(k-T)/2,K=Math.abs(d-(T+W));if(K>W+v)return!1;if(q<=N||K<=W)return!0;const ne=q-N,le=K-W;return ne*ne+le*le<=v*v}}const Va={unknown:0,flipRequired:1,flipNotRequired:2},zu=Math.tan(85*Math.PI/180);function Qe(g,u,d,v,b,T,O){const k=o.create();if(d)if(T.name==="globe"){const N=o.calculateGlobeLabelMatrix(b,u);o.multiply(k,k,N)}else{const N=ae([],O);k[0]=N[0],k[1]=N[1],k[4]=N[2],k[5]=N[3],v||o.rotateZ(k,k,b.angle)}else o.multiply(k,b.labelPlaneMatrix,g);return k}function Wa(g,u,d,v,b,T,O){const k=Qe(g,u,d,v,b,T,O);return T.name==="globe"&&d||(k[2]=k[6]=k[10]=k[14]=0),k}function kn(g,u,d,v,b,T,O){if(d){if(T.name==="globe"){const k=Qe(g,u,d,v,b,T,O);return o.invert(k,k),o.multiply(k,g,k),k}{const k=o.clone(g),N=o.identity([]);return N[0]=O[0],N[1]=O[1],N[4]=O[2],N[5]=O[3],o.multiply(k,k,N),v||o.rotateZ(k,k,-b.angle),k}}return b.glCoordMatrix}function Qn(g,u,d,v){const b=[g,u,d,1];d?o.transformMat4$1(b,b,v):mr(b,b,v);const T=b[3];return b[0]/=T,b[1]/=T,b[2]/=T,b}function k_(g,u){return Math.min(.5+g/u*.5,1.5)}function la(g,u){const d=g[0]/g[3],v=g[1]/g[3];return d>=-u[0]&&d<=u[0]&&v>=-u[1]&&v<=u[1]}function cm(g,u,d,v,b,T,O,k,N,q){const W=d.transform,K=v?g.textSizeData:g.iconSizeData,ne=o.evaluateSizeForZoom(K,d.transform.zoom),le=W.projection.name==="globe",ue=[256/d.width*2+1,256/d.height*2+1],ce=v?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ce.clear();let fe=null;le&&(fe=v?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const J=g.lineVertexArray,se=v?g.text.placedSymbolArray:g.icon.placedSymbolArray,me=d.transform.width/d.transform.height;let ye,Pe=!1;for(let Me=0;Me<se.length;Me++){const Oe=se.get(Me),{numGlyphs:je,writingMode:Le}=Oe;if(Le!==o.WritingMode.vertical||Pe||ye===o.WritingMode.horizontal||(Pe=!0),ye=Le,(Oe.hidden||Le===o.WritingMode.vertical)&&!Pe){zo(je,ce);continue}Pe=!1;const We=new o.Point(Oe.tileAnchorX,Oe.tileAnchorY);let{x:ut,y:Be,z:rt}=W.projection.projectTilePoint(We.x,We.y,q.canonical);if(N){const[Jt,jt,qt]=N(We);ut+=Jt,Be+=jt,rt+=qt}const He=[ut,Be,rt,1];if(o.transformMat4$1(He,He,u),!la(He,ue)){zo(je,ce);continue}const lt=k_(d.transform.cameraToCenterDistance,He[3]),Ue=o.evaluateSizeForFeature(K,ne,Oe),tt=O?Ue/lt:Ue*lt,ft=Qn(ut,Be,rt,b);if(ft[3]<=0){zo(je,ce);continue}let ot={};const pt=O?null:N,Bt=Pt(Oe,tt,!1,k,u,b,T,g.glyphOffsetArray,J,ce,fe,ft,We,ot,me,pt,W.projection,q,O);Pe=Bt.useVertical,pt&&Bt.needsFlipping&&(ot={}),(Bt.notEnoughRoom||Pe||Bt.needsFlipping&&Pt(Oe,tt,!0,k,u,b,T,g.glyphOffsetArray,J,ce,fe,ft,We,ot,me,pt,W.projection,q,O).notEnoughRoom)&&zo(je,ce)}v?(g.text.dynamicLayoutVertexBuffer.updateData(ce),fe&&g.text.globeExtVertexBuffer.updateData(fe)):(g.icon.dynamicLayoutVertexBuffer.updateData(ce),fe&&g.icon.globeExtVertexBuffer.updateData(fe))}function I_(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce){const{lineStartIndex:fe,glyphStartIndex:J,segment:se}=k,me=J+k.numGlyphs,ye=fe+k.lineLength,Pe=u.getoffsetX(J),Me=u.getoffsetX(me-1),Oe=io(g*Pe,d,v,b,T,O,se,fe,ye,N,q,W,K,ne,!0,le,ue,ce);if(!Oe)return null;const je=io(g*Me,d,v,b,T,O,se,fe,ye,N,q,W,K,ne,!0,le,ue,ce);return je?{first:Oe,last:je}:null}function hc(g,u,d,v){return g===o.WritingMode.horizontal&&Math.abs(v)>Math.abs(d)?{useVertical:!0}:g===o.WritingMode.vertical?v>0?{needsFlipping:!0}:null:u!==Va.unknown&&function(b,T){return b===0||Math.abs(T/b)>zu}(d,v)?u===Va.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Pt(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce,fe,J,se){const me=u/24,ye=g.lineOffsetX*me,Pe=g.lineOffsetY*me,{lineStartIndex:Me,glyphStartIndex:Oe,numGlyphs:je,segment:Le,writingMode:We,flipState:ut}=g,Be=Me+g.lineLength,rt=He=>{if(W){const[ft,ot,pt]=He.up,Bt=q.length;o.updateGlobeVertexNormal(W,Bt+0,ft,ot,pt),o.updateGlobeVertexNormal(W,Bt+1,ft,ot,pt),o.updateGlobeVertexNormal(W,Bt+2,ft,ot,pt),o.updateGlobeVertexNormal(W,Bt+3,ft,ot,pt)}const[lt,Ue,tt]=He.point;o.addDynamicAttributes(q,lt,Ue,tt,He.angle)};if(je>1){const He=I_(me,k,ye,Pe,d,K,ne,g,N,T,le,ce,!1,fe,J,se);if(!He)return{notEnoughRoom:!0};if(v&&!d){let[lt,Ue,tt]=He.first.point,[ft,ot,pt]=He.last.point;[lt,Ue]=Qn(lt,Ue,tt,O),[ft,ot]=Qn(ft,ot,pt,O);const Bt=hc(We,ut,(ft-lt)*ue,ot-Ue);if(g.flipState=Bt&&Bt.needsFlipping?Va.flipRequired:Va.flipNotRequired,Bt)return Bt}rt(He.first);for(let lt=Oe+1;lt<Oe+je-1;lt++){const Ue=io(me*k.getoffsetX(lt),ye,Pe,d,K,ne,Le,Me,Be,N,T,le,ce,!1,!1,fe,J,se);if(!Ue)return q.length-=4*(lt-Oe),{notEnoughRoom:!0};rt(Ue)}rt(He.last)}else{if(v&&!d){const lt=Qn(ne.x,ne.y,0,b),Ue=Me+Le+1,tt=new o.Point(N.getx(Ue),N.gety(Ue)),ft=Qn(tt.x,tt.y,0,b),ot=ft[3]>0?ft:pr(ne,tt,lt,1,b,void 0,fe,J.canonical),pt=hc(We,ut,(ot[0]-lt[0])*ue,ot[1]-lt[1]);if(g.flipState=pt&&pt.needsFlipping?Va.flipRequired:Va.flipNotRequired,pt)return pt}const He=io(me*k.getoffsetX(Oe),ye,Pe,d,K,ne,Le,Me,Be,N,T,le,ce,!1,!1,fe,J,se);if(!He)return{notEnoughRoom:!0};rt(He)}return{}}function xr(g,u,d,v,b){const{x:T,y:O,z:k}=v.projectTilePoint(g.x,g.y,u);if(!b)return Qn(T,O,k,d);const[N,q,W]=b(g);return Qn(T+N,O+q,k+W,d)}function pr(g,u,d,v,b,T,O,k){const N=xr(g.sub(u)._unit()._add(g),k,b,O,T);return o.sub(N,d,N),o.normalize(N,N),o.scaleAndAdd(N,d,N,v)}function io(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce,fe,J){const se=v?g-u:g+u;let me=se>0?1:-1,ye=0;v&&(me*=-1,ye=Math.PI),me<0&&(ye+=Math.PI);let Pe=k+O+(me>0?0:1)|0,Me=b,Oe=b,je=0,Le=0;const We=Math.abs(se),ut=[],Be=[];let rt=T,He=rt;const lt=()=>pr(He,rt,Oe,We-je+1,W,ne,ce,fe.canonical);for(;je+Le<=We;){if(Pe+=me,Pe<k||Pe>=N)return null;if(Oe=Me,He=rt,ut.push(Oe),le&&Be.push(He),rt=new o.Point(q.getx(Pe),q.gety(Pe)),Me=K[Pe],!Me){const qt=xr(rt,fe.canonical,W,ce,ne);Me=qt[3]>0?K[Pe]=qt:lt()}je+=Le,Le=o.distance(Oe,Me)}ue&&ne&&(K[Pe]&&(Me=lt(),Le=o.distance(Oe,Me)),K[Pe]=Me);const Ue=(We-je)/Le,tt=rt.sub(He)._mult(Ue)._add(He),ft=o.sub([],Me,Oe),ot=o.scaleAndAdd([],Oe,ft,Ue);let pt=[0,0,1],Bt=ft[0],Jt=ft[1];if(J&&(pt=ce.upVector(fe.canonical,tt.x,tt.y),pt[0]!==0||pt[1]!==0||pt[2]!==1)){const qt=[pt[2],0,-pt[0]],gr=o.cross([],pt,qt);o.normalize(qt,qt),o.normalize(gr,gr),Bt=o.dot(ft,qt),Jt=o.dot(ft,gr)}if(d){const qt=o.cross([],pt,ft);o.normalize(qt,qt),o.scaleAndAdd(ot,ot,qt,d*me)}const jt=ye+Math.atan2(Jt,Bt);return ut.push(ot),le&&Be.push(tt),{point:ot,angle:jt,path:ut,tilePath:Be,up:pt}}function zo(g,u){const d=u.length,v=d+4*g;u.resize(v),u.float32.fill(-1/0,4*d,4*v)}function mr(g,u,d){const v=u[0],b=u[1];return g[0]=d[0]*v+d[4]*b+d[12],g[1]=d[1]*v+d[5]*b+d[13],g[3]=d[3]*v+d[7]*b+d[15],g}const oo=100;class Bu{constructor(u,d,v=new ul(u.width+200,u.height+200,25),b=new ul(u.width+200,u.height+200,25)){this.transform=u,this.grid=v,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+oo,this.screenBottomBoundary=u.height+oo,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=d}placeCollisionBox(u,d,v,b,T,O,k,N){let q=v.projectedAnchorX,W=v.projectedAnchorY,K=v.projectedAnchorZ;const ne=v.elevation,le=v.tileID,ue=u.getProjection();if(ne&&le){const[Me,Oe,je]=ue.upVector(le.canonical,v.tileAnchorX,v.tileAnchorY),Le=ue.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;q+=Me*ne*Le,W+=Oe*ne*Le,K+=je*ne*Le}const ce=this.projectAndGetPerspectiveRatio(k,q,W,K,v.tileID,ue.name==="globe"||!!ne||this.transform.pitch>0,ue),fe=O*ce.perspectiveRatio,J=(v.x1*d+b.x-v.padding)*fe+ce.point.x,se=(v.y1*d+b.y-v.padding)*fe+ce.point.y,me=(v.x2*d+b.x+v.padding)*fe+ce.point.x,ye=(v.y2*d+b.y+v.padding)*fe+ce.point.y,Pe=ce.perspectiveRatio<=.55||ce.occluded;return!this.isInsideGrid(J,se,me,ye)||!T&&this.grid.hitTest(J,se,me,ye,N)||Pe?{box:[],offscreen:!1,occluded:ce.occluded}:{box:[J,se,me,ye],offscreen:this.isOffscreen(J,se,me,ye),occluded:!1}}placeCollisionCircles(u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce){const fe=[],J=this.transform.elevation,se=u.getProjection(),me=J?J.getAtTileOffsetFunc(ce,this.transform.center.lat,this.transform.worldSize,se):null,ye=new o.Point(v.tileAnchorX,v.tileAnchorY);let{x:Pe,y:Me,z:Oe}=se.projectTilePoint(ye.x,ye.y,ce.canonical);if(me){const[tt,ft,ot]=me(ye);Pe+=tt,Me+=ft,Oe+=ot}const je=se.name==="globe",Le=this.projectAndGetPerspectiveRatio(k,Pe,Me,Oe,ce,je||!!J||this.transform.pitch>0,se),{perspectiveRatio:We}=Le,ut=(K?O/We:O*We)/o.ONE_EM,Be=Qn(Pe,Me,Oe,N),rt=Le.signedDistanceFromCamera>0?I_(ut,T,v.lineOffsetX*ut,v.lineOffsetY*ut,!1,Be,ye,v,b,N,{},J&&!K?me:null,K&&!!J,se,ce,K):null;let He=!1,lt=!1,Ue=!0;if(rt&&!Le.occluded){const tt=.5*le*We+ue,ft=new o.Point(-100,-100),ot=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),pt=new lm,{first:Bt,last:Jt}=rt,jt=Bt.path.length;let qt=[];for(let zt=jt-1;zt>=1;zt--)qt.push(Bt.path[zt]);for(let zt=1;zt<Jt.path.length;zt++)qt.push(Jt.path[zt]);const gr=2.5*tt;q&&(qt=qt.map(([zt,Ir,Nr],zr)=>(me&&!je&&(Nr=me(zr<jt-1?Bt.tilePath[jt-1-zr]:Jt.tilePath[zr-jt+2])[2]),Qn(zt,Ir,Nr,q))),qt.some(zt=>zt[3]<=0)&&(qt=[]));let fr=[];if(qt.length>0){let zt=1/0,Ir=-1/0,Nr=1/0,zr=-1/0;for(const Br of qt)zt=Math.min(zt,Br[0]),Nr=Math.min(Nr,Br[1]),Ir=Math.max(Ir,Br[0]),zr=Math.max(zr,Br[1]);Ir>=ft.x&&zt<=ot.x&&zr>=ft.y&&Nr<=ot.y&&(fr=[qt.map(Br=>new o.Point(Br[0],Br[1]))],(zt<ft.x||Ir>ot.x||Nr<ft.y||zr>ot.y)&&(fr=o.clipLine(fr,ft.x,ft.y,ot.x,ot.y)))}for(const zt of fr){pt.reset(zt,.25*tt);let Ir=0;Ir=pt.length<=.5*tt?1:Math.ceil(pt.paddedLength/gr)+1;for(let Nr=0;Nr<Ir;Nr++){const zr=Nr/Math.max(Ir-1,1),Br=pt.lerp(zr),Ei=Br.x+oo,ti=Br.y+oo;fe.push(Ei,ti,tt,0);const xo=Ei-tt,fa=ti-tt,an=Ei+tt,Fr=ti+tt;if(Ue=Ue&&this.isOffscreen(xo,fa,an,Fr),lt=lt||this.isInsideGrid(xo,fa,an,Fr),!d&&this.grid.hitTestCircle(Ei,ti,tt,ne)&&(He=!0,!W))return{circles:[],offscreen:!1,collisionDetected:He,occluded:!1}}}}return{circles:!W&&He||!lt?[]:fe,offscreen:Ue,collisionDetected:He,occluded:Le.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,b=1/0,T=-1/0,O=-1/0;for(const W of u){const K=new o.Point(W.x+oo,W.y+oo);v=Math.min(v,K.x),b=Math.min(b,K.y),T=Math.max(T,K.x),O=Math.max(O,K.y),d.push(K)}const k=this.grid.query(v,b,T,O).concat(this.ignoredGrid.query(v,b,T,O)),N={},q={};for(const W of k){const K=W.key;if(N[K.bucketInstanceId]===void 0&&(N[K.bucketInstanceId]={}),N[K.bucketInstanceId][K.featureIndex])continue;const ne=[new o.Point(W.x1,W.y1),new o.Point(W.x2,W.y1),new o.Point(W.x2,W.y2),new o.Point(W.x1,W.y2)];o.polygonIntersectsPolygon(d,ne)&&(N[K.bucketInstanceId][K.featureIndex]=!0,q[K.bucketInstanceId]===void 0&&(q[K.bucketInstanceId]=[]),q[K.bucketInstanceId].push(K.featureIndex))}return q}insertCollisionBox(u,d,v,b,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:T},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,d,v,b,T){const O=d?this.ignoredGrid:this.grid,k={bucketInstanceId:v,featureIndex:b,collisionGroupID:T};for(let N=0;N<u.length;N+=4)O.insertCircle(k,u[N],u[N+1],u[N+2])}projectAndGetPerspectiveRatio(u,d,v,b,T,O,k){const N=[d,v,b,1];let q=!1;b||this.transform.pitch>0?(o.transformMat4$1(N,N,u),this.fogState&&T&&k.name!=="globe"&&(q=function(ne,le,ue,ce,fe,J){const se=J.calculateFogTileMatrix(fe),me=[le,ue,ce];return o.transformMat4(me,me,se),Ve(ne,me,J.pitch,J._fov)}(this.fogState,d,v,b,T.toUnwrapped(),this.transform)>.9)):mr(N,N,u);const W=N[3];return{point:new o.Point((N[0]/W+1)/2*this.transform.width+oo,(-N[1]/W+1)/2*this.transform.height+oo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/W*.5,1.5),signedDistanceFromCamera:W,occluded:O&&N[2]>W||q}}isOffscreen(u,d,v,b){return v<oo||u>=this.screenRightBoundary||b<oo||d>this.screenBottomBoundary}isInsideGrid(u,d,v,b){return v>=0&&u<this.gridRightBoundary&&b>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const u=o.identity([]);return o.translate(u,u,[-100,-100,0]),u}}function hl(g,u,d){const v=u.createTileMatrix(g,g.worldSize,d.toUnwrapped());return o.multiply(new Float32Array(16),g.projMatrix,v)}function go(g,u,d){if(u.projection.name===d.projection.name)return g.projMatrix;const v=d.clone();return v.setProjection(u.projection),hl(v,u.getProjection(),g)}function on(g,u,d){return u.name===d.projection.name?g.projMatrix:hl(d,u,g)}class D_{constructor(u,d,v,b){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?d:-d))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class qa{constructor(u,d,v,b,T,O=!1){this.text=new D_(u?u.text:null,d,v,T),this.icon=new D_(u?u.icon:null,d,b,T),this.clipped=O}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fu{constructor(u,d,v,b=!1){this.text=u,this.icon=d,this.skipFade=v,this.clipped=b}}class Uu{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class um{constructor(u,d,v,b,T){this.bucketInstanceId=u,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=T}}class R_{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const d=++this.maxGroupID;this.collisionGroups[u]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[u]}}function Vu(g,u,d,v,b){const{horizontalAlign:T,verticalAlign:O}=o.getAnchorAlignment(g),k=-(T-.5)*u,N=-(O-.5)*d,q=o.evaluateVariableOffset(g,v);return new o.Point(k+q[0]*b,N+q[1]*b)}function Wu(g,u,d,v,b){const T=new o.Point(g,u);return d&&T._rotate(v?b:-b),T}class bf{constructor(u,d,v,b,T){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new Bu(this.transform,T),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new R_(v),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,d,v,b){const T=v.getBucket(d),O=v.latestFeatureIndex;if(!T||!O||d.id!==T.layerIds[0])return;const k=T.layers[0].layout,N=v.collisionBoxArray,q=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),W=v.tileSize/o.EXTENT,K=v.tileID.toUnwrapped();this.transform.setProjection(T.projection);const ne=(le=v.tileID,ue=T.getProjection(),ce=this.transform,ue.name===this.projection?ce.calculateProjMatrix(le.toUnwrapped()):hl(ce,ue,le));var le,ue,ce;const fe=k.get("text-pitch-alignment")==="map",J=k.get("text-rotation-alignment")==="map";d.compileFilter();const se=d.dynamicFilter(),me=d.dynamicFilterNeedsFeature(),ye=this.transform.calculatePixelsToTileUnitsMatrix(v),Pe=Wa(ne,v.tileID.canonical,fe,J,this.transform,T.getProjection(),ye);let Me=null;if(fe){const Le=kn(ne,v.tileID.canonical,fe,J,this.transform,T.getProjection(),ye);Me=o.multiply([],this.transform.labelPlaneMatrix,Le)}let Oe=null;se&&v.latestFeatureIndex&&(Oe={unwrappedTileID:K,dynamicFilter:se,dynamicFilterNeedsFeature:me,featureIndex:v.latestFeatureIndex}),this.retainedQueryData[T.bucketInstanceId]=new um(T.bucketInstanceId,O,T.sourceLayerIndex,T.index,v.tileID);const je={bucket:T,layout:k,posMatrix:ne,textLabelPlaneMatrix:Pe,labelToScreenMatrix:Me,clippingData:Oe,scale:q,textPixelRatio:W,holdingForFade:v.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(T.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(b)for(const Le of T.sortKeyRanges){const{sortKey:We,symbolInstanceStart:ut,symbolInstanceEnd:Be}=Le;u.push({sortKey:We,symbolInstanceStart:ut,symbolInstanceEnd:Be,parameters:je})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:je})}attemptAnchorPlacement(u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce,fe,J,se){const{textOffset0:me,textOffset1:ye,crossTileID:Pe}=ne,Me=[me,ye],Oe=Vu(u,v,b,Me,T),je=this.collisionIndex.placeCollisionBox(ue,T,d,Wu(Oe.x,Oe.y,O,k,this.transform.angle),K,N,q,W.predicate);if(fe){const Le=ue.getSymbolInstanceIconSize(se,this.transform.zoom,ne.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ue,Le,fe,Wu(Oe.x,Oe.y,O,k,this.transform.angle),K,N,q,W.predicate).box.length===0)return}if(je.box.length>0){let Le;return this.prevPlacement&&this.prevPlacement.variableOffsets[Pe]&&this.prevPlacement.placements[Pe]&&this.prevPlacement.placements[Pe].text&&(Le=this.prevPlacement.variableOffsets[Pe].anchor),this.variableOffsets[Pe]={textOffset:Me,width:v,height:b,anchor:u,textScale:T,prevAnchor:Le},this.markUsedJustification(ue,u,ne,ce),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ce,ne),this.placedOrientations[Pe]=ce),{shift:Oe,placedGlyphBoxes:je}}}placeLayerBucketPart(u,d,v,b){const{bucket:T,layout:O,posMatrix:k,textLabelPlaneMatrix:N,labelToScreenMatrix:q,clippingData:W,textPixelRatio:K,holdingForFade:ne,collisionBoxArray:le,partiallyEvaluatedTextSize:ue,partiallyEvaluatedIconSize:ce,collisionGroup:fe}=u.parameters,J=O.get("text-optional"),se=O.get("icon-optional"),me=O.get("text-allow-overlap"),ye=O.get("icon-allow-overlap"),Pe=O.get("text-rotation-alignment")==="map",Me=O.get("text-pitch-alignment")==="map",Oe=O.get("icon-text-fit")!=="none",je=O.get("symbol-z-order")==="viewport-y";this.transform.setProjection(T.projection);let Le=me&&(ye||!T.hasIconData()||se),We=ye&&(me||!T.hasTextData()||J);!T.collisionArrays&&le&&T.deserializeCollisionBoxes(le),v&&b&&T.updateCollisionDebugBuffers(this.transform.zoom,le);const ut=(Be,rt,He)=>{const{crossTileID:lt,numVerticalGlyphVertices:Ue}=Be;if(W){const an={zoom:this.transform.zoom,pitch:this.transform.pitch};let Fr=null;if(W.dynamicFilterNeedsFeature){const Ar=this.retainedQueryData[T.bucketInstanceId];Fr=W.featureIndex.loadFeature({featureIndex:Be.featureIndex,bucketIndex:Ar.bucketIndex,sourceLayerIndex:Ar.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,W.dynamicFilter)(an,Fr,this.retainedQueryData[T.bucketInstanceId].tileID.canonical,new o.Point(Be.tileAnchorX,Be.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[lt]=new Fu(!1,!1,!1,!0),void d.add(lt)}if(d.has(lt))return;if(ne)return void(this.placements[lt]=new Fu(!1,!1,!1));let tt=!1,ft=!1,ot=!0,pt=!1,Bt=!1,Jt=null,jt={box:null,offscreen:null,occluded:null},qt={box:null,offscreen:null,occluded:null},gr=null,fr=null,zt=null,Ir=0,Nr=0,zr=0;He.textFeatureIndex?Ir=He.textFeatureIndex:Be.useRuntimeCollisionCircles&&(Ir=Be.featureIndex),He.verticalTextFeatureIndex&&(Nr=He.verticalTextFeatureIndex);const Br=an=>{an.tileID=this.retainedQueryData[T.bucketInstanceId].tileID;const Fr=this.transform.elevation;(Fr||an.elevation)&&(an.elevation=Fr?Fr.getAtTileOffset(an.tileID,an.tileAnchorX,an.tileAnchorY):0)},Ei=He.textBox;if(Ei){Br(Ei);const an=Ar=>{let In=o.WritingMode.horizontal;if(T.allowVerticalPlacement&&!Ar&&this.prevPlacement){const Li=this.prevPlacement.placedOrientations[lt];Li&&(this.placedOrientations[lt]=Li,In=Li,this.markUsedOrientation(T,In,Be))}return In},Fr=(Ar,In)=>{if(T.allowVerticalPlacement&&Ue>0&&He.verticalTextBox){for(const Li of T.writingModes)if(Li===o.WritingMode.vertical?(jt=In(),qt=jt):jt=Ar(),jt&&jt.box&&jt.box.length)break}else jt=Ar()};if(O.get("text-variable-anchor")){let Ar=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[lt]){const Qr=this.prevPlacement.variableOffsets[lt];Ar.indexOf(Qr.anchor)>0&&(Ar=Ar.filter(qi=>qi!==Qr.anchor),Ar.unshift(Qr.anchor))}const In=(Qr,qi,Zf)=>{const _l=T.getSymbolInstanceTextSize(ue,Be,this.transform.zoom,rt),uh=(Qr.x2-Qr.x1)*_l+2*Qr.padding,Ja=(Qr.y2-Qr.y1)*_l+2*Qr.padding,Ms=Oe&&!ye?qi:null;Ms&&Br(Ms);let xl={box:[],offscreen:!1,occluded:!1};const Xf=me?2*Ar.length:Ar.length;for(let hh=0;hh<Xf;++hh){const eg=this.attemptAnchorPlacement(Ar[hh%Ar.length],Qr,uh,Ja,_l,Pe,Me,K,k,fe,hh>=Ar.length,Be,rt,T,Zf,Ms,ue,ce);if(eg&&(xl=eg.placedGlyphBoxes,xl&&xl.box&&xl.box.length)){tt=!0,Jt=eg.shift;break}}return xl};Fr(()=>In(Ei,He.iconBox,o.WritingMode.horizontal),()=>{const Qr=He.verticalTextBox;return Qr&&Br(Qr),T.allowVerticalPlacement&&!(jt&&jt.box&&jt.box.length)&&Ue>0&&Qr?In(Qr,He.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),jt&&(tt=jt.box,ot=jt.offscreen,pt=jt.occluded);const Li=an(!(!jt||!jt.box));if(!tt&&this.prevPlacement){const Qr=this.prevPlacement.variableOffsets[lt];Qr&&(this.variableOffsets[lt]=Qr,this.markUsedJustification(T,Qr.anchor,Be,Li))}}else{const Ar=(In,Li)=>{const Qr=T.getSymbolInstanceTextSize(ue,Be,this.transform.zoom,rt),qi=this.collisionIndex.placeCollisionBox(T,Qr,In,new o.Point(0,0),me,K,k,fe.predicate);return qi&&qi.box&&qi.box.length&&(this.markUsedOrientation(T,Li,Be),this.placedOrientations[lt]=Li),qi};Fr(()=>Ar(Ei,o.WritingMode.horizontal),()=>{const In=He.verticalTextBox;return T.allowVerticalPlacement&&Ue>0&&In?(Br(In),Ar(In,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),an(!!(jt&&jt.box&&jt.box.length))}}if(gr=jt,tt=gr&&gr.box&&gr.box.length>0,ot=gr&&gr.offscreen,pt=gr&&gr.occluded,Be.useRuntimeCollisionCircles){const an=T.text.placedSymbolArray.get(Be.centerJustifiedTextSymbolIndex>=0?Be.centerJustifiedTextSymbolIndex:Be.verticalPlacedTextSymbolIndex),Fr=o.evaluateSizeForFeature(T.textSizeData,ue,an),Ar=O.get("text-padding");fr=this.collisionIndex.placeCollisionCircles(T,me,an,T.lineVertexArray,T.glyphOffsetArray,Fr,k,N,q,v,Me,fe.predicate,Be.collisionCircleDiameter*Fr/o.ONE_EM,Ar,this.retainedQueryData[T.bucketInstanceId].tileID),tt=me||fr.circles.length>0&&!fr.collisionDetected,ot=ot&&fr.offscreen,pt=fr.occluded}if(He.iconFeatureIndex&&(zr=He.iconFeatureIndex),He.iconBox){const an=Fr=>{Br(Fr);const Ar=Oe&&Jt?Wu(Jt.x,Jt.y,Pe,Me,this.transform.angle):new o.Point(0,0),In=T.getSymbolInstanceIconSize(ce,this.transform.zoom,Be.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(T,In,Fr,Ar,ye,K,k,fe.predicate)};qt&&qt.box&&qt.box.length&&He.verticalIconBox?(zt=an(He.verticalIconBox),ft=zt.box.length>0):(zt=an(He.iconBox),ft=zt.box.length>0),ot=ot&&zt.offscreen,Bt=zt.occluded}const ti=J||Be.numHorizontalGlyphVertices===0&&Ue===0,xo=se||Be.numIconVertices===0;if(ti||xo?xo?ti||(ft=ft&&tt):tt=ft&&tt:ft=tt=ft&&tt,tt&&gr&&gr.box&&this.collisionIndex.insertCollisionBox(gr.box,O.get("text-ignore-placement"),T.bucketInstanceId,qt&&qt.box&&Nr?Nr:Ir,fe.ID),ft&&zt&&this.collisionIndex.insertCollisionBox(zt.box,O.get("icon-ignore-placement"),T.bucketInstanceId,zr,fe.ID),fr&&(tt&&this.collisionIndex.insertCollisionCircles(fr.circles,O.get("text-ignore-placement"),T.bucketInstanceId,Ir,fe.ID),v)){const an=T.bucketInstanceId;let Fr=this.collisionCircleArrays[an];Fr===void 0&&(Fr=this.collisionCircleArrays[an]=new Uu);for(let Ar=0;Ar<fr.circles.length;Ar+=4)Fr.circles.push(fr.circles[Ar+0]),Fr.circles.push(fr.circles[Ar+1]),Fr.circles.push(fr.circles[Ar+2]),Fr.circles.push(fr.collisionDetected?1:0)}const fa=T.projection.name!=="globe";Le=Le&&(fa||!pt),We=We&&(fa||!Bt),this.placements[lt]=new Fu(tt||Le,ft||We,ot||T.justReloaded),d.add(lt)};if(je){const Be=T.getSortedSymbolIndexes(this.transform.angle);for(let rt=Be.length-1;rt>=0;--rt){const He=Be[rt];ut(T.symbolInstances.get(He),He,T.collisionArrays[He])}}else for(let Be=u.symbolInstanceStart;Be<u.symbolInstanceEnd;Be++)ut(T.symbolInstances.get(Be),Be,T.collisionArrays[Be]);if(v&&T.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[T.bucketInstanceId];o.invert(Be.invProjMatrix,k),Be.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}markUsedJustification(u,d,v,b){const{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:N,crossTileID:q}=v,W=o.getAnchorJustification(d),K=b===o.WritingMode.vertical?N:W==="left"?T:W==="center"?O:W==="right"?k:-1;T>=0&&(u.text.placedSymbolArray.get(T).crossTileID=K>=0&&T!==K?0:q),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=K>=0&&O!==K?0:q),k>=0&&(u.text.placedSymbolArray.get(k).crossTileID=K>=0&&k!==K?0:q),N>=0&&(u.text.placedSymbolArray.get(N).crossTileID=K>=0&&N!==K?0:q)}markUsedOrientation(u,d,v){const b=d===o.WritingMode.horizontal||d===o.WritingMode.horizontalOnly?d:0,T=d===o.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:N,verticalPlacedTextSymbolIndex:q}=v,W=u.text.placedSymbolArray;O>=0&&(W.get(O).placedOrientation=b),k>=0&&(W.get(k).placedOrientation=b),N>=0&&(W.get(N).placedOrientation=b),q>=0&&(W.get(q).placedOrientation=T)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const b=d?d.symbolFadeChange(u):1,T=d?d.opacities:{},O=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const N in this.placements){const q=this.placements[N],W=T[N];W?(this.opacities[N]=new qa(W,b,q.text,q.icon,null,q.clipped),v=v||q.text!==W.text.placed||q.icon!==W.icon.placed):(this.opacities[N]=new qa(null,b,q.text,q.icon,q.skipFade,q.clipped),v=v||q.text||q.icon)}for(const N in T){const q=T[N];if(!this.opacities[N]){const W=new qa(q,b,!1,!1);W.isHidden()||(this.opacities[N]=W,v=v||q.text.placed||q.icon.placed)}}for(const N in O)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=O[N]);for(const N in k)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=k[N]);v?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:u)}updateLayerOpacities(u,d){const v=new Set;for(const b of d){const T=b.getBucket(u);T&&b.latestFeatureIndex&&u.id===T.layerIds[0]&&this.updateBucketOpacities(T,v,b.collisionBoxArray)}}updateBucketOpacities(u,d,v){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const b=u.layers[0].layout,T=!!u.layers[0].dynamicFilter(),O=new qa(null,0,!1,!1,!0),k=b.get("text-allow-overlap"),N=b.get("icon-allow-overlap"),q=b.get("text-variable-anchor"),W=b.get("text-rotation-alignment")==="map",K=b.get("text-pitch-alignment")==="map",ne=b.get("icon-text-fit")!=="none",le=new qa(null,0,k&&(N||!u.hasIconData()||b.get("icon-optional")),N&&(k||!u.hasTextData()||b.get("text-optional")),!0);!u.collisionArrays&&v&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(v);const ue=(fe,J,se)=>{for(let me=0;me<J/4;me++)fe.opacityVertexArray.emplaceBack(se)};let ce=0;for(let fe=0;fe<u.symbolInstances.length;fe++){const J=u.symbolInstances.get(fe),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:me,crossTileID:ye,numIconVertices:Pe}=J,Me=d.has(ye);let Oe=this.opacities[ye];Me?Oe=O:Oe||(Oe=le,this.opacities[ye]=Oe),d.add(ye);const je=se>0||me>0,Le=Pe>0,We=this.placedOrientations[ye],ut=We===o.WritingMode.vertical,Be=We===o.WritingMode.horizontal||We===o.WritingMode.horizontalOnly;if(!je&&!Le||Oe.isHidden()||ce++,je){const rt=qu(Oe.text);ue(u.text,se,ut?yn:rt),ue(u.text,me,Be?yn:rt);const He=Oe.text.isHidden(),{leftJustifiedTextSymbolIndex:lt,centerJustifiedTextSymbolIndex:Ue,rightJustifiedTextSymbolIndex:tt,verticalPlacedTextSymbolIndex:ft}=J,ot=u.text.placedSymbolArray,pt=He||ut?1:0;lt>=0&&(ot.get(lt).hidden=pt),Ue>=0&&(ot.get(Ue).hidden=pt),tt>=0&&(ot.get(tt).hidden=pt),ft>=0&&(ot.get(ft).hidden=He||Be?1:0);const Bt=this.variableOffsets[ye];Bt&&this.markUsedJustification(u,Bt.anchor,J,We);const Jt=this.placedOrientations[ye];Jt&&(this.markUsedJustification(u,"left",J,Jt),this.markUsedOrientation(u,Jt,J))}if(Le){const rt=qu(Oe.icon),{placedIconSymbolIndex:He,verticalPlacedIconSymbolIndex:lt}=J,Ue=u.icon.placedSymbolArray,tt=Oe.icon.isHidden()?1:0;He>=0&&(ue(u.icon,Pe,ut?yn:rt),Ue.get(He).hidden=tt),lt>=0&&(ue(u.icon,J.numVerticalIconVertices,Be?yn:rt),Ue.get(lt).hidden=tt)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const rt=u.collisionArrays[fe];if(rt){let He=new o.Point(0,0),lt=!0;if(rt.textBox||rt.verticalTextBox){if(q){const tt=this.variableOffsets[ye];tt?(He=Vu(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textScale),W&&He._rotate(K?this.transform.angle:-this.transform.angle)):lt=!1}T&&(lt=!Oe.clipped),rt.textBox&&fc(u.textCollisionBox.collisionVertexArray,Oe.text.placed,!lt||ut,He.x,He.y),rt.verticalTextBox&&fc(u.textCollisionBox.collisionVertexArray,Oe.text.placed,!lt||Be,He.x,He.y)}const Ue=lt&&!!(!Be&&rt.verticalIconBox);rt.iconBox&&fc(u.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Ue,ne?He.x:0,ne?He.y:0),rt.verticalIconBox&&fc(u.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Ue,ne?He.x:0,ne?He.y:0)}}}if(u.fullyClipped=ce===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const fe=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=fe.invProjMatrix,u.placementViewportMatrix=fe.viewportMatrix,u.collisionCircleArray=fe.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>u}setStale(){this.stale=!0}}function fc(g,u,d,v,b){g.emplaceBack(u?1:0,d?1:0,v||0,b||0),g.emplaceBack(u?1:0,d?1:0,v||0,b||0),g.emplaceBack(u?1:0,d?1:0,v||0,b||0),g.emplaceBack(u?1:0,d?1:0,v||0,b||0)}const Vi=Math.pow(2,25),Tn=Math.pow(2,24),hm=Math.pow(2,17),fm=Math.pow(2,16),Wi=Math.pow(2,9),yo=Math.pow(2,8),L_=Math.pow(2,1);function qu(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const u=g.placed?1:0,d=Math.floor(127*g.opacity);return d*Vi+u*Tn+d*hm+u*fm+d*Wi+u*yo+d*L_+u}const yn=0;class Gu{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(u,d,v,b,T){const O=this._bucketParts;for(;this._currentTileIndex<u.length;)if(d.getBucketParts(O,b,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((k,N)=>k.sortKey-N.sortKey));this._currentPartIndex<O.length;){const k=O[this._currentPartIndex];if(d.placeLayerBucketPart(k,this._seenCrossTileIDs,v,k.symbolInstanceStart===0),this._currentPartIndex++,T())return!0}return!1}}class dm{constructor(u,d,v,b,T,O,k,N){this.placement=new bf(u,T,O,k,N),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(u,d,v){const b=o.exported.now(),T=()=>{const O=o.exported.now()-b;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=d[u[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=k)&&(!O.maxzoom||O.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Gu(O)),this._inProgressLayer.continuePlacement(v[O.source],this.placement,this._showCollisionBoxes,O,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const fl=512/o.EXTENT/2;class hi{constructor(u,d,v){this.tileID=u,this.bucketInstanceId=v,this.index=new o.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const b=u.canonical.x*o.EXTENT,T=u.canonical.y*o.EXTENT;for(let O=0;O<d.length;O++){const{key:k,crossTileID:N,tileAnchorX:q,tileAnchorY:W}=d.get(O),K=Math.floor((b+q)*fl),ne=Math.floor((T+W)*fl);this.index.add(K,ne),this.keys.push(k),this.crossTileIDs.push(N)}this.index.finish()}findMatches(u,d,v){const b=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),T=fl/Math.pow(2,d.canonical.z-this.tileID.canonical.z),O=d.canonical.x*o.EXTENT,k=d.canonical.y*o.EXTENT;for(let N=0;N<u.length;N++){const q=u.get(N);if(q.crossTileID)continue;const{key:W,tileAnchorX:K,tileAnchorY:ne}=q,le=Math.floor((O+K)*T),ue=Math.floor((k+ne)*T),ce=this.index.range(le-b,ue-b,le+b,ue+b);for(const fe of ce){const J=this.crossTileIDs[fe];if(this.keys[fe]===W&&!v.has(J)){v.add(J),q.crossTileID=J;break}}}}}class pm{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class mm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const d=Math.round((u-this.lng)/360);if(d!==0)for(const v in this.indexes){const b=this.indexes[v],T={};for(const O in b){const k=b[O];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),T[k.tileID.key]=k}this.indexes[v]=T}this.lng=u}addBucket(u,d,v){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]=new Set);const b=this.usedCrossTileIDs[u.overscaledZ];for(const T in this.indexes){const O=this.indexes[T];if(Number(T)>u.overscaledZ)for(const k in O){const N=O[k];N.tileID.isChildOf(u)&&N.findMatches(d.symbolInstances,u,b)}else{const k=O[u.scaledTo(Number(T)).key];k&&k.findMatches(d.symbolInstances,u,b)}}for(let T=0;T<d.symbolInstances.length;T++){const O=d.symbolInstances.get(T);O.crossTileID||(O.crossTileID=v.generate(),b.add(O.crossTileID))}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new hi(u,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(u,d){for(const v of d.crossTileIDs)this.usedCrossTileIDs[u].delete(v)}removeStaleBuckets(u){let d=!1;for(const v in this.indexes){const b=this.indexes[v];for(const T in b)u[b[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[T]),delete b[T],d=!0)}return d}}class Ga{constructor(){this.layerIndexes={},this.crossTileIDs=new pm,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,d,v,b){let T=this.layerIndexes[u.id];T===void 0&&(T=this.layerIndexes[u.id]=new mm);let O=!1;const k={};b.name!=="globe"&&T.handleWrapJump(v);for(const N of d){const q=N.getBucket(u);q&&u.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket(N.tileID,q,this.crossTileIDs)&&(O=!0),k[q.bucketInstanceId]=!0)}return T.removeStaleBuckets(k)&&(O=!0),O}pruneUnusedLayers(u){const d={};u.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const Ps=(g,u)=>o.emitValidationErrors(g,u&&u.filter(d=>d.identifier!=="source.canvas")),wf=o.pick(Or,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),rE=o.pick(Or,["setCenter","setZoom","setBearing","setPitch"]),gm={version:8,layers:[],sources:{}},dc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ca extends o.Evented{constructor(u,d={}){super(),this.map=u,this.dispatcher=new Ye(uc(),this),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(u._requestManager,d.localFontFamily?o.LocalGlyphMode.all:d.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new Ga,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const v=this;this._rtlTextPluginCallback=ca.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(T,O)=>{if(o.triggerPluginCompletionEvent(T),O&&O.every(k=>k))for(const k in v._sourceCaches){const N=v._sourceCaches[k],q=N.getSource().type;q!=="vector"&&q!=="geojson"||N.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const T=this.getSource(b.sourceId);if(T&&T.vectorLayerIds)for(const O in this._layers){const k=this._layers[O];k.source===T.id&&this._validateLayer(k)}})}loadURL(u,d={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const v=typeof d.validate=="boolean"?d.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,d.accessToken);const b=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(b,(T,O)=>{this._request=null,T?this.fire(new o.ErrorEvent(T)):O&&this._load(O,v)})}loadJSON(u,d={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(u,d.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(gm,!1)}_updateLayerCount(u,d){const v=d?1:-1;u.is3D()&&(this._num3DLayers+=v),u.type==="circle"&&(this._numCircleLayers+=v),u.type==="symbol"&&(this._numSymbolLayers+=v)}_load(u,d){if(d&&Ps(this,o.validateStyle(u)))return;this._loaded=!0,this.stylesheet=o.clone$1(u),this._updateMapProjection();for(const b in u.sources)this.addSource(b,u.sources[b],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const v=M_(this.stylesheet.layers);this._order=v.map(b=>b.id),this._layers={},this._serializedLayers={};for(const b of v){const T=o.createStyleLayer(b);T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ee(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=function(d,v,b){let T,O,k;const N=o.exported.devicePixelRatio>1?"@2x":"";let q=o.getJSON(v.transformRequest(v.normalizeSpriteURL(d,N,".json"),o.ResourceType.SpriteJSON),(ne,le)=>{q=null,k||(k=ne,T=le,K())}),W=o.getImage(v.transformRequest(v.normalizeSpriteURL(d,N,".png"),o.ResourceType.SpriteImage),(ne,le)=>{W=null,k||(k=ne,O=le,K())});function K(){if(k)b(k);else if(T&&O){const ne=o.exported.getImageData(O),le={};for(const ue in T){const{width:ce,height:fe,x:J,y:se,sdf:me,pixelRatio:ye,stretchX:Pe,stretchY:Me,content:Oe}=T[ue],je=new o.RGBAImage({width:ce,height:fe});o.RGBAImage.copy(ne,je,{x:J,y:se},{x:0,y:0},{width:ce,height:fe}),le[ue]={data:je,pixelRatio:ye,sdf:me,stretchX:Pe,stretchY:Me,content:Oe}}b(null,le)}}return{cancel(){q&&(q.cancel(),q=null),W&&(W.cancel(),W=null)}}}(u,this.map._requestManager,(d,v)=>{if(this._spriteRequest=null,d)this.fire(new o.ErrorEvent(d));else if(v)for(const b in v)this.imageManager.addImage(b,v[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(u){const d=this.getSource(u.source);if(!d)return;const v=u.sourceLayer;v&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(v)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${d.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const d=[];for(const v of u){const b=this._layers[v];b.type!=="custom"&&d.push(b.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():dc[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const d=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(b.length||T.length)&&this._updateWorkerLayers(b,T);for(const O in this._updatedSources){const k=this._updatedSources[O];k==="reload"?this._reloadSource(O):k==="clear"&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const v={};for(const b in this._sourceCaches){const T=this._sourceCaches[b];v[b]=T.used,T.used=!1}for(const b of this._order){const T=this._layers[b];if(T.recalculate(u,this._availableImages),!T.isHidden(u.zoom)){const k=this._getLayerSourceCache(T);k&&(k.used=!0)}const O=this.map.painter;if(O){const k=T.getProgramIds();if(!k)continue;const N=T.getProgramConfiguration(u.zoom);for(const q of k)O.useProgram(q,N)}}for(const b in v){const T=this._sourceCaches[b];v[b]!==T.used&&T.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:T.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),Ps(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=M_(u.layers);const d=function(b,T){if(!b)return[{command:Or.setStyle,args:[T]}];let O=[];try{if(!m(b.version,T.version))return[{command:Or.setStyle,args:[T]}];m(b.center,T.center)||O.push({command:Or.setCenter,args:[T.center]}),m(b.zoom,T.zoom)||O.push({command:Or.setZoom,args:[T.zoom]}),m(b.bearing,T.bearing)||O.push({command:Or.setBearing,args:[T.bearing]}),m(b.pitch,T.pitch)||O.push({command:Or.setPitch,args:[T.pitch]}),m(b.sprite,T.sprite)||O.push({command:Or.setSprite,args:[T.sprite]}),m(b.glyphs,T.glyphs)||O.push({command:Or.setGlyphs,args:[T.glyphs]}),m(b.transition,T.transition)||O.push({command:Or.setTransition,args:[T.transition]}),m(b.light,T.light)||O.push({command:Or.setLight,args:[T.light]}),m(b.fog,T.fog)||O.push({command:Or.setFog,args:[T.fog]}),m(b.projection,T.projection)||O.push({command:Or.setProjection,args:[T.projection]});const k={},N=[];(function(K,ne,le,ue){let ce;for(ce in ne=ne||{},K=K||{})K.hasOwnProperty(ce)&&(ne.hasOwnProperty(ce)||Nu(ce,le,ue));for(ce in ne){if(!ne.hasOwnProperty(ce))continue;const fe=ne[ce];K.hasOwnProperty(ce)?m(K[ce],fe)||(K[ce].type==="geojson"&&fe.type==="geojson"&&xf(K,ne,ce)?le.push({command:Or.setGeoJSONSourceData,args:[ce,fe.data]}):am(ce,ne,le,ue)):om(ce,ne,le)}})(b.sources,T.sources,N,k);const q=[];b.layers&&b.layers.forEach(K=>{K.source&&k[K.source]?O.push({command:Or.removeLayer,args:[K.id]}):q.push(K)});let W=b.terrain;W&&k[W.source]&&(O.push({command:Or.setTerrain,args:[void 0]}),W=void 0),O=O.concat(N),m(W,T.terrain)||O.push({command:Or.setTerrain,args:[T.terrain]}),function(K,ne,le){ne=ne||[];const ue=(K=K||[]).map(Ua),ce=ne.map(Ua),fe=K.reduce(sm,{}),J=ne.reduce(sm,{}),se=ue.slice(),me=Object.create(null);let ye,Pe,Me,Oe,je,Le,We;for(ye=0,Pe=0;ye<ue.length;ye++)Me=ue[ye],J.hasOwnProperty(Me)?Pe++:(le.push({command:Or.removeLayer,args:[Me]}),se.splice(se.indexOf(Me,Pe),1));for(ye=0,Pe=0;ye<ce.length;ye++)Me=ce[ce.length-1-ye],se[se.length-1-ye]!==Me&&(fe.hasOwnProperty(Me)?(le.push({command:Or.removeLayer,args:[Me]}),se.splice(se.lastIndexOf(Me,se.length-Pe),1)):Pe++,Le=se[se.length-ye],le.push({command:Or.addLayer,args:[J[Me],Le]}),se.splice(se.length-ye,0,Me),me[Me]=!0);for(ye=0;ye<ce.length;ye++)if(Me=ce[ye],Oe=fe[Me],je=J[Me],!me[Me]&&!m(Oe,je))if(m(Oe.source,je.source)&&m(Oe["source-layer"],je["source-layer"])&&m(Oe.type,je.type)){for(We in sa(Oe.layout,je.layout,le,Me,null,Or.setLayoutProperty),sa(Oe.paint,je.paint,le,Me,null,Or.setPaintProperty),m(Oe.filter,je.filter)||le.push({command:Or.setFilter,args:[Me,je.filter]}),m(Oe.minzoom,je.minzoom)&&m(Oe.maxzoom,je.maxzoom)||le.push({command:Or.setLayerZoomRange,args:[Me,je.minzoom,je.maxzoom]}),Oe)Oe.hasOwnProperty(We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?sa(Oe[We],je[We],le,Me,We.slice(6),Or.setPaintProperty):m(Oe[We],je[We])||le.push({command:Or.setLayerProperty,args:[Me,We,je[We]]}));for(We in je)je.hasOwnProperty(We)&&!Oe.hasOwnProperty(We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?sa(Oe[We],je[We],le,Me,We.slice(6),Or.setPaintProperty):m(Oe[We],je[We])||le.push({command:Or.setLayerProperty,args:[Me,We,je[We]]}))}else le.push({command:Or.removeLayer,args:[Me]}),Le=se[se.lastIndexOf(Me)+1],le.push({command:Or.addLayer,args:[je,Le]})}(q,T.layers,O)}catch(k){console.warn("Unable to compute style diff:",k),O=[{command:Or.setStyle,args:[T]}]}return O}(this.serialize(),u).filter(b=>!(b.command in rE));if(d.length===0)return!1;const v=d.filter(b=>!(b.command in wf));if(v.length>0)throw new Error(`Unimplemented: ${v.map(b=>b.command).join(", ")}.`);return d.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,d){return this.getImage(u)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,d),this._afterImageUpdated(u),this)}updateImage(u,d){this.imageManager.updateImage(u,d)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,d,v={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.validateSource,`sources.${u}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const b=hr(u,d,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:b.serialize(),sourceId:u}));const T=O=>{const k=(O?"symbol:":"other:")+u,N=this._sourceCaches[k]=new o.SourceCache(k,b,O);(O?this._symbolSourceCaches:this._otherSourceCaches)[u]=N,N.style=this,N.onAdd(this.map)};T(!1),d.type!=="vector"&&d.type!=="geojson"||T(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const d=this.getSource(u);if(!d)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const v=this._getSourceCaches(u);for(const b of v)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,d){this._checkLoaded(),this.getSource(u).setData(d),this._changed=!0}getSource(u){const d=this._getSourceCache(u);return d&&d.getSource()}_getSources(){const u=[];for(const d in this._otherSourceCaches){const v=this._getSourceCache(d);v&&u.push(v.getSource())}return u}addLayer(u,d,v={}){this._checkLoaded();const b=u.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let T;if(u.type==="custom"){if(Ps(this,o.validateCustomStyleLayer(u)))return;T=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(b,u.source),u=o.clone$1(u),u=o.extend(u,{source:b})),this._validate(o.validateLayer,`layers.${b}`,u,{arrayIndex:-1},v))return;T=o.createStyleLayer(u),this._validateLayer(T),T.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}const O=d?this._order.indexOf(d):this._order.length;if(d&&O===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(O,0,b),this._layerOrderChanged=!0,this._layers[b]=T;const k=this._getLayerSourceCache(T);if(this._removedLayers[b]&&T.source&&k&&T.type!=="custom"){const N=this._removedLayers[b];delete this._removedLayers[b],N.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",k.pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,d){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===d)return;const v=this._order.indexOf(u);this._order.splice(v,1);const b=d?this._order.indexOf(d):this._order.length;d&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(b,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const d=this._layers[u];if(!d)return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const v=this._order.indexOf(u);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=d,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const d in this._layers)if(this._layers[d].type===u)return!0;return!1}setLayerZoomRange(u,d,v){this._checkLoaded();const b=this.getLayer(u);b?b.minzoom===d&&b.maxzoom===v||(d!=null&&(b.minzoom=d),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,d,v={}){this._checkLoaded();const b=this.getLayer(u);if(b){if(!m(b.filter,d))return d==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,d,{layerType:b.type},v)||(b.filter=o.clone$1(d),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const d=this.getLayer(u);return d&&o.clone$1(d.filter)}setLayoutProperty(u,d,v,b={}){this._checkLoaded();const T=this.getLayer(u);T?m(T.getLayoutProperty(d),v)||(T.setLayoutProperty(d,v,b),this._updateLayer(T)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,d){const v=this.getLayer(u);if(v)return v.getLayoutProperty(d);this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,d,v,b={}){this._checkLoaded();const T=this.getLayer(u);T?m(T.getPaintProperty(d),v)||(T.setPaintProperty(d,v,b)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,d){const v=this.getLayer(u);return v&&v.getPaintProperty(d)}setFeatureState(u,d){this._checkLoaded();const v=u.source,b=u.sourceLayer,T=this.getSource(v);if(!T)return void this.fire(new o.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const O=T.type;if(O==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(O==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(v);for(const N of k)N.setFeatureState(b,u.id,d)}removeFeatureState(u,d){this._checkLoaded();const v=u.source,b=this.getSource(v);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const T=b.type,O=T==="vector"?u.sourceLayer:void 0;if(T==="vector"&&!O)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(v);for(const N of k)N.removeFeatureState(O,u.id,d)}getFeatureState(u){this._checkLoaded();const d=u.source,v=u.sourceLayer,b=this.getSource(d);if(b){if(b.type!=="vector"||v)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(v,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const d in this._sourceCaches){const v=this._sourceCaches[d].getSource();u[v.id]||(u[v.id]=v.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0;const d=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&d&&d.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",d.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const d=O=>this._layers[O].type==="fill-extrusion",v={},b=[];for(let O=this._order.length-1;O>=0;O--){const k=this._order[O];if(d(k)){v[k]=O;for(const N of u){const q=N[k];if(q)for(const W of q)b.push(W)}}}b.sort((O,k)=>k.intersectionZ-O.intersectionZ);const T=[];for(let O=this._order.length-1;O>=0;O--){const k=this._order[O];if(d(k))for(let N=b.length-1;N>=0;N--){const q=b[N].feature;if(v[q.layer.id]<O)break;T.push(q),b.pop()}else for(const N of u){const q=N[k];if(q)for(const W of q)T.push(W.feature)}}return T}queryRenderedFeatures(u,d,v){d&&d.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const b={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const N of d.layers){const q=this._layers[N];if(!q)return this.fire(new o.ErrorEvent(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];b[q.source]=!0}}const T=[];d.availableImages=this._availableImages;const O=d&&d.layers?d.layers.some(N=>{const q=this.getLayer(N);return q&&q.is3D()}):this.has3DLayers(),k=Ot.createFromScreenPoints(u,v);for(const N in this._sourceCaches){const q=this._sourceCaches[N].getSource().id;d.layers&&!b[q]||T.push(cn(this._sourceCaches[N],this._layers,this._serializedLayers,k,d,v,O,!!this.map._showQueryGeometry))}return this.placement&&T.push(function(N,q,W,K,ne,le,ue){const ce={},fe=le.queryRenderedSymbols(K),J=[];for(const se of Object.keys(fe).map(Number))J.push(ue[se]);J.sort(wi);for(const se of J){const me=se.featureIndex.lookupSymbolFeatures(fe[se.bucketInstanceId],q,se.bucketIndex,se.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,N);for(const ye in me){const Pe=ce[ye]=ce[ye]||[],Me=me[ye];Me.sort((Oe,je)=>{const Le=se.featureSortOrder;if(Le){const We=Le.indexOf(Oe.featureIndex);return Le.indexOf(je.featureIndex)-We}return je.featureIndex-Oe.featureIndex});for(const Oe of Me)Pe.push(Oe)}}for(const se in ce)ce[se].forEach(me=>{const ye=me.feature,Pe=W(N[se]);if(!Pe)return;const Me=Pe.getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=Me});return ce}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(u,d){d&&d.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const v=this._getSourceCaches(u);let b=[];for(const T of v)b=b.concat(Mn(T,d));return b}addSourceType(u,d,v){return ca.getSourceType(u)?v(new Error(`A source type called "${u}" already exists.`)):(ca.setSourceType(u,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:d.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(u,d={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const O in u)if(!m(u[O],v[O])){b=!0;break}if(!b)return;const T=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,d),this.light.updateTransitions(T)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,d=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let v=u;if(d===1){if(typeof v.source=="object"){const b="terrain-dem-src";this.addSource(b,v.source),v=o.clone$1(v),v=o.extend(v,{source:b})}if(this._validate(o.validateTerrain,"terrain",v))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,d)}else{const b=this.terrain,T=b.get();for(const O of Object.keys(o.spec.terrain))!v.hasOwnProperty(O)&&o.spec.terrain[O].default&&(v[O]=o.spec.terrain[O].default);for(const O in v)if(!m(v[O],T[O])){b.set(v),this.stylesheet.terrain=v;const k=this._setTransitionParameters({duration:0});b.updateTransitions(k);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const d=this.fog=new Ge(u,this.map.transform);this.stylesheet.fog=u;const v=this._setTransitionParameters({duration:0});d.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const u of this.map._markers)u._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,v=d.get();Object.keys(u).length===0&&d.set(u);for(const b in u)if(!m(u[b],v[b])){d.set(u),this.stylesheet.fog=u;const T=this._setTransitionParameters({duration:0});d.updateTransitions(T);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:o.exported.now(),transition:o.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter(v=>this.isLayerDraped(this._layers[v])),d=this._order.filter(v=>!this.isLayerDraped(this._layers[v]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...d)}_createTerrain(u,d){const v=this.terrain=new Ne(u,d);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});v.updateTransitions(b)}_force3DLayerUpdate(){for(const u in this._layers){const d=this._layers[u];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const d=this._layers[u];d.type==="symbol"&&this._updateLayer(d)}}_validate(u,d,v,b,T={}){return(!T||T.validate!==!1)&&Ps(this,u.call(o.validateStyle,o.extend({key:d,style:this.serialize(),value:v,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const d=this._getSourceCaches(u);for(const v of d)v.clearTiles()}_reloadSource(u){const d=this._getSourceCaches(u);for(const v of d)v.resume(),v.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const d in this._sourceCaches)this._sourceCaches[d].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const d=this._sourceCaches[u];d.resume(),d.reload()}}_updatePlacement(u,d,v,b,T=!1){let O=!1,k=!1;const N={};for(const q of this._order){const W=this._layers[q];if(W.type!=="symbol")continue;if(!N[W.source]){const ne=this._getLayerSourceCache(W);if(!ne)continue;N[W.source]=ne.getRenderableIds(!0).map(le=>ne.getTileByID(le)).sort((le,ue)=>ue.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(ue.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(W,N[W.source],u.center.lng,u.projection);O=O||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),T=T||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(T||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),u.zoom))&&(this.pauseablePlacement=new dm(u,this._order,T,d,v,b,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),k=!0),O&&this.pauseablePlacement.placement.setStale()),k||O)for(const q of this._order){const W=this._layers[q];W.type==="symbol"&&this.placement.updateLayerOpacities(W,N[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,d,v){this.imageManager.getImages(d.icons,v),this._updateTilesForChangedImages();const b=T=>{T&&T.setDependencies(d.tileID.key,d.type,d.icons)};b(this._otherSourceCaches[d.source]),b(this._symbolSourceCaches[d.source])}getGlyphs(u,d,v){this.glyphManager.getGlyphs(d.stacks,v)}getResource(u,d,v){return o.makeRequest(d,v)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const d=[];return this._otherSourceCaches[u]&&d.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&d.push(this._symbolSourceCaches[u]),d}_isSourceCacheLoaded(u){const d=this._getSourceCaches(u);return d.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):d.every(v=>v.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ca.getSourceType=function(g){return ar[g]},ca.setSourceType=function(g,u){ar[g]=u},ca.registerForPluginStateChange=o.registerForPluginStateChange;var ym=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,dl="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ha=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Hu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Za=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Sf={},pc={};const Zu=[];mc(ym,Zu),mc(Ha,Zu),mc(Hu,Zu),mc(Za,Zu),Sf=Mr("",Ha),pc=Mr(Za,Hu);const j_=Mr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ef=ym,vm=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var _m={background:Mr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Mr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Mr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Mr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Mr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Mr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Mr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Mr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Mr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Mr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dl),skyboxGradient:Mr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dl),skyboxCapture:Mr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Mr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function mc(g,u){const d=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let v of d)if(v=v.trim(),v[0]==="#"&&v.includes("if")&&!v.includes("endif")){v=v.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=v.split(" ");for(const T of b)u.includes(T)||u.push(T)}}function Mr(g,u){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},T=[...Zu];return mc(g,T),mc(u,T),{fragmentSource:g=g.replace(d,(O,k,N,q,W)=>(b[W]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${N} ${q} ${W};
#else
uniform ${N} ${q} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${N} ${q} ${W} = u_${W};
#endif
`)),vertexSource:u=u.replace(d,(O,k,N,q,W)=>{const K=q==="float"?"vec2":"vec4",ne=W.match(/color/)?"color":K;return b[W]?k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${N} ${K} a_${W};
varying ${N} ${q} ${W};
#else
uniform ${N} ${q} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${N} ${q} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${N} ${q} ${W} = u_${W};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${N} ${K} a_${W};
#else
uniform ${N} ${q} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${N} ${q} ${W} = a_${W};
#else
    ${N} ${q} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${N} ${q} ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${N} ${q} ${W} = u_${W};
#endif
`}),staticAttributes:v,usedDefines:T}}class nE{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,d,v,b,T,O,k){this.context=u;let N=this.boundPaintVertexBuffers.length!==b.length;for(let W=0;!N&&W<b.length;W++)this.boundPaintVertexBuffers[W]!==b[W]&&(N=!0);let q=this.boundDynamicVertexBuffers.length!==k.length;for(let W=0;!q&&W<k.length;W++)this.boundDynamicVertexBuffers[W]!==k[W]&&(q=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||N||q||this.boundIndexBuffer!==T||this.boundVertexOffset!==O)this.freshBind(d,v,b,T,O,k);else{u.bindVertexArrayOES.set(this.vao);for(const W of k)W&&W.bind();T&&T.dynamicDraw&&T.bind()}}freshBind(u,d,v,b,T,O){let k;const N=u.numAttributes,q=this.context,W=q.gl;if(q.extVertexArrayObject)this.vao&&this.destroy(),this.vao=q.extVertexArrayObject.createVertexArrayOES(),q.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=u,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=T,this.boundDynamicVertexBuffers=O;else{k=q.currentNumAttributes||0;for(let K=N;K<k;K++)W.disableVertexAttribArray(K)}d.enableAttributes(W,u),d.bind(),d.setVertexAttribPointers(W,u,T);for(const K of v)K.enableAttributes(W,u),K.bind(),K.setVertexAttribPointers(W,u,T);for(const K of O)K&&(K.enableAttributes(W,u),K.bind(),K.setVertexAttribPointers(W,u,T));b&&b.bind(),q.currentNumAttributes=N}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function xm(g,u){const d=Math.pow(2,u.canonical.z),v=u.canonical.y;return[new o.MercatorCoordinate(0,v/d).toLngLat().lat,new o.MercatorCoordinate(0,(v+1)/d).toLngLat().lat]}function $_(g,u,d,v,b,T,O){const k=g.context,N=k.gl,q=d.fbo;if(!q)return;g.prepareDrawTile();const W=g.useProgram("hillshade");k.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,q.colorAttachment.get());const K=((ce,fe,J,se)=>{const me=J.paint.get("hillshade-shadow-color"),ye=J.paint.get("hillshade-highlight-color"),Pe=J.paint.get("hillshade-accent-color");let Me=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(Me-=ce.transform.angle);const Oe=!ce.options.moving;return{u_matrix:se||ce.transform.calculateProjMatrix(fe.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:xm(0,fe.tileID),u_light:[J.paint.get("hillshade-exaggeration"),Me],u_shadow:me,u_highlight:ye,u_accent:Pe}})(g,d,v,g.terrain?u.projMatrix:null);g.prepareDrawProgram(k,W,u.toUnwrapped());const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:le,tileBoundsSegments:ue}=g.getTileBoundsBuffers(d);W.draw(k,N.TRIANGLES,b,T,O,o.CullFaceMode.disabled,K,v.id,ne,le,ue)}function bm(g,u,d){if(!u.needsDEMTextureUpload)return;const v=g.context,b=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||g.getTileTexture(d.stride);const T=d.getPixels();u.demTexture?u.demTexture.update(T,{premultiply:!1}):u.demTexture=new o.Texture(v,T,b.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function N_(g,u,d,v,b,T){const O=g.context,k=O.gl;if(!u.dem)return;const N=u.dem;if(O.activeTexture.set(k.TEXTURE1),bm(g,u,N),!u.demTexture)return;u.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const q=N.dim;O.activeTexture.set(k.TEXTURE0);let W=u.fbo;if(!W){const ue=new o.Texture(O,{width:q,height:q,data:null},k.RGBA);ue.bind(k.LINEAR,k.CLAMP_TO_EDGE),W=u.fbo=O.createFramebuffer(q,q,!0),W.colorAttachment.set(ue.texture)}O.bindFramebuffer.set(W.framebuffer),O.viewport.set([0,0,q,q]);const{tileBoundsBuffer:K,tileBoundsIndexBuffer:ne,tileBoundsSegments:le}=g.getMercatorTileBoundsBuffers();g.useProgram("hillshadePrepare").draw(O,k.TRIANGLES,v,b,T,o.CullFaceMode.disabled,((ue,ce)=>{const fe=ce.stride,J=o.create();return o.ortho(J,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(J,J,[0,-o.EXTENT,0]),{u_matrix:J,u_image:1,u_dimension:[fe,fe],u_zoom:ue.overscaledZ,u_unpack:ce.unpackVector}})(u.tileID,N),d.id,K,ne,le),u.needsHillshadePrepare=!1}const wm=g=>({u_matrix:new o.UniformMatrix4f(g),u_image0:new o.Uniform1i(g),u_skirt_height:new o.Uniform1f(g)}),gc=(g,u)=>({u_matrix:g,u_image0:0,u_skirt_height:u}),Tf=(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:d,u_zoom_transition:b,u_merc_center:T,u_image0:0,u_frustum_tl:O,u_frustum_tr:k,u_frustum_br:N,u_frustum_bl:q,u_globe_pos:W,u_globe_radius:K,u_viewport:ne,u_grid_matrix:ue?Float32Array.from(ue):new Float32Array(9),u_skirt_height:le});function yc(g,u){return g!=null&&u!=null&&!(!g.hasData()||!u.hasData())&&g.demTexture!=null&&u.demTexture!=null&&g.tileID.key!==u.tileID.key}const Xa=new class{constructor(){this.operations={}}newMorphing(g,u,d,v,b){if(g in this.operations){const T=this.operations[g];T.to.tileID.key!==d.tileID.key&&(T.queued=d)}else this.operations[g]={startTime:v,phase:0,duration:b,from:u,to:d,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const u=this.operations[g];return{from:u.from,to:u.to,phase:u.phase}}update(g){for(const u in this.operations){const d=this.operations[u];for(d.phase=(g-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,g)){delete this.operations[u];break}}}_nextOp(g,u){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=u,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},pl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Af(g){return 6*Math.pow(1.5,22-g)}function z_(g,u){const d=1<<g.z;return!u&&(g.x===0||g.x===d-1)||g.y===0||g.y===d-1}const Xu=g=>({u_matrix:g});function Sm(g,u,d,v,b){if(b>0){const T=o.exported.now(),O=(T-g.timeAdded)/b,k=u?(T-u.timeAdded)/b:-1,N=d.getSource(),q=v.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),W=!u||Math.abs(u.tileID.overscaledZ-q)>Math.abs(g.tileID.overscaledZ-q),K=W&&g.refreshedUponExpiration?1:o.clamp(W?O:1-k,0,1);return g.refreshedUponExpiration&&O>=1&&(g.refreshedUponExpiration=!1),u?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}class Em extends o.SourceCache{constructor(u){const d={type:"raster-dem",maxzoom:u.transform.maxZoom},v=new Ye(uc(),null),b=hr("mock-dem",d,v,u.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,d){u.state="loaded",d(null)}}class Cf extends o.SourceCache{constructor(u){const d=hr("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new Ye(uc(),null),u.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,d,v){if(u.freezeTileCoverage)return;this.transform=u;const b=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((T,O)=>{if(T[O.key]="",!this._tiles[O.key]){const k=new o.Tile(O,this._source.tileSize*O.overscaleFactor(),u.tileZoom);k.state="loaded",this._tiles[O.key]=k}return T},{});for(const T in this._tiles)T in b||(this.freeFBO(T),this._tiles[T].unloadVectorData(),delete this._tiles[T])}freeFBO(u){const d=this.proxyCachedFBO[u];if(d!==void 0){const v=Object.values(d);this.renderCachePool.push(...v),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach(u=>u.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Pf extends o.OverscaledTileID{constructor(u,d,v){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=d,this.projMatrix=v}}class Tm extends o.Elevation{constructor(u,d){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,b,T]=function(N){const q=new o.StructArrayLayout2i4,W=new o.StructArrayLayout3ui6,K=131;q.reserve(17161),W.reserve(33800);const ne=o.EXTENT/128,le=o.EXTENT+ne/2,ue=le+ne;for(let fe=-ne;fe<ue;fe+=ne)for(let J=-ne;J<ue;J+=ne){const se=J<0||J>le||fe<0||fe>le?24575:0,me=o.clamp(Math.round(J),0,o.EXTENT),ye=o.clamp(Math.round(fe),0,o.EXTENT);q.emplaceBack(me+se,ye)}const ce=(fe,J)=>{const se=J*K+fe;W.emplaceBack(se+1,se,se+K),W.emplaceBack(se+K,se+K+1,se+1)};for(let fe=1;fe<129;fe++)for(let J=1;J<129;J++)ce(J,fe);return[0,129].forEach(fe=>{for(let J=0;J<130;J++)ce(J,fe),ce(fe,J)}),[q,W,32768]}(),O=u.context;this.gridBuffer=O.createVertexBuffer(v,o.posAttributes.members),this.gridIndexBuffer=O.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,v.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,v.length,T),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Cf(d.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const k=O.gl;this._overlapStencilMode=new o.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Em(d.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(u,d,v){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const b=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const T=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const O=this.getScaledDemTileSize();this.sourceCache.update(d,O,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,T(),this._initializing=!0),T(),d.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(u=>u.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=d.getIds().map(N=>{const q=d.getTileByID(N).tileID;return q.projMatrix=v.calculateProjMatrix(q.toUnwrapped()),q});(function(N,q){const W=q.transform.pointCoordinate(q.transform.getCameraPoint()),K=new o.Point(W.x,W.y);N.sort((ne,le)=>{if(le.overscaledZ-ne.overscaledZ)return le.overscaledZ-ne.overscaledZ;const ue=new o.Point(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),ce=new o.Point(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),fe=K.mult(1<<ne.canonical.z);return fe.x-=.5,fe.y-=.5,fe.distSqr(ue)-fe.distSqr(ce)})})(b,this.painter),this._previousZoom=v.zoom;const T=this.proxyToSource||{};this.proxyToSource={},b.forEach(N=>{this.proxyToSource[N.key]={}}),this.terrainTileForTile={};const O=this._style._sourceCaches;for(const N in O){const q=O[N];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,u[N],T),q.usedForTerrain))continue;const W=u[N];q.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[d.id]=b.map(N=>new Pf(N,N.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(T),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const k={};this._visibleDemTiles=[];for(const N of this.proxyCoords){const q=this.terrainTileForTile[N.key];if(!q)continue;const W=q.tileID.key;W in k||(this._visibleDemTiles.push(q),k[W]=W)}}_assignTerrainTiles(u){this._initializing||u.forEach(d=>{if(this.terrainTileForTile[d.key])return;const v=this._findTileCoveringTileID(d,this.sourceCache);v&&(this.terrainTileForTile[d.key]=v)})}_prepareDEMTextures(){const u=this.painter.context,d=u.gl;for(const v in this.terrainTileForTile){const b=this.terrainTileForTile[v],T=b.dem;!T||b.demTexture&&!b.needsDEMTextureUpload||(u.activeTexture.set(d.TEXTURE1),bm(this.painter,b,T))}}_prepareDemTileUniforms(u,d,v,b){if(!d||d.demTexture==null)return!1;const T=u.tileID.canonical,O=Math.pow(2,d.tileID.canonical.z-T.z),k=b||"";return v[`u_dem_tl${k}`]=[T.x*O%1,T.y*O%1],v[`u_dem_scale${k}`]=O,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,d=u.gl;if(!this._emptyDepthBufferTexture){const v=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(u,v,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const d=this._visibleDemTiles.reduce((v,b)=>{if(!b.dem)return v;const T=b.dem.tree.minimums[0];return T>0&&u++,v+T},0);return u?d/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,d=u.gl;u.activeTexture.set(d.TEXTURE2);const v=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(v,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let T=this._emptyDEMTexture;return T?T.update(b,{premultiply:!1}):T=this._emptyDEMTexture=new o.Texture(u,b,d.RGBA,{premultiply:!1}),T}setupElevationDraw(u,d,v){const b=this.painter.context,T=b.gl,O=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;O.u_dem_size=this.sourceCache.getSource().tileSize,O.u_exaggeration=this.exaggeration();let N=null,q=null,W=1;if(v&&v.morphing&&this._useVertexMorphing){const K=v.morphing.srcDemTile,ne=v.morphing.dstDemTile;W=v.morphing.phase,K&&ne&&(this._prepareDemTileUniforms(u,K,O,"_prev")&&(q=K),this._prepareDemTileUniforms(u,ne,O)&&(N=ne))}if(q&&N?(b.activeTexture.set(T.TEXTURE2),N.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),b.activeTexture.set(T.TEXTURE4),q.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),O.u_dem_lerp=W):(N=this.terrainTileForTile[u.tileID.key],b.activeTexture.set(T.TEXTURE2),(this._prepareDemTileUniforms(u,N,O)?N.demTexture:this.emptyDEMTexture).bind(T.NEAREST,T.CLAMP_TO_EDGE)),b.activeTexture.set(T.TEXTURE3),v&&v.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),this._depthFBO&&(O.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),O.u_depth_size_inv=[1,1]),v&&v.useMeterToDem&&N){const K=(1<<N.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;O.u_meter_to_dem=K}if(v&&v.labelPlaneMatrixInv&&(O.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),d.setTerrainUniformValues(b,O),this.painter.transform.projection.name==="globe"){const K=this.globeUniformValues(this.painter.transform,u.tileID.canonical,v&&v.useDenormalizedUpVectorScale);d.setGlobeUniformValues(b,K)}}globeUniformValues(u,d,v){const b=u.projection;return{u_tile_tl_up:b.upVector(d,0,0),u_tile_tr_up:b.upVector(d,o.EXTENT,0),u_tile_br_up:b.upVector(d,o.EXTENT,o.EXTENT),u_tile_bl_up:b.upVector(d,0,o.EXTENT),u_tile_up_scale:v?o.globeMetersToEcef(1):b.upVectorScale(d,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const d=this.painter,v=this.painter.context;u.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,T,O,k,N){if(b.transform.projection.name==="globe")(function(q,W,K,ne,le){const ue=q.context,ce=ue.gl;let fe,J;const se=q.options.showTerrainWireframe?2:0,me=q.transform,ye=o.globeUseCustomAntiAliasing(q,ue,me),Pe=(lt,Ue)=>{if(J===lt)return;const tt=[pl[lt],"PROJECTION_GLOBE_VIEW"];ye&&tt.push("CUSTOM_ANTIALIASING"),Ue&&tt.push(pl[se]),fe=q.useProgram("globeRaster",null,tt),J=lt},Me=q.colorModeForRenderPass(),Oe=new o.DepthMode(ce.LEQUAL,o.DepthMode.ReadWrite,q.depthRangeFor3D);Xa.update(le);const je=o.calculateGlobeMercatorMatrix(me),Le=[o.mercatorXfromLng(me.center.lng),o.mercatorYfromLat(me.center.lat)],We=se?[!1,!0]:[!1],ut=q.globeSharedBuffers,Be=[me.width*o.exported.devicePixelRatio,me.height*o.exported.devicePixelRatio],rt=Float32Array.from(me.globeMatrix),He={useDenormalizedUpVectorScale:!0};if(We.forEach(lt=>{const Ue=q.transform,tt=Af(Ue.zoom)*W.exaggeration();J=-1;const ft=lt?ce.LINES:ce.TRIANGLES;for(const ot of ne){const pt=K.getTile(ot),Bt=o.StencilMode.disabled,Jt=W.prevTerrainTileForTile[ot.key],jt=W.terrainTileForTile[ot.key];yc(Jt,jt)&&Xa.newMorphing(ot.key,Jt,jt,le,250),ue.activeTexture.set(ce.TEXTURE0),pt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const qt=Xa.getMorphValuesForProxy(ot.key),gr=qt?1:0;qt&&o.extend$1(He,{morphing:{srcDemTile:qt.from,dstDemTile:qt.to,phase:o.easeCubicInOut(qt.phase)}});const fr=o.tileCornersToBounds(ot.canonical),zt=o.getLatitudinalLod(fr.getCenter().lat),Ir=o.getGridMatrix(ot.canonical,fr,zt,Ue.worldSize/Ue._pixelsPerMercatorPixel),Nr=o.globeNormalizeECEF(o.globeTileBounds(ot.canonical)),zr=Tf(Ue.projMatrix,rt,je,Nr,o.globeToMercatorTransition(Ue.zoom),Le,Ue.frustumCorners.TL,Ue.frustumCorners.TR,Ue.frustumCorners.BR,Ue.frustumCorners.BL,Ue.globeCenterInViewSpace,Ue.globeRadius,Be,tt,Ir);if(Pe(gr,lt),W.setupElevationDraw(pt,fe,He),q.prepareDrawProgram(ue,fe,ot.toUnwrapped()),ut){const[Br,Ei,ti]=lt?ut.getWirefameBuffers(q.context,zt):ut.getGridBuffers(zt,tt!==0);fe.draw(ue,ft,Oe,Bt,Me,o.CullFaceMode.backCCW,zr,"globe_raster",Br,Ei,ti)}}}),ut){const lt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&lt.push("CUSTOM_ANTIALIASING"),fe=q.useProgram("globeRaster",null,lt);for(const Ue of ne){const{x:tt,y:ft,z:ot}=Ue.canonical,pt=ft===0,Bt=ft===(1<<ot)-1,[Jt,jt,qt,gr]=ut.getPoleBuffers(ot);if(gr&&(pt||Bt)){const fr=K.getTile(Ue);ue.activeTexture.set(ce.TEXTURE0),fr.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let zt=o.globePoleMatrixForTile(ot,tt,me);const Ir=o.globeNormalizeECEF(o.globeTileBounds(Ue.canonical)),Nr=(zr,Br)=>zr.draw(ue,ce.TRIANGLES,Oe,o.StencilMode.disabled,Me,o.CullFaceMode.disabled,Tf(me.projMatrix,zt,zt,Ir,0,Le,me.frustumCorners.TL,me.frustumCorners.TR,me.frustumCorners.BR,me.frustumCorners.BL,me.globeCenterInViewSpace,me.globeRadius,Be,0),"globe_pole_raster",Br,qt,gr);W.setupElevationDraw(fr,fe,He),q.prepareDrawProgram(ue,fe,Ue.toUnwrapped()),pt&&Nr(fe,Jt),Bt&&(zt=o.scale(o.create(),zt,[1,-1,1]),Nr(fe,jt))}}}})(b,T,O,k,N);else{const q=b.context,W=q.gl;let K,ne;const le=b.options.showTerrainWireframe?2:0,ue=(me,ye)=>{if(ne===me)return;const Pe=[pl[me]];ye&&Pe.push(pl[le]),K=b.useProgram("terrainRaster",null,Pe),ne=me},ce=b.colorModeForRenderPass(),fe=new o.DepthMode(W.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);Xa.update(N);const J=b.transform,se=Af(J.zoom)*T.exaggeration();(le?[!1,!0]:[!1]).forEach(me=>{ne=-1;const ye=me?W.LINES:W.TRIANGLES,[Pe,Me]=me?T.getWirefameBuffer():[T.gridIndexBuffer,T.gridSegments];for(const Oe of k){const je=O.getTile(Oe),Le=o.StencilMode.disabled,We=T.prevTerrainTileForTile[Oe.key],ut=T.terrainTileForTile[Oe.key];yc(We,ut)&&Xa.newMorphing(Oe.key,We,ut,N,250),q.activeTexture.set(W.TEXTURE0),je.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const Be=Xa.getMorphValuesForProxy(Oe.key),rt=Be?1:0;let He;Be&&(He={morphing:{srcDemTile:Be.from,dstDemTile:Be.to,phase:o.easeCubicInOut(Be.phase)}});const lt=gc(Oe.projMatrix,z_(Oe.canonical,J.renderWorldCopies)?se/10:se);ue(rt,me),T.setupElevationDraw(je,K,He),b.prepareDrawProgram(q,K,Oe.toUnwrapped()),K.draw(q,ye,fe,Le,ce,o.CullFaceMode.backCCW,lt,"terrain_raster",T.gridBuffer,Pe,Me)}})}}(d,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const d=this.painter,v=this.painter.context,b=this.proxySourceCache,T=this.proxiedCoords[b.id],O=this._drapedRenderBatches.shift(),k=[],N=d.style.order;let q=0;for(const W of T){const K=b.getTileByID(W.proxyTileKey),ne=b.proxyCachedFBO[W.key]?b.proxyCachedFBO[W.key][u]:void 0,le=ne!==void 0?b.renderCache[ne]:this.pool[q++],ue=ne!==void 0;if(K.texture=le.tex,ue&&!le.dirty){k.push(K.tileID);continue}let ce;v.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(v.clear({color:o.Color.transparent,stencil:0}),le.dirty=!1);for(let fe=O.start;fe<=O.end;++fe){const J=d.style._layers[N[fe]];if(J.isHidden(d.transform.zoom))continue;const se=d.style._getLayerSourceCache(J),me=se?this.proxyToSource[W.key][se.id]:[W];if(!me)continue;const ye=me;v.viewport.set([0,0,le.fb.width,le.fb.height]),ce!==(se?se.id:null)&&(this._setupStencil(le,me,J,se),ce=se?se.id:null),d.renderLayer(d,se,J,ye)}this.renderedToTile?(le.dirty=!0,k.push(K.tileID)):ue||--q,q===5&&(q=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),O.end+1}postRender(){}renderCacheEfficiency(u){const d=u.order.length;if(d===0)return{efficiency:100};let v,b=0,T=0,O=!1;for(let k=0;k<d;++k){const N=u._layers[u.order[k]];this._style.isLayerDraped(N)?(O&&++b,++T):O||(O=!0,v=N.id)}return T===0?{efficiency:100}:{efficiency:100*(1-b/T),firstUndrapedLayer:v}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{u=Math.min(u,d.dem.tree.minimums[0])}),u===0?u:(u-30)*this._exaggeration}raycast(u,d,v){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(T=>T.dem).map(T=>{const O=T.tileID,k=1<<O.overscaledZ,{x:N,y:q}=O.canonical,W=N/k,K=(N+1)/k,ne=q/k,le=(q+1)/k;return{minx:W,miny:ne,maxx:K,maxy:le,t:T.dem.tree.raycastRoot(W,ne,K,le,u,d,v),tile:T}});b.sort((T,O)=>(T.t!==null?T.t:Number.MAX_VALUE)-(O.t!==null?O.t:Number.MAX_VALUE));for(const T of b){if(T.t==null)return null;const O=T.tile.dem.tree.raycast(T.minx,T.miny,T.maxx,T.maxy,u,d,v);if(O!=null)return O}return null}_createFBO(){const u=this.painter.context,d=u.gl,v=this.drapeBufferSize;u.activeTexture.set(d.TEXTURE0);const b=new o.Texture(u,{width:v[0],height:v[1],data:null},d.RGBA);b.bind(d.LINEAR,d.CLAMP_TO_EDGE);const T=u.createFramebuffer(v[0],v[1],!1);return T.colorAttachment.set(b.texture),T.depthAttachment=new Ie(u,T.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,T.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):T.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:T,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some(u=>{const d=this._style._layers[u],v=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!v&&d.shouldRedrape():!v&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let u=!1;for(const v of this._style._getSources())if(v instanceof wt){u=!0;break}if(!u)return;const d={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],T=this._style._getLayerSourceCache(b);if(T&&!d[T.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof o.ZoomDependentExpression){d[T.id]=!0;for(const O of this.proxyCoords){const k=this.proxyToSource[O.key][T.id];if(k)for(const N of k)this._clearRenderCacheForTile(T.id,N)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const v in this._style._sourceCaches)if(this._style._sourceCaches[v]._source instanceof mt){u=!0;break}if(!u)return;const d={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],T=this._style._getLayerSourceCache(b);if(!T||d[T.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const O=b.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const N=this.proxyToSource[k.key][T.id];if(N)for(const q of N){const W=Sm(T.getTile(q),T.findLoadedParent(q,0),T,this.painter.transform,O);(W.opacity!==1||W.mix!==0)&&this._clearRenderCacheForTile(T.id,q)}}}}_setupDrapedRenderBatches(){const u=this._style.order,d=u.length;if(d===0)return;const v=[];let b,T=0,O=this._style._layers[u[T]];for(;!this._style.isLayerDraped(O)&&O.isHidden(this.painter.transform.zoom)&&++T<d;)O=this._style._layers[u[T]];for(;T<d;++T){const k=this._style._layers[u[T]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?b===void 0&&(b=T):b!==void 0&&(v.push({start:b,end:T-1}),b=void 0))}b!==void 0&&v.push({start:b,end:T-1}),this._drapedRenderBatches=v}_setupRenderCache(u){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const O=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let k=0;k<O.length;++k){const N=Object.values(O[k]);d.renderCachePool.push(...N)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,b=this._tilesDirty;for(let O=v.length-1;O>=0;O--){const k=v[O];if(d.getTileByID(k.key),d.proxyCachedFBO[k.key]!==void 0){const N=u[k.key],q=this.proxyToSource[k.key];let W=0;for(const K in q){const ne=q[K],le=N[K];if(!le||le.length!==ne.length||ne.some((ue,ce)=>ue!==le[ce]||b[K]&&b[K].hasOwnProperty(ue.key))){W=-1;break}++W}for(const K in d.proxyCachedFBO[k.key])d.renderCache[d.proxyCachedFBO[k.key][K]].dirty=W<0||W!==Object.values(N).length}}const T=[...this._drapedRenderBatches];T.sort((O,k)=>k.end-k.start-(O.end-O.start));for(const O of T)for(const k of v){if(d.proxyCachedFBO[k.key])continue;let N=d.renderCachePool.pop();N===void 0&&d.renderCache.length<50&&(N=d.renderCache.length,d.renderCache.push(this._createFBO())),N!==void 0&&(d.proxyCachedFBO[k.key]={},d.proxyCachedFBO[k.key][O.start]=N,d.renderCache[N].dirty=!0)}this._tilesDirty={}}_setupStencil(u,d,v,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const T=this.painter.context,O=T.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let k;if(v.isTileClipped())k=d.length,this._overlapStencilMode.test={func:O.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:O.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(T.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(u,d){const v=this.painter,b=this.painter.context,T=b.gl;v._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const O=v.useProgram("clippingMask");for(const k of u){const N=v._tileClippingMaskIDs[k.key]=--d;O.draw(b,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},N,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Xu(k.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(u){const d=this.painter.transform;if(u.x<0||u.x>d.width||u.y<0||u.y>d.height)return null;const v=[u.x,u.y,1,1];o.transformMat4$1(v,v,d.pixelMatrixInverse),o.scale$1(v,v,1/v[3]),v[0]/=d.worldSize,v[1]/=d.worldSize;const b=d._camera.position,T=o.mercatorZfromAltitude(1,d.center.lat),O=[b[0],b[1],b[2]/T,0],k=o.subtract([],v.slice(0,3),O);o.normalize(k,k);const N=this.raycast(O,k,this._exaggeration);return N!==null&&N?(o.scaleAndAdd(O,O,k,N),O[3]=O[2],O[2]*=T,O):null}drawDepth(){const u=this.painter,d=u.context,v=this.proxySourceCache,b=Math.ceil(u.width),T=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===T||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const O=d.gl,k=d.createFramebuffer(b,T,!0);d.activeTexture.set(O.TEXTURE0);const N=new o.Texture(d,{width:b,height:T,data:null},O.RGBA);N.bind(O.NEAREST,O.CLAMP_TO_EDGE),k.colorAttachment.set(N.texture);const q=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,b,T);k.depthAttachment.set(q),this._depthFBO=k,this._depthTexture=N}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,b,T]),function(O,k,N,q){if(O.transform.projection.name==="globe")return;const W=O.context,K=W.gl;W.clear({depth:1});const ne=O.useProgram("terrainDepth"),le=new o.DepthMode(K.LESS,o.DepthMode.ReadWrite,O.depthRangeFor3D);for(const ue of q){const ce=N.getTile(ue),fe=gc(ue.projMatrix,0);k.setupElevationDraw(ce,ne),ne.draw(W,K.TRIANGLES,le,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,fe,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(u,this,v,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,d,v){if(u.getSource()instanceof ur)return this._setupProxiedCoordsForImageSource(u,d,v);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const b=this.proxiedCoords[u.id]=[],T=this.proxyCoords;for(let k=0;k<T.length;k++){const N=T[k],q=this._findTileCoveringTileID(N,u);if(q){const W=this._createProxiedId(N,q,v[N.key]&&v[N.key][u.id]);b.push(W),this.proxyToSource[N.key][u.id]=[W]}}let O=!1;for(let k=0;k<d.length;k++){const N=u.getTile(d[k]);if(!N||!N.hasData())continue;const q=this._findTileCoveringTileID(N.tileID,this.proxySourceCache);if(q&&q.tileID.canonical.z!==N.tileID.canonical.z){const W=this.proxyToSource[q.tileID.key][u.id],K=this._createProxiedId(q.tileID,N,v[q.tileID.key]&&v[q.tileID.key][u.id]);W?W.splice(W.length-1,0,K):this.proxyToSource[q.tileID.key][u.id]=[K],b.push(K),O=!0}}this._sourceTilesOverlap[u.id]=O}_setupProxiedCoordsForImageSource(u,d,v){if(!u.getSource().loaded())return;const b=this.proxiedCoords[u.id]=[],T=this.proxyCoords,O=u.getSource(),k=new o.Point(O.tileID.x,O.tileID.y)._div(1<<O.tileID.z),N=O.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((W,K)=>(W.min.x=Math.min(W.min.x,K.x-k.x),W.min.y=Math.min(W.min.y,K.y-k.y),W.max.x=Math.max(W.max.x,K.x-k.x),W.max.y=Math.max(W.max.y,K.y-k.y),W),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),q=(W,K)=>{const ne=W.wrap+W.canonical.x/(1<<W.canonical.z),le=W.canonical.y/(1<<W.canonical.z),ue=o.EXTENT/(1<<W.canonical.z),ce=K.wrap+K.canonical.x/(1<<K.canonical.z),fe=K.canonical.y/(1<<K.canonical.z);return ne+ue<ce+N.min.x||ne>ce+N.max.x||le+ue<fe+N.min.y||le>fe+N.max.y};for(let W=0;W<T.length;W++){const K=T[W];for(let ne=0;ne<d.length;ne++){const le=u.getTile(d[ne]);if(!le||!le.hasData()||q(K,le.tileID))continue;const ue=this._createProxiedId(K,le,v[K.key]&&v[K.key][u.id]),ce=this.proxyToSource[K.key][u.id];ce?ce.push(ue):this.proxyToSource[K.key][u.id]=[ue],b.push(ue)}}}_createProxiedId(u,d,v){let b=this.orthoMatrix;if(v){const T=v.find(O=>O.key===d.tileID.key);if(T)return T}if(d.tileID.key!==u.key){const T=u.canonical.z-d.tileID.canonical.z;let O,k,N;b=o.create();const q=d.tileID.wrap-u.wrap<<u.overscaledZ;T>0?(O=o.EXTENT>>T,k=O*((d.tileID.canonical.x<<T)-u.canonical.x+q),N=O*((d.tileID.canonical.y<<T)-u.canonical.y)):(O=o.EXTENT<<-T,k=o.EXTENT*(d.tileID.canonical.x-(u.canonical.x+q<<-T)),N=o.EXTENT*(d.tileID.canonical.y-(u.canonical.y<<-T))),o.ortho(b,0,O,0,O,0,1),o.translate(b,b,[k,N,0])}return new Pf(d.tileID,u.key,b)}_findTileCoveringTileID(u,d){let v=d.getTile(u);if(v&&v.hasData())return v;const b=this._findCoveringTileCache[d.id],T=b[u.key];if(v=T?d.getTileByID(T):null,v&&v.hasData()||T===null)return v;let O=v?v.tileID:u,k=O.overscaledZ;const N=d.getSource().minzoom,q=[];if(!T){const K=d.getSource().maxzoom;if(u.canonical.z>=K){const ne=u.canonical.z-K;d.getSource().reparseOverscaled?(k=Math.max(u.canonical.z+2,d.transform.tileZoom),O=new o.OverscaledTileID(k,u.wrap,K,u.canonical.x>>ne,u.canonical.y>>ne)):ne!==0&&(k=K,O=new o.OverscaledTileID(k,u.wrap,K,u.canonical.x>>ne,u.canonical.y>>ne))}O.key!==u.key&&(q.push(O.key),v=d.getTile(O))}const W=K=>{q.forEach(ne=>{b[ne]=K}),q.length=0};for(k-=1;k>=N&&(!v||!v.hasData());k--){v&&W(v.tileID.key);const K=O.calculateScaledKey(k);if(v=d.getTileByID(K),v&&v.hasData())break;const ne=b[K];if(ne===null)break;ne===void 0?q.push(K):v=d.getTileByID(ne)}return W(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,d){let v=this._tilesDirty[u];v||(v=this._tilesDirty[u]={}),v[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=function(d){let v=0;const b=new o.StructArrayLayout2ui4,T=131;for(let O=1;O<129;O++){for(let k=1;k<129;k++)v=O*T+k,b.emplaceBack(v,v+1),b.emplaceBack(v,v+T),b.emplaceBack(v+1,v+T),O===128&&b.emplaceBack(v+T,v+T+1);b.emplaceBack(v+1,v+1+T)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Sr{static cacheKey(u,d,v,b){let T=`${d}${b?b.cacheKey:""}`;for(const O of v)u.usedDefines.includes(O)&&(T+=`/${O}`);return T}constructor(u,d,v,b,T,O){const k=u.gl;this.program=k.createProgram();const N=function(J){const se=[];for(let me=0;me<J.length;me++){if(J[me]===null)continue;const ye=J[me].split(" ");se.push(ye.pop())}return se}(v.staticAttributes),q=b?b.getBinderAttributes():[],W=N.concat(q);let K=b?b.defines():[];K=K.concat(O.map(J=>`#define ${J}`));const ne=u.isWebGL2?`#version 300 es
`:"",le=ne+K.concat(u.extStandardDerivatives&&ne.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(vm):vm,vm,Ef,j_.fragmentSource,pc.fragmentSource,v.fragmentSource).join(`
`),ue=ne+K.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ef,j_.vertexSource,pc.vertexSource,Sf.vertexSource,v.vertexSource).join(`
`),ce=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ce,le),k.compileShader(ce),k.attachShader(this.program,ce);const fe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(fe,ue),k.compileShader(fe),k.attachShader(this.program,fe),this.attributes={},this.numAttributes=W.length;for(let J=0;J<this.numAttributes;J++)W[J]&&(k.bindAttribLocation(this.program,J,W[J]),this.attributes[W[J]]=J);k.linkProgram(this.program),k.deleteShader(fe),k.deleteShader(ce),this.fixedUniforms=T(u),this.binderUniforms=b?b.getUniforms(u):[],O.includes("TERRAIN")&&(this.terrainUniforms=(J=>({u_dem:new o.Uniform1i(J),u_dem_prev:new o.Uniform1i(J),u_dem_unpack:new o.Uniform4f(J),u_dem_tl:new o.Uniform2f(J),u_dem_scale:new o.Uniform1f(J),u_dem_tl_prev:new o.Uniform2f(J),u_dem_scale_prev:new o.Uniform1f(J),u_dem_size:new o.Uniform1f(J),u_dem_lerp:new o.Uniform1f(J),u_exaggeration:new o.Uniform1f(J),u_depth:new o.Uniform1i(J),u_depth_size_inv:new o.Uniform2f(J),u_meter_to_dem:new o.Uniform1f(J),u_label_plane_matrix_inv:new o.UniformMatrix4f(J)}))(u)),O.includes("GLOBE")&&(this.globeUniforms=(J=>({u_tile_tl_up:new o.Uniform3f(J),u_tile_tr_up:new o.Uniform3f(J),u_tile_br_up:new o.Uniform3f(J),u_tile_bl_up:new o.Uniform3f(J),u_tile_up_scale:new o.Uniform1f(J)}))(u)),O.includes("FOG")&&(this.fogUniforms=(J=>({u_fog_matrix:new o.UniformMatrix4f(J),u_fog_range:new o.Uniform2f(J),u_fog_color:new o.Uniform4f(J),u_fog_horizon_blend:new o.Uniform1f(J),u_fog_temporal_offset:new o.Uniform1f(J),u_frustum_tl:new o.Uniform3f(J),u_frustum_tr:new o.Uniform3f(J),u_frustum_br:new o.Uniform3f(J),u_frustum_bl:new o.Uniform3f(J),u_globe_pos:new o.Uniform3f(J),u_globe_radius:new o.Uniform1f(J),u_globe_transition:new o.Uniform1f(J),u_is_globe:new o.Uniform1i(J),u_viewport:new o.Uniform2f(J)}))(u))}}setTerrainUniformValues(u,d){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in d)v[b]&&v[b].set(this.program,b,d[b])}}setGlobeUniformValues(u,d){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in d)v[b]&&v[b].set(this.program,b,d[b])}}setFogUniformValues(u,d){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in d)v[b].set(this.program,b,d[b])}}draw(u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce){const fe=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(v),u.setStencilMode(b),u.setColorMode(T),u.setCullFace(O);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,k[se]);ue&&ue.setUniforms(this.program,u,this.binderUniforms,ne,{zoom:le});const J={[fe.LINES]:2,[fe.TRIANGLES]:3,[fe.LINE_STRIP]:1}[d];for(const se of K.get()){const me=se.vaos||(se.vaos={});(me[N]||(me[N]=new nE)).bind(u,this,q,ue?ue.getPaintVertexBuffers():[],W,se.vertexOffset,ce||[]),fe.drawElements(d,se.primitiveLength*J,fe.UNSIGNED_SHORT,se.primitiveOffset*J*2)}}}function Ku(g,u){const d=Math.pow(2,u.tileID.overscaledZ),v=u.tileSize*Math.pow(2,g.transform.tileZoom)/d,b=v*(u.tileID.canonical.x+u.tileID.wrap*d),T=v*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/_t(u,1,g.transform.tileZoom),u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const B_=o.create(),Am=(g,u,d,v,b,T,O,k,N,q,W)=>{const K=u.style.light,ne=K.properties.get("position"),le=[ne.x,ne.y,ne.z],ue=o.create$1();K.properties.get("anchor")==="viewport"&&(o.fromRotation(ue,-u.transform.angle),o.transformMat3(le,le,ue));const ce=K.properties.get("color"),fe=u.transform,J={u_matrix:g,u_lightpos:le,u_lightintensity:K.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+d,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:B_,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:T};return fe.projection.name==="globe"&&(J.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],J.u_zoom_transition=N,J.u_inv_rot_matrix=W,J.u_merc_center=q,J.u_up_dir=fe.projection.upVector(new o.CanonicalTileID(0,0,0),q[0]*o.EXTENT,q[1]*o.EXTENT),J.u_height_lift=k),J},F_=(g,u,d,v,b,T,O,k,N,q,W,K)=>{const ne=Am(g,u,d,v,b,T,O,N,q,W,K),le={u_height_factor:-Math.pow(2,O.overscaledZ)/k.tileSize/8};return o.extend(ne,Ku(u,k),le)},ml=g=>({u_matrix:g}),Cm=(g,u,d)=>o.extend(ml(g),Ku(u,d)),iE=(g,u)=>({u_matrix:g,u_world:u}),oE=(g,u,d,v)=>o.extend(Cm(g,u,d),{u_world:v}),aE=o.create(),Pm=(g,u,d,v,b,T)=>{const O=g.transform,k=O.projection.name==="globe";let N;if(T.paint.get("circle-pitch-alignment")==="map")if(k){const W=o.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel;N=Float32Array.from([W,0,0,W])}else N=O.calculatePixelsToTileUnitsMatrix(d);else N=new Float32Array([O.pixelsToGLUnits[0],0,0,O.pixelsToGLUnits[1]]);const q={u_camera_to_center_distance:O.cameraToCenterDistance,u_matrix:g.translatePosMatrix(u.projMatrix,d,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:N,u_inv_rot_matrix:aE,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){q.u_inv_rot_matrix=v,q.u_merc_center=b,q.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],q.u_zoom_transition=o.globeToMercatorTransition(O.zoom);const W=b[0]*o.EXTENT,K=b[1]*o.EXTENT;q.u_up_dir=O.projection.upVector(new o.CanonicalTileID(0,0,0),W,K)}return q},Om=g=>{const u=[];return g.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),g.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},Mm=(g,u,d,v)=>{const b=o.EXTENT/d.tileSize;return{u_matrix:g,u_camera_to_center_distance:u.getCameraToCenterDistance(v),u_extrude_scale:[u.pixelsToGLUnits[0]/b,u.pixelsToGLUnits[1]/b]}},Of=(g,u,d=1)=>({u_matrix:g,u_color:u,u_overlay:0,u_overlay_scale:d}),U_=o.create(),V_=(g,u,d,v,b,T,O)=>{const k=g.transform,N=k.projection.name==="globe",q=N?o.globePixelsToTileUnits(k.zoom,u.canonical)*k._pixelsPerMercatorPixel:_t(d,1,T),W={u_matrix:u.projMatrix,u_extrude_scale:q,u_intensity:O,u_inv_rot_matrix:U_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(N){W.u_inv_rot_matrix=v,W.u_merc_center=b,W.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],W.u_zoom_transition=o.globeToMercatorTransition(k.zoom);const K=b[0]*o.EXTENT,ne=b[1]*o.EXTENT;W.u_up_dir=k.projection.upVector(new o.CanonicalTileID(0,0,0),K,ne)}return W},sE=(g,u,d,v,b,T,O)=>{const k=g.transform,N=k.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:km(g,u,d,v),u_pixels_to_tile_units:N,u_device_pixel_ratio:T,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:b,u_texsize:Ju(d)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:vc(u,g.transform),u_alpha_discard_threshold:0,u_trim_offset:O}},Yu=(g,u,d,v,b)=>{const T=g.transform;return{u_matrix:km(g,u,d,v),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:T.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:b,u_image:0,u_tile_units_to_pixels:vc(u,T),u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function vc(g,u){return 1/_t(g,1,u.tileZoom)}function km(g,u,d,v){return g.translatePosMatrix(v||u.tileID.projMatrix,u,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function Ju(g){const u=g.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const Im=(g,u,d,v,b,T)=>{return{u_matrix:g,u_tl_parent:u,u_scale_parent:d,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(k=b.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(O=b.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:ua(b.paint.get("raster-hue-rotate")),u_perspective_transform:T};var O,k};function ua(g){g*=Math.PI/180;const u=Math.sin(g),d=Math.cos(g);return[(2*d+1)/3,(-Math.sqrt(3)*u-d+1)/3,(Math.sqrt(3)*u-d+1)/3]}const Mf=o.create(),Dm=(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce)=>{const fe=b.transform,J={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:fe.width/fe.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:O,u_coord_matrix:k,u_is_text:+N,u_pitch_with_map:+v,u_texsize:q,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mf,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Mf,u_up_vector:[0,-1,0]};return ce.name==="globe"&&(J.u_tile_id=[W.canonical.x,W.canonical.y,1<<W.canonical.z],J.u_zoom_transition=K,J.u_inv_rot_matrix=le,J.u_merc_center=ne,J.u_camera_forward=fe._camera.forward(),J.u_ecef_origin=o.globeECEFOrigin(fe.globeMatrix,W.toUnwrapped()),J.u_tile_matrix=Float32Array.from(fe.globeMatrix),J.u_up_vector=ue),J},kf=(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce,fe)=>o.extend(Dm(g,u,d,v,b,T,O,k,N,q,K,ne,le,ue,ce,fe),{u_gamma_scale:v?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+W}),W_=(g,u,d,v,b,T,O,k,N,q,W,K,ne,le,ue,ce)=>o.extend(kf(g,u,d,v,b,T,O,k,!0,N,!0,W,K,ne,le,ue,ce),{u_texsize_icon:q,u_texture_icon:1}),Rm=(g,u,d)=>({u_matrix:g,u_opacity:u,u_color:d}),lE=(g,u,d,v,b)=>o.extend(function(T,O,k){const N=O.imageManager.getPattern(T.toString()),{width:q,height:W}=O.imageManager.getPixelSize(),K=Math.pow(2,k.tileID.overscaledZ),ne=k.tileSize*Math.pow(2,O.transform.tileZoom)/K,le=ne*(k.tileID.canonical.x+k.tileID.wrap*K),ue=ne*k.tileID.canonical.y;return{u_image:0,u_pattern_tl:N.tl,u_pattern_br:N.br,u_texsize:[q,W],u_pattern_size:N.displaySize,u_tile_units_to_pixels:1/_t(k,1,O.transform.tileZoom),u_pixel_coord_upper:[le>>16,ue>>16],u_pixel_coord_lower:[65535&le,65535&ue]}}(v,d,b),{u_matrix:g,u_opacity:u}),Lm={fillExtrusion:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g)}),fillExtrusionPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_height_factor:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g)}),fill:g=>({u_matrix:new o.UniformMatrix4f(g)}),fillPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),fillOutline:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g)}),fillOutlinePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),circle:g=>({u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),collisionBox:g=>({u_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.Uniform2f(g)}),collisionCircle:g=>({u_matrix:new o.UniformMatrix4f(g),u_inv_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_viewport_size:new o.Uniform2f(g)}),debug:g=>({u_color:new o.UniformColor(g),u_matrix:new o.UniformMatrix4f(g),u_overlay:new o.Uniform1i(g),u_overlay_scale:new o.Uniform1f(g)}),clippingMask:g=>({u_matrix:new o.UniformMatrix4f(g)}),heatmap:g=>({u_extrude_scale:new o.Uniform1f(g),u_intensity:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),heatmapTexture:g=>({u_image:new o.Uniform1i(g),u_color_ramp:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g)}),hillshade:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_latrange:new o.Uniform2f(g),u_light:new o.Uniform2f(g),u_shadow:new o.UniformColor(g),u_highlight:new o.UniformColor(g),u_accent:new o.UniformColor(g)}),hillshadePrepare:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_dimension:new o.Uniform2f(g),u_zoom:new o.Uniform1f(g),u_unpack:new o.Uniform4f(g)}),line:g=>({u_matrix:new o.UniformMatrix4f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_units_to_pixels:new o.Uniform2f(g),u_dash_image:new o.Uniform1i(g),u_gradient_image:new o.Uniform1i(g),u_image_height:new o.Uniform1f(g),u_texsize:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g),u_trim_offset:new o.Uniform2f(g)}),linePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_texsize:new o.Uniform2f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_units_to_pixels:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g)}),raster:g=>({u_matrix:new o.UniformMatrix4f(g),u_tl_parent:new o.Uniform2f(g),u_scale_parent:new o.Uniform1f(g),u_fade_t:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_image0:new o.Uniform1i(g),u_image1:new o.Uniform1i(g),u_brightness_low:new o.Uniform1f(g),u_brightness_high:new o.Uniform1f(g),u_saturation_factor:new o.Uniform1f(g),u_contrast_factor:new o.Uniform1f(g),u_spin_weights:new o.Uniform3f(g),u_perspective_transform:new o.Uniform2f(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_texture:new o.Uniform1i(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_is_halo:new o.Uniform1i(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texsize_icon:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_texture_icon:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_is_halo:new o.Uniform1i(g)}),background:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_color:new o.UniformColor(g)}),backgroundPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_pattern_tl:new o.Uniform2f(g),u_pattern_br:new o.Uniform2f(g),u_texsize:new o.Uniform2f(g),u_pattern_size:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),terrainRaster:wm,terrainDepth:wm,skybox:g=>({u_matrix:new o.UniformMatrix4f(g),u_sun_direction:new o.Uniform3f(g),u_cubemap:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxGradient:g=>({u_matrix:new o.UniformMatrix4f(g),u_color_ramp:new o.Uniform1i(g),u_center_direction:new o.Uniform3f(g),u_radius:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxCapture:g=>({u_matrix_3f:new o.UniformMatrix3f(g),u_sun_direction:new o.Uniform3f(g),u_sun_intensity:new o.Uniform1f(g),u_color_tint_r:new o.Uniform4f(g),u_color_tint_m:new o.Uniform4f(g),u_luminance:new o.Uniform1f(g)}),globeRaster:g=>({u_proj_matrix:new o.UniformMatrix4f(g),u_globe_matrix:new o.UniformMatrix4f(g),u_normalize_matrix:new o.UniformMatrix4f(g),u_merc_matrix:new o.UniformMatrix4f(g),u_zoom_transition:new o.Uniform1f(g),u_merc_center:new o.Uniform2f(g),u_image0:new o.Uniform1i(g),u_grid_matrix:new o.UniformMatrix3f(g),u_skirt_height:new o.Uniform1f(g),u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_globe_pos:new o.Uniform3f(g),u_globe_radius:new o.Uniform1f(g),u_viewport:new o.Uniform2f(g)}),globeAtmosphere:g=>({u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_horizon:new o.Uniform1f(g),u_transition:new o.Uniform1f(g),u_fadeout_range:new o.Uniform1f(g),u_color:new o.Uniform4f(g),u_high_color:new o.Uniform4f(g),u_space_color:new o.Uniform4f(g),u_star_intensity:new o.Uniform1f(g),u_star_density:new o.Uniform1f(g),u_star_size:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g),u_horizon_angle:new o.Uniform1f(g),u_rotation_matrix:new o.UniformMatrix4f(g)})};let If;function Qu(g,u,d,v,b,T,O){const k=g.context,N=k.gl,q=g.transform,W=g.useProgram("collisionBox"),K=[];let ne=0,le=0;for(let ye=0;ye<v.length;ye++){const Pe=v[ye],Me=u.getTile(Pe),Oe=Me.getBucket(d);if(!Oe)continue;const je=go(Pe,Oe,q);let Le=je;b[0]===0&&b[1]===0||(Le=g.translatePosMatrix(je,Me,b,T));const We=O?Oe.textCollisionBox:Oe.iconCollisionBox,ut=Oe.collisionCircleArray;if(ut.length>0){const Be=o.create(),rt=Le;o.mul(Be,Oe.placementInvProjMatrix,q.glCoordMatrix),o.mul(Be,Be,Oe.placementViewportMatrix),K.push({circleArray:ut,circleOffset:le,transform:rt,invTransform:Be,projection:Oe.getProjection()}),ne+=ut.length/4,le=ne}We&&(g.terrain&&g.terrain.setupElevationDraw(Me,W),W.draw(k,N.LINES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,Mm(Le,q,Me,Oe.getProjection()),d.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,q.zoom,null,[We.collisionVertexBuffer,We.collisionVertexBufferExt]))}if(!O||!K.length)return;const ue=g.useProgram("collisionCircle"),ce=new o.StructArrayLayout2f1f2i16;ce.resize(4*ne),ce._trim();let fe=0;for(const ye of K)for(let Pe=0;Pe<ye.circleArray.length/4;Pe++){const Me=4*Pe,Oe=ye.circleArray[Me+0],je=ye.circleArray[Me+1],Le=ye.circleArray[Me+2],We=ye.circleArray[Me+3];ce.emplace(fe++,Oe,je,Le,We,0),ce.emplace(fe++,Oe,je,Le,We,1),ce.emplace(fe++,Oe,je,Le,We,2),ce.emplace(fe++,Oe,je,Le,We,3)}(!If||If.length<2*ne)&&(If=function(ye){const Pe=2*ye,Me=new o.StructArrayLayout3ui6;Me.resize(Pe),Me._trim();for(let Oe=0;Oe<Pe;Oe++){const je=6*Oe;Me.uint16[je+0]=4*Oe+0,Me.uint16[je+1]=4*Oe+1,Me.uint16[je+2]=4*Oe+2,Me.uint16[je+3]=4*Oe+2,Me.uint16[je+4]=4*Oe+3,Me.uint16[je+5]=4*Oe+0}return Me}(ne));const J=k.createIndexBuffer(If,!0),se=k.createVertexBuffer(ce,o.collisionCircleLayout.members,!0);for(const ye of K){const Pe={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(me=q).getCameraToCenterDistance(ye.projection),u_viewport_size:[me.width,me.height]};ue.draw(k,N.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,Pe,d.id,se,J,o.SegmentVector.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,q.zoom)}var me;se.destroy(),J.destroy()}const q_=o.create();function jm({width:g,height:u,anchor:d,textOffset:v,textScale:b},T){const{horizontalAlign:O,verticalAlign:k}=o.getAnchorAlignment(d),N=-(O-.5)*g,q=-(k-.5)*u,W=o.evaluateVariableOffset(d,v);return new o.Point((N/b+W[0])*T,(q/b+W[1])*T)}function cE(g,u,d,v,b,T,O,k,N,q,W){const K=g.text.placedSymbolArray,ne=g.text.dynamicLayoutVertexArray,le=g.icon.dynamicLayoutVertexArray,ue={},ce=g.getProjection(),fe=on(k,ce,T),J=T.elevation,se=ce.upVectorScale(k.canonical,T.center.lat,T.worldSize).metersToTile;ne.clear();for(let me=0;me<K.length;me++){const ye=K.get(me),{tileAnchorX:Pe,tileAnchorY:Me,numGlyphs:Oe}=ye,je=ye.hidden||!ye.crossTileID||g.allowVerticalPlacement&&!ye.placedOrientation?null:v[ye.crossTileID];if(je){let Le=0,We=0,ut=0;if(J){const pt=J?J.getAtTileOffset(k,Pe,Me):0,[Bt,Jt,jt]=ce.upVector(k.canonical,Pe,Me);Le=pt*Bt*se,We=pt*Jt*se,ut=pt*jt*se}let[Be,rt,He,lt]=Qn(ye.projectedAnchorX+Le,ye.projectedAnchorY+We,ye.projectedAnchorZ+ut,d?fe:O);const Ue=k_(T.getCameraToCenterDistance(ce),lt);let tt=b.evaluateSizeForFeature(g.textSizeData,q,ye)*Ue/o.ONE_EM;d&&(tt*=g.tilePixelRatio/N);const ft=jm(je,tt);d?({x:Be,y:rt,z:He}=ce.projectTilePoint(Pe+ft.x,Me+ft.y,k.canonical),[Be,rt,He]=Qn(Be+Le,rt+We,He+ut,O)):(u&&ft._rotate(-T.angle),Be+=ft.x,rt+=ft.y,He=0);const ot=g.allowVerticalPlacement&&ye.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let pt=0;pt<Oe;pt++)o.addDynamicAttributes(ne,Be,rt,He,ot);W&&ye.associatedIconIndex>=0&&(ue[ye.associatedIconIndex]={x:Be,y:rt,z:He,angle:ot})}else zo(Oe,ne)}if(W){le.clear();const me=g.icon.placedSymbolArray;for(let ye=0;ye<me.length;ye++){const Pe=me.get(ye),{numGlyphs:Me}=Pe,Oe=ue[ye];if(Pe.hidden||!Oe)zo(Me,le);else{const{x:je,y:Le,z:We,angle:ut}=Oe;for(let Be=0;Be<Me;Be++)o.addDynamicAttributes(le,je,Le,We,ut)}}g.icon.dynamicLayoutVertexBuffer.updateData(le)}g.text.dynamicLayoutVertexBuffer.updateData(ne)}function $m(g,u,d){return d.iconsInText&&u?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function G_(g,u,d,v,b,T,O,k,N,q,W,K){const ne=g.context,le=ne.gl,ue=g.transform,ce=k==="map",fe=N==="map",J=ce&&d.layout.get("symbol-placement")!=="point",se=ce&&!fe&&!J,me=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ye=!1;const Pe=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),Me=[o.mercatorXfromLng(ue.center.lng),o.mercatorYfromLat(ue.center.lat)],Oe=d.layout.get("text-variable-anchor"),je=ue.projection.name==="globe",Le=[],We=[0,-1,0];let ut=We;!je&&!ue.mercatorFromTransition||ce||(ut=function(Be){const rt=Be._camera.getWorldToCamera(Be.worldSize,1),He=o.multiply([],rt,Be.globeMatrix);o.invert(He,He);const lt=[0,0,0],Ue=[0,1,0,0];return o.transformMat4$1(Ue,Ue,He),lt[0]=Ue[0],lt[1]=Ue[1],lt[2]=Ue[2],o.normalize(lt,lt),lt}(ue));for(const Be of v){const rt=u.getTile(Be),He=rt.getBucket(d);if(!He||He.projection.name==="mercator"&&je)continue;const lt=b?He.text:He.icon;if(!lt||He.fullyClipped||!lt.segments.get().length)continue;const Ue=lt.programConfigurations.get(d.id),tt=b||He.sdfIcons,ft=b?He.textSizeData:He.iconSizeData,ot=fe||ue.pitch!==0,pt=o.evaluateSizeForZoom(ft,ue.zoom);let Bt,Jt,jt,qt,gr=[0,0],fr=null;if(b)Jt=rt.glyphAtlasTexture,jt=le.LINEAR,Bt=rt.glyphAtlasTexture.size,He.iconsInText&&(gr=rt.imageAtlasTexture.size,fr=rt.imageAtlasTexture,qt=ot||g.options.rotating||g.options.zooming||ft.kind==="composite"||ft.kind==="camera"?le.LINEAR:le.NEAREST);else{const Ja=d.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;Jt=rt.imageAtlasTexture,jt=tt||g.options.rotating||g.options.zooming||Ja||ot?le.LINEAR:le.NEAREST,Bt=rt.imageAtlasTexture.size}const zt=He.projection.name==="globe",Ir=zt?ut:We,Nr=zt?o.globeToMercatorTransition(ue.zoom):0,zr=on(Be,He.getProjection(),ue),Br=ue.calculatePixelsToTileUnitsMatrix(rt),Ei=Qe(zr,rt.tileID.canonical,fe,ce,ue,He.getProjection(),Br),ti=g.terrain&&fe&&J?o.invert(o.create(),Ei):q_,xo=kn(zr,rt.tileID.canonical,fe,ce,ue,He.getProjection(),Br),fa=Oe&&He.hasTextData(),an=d.layout.get("icon-text-fit")!=="none"&&fa&&He.hasIconData();if(J){const Ja=ue.elevation,Ms=Ja?Ja.getAtTileOffsetFunc(Be,ue.center.lat,ue.worldSize,He.getProjection()):null,xl=Wa(zr,rt.tileID.canonical,fe,ce,ue,He.getProjection(),Br);cm(He,zr,g,b,xl,xo,fe,q,Ms,Be)}const Fr=J||b&&Oe||an,Ar=g.translatePosMatrix(zr,rt,T,O),In=Fr?q_:Ei,Li=g.translatePosMatrix(xo,rt,T,O,!0),Qr=He.getProjection().createInversionMatrix(ue,Be.canonical),qi=[];g.terrainRenderModeElevated()&&fe&&qi.push("PITCH_WITH_MAP_TERRAIN"),zt&&qi.push("PROJECTION_GLOBE_VIEW"),Fr&&qi.push("PROJECTED_POS_ON_VIEWPORT");const Zf=tt&&d.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let _l;_l=tt?He.iconsInText?W_(ft.kind,pt,se,fe,g,Ar,In,Li,Bt,gr,Be,Nr,Me,Qr,Ir,He.getProjection()):kf(ft.kind,pt,se,fe,g,Ar,In,Li,b,Bt,!0,Be,Nr,Me,Qr,Ir,He.getProjection()):Dm(ft.kind,pt,se,fe,g,Ar,In,Li,b,Bt,Be,Nr,Me,Qr,Ir,He.getProjection());const uh={program:g.useProgram($m(tt,b,He),Ue,qi),buffers:lt,uniformValues:_l,atlasTexture:Jt,atlasTextureIcon:fr,atlasInterpolation:jt,atlasInterpolationIcon:qt,isSDF:tt,hasHalo:Zf,tile:rt,labelPlaneMatrixInv:ti};if(me&&He.canOverlap){ye=!0;const Ja=lt.segments.get();for(const Ms of Ja)Le.push({segments:new o.SegmentVector([Ms]),sortKey:Ms.sortKey,state:uh})}else Le.push({segments:lt.segments,sortKey:0,state:uh})}ye&&Le.sort((Be,rt)=>Be.sortKey-rt.sortKey);for(const Be of Le){const rt=Be.state;if(g.terrain&&g.terrain.setupElevationDraw(rt.tile,rt.program,{useDepthForOcclusion:!je,labelPlaneMatrixInv:rt.labelPlaneMatrixInv}),ne.activeTexture.set(le.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,le.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(ne.activeTexture.set(le.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),rt.isSDF){const He=rt.uniformValues;rt.hasHalo&&(He.u_is_halo=1,eh(rt.buffers,Be.segments,d,g,rt.program,Pe,W,K,He)),He.u_is_halo=0}eh(rt.buffers,Be.segments,d,g,rt.program,Pe,W,K,rt.uniformValues)}}function eh(g,u,d,v,b,T,O,k,N){const q=v.context,W=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.globeExtVertexBuffer];b.draw(q,q.gl.TRIANGLES,T,O,k,o.CullFaceMode.disabled,N,d.id,g.layoutVertexBuffer,g.indexBuffer,u,d.paint,v.transform.zoom,g.programConfigurations.get(d.id),W)}function H_(g,u,d,v,b,T,O){const k=g.context.gl,N=d.paint.get("fill-pattern"),q=N&&N.constantOr(1);let W,K,ne,le,ue;O?(K=q&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=k.LINES):(K=q?"fillPattern":"fill",W=k.TRIANGLES);for(const ce of v){const fe=u.getTile(ce);if(q&&!fe.patternsLoaded())continue;const J=fe.getBucket(d);if(!J)continue;g.prepareDrawTile();const se=J.programConfigurations.get(d.id),me=g.useProgram(K,se);q&&(g.context.activeTexture.set(k.TEXTURE0),fe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),se.updatePaintBuffers());const ye=N.constantOr(null);if(ye&&fe.imageAtlas){const Me=fe.imageAtlas.patternPositions[ye.toString()];Me&&se.setConstantPatternPositions(Me)}const Pe=g.translatePosMatrix(ce.projMatrix,fe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(O){le=J.indexBuffer2,ue=J.segments2;const Me=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];ne=K==="fillOutlinePattern"&&q?oE(Pe,g,fe,Me):iE(Pe,Me)}else le=J.indexBuffer,ue=J.segments,ne=q?Cm(Pe,g,fe):ml(Pe);g.prepareDrawProgram(g.context,me,ce.toUnwrapped()),me.draw(g.context,W,b,g.stencilModeForClipping(ce),T,o.CullFaceMode.disabled,ne,d.id,J.layoutVertexBuffer,le,ue,d.paint,g.transform.zoom,se)}}function Df(g,u,d,v,b,T,O){const k=g.context,N=k.gl,q=g.transform,W=d.paint.get("fill-extrusion-pattern"),K=W.constantOr(1),ne=d.paint.get("fill-extrusion-opacity"),le=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],ue=d.layout.get("fill-extrusion-edge-radius"),ce=ue>0&&!d.paint.get("fill-extrusion-rounded-roof"),fe=ce?0:ue,J=q.projection.name==="globe"?o.fillExtrusionHeightLift():0,se=q.projection.name==="globe",me=se?o.globeToMercatorTransition(q.zoom):0,ye=[o.mercatorXfromLng(q.center.lng),o.mercatorYfromLat(q.center.lat)],Pe=[];se&&Pe.push("PROJECTION_GLOBE_VIEW"),le[0]>0&&Pe.push("FAUX_AO"),ce&&Pe.push("ZERO_ROOF_RADIUS");for(const Me of v){const Oe=u.getTile(Me),je=Oe.getBucket(d);if(!je||je.projection.name!==q.projection.name)continue;const Le=je.programConfigurations.get(d.id),We=g.useProgram(K?"fillExtrusionPattern":"fillExtrusion",Le,Pe);if(g.terrain){const tt=g.terrain;if(g.style.terrainSetForDrapingOnly())tt.setupElevationDraw(Oe,We,{useMeterToDem:!0});else{if(!je.enableTerrain)continue;if(tt.setupElevationDraw(Oe,We,{useMeterToDem:!0}),Z_(k,u,Me,je,d,tt),!je.centroidVertexBuffer){const ft=We.attributes.a_centroid_pos;ft!==void 0&&N.vertexAttrib2f(ft,0,0)}}}K&&(g.context.activeTexture.set(N.TEXTURE0),Oe.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Le.updatePaintBuffers());const ut=W.constantOr(null);if(ut&&Oe.imageAtlas){const tt=Oe.imageAtlas.patternPositions[ut.toString()];tt&&Le.setConstantPatternPositions(tt)}const Be=g.translatePosMatrix(Me.projMatrix,Oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),rt=q.projection.createInversionMatrix(q,Me.canonical),He=d.paint.get("fill-extrusion-vertical-gradient"),lt=K?F_(Be,g,He,ne,le,fe,Me,Oe,J,me,ye,rt):Am(Be,g,He,ne,le,fe,Me,J,me,ye,rt);g.prepareDrawProgram(k,We,Me.toUnwrapped());const Ue=[];g.terrain&&Ue.push(je.centroidVertexBuffer),se&&Ue.push(je.layoutVertexExtBuffer),We.draw(k,k.gl.TRIANGLES,b,T,O,o.CullFaceMode.backCCW,lt,d.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,d.paint,g.transform.zoom,Le,Ue)}}function Z_(g,u,d,v,b,T){const O=[J=>{let se=J.canonical.x-1,me=J.wrap;return se<0&&(se=(1<<J.canonical.z)-1,me--),new o.OverscaledTileID(J.overscaledZ,me,J.canonical.z,se,J.canonical.y)},J=>{let se=J.canonical.x+1,me=J.wrap;return se===1<<J.canonical.z&&(se=0,me++),new o.OverscaledTileID(J.overscaledZ,me,J.canonical.z,se,J.canonical.y)},J=>new o.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,(J.canonical.y===0?1<<J.canonical.z:J.canonical.y)-1),J=>new o.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y===(1<<J.canonical.z)-1?0:J.canonical.y+1)],k=J=>{const se=u.getSource().minzoom,me=Pe=>{const Me=u.getTileByID(Pe);if(Me&&Me.hasData())return Me.getBucket(b)},ye=[0,-1,1];for(const Pe of ye){if(J.overscaledZ+Pe<se)continue;const Me=me(J.calculateScaledKey(J.overscaledZ+Pe));if(Me)return Me}},N=[0,0,0],q=(J,se)=>(N[0]=Math.min(J.min.y,se.min.y),N[1]=Math.max(J.max.y,se.max.y),N[2]=o.EXTENT-se.min.x>J.max.x?se.min.x-o.EXTENT:J.max.x,N),W=(J,se)=>(N[0]=Math.min(J.min.x,se.min.x),N[1]=Math.max(J.max.x,se.max.x),N[2]=o.EXTENT-se.min.y>J.max.y?se.min.y-o.EXTENT:J.max.y,N),K=[(J,se)=>q(J,se),(J,se)=>q(se,J),(J,se)=>W(J,se),(J,se)=>W(se,J)],ne=new o.Point(0,0);let le,ue,ce;const fe=(J,se,me,ye,Pe)=>{const Me=[[ye?me:J,ye?J:me,0],[ye?me:se,ye?se:me,0]],Oe=Pe<0?o.EXTENT+Pe:Pe,je=[ye?Oe:(J+se)/2,ye?(J+se)/2:Oe,0];return me===0&&Pe<0||me!==0&&Pe>0?T.getForTilePoints(ce,[je],!0,ue):Me.push(je),T.getForTilePoints(d,Me,!0,le),Math.max(Me[0][2],Me[1][2],je[2])/T.exaggeration()};for(let J=0;J<4;J++){const se=(J<2?1:5)-J,me=v.borders[J];if(me.length===0)continue;const ye=ce=O[J](d),Pe=k(ye);if(!(Pe&&Pe instanceof o.FillExtrusionBucket&&Pe.enableTerrain)||v.borderDoneWithNeighborZ[J]===Pe.canonical.z&&Pe.borderDoneWithNeighborZ[se]===v.canonical.z||(ue=T.findDEMTileFor(ye),!ue||!ue.dem))continue;if(!le){const Le=T.findDEMTileFor(d);if(!Le||!Le.dem)return;le=Le}const Me=Pe.borders[se];let Oe=0;const je=Pe.borderDoneWithNeighborZ[se]!==v.canonical.z;if(v.canonical.z===Pe.canonical.z){for(let Le=0;Le<me.length;Le++){const We=v.featuresOnBorder[me[Le]],ut=We.borders[J];let Be;for(;Oe<Me.length&&(Be=Pe.featuresOnBorder[Me[Oe]],!(Be.borders[se][1]>ut[0]+3));)je&&Pe.encodeCentroid(void 0,Be,!1),Oe++;if(Be&&Oe<Me.length){const rt=Oe;let He=0;for(;!(Be.borders[se][0]>ut[1]-3)&&(He++,++Oe!==Me.length);)Be=Pe.featuresOnBorder[Me[Oe]];if(Be=Pe.featuresOnBorder[Me[rt]],We.intersectsCount()>1||Be.intersectsCount()>1||He!==1){He!==1&&(Oe=rt),v.encodeCentroid(void 0,We,!1),je&&Pe.encodeCentroid(void 0,Be,!1);continue}const lt=K[J](We,Be),Ue=J%2?o.EXTENT-1:0;ne.x=fe(lt[0],Math.min(o.EXTENT-1,lt[1]),Ue,J<2,lt[2]),ne.y=0,v.encodeCentroid(ne,We,!1),je&&Pe.encodeCentroid(ne,Be,!1)}else v.encodeCentroid(void 0,We,!1)}v.borderDoneWithNeighborZ[J]=Pe.canonical.z,v.needsCentroidUpdate=!0,je&&(Pe.borderDoneWithNeighborZ[se]=v.canonical.z,Pe.needsCentroidUpdate=!0)}else{for(const Le of me)v.encodeCentroid(void 0,v.featuresOnBorder[Le],!1);if(je){for(const Le of Me)Pe.encodeCentroid(void 0,Pe.featuresOnBorder[Le],!1);Pe.borderDoneWithNeighborZ[se]=v.canonical.z,Pe.needsCentroidUpdate=!0}v.borderDoneWithNeighborZ[J]=Pe.canonical.z,v.needsCentroidUpdate=!0}}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(g)}const _c=new o.Color(1,0,0,1),uE=new o.Color(0,1,0,1),hE=new o.Color(0,0,1,1),fE=new o.Color(1,0,1,1),dE=new o.Color(0,1,1,1);function pE(g,u,d){const v=g.context,b=g.transform,T=v.gl,O=b.projection.name==="globe",k=O?["PROJECTION_GLOBE_VIEW"]:null;let N=d.projMatrix;if(O&&o.globeToMercatorTransition(b.zoom)>0){const We=o.transitionTileAABBinECEF(d.canonical,b),ut=o.globeDenormalizeECEF(We);N=o.multiply(new Float32Array(16),b.globeMatrix,ut),o.multiply(N,b.projMatrix,N)}const q=g.useProgram("debug",null,k),W=u.getTileByID(d.key);g.terrain&&g.terrain.setupElevationDraw(W,q);const K=o.DepthMode.disabled,ne=o.StencilMode.disabled,le=g.colorModeForRenderPass(),ue="$debug";v.activeTexture.set(T.TEXTURE0),g.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),O?W._makeGlobeTileDebugBuffers(g.context,b):W._makeDebugTileBoundsBuffers(g.context,b.projection);const ce=W._tileDebugBuffer||g.debugBuffer,fe=W._tileDebugIndexBuffer||g.debugIndexBuffer,J=W._tileDebugSegments||g.debugSegments;q.draw(v,T.LINE_STRIP,K,ne,le,o.CullFaceMode.disabled,Of(N,o.Color.red),ue,ce,fe,J,null,null,null,[W._globeTileDebugBorderBuffer]);const se=W.latestRawTileData,me=Math.floor((se&&se.byteLength||0)/1024),ye=u.getTile(d).tileSize,Pe=512/Math.min(ye,512)*(d.overscaledZ/b.zoom)*.5;let Me=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Me+=` => ${d.overscaledZ}`),Me+=` ${me}kb`,function(We,ut){We.initDebugOverlayCanvas();const Be=We.debugOverlayCanvas,rt=We.context.gl,He=We.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,Be.width,Be.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(ut,5,5),He.strokeText(ut,5,5),We.debugOverlayTexture.update(Be),We.debugOverlayTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}(g,Me);const Oe=W._tileDebugTextBuffer||g.debugBuffer,je=W._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Le=W._tileDebugTextSegments||g.debugSegments;q.draw(v,T.TRIANGLES,K,ne,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Of(N,o.Color.transparent,Pe),ue,Oe,je,Le,null,null,null,[W._globeTileDebugTextBuffer])}function X_(g,u,d,v){xc(g,0,u+d/2,g.transform.width,d,v)}function Rf(g,u,d,v){xc(g,u-d/2,0,d,g.transform.height,v)}function xc(g,u,d,v,b,T){const O=g.context,k=O.gl;k.enable(k.SCISSOR_TEST),k.scissor(u*o.exported.devicePixelRatio,d*o.exported.devicePixelRatio,v*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),O.clear({color:T}),k.disable(k.SCISSOR_TEST)}const K_=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Y_}=K_;function Ka(g,u,d,v){g.emplaceBack(u,d,v)}class Lf{constructor(u){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Ka(this.vertexArray,-1,-1,1),Ka(this.vertexArray,1,-1,1),Ka(this.vertexArray,-1,1,1),Ka(this.vertexArray,1,1,1),Ka(this.vertexArray,-1,-1,-1),Ka(this.vertexArray,1,-1,-1),Ka(this.vertexArray,-1,1,-1),Ka(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,Y_),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function vo(g,u,d,v,b,T){const O=g.gl,k=u.paint.get("sky-atmosphere-color"),N=u.paint.get("sky-atmosphere-halo-color"),q=u.paint.get("sky-atmosphere-sun-intensity"),W=((K,ne,le,ue,ce)=>({u_matrix_3f:K,u_sun_direction:ne,u_sun_intensity:le,u_color_tint_r:[ue.r,ue.g,ue.b,ue.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),v),b,q,k,N);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+T,u.skyboxTexture,0),d.draw(g,O.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,W,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const th=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class J_{constructor(u){const d=new o.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const v=new o.StructArrayLayout3ui6;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(d,th.members),this.indexBuffer=u.createIndexBuffer(v),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const gl={symbol:function(g,u,d,v,b){if(g.renderPass!=="translucent")return;const T=o.StencilMode.disabled,O=g.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(k,N,q,W,K,ne,le){const ue=N.transform,ce=K==="map",fe=ne==="map";for(const J of k){const se=W.getTile(J),me=se.getBucket(q);if(!me||!me.text||!me.text.segments.get().length)continue;const ye=o.evaluateSizeForZoom(me.textSizeData,ue.zoom),Pe=on(J,me.getProjection(),ue),Me=ue.calculatePixelsToTileUnitsMatrix(se),Oe=Qe(Pe,se.tileID.canonical,fe,ce,ue,me.getProjection(),Me),je=q.layout.get("icon-text-fit")!=="none"&&me.hasIconData();if(ye){const Le=Math.pow(2,ue.zoom-se.tileID.overscaledZ);cE(me,ce,fe,le,o.symbolSize,ue,Oe,J,Le,ye,je)}}}(v,g,d,u,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),b),d.paint.get("icon-opacity").constantOr(1)!==0&&G_(g,u,d,v,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),T,O),d.paint.get("text-opacity").constantOr(1)!==0&&G_(g,u,d,v,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),T,O),u.map.showCollisionBoxes&&(Qu(g,u,d,v,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Qu(g,u,d,v,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(g,u,d,v){if(g.renderPass!=="translucent")return;const b=d.paint.get("circle-opacity"),T=d.paint.get("circle-stroke-width"),O=d.paint.get("circle-stroke-opacity"),k=d.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(T.constantOr(1)===0||O.constantOr(1)===0))return;const N=g.context,q=N.gl,W=g.transform,K=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),ne=o.StencilMode.disabled,le=g.colorModeForRenderPass(),ue=W.projection.name==="globe",ce=[o.mercatorXfromLng(W.center.lng),o.mercatorYfromLat(W.center.lat)],fe=[];for(let se=0;se<v.length;se++){const me=v[se],ye=u.getTile(me),Pe=ye.getBucket(d);if(!Pe||Pe.projection.name!==W.projection.name)continue;const Me=Pe.programConfigurations.get(d.id),Oe=Om(d);ue&&Oe.push("PROJECTION_GLOBE_VIEW");const je=g.useProgram("circle",Me,Oe),Le=Pe.layoutVertexBuffer,We=Pe.globeExtVertexBuffer,ut=Pe.indexBuffer,Be=W.projection.createInversionMatrix(W,me.canonical),rt={programConfiguration:Me,program:je,layoutVertexBuffer:Le,globeExtVertexBuffer:We,indexBuffer:ut,uniformValues:Pm(g,me,ye,Be,ce,d),tile:ye};if(k){const He=Pe.segments.get();for(const lt of He)fe.push({segments:new o.SegmentVector([lt]),sortKey:lt.sortKey,state:rt})}else fe.push({segments:Pe.segments,sortKey:0,state:rt})}k&&fe.sort((se,me)=>se.sortKey-me.sortKey);const J={useDepthForOcclusion:!ue};for(const se of fe){const{programConfiguration:me,program:ye,layoutVertexBuffer:Pe,globeExtVertexBuffer:Me,indexBuffer:Oe,uniformValues:je,tile:Le}=se.state,We=se.segments;g.terrain&&g.terrain.setupElevationDraw(Le,ye,J),g.prepareDrawProgram(N,ye,Le.tileID.toUnwrapped()),ye.draw(N,q.TRIANGLES,K,ne,le,o.CullFaceMode.disabled,je,d.id,Pe,Oe,We,d.paint,W.zoom,me,[Me])}},heatmap:function(g,u,d,v){if(d.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const b=g.context,T=b.gl,O=o.StencilMode.disabled,k=new o.ColorMode([T.ONE,T.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(le,ue,ce,fe){const J=le.gl,se=ue.width*fe,me=ue.height*fe;le.activeTexture.set(J.TEXTURE1),le.viewport.set([0,0,se,me]);let ye=ce.heatmapFbo;if(!ye||ye&&(ye.width!==se||ye.height!==me)){ye&&ye.destroy();const Pe=J.createTexture();J.bindTexture(J.TEXTURE_2D,Pe),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ye=ce.heatmapFbo=le.createFramebuffer(se,me,!1),function(Me,Oe,je,Le,We,ut){const Be=Me.gl;Be.texImage2D(Be.TEXTURE_2D,0,Me.isWebGL2&&Me.extRenderToTextureHalfFloat?Be.RGBA16F:Be.RGBA,We,ut,0,Be.RGBA,Me.extRenderToTextureHalfFloat?Me.isWebGL2?Be.HALF_FLOAT:Me.extTextureHalfFloat.HALF_FLOAT_OES:Be.UNSIGNED_BYTE,null),Le.colorAttachment.set(je)}(le,0,Pe,ye,se,me)}else J.bindTexture(J.TEXTURE_2D,ye.colorAttachment.get()),le.bindFramebuffer.set(ye.framebuffer)})(b,g,d,g.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const N=g.transform,q=N.projection.name==="globe",W=q?["PROJECTION_GLOBE_VIEW"]:null,K=q?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ne=[o.mercatorXfromLng(N.center.lng),o.mercatorYfromLat(N.center.lat)];for(let le=0;le<v.length;le++){const ue=v[le];if(u.hasRenderableParent(ue))continue;const ce=u.getTile(ue),fe=ce.getBucket(d);if(!fe||fe.projection.name!==N.projection.name)continue;const J=fe.programConfigurations.get(d.id),se=g.useProgram("heatmap",J,W),{zoom:me}=g.transform;g.terrain&&g.terrain.setupElevationDraw(ce,se),g.prepareDrawProgram(b,se,ue.toUnwrapped());const ye=N.projection.createInversionMatrix(N,ue.canonical);se.draw(b,T.TRIANGLES,o.DepthMode.disabled,O,k,K,V_(g,ue,ce,ye,ne,me,d.paint.get("heatmap-intensity")),d.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,d.paint,g.transform.zoom,J,q?[fe.globeExtVertexBuffer]:null)}b.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(b,T){const O=b.context,k=O.gl,N=T.heatmapFbo;if(!N)return;O.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,N.colorAttachment.get()),O.activeTexture.set(k.TEXTURE1);let q=T.colorRampTexture;q||(q=T.colorRampTexture=new o.Texture(O,T.colorRamp,k.RGBA)),q.bind(k.LINEAR,k.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(O,k.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,((W,K,ne,le)=>({u_image:0,u_color_ramp:1,u_opacity:K.paint.get("heatmap-opacity")}))(0,T),T.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,T.paint,b.transform.zoom)}(g,d))},line:function(g,u,d,v){if(g.renderPass!=="translucent")return;const b=d.paint.get("line-opacity"),T=d.paint.get("line-width");if(b.constantOr(1)===0||T.constantOr(1)===0)return;const O=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),k=g.colorModeForRenderPass(),N=g.terrain&&g.terrain.renderingToTexture?1:o.exported.devicePixelRatio,q=d.paint.get("line-dasharray"),W=q.constantOr(1),K=d.layout.get("line-cap"),ne=d.paint.get("line-pattern"),le=ne.constantOr(1),ue=d.paint.get("line-gradient"),ce=le?"linePattern":"line",fe=g.context,J=fe.gl,se=(ye=>{const Pe=[];Ju(ye)&&Pe.push("RENDER_LINE_DASH"),ye.paint.get("line-gradient")&&Pe.push("RENDER_LINE_GRADIENT");const Me=ye.paint.get("line-trim-offset");Me[0]===0&&Me[1]===0||Pe.push("RENDER_LINE_TRIM_OFFSET");const Oe=ye.paint.get("line-pattern").constantOr(1),je=ye.paint.get("line-opacity").constantOr(1)!==1;return!Oe&&je&&Pe.push("RENDER_LINE_ALPHA_DISCARD"),Pe})(d);let me=se.includes("RENDER_LINE_ALPHA_DISCARD");g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(me=!1);for(const ye of v){const Pe=u.getTile(ye);if(le&&!Pe.patternsLoaded())continue;const Me=Pe.getBucket(d);if(!Me)continue;g.prepareDrawTile();const Oe=Me.programConfigurations.get(d.id),je=g.useProgram(ce,Oe,se),Le=ne.constantOr(null);if(Le&&Pe.imageAtlas){const tt=Pe.imageAtlas.patternPositions[Le.toString()];tt&&Oe.setConstantPatternPositions(tt)}const We=q.constantOr(null),ut=K.constantOr(null);if(!le&&We&&ut&&Pe.lineAtlas){const tt=Pe.lineAtlas.getDash(We,ut);tt&&Oe.setConstantPatternPositions(tt)}let[Be,rt]=d.paint.get("line-trim-offset");(ut==="round"||ut==="square")&&Be!==rt&&(Be===0&&(Be-=1),rt===1&&(rt+=1));const He=g.terrain?ye.projMatrix:null,lt=le?Yu(g,Pe,d,He,N):sE(g,Pe,d,He,Me.lineClipsArray.length,N,[Be,rt]);if(ue){const tt=Me.gradients[d.id];let ft=tt.texture;if(d.gradientVersion!==tt.version){let ot=256;if(d.stepInterpolant){const pt=u.getSource().maxzoom,Bt=ye.canonical.z===pt?Math.ceil(1<<g.transform.maxZoom-ye.canonical.z):1;ot=o.clamp(o.nextPowerOfTwo(Me.maxLineLength/o.EXTENT*1024*Bt),256,fe.maxTextureSize)}tt.gradient=o.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:ot,image:tt.gradient||void 0,clips:Me.lineClipsArray}),tt.texture?tt.texture.update(tt.gradient):tt.texture=new o.Texture(fe,tt.gradient,J.RGBA),tt.version=d.gradientVersion,ft=tt.texture}fe.activeTexture.set(J.TEXTURE1),ft.bind(d.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}W&&(fe.activeTexture.set(J.TEXTURE0),Pe.lineAtlasTexture.bind(J.LINEAR,J.REPEAT),Oe.updatePaintBuffers()),le&&(fe.activeTexture.set(J.TEXTURE0),Pe.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Oe.updatePaintBuffers()),g.prepareDrawProgram(fe,je,ye.toUnwrapped());const Ue=tt=>{je.draw(fe,J.TRIANGLES,O,tt,k,o.CullFaceMode.disabled,lt,d.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,d.paint,g.transform.zoom,Oe,[Me.layoutVertexBuffer2])};if(me){const tt=g.stencilModeForClipping(ye).ref;tt===0&&g.terrain&&fe.clear({stencil:0});const ft={func:J.EQUAL,mask:255};lt.u_alpha_discard_threshold=.8,Ue(new o.StencilMode(ft,tt,255,J.KEEP,J.KEEP,J.INVERT)),lt.u_alpha_discard_threshold=0,Ue(new o.StencilMode(ft,tt,255,J.KEEP,J.KEEP,J.KEEP))}else Ue(g.stencilModeForClipping(ye))}me&&(g.resetStencilClippingMasks(),g.terrain&&fe.clear({stencil:0}))},fill:function(g,u,d,v){const b=d.paint.get("fill-color"),T=d.paint.get("fill-opacity");if(T.constantOr(1)===0)return;const O=g.colorModeForRenderPass(),k=d.paint.get("fill-pattern"),N=g.opaquePassEnabledForLayer()&&!k.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===N){const q=g.depthModeForSublayer(1,g.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);H_(g,u,d,v,q,O,!1)}if(g.renderPass==="translucent"&&d.paint.get("fill-antialias")){const q=g.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);H_(g,u,d,v,q,O,!0)}},"fill-extrusion":function(g,u,d,v){const b=d.paint.get("fill-extrusion-opacity");if(b!==0&&g.renderPass==="translucent"){const T=new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D);if(b!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))Df(g,u,d,v,T,o.StencilMode.disabled,o.ColorMode.disabled),Df(g,u,d,v,T,g.stencilModeFor3D(),g.colorModeForRenderPass()),g.resetStencilClippingMasks();else{const O=g.colorModeForRenderPass();Df(g,u,d,v,T,o.StencilMode.disabled,O)}}},hillshade:function(g,u,d,v){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const b=g.context,T=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),O=g.colorModeForRenderPass(),k=g.terrain&&g.terrain.renderingToTexture,[N,q]=g.renderPass!=="translucent"||k?[{},v]:g.stencilConfigForOverlap(v);for(const W of q){const K=u.getTile(W);if(K.needsHillshadePrepare&&g.renderPass==="offscreen")N_(g,K,d,T,o.StencilMode.disabled,O);else if(g.renderPass==="translucent"){const ne=k&&g.terrain?g.terrain.stencilModeForRTTOverlap(W):N[W.overscaledZ];$_(g,W,K,d,T,ne,O)}}b.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,u,d,v,b,T){if(g.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!v.length)return;const O=g.context,k=O.gl,N=u.getSource(),q=g.useProgram("raster"),W=g.colorModeForRenderPass(),K=g.terrain&&g.terrain.renderingToTexture,[ne,le]=N instanceof ur||K?[{},v]:g.stencilConfigForOverlap(v),ue=le[le.length-1].overscaledZ,ce=!g.options.moving;for(const fe of le){const J=K?o.DepthMode.disabled:g.depthModeForSublayer(fe.overscaledZ-ue,d.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,k.LESS),se=fe.toUnwrapped(),me=u.getTile(fe);if(K&&(!me||!me.hasData()))continue;const ye=K?fe.projMatrix:g.transform.calculateProjMatrix(se,ce),Pe=g.terrain&&K?g.terrain.stencilModeForRTTOverlap(fe):ne[fe.overscaledZ],Me=T?0:d.paint.get("raster-fade-duration");me.registerFadeDuration(Me);const Oe=u.findLoadedParent(fe,0),je=Sm(me,Oe,u,g.transform,Me);let Le,We;g.terrain&&g.terrain.prepareDrawTile();const ut=d.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;O.activeTexture.set(k.TEXTURE0),me.texture.bind(ut,k.CLAMP_TO_EDGE),O.activeTexture.set(k.TEXTURE1),Oe?(Oe.texture.bind(ut,k.CLAMP_TO_EDGE),Le=Math.pow(2,Oe.tileID.overscaledZ-me.tileID.overscaledZ),We=[me.tileID.canonical.x*Le%1,me.tileID.canonical.y*Le%1]):me.texture.bind(ut,k.CLAMP_TO_EDGE),me.texture.useMipmap&&O.extTextureFilterAnisotropic&&g.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);const Be=Im(ye,We||[0,0],Le||1,je,d,N instanceof ur?N.perspectiveTransform:[0,0]);if(g.prepareDrawProgram(O,q,se),N instanceof ur)N.boundsBuffer&&N.boundsSegments&&q.draw(O,k.TRIANGLES,J,o.StencilMode.disabled,W,o.CullFaceMode.disabled,Be,d.id,N.boundsBuffer,g.quadTriangleIndexBuffer,N.boundsSegments);else{const{tileBoundsBuffer:rt,tileBoundsIndexBuffer:He,tileBoundsSegments:lt}=g.getTileBoundsBuffers(me);q.draw(O,k.TRIANGLES,J,Pe,W,o.CullFaceMode.disabled,Be,d.id,rt,He,lt)}}g.resetStencilClippingMasks()},background:function(g,u,d,v){const b=d.paint.get("background-color"),T=d.paint.get("background-opacity");if(T===0)return;const O=g.context,k=O.gl,N=g.transform,q=N.tileSize,W=d.paint.get("background-pattern");if(g.isPatternMissing(W))return;const K=!W&&b.a===1&&T===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==K)return;const ne=o.StencilMode.disabled,le=g.depthModeForSublayer(0,K==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),ue=g.colorModeForRenderPass(),ce=g.useProgram(W?"backgroundPattern":"background");let fe,J=v;J||(fe=g.getBackgroundTiles(),J=Object.values(fe).map(se=>se.tileID)),W&&(O.activeTexture.set(k.TEXTURE0),g.imageManager.bind(g.context));for(const se of J){const me=se.toUnwrapped(),ye=v?se.projMatrix:g.transform.calculateProjMatrix(me);g.prepareDrawTile();const Pe=u?u.getTile(se):fe?fe[se.key]:new o.Tile(se,q,N.zoom,g),Me=W?lE(ye,T,g,W,{tileID:se,tileSize:q}):Rm(ye,T,b);g.prepareDrawProgram(O,ce,me);const{tileBoundsBuffer:Oe,tileBoundsIndexBuffer:je,tileBoundsSegments:Le}=g.getTileBoundsBuffers(Pe);ce.draw(O,k.TRIANGLES,le,ne,ue,o.CullFaceMode.disabled,Me,d.id,Oe,je,Le)}},sky:function(g,u,d){const v=g.transform,b=v.projection.name==="mercator"||v.projection.name==="globe"?1:o.smoothstep(7,8,v.zoom),T=d.paint.get("sky-opacity")*b;if(T===0)return;const O=g.context,k=d.paint.get("sky-type"),N=new o.DepthMode(O.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),q=g.frameCounter/1e3%1;k==="atmosphere"?g.renderPass==="offscreen"?d.needsSkyboxCapture(g)&&(function(W,K,ne,le){const ue=W.context,ce=ue.gl;let fe=K.skyboxFbo;if(!fe){fe=K.skyboxFbo=ue.createFramebuffer(32,32,!1),K.skyboxGeometry=new Lf(ue),K.skyboxTexture=ue.gl.createTexture(),ce.bindTexture(ce.TEXTURE_CUBE_MAP,K.skyboxTexture),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MAG_FILTER,ce.LINEAR);for(let ye=0;ye<6;++ye)ce.texImage2D(ce.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,ce.RGBA,32,32,0,ce.RGBA,ce.UNSIGNED_BYTE,null)}ue.bindFramebuffer.set(fe.framebuffer),ue.viewport.set([0,0,32,32]);const J=K.getCenter(W,!0),se=W.useProgram("skyboxCapture"),me=new Float64Array(16);o.identity(me),o.rotateY(me,me,.5*-Math.PI),vo(ue,K,se,me,J,0),o.identity(me),o.rotateY(me,me,.5*Math.PI),vo(ue,K,se,me,J,1),o.identity(me),o.rotateX(me,me,.5*-Math.PI),vo(ue,K,se,me,J,2),o.identity(me),o.rotateX(me,me,.5*Math.PI),vo(ue,K,se,me,J,3),o.identity(me),vo(ue,K,se,me,J,4),o.identity(me),o.rotateY(me,me,Math.PI),vo(ue,K,se,me,J,5),ue.viewport.set([0,0,W.width,W.height])}(g,d),d.markSkyboxValid(g)):g.renderPass==="sky"&&function(W,K,ne,le,ue){const ce=W.context,fe=ce.gl,J=W.transform,se=W.useProgram("skybox");ce.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_CUBE_MAP,K.skyboxTexture);const me=((ye,Pe,Me,Oe,je)=>({u_matrix:ye,u_sun_direction:Pe,u_cubemap:0,u_opacity:Oe,u_temporal_offset:je}))(J.skyboxMatrix,K.getCenter(W,!1),0,le,ue);W.prepareDrawProgram(ce,se),se.draw(ce,fe.TRIANGLES,ne,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,me,"skybox",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(g,d,N,T,q):k==="gradient"&&g.renderPass==="sky"&&function(W,K,ne,le,ue){const ce=W.context,fe=ce.gl,J=W.transform,se=W.useProgram("skyboxGradient");K.skyboxGeometry||(K.skyboxGeometry=new Lf(ce)),ce.activeTexture.set(fe.TEXTURE0);let me=K.colorRampTexture;me||(me=K.colorRampTexture=new o.Texture(ce,K.colorRamp,fe.RGBA)),me.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const ye=((Pe,Me,Oe,je,Le)=>({u_matrix:Pe,u_color_ramp:0,u_center_direction:Me,u_radius:o.degToRad(Oe),u_opacity:je,u_temporal_offset:Le}))(J.skyboxMatrix,K.getCenter(W,!1),K.paint.get("sky-gradient-radius"),le,ue);W.prepareDrawProgram(ce,se),se.draw(ce,fe.TRIANGLES,ne,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,ye,"skyboxGradient",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(g,d,N,T,q)},debug:function(g,u,d){for(let v=0;v<d.length;v++)pE(g,u,d[v])},custom:function(g,u,d,v){const b=g.context,T=d.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&d.isLayerDraped()){if(g.renderPass==="offscreen"){const O=T.prerender;if(O){if(g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const k=g.transform.pointMerc;O.call(T,b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[k.x,k.y],g.transform.pixelsPerMeterRatio)}else O.call(T,b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const k=T.renderToTile;if(k){const N=v[0].canonical,q=new o.MercatorCoordinate(N.x+v[0].wrap*(1<<N.z),N.y,N.z);b.setDepthMode(o.DepthMode.disabled),b.setStencilMode(o.StencilMode.disabled),b.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),k.call(T,b.gl,q),b.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),b.setStencilMode(o.StencilMode.disabled);const O=T.renderingMode==="3d"?new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(b.setDepthMode(O),g.transform.projection.name==="globe"){const k=g.transform.pointMerc;T.render(b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[k.x,k.y],g.transform.pixelsPerMeterRatio)}else T.render(b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState(),b.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class bc{constructor(u,d,v=!1){this.context=new vt(u,v),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,d){const v=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Tm(this,u));const b=this._terrain;this.transform.elevation=v?b:null,b.update(u,this.transform,d)}_updateFog(u){const d=u.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,b]=d.getFovAdjustedRange(this.transform._fov);if(v>b)return void(this.transform.fogCullDistSq=null);const T=v+.78*(b-v);this.transform.fogCullDistSq=T*T}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,d){if(this.width=u*o.exported.devicePixelRatio,this.height=d*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._layers[v].resize()}setup(){const u=this.context,d=new o.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(o.EXTENT,0),d.emplaceBack(0,o.EXTENT),d.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(d,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const v=new o.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(o.EXTENT,0),v.emplaceBack(0,o.EXTENT),v.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=u.createVertexBuffer(v,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const T=new o.StructArrayLayout4i8;T.emplaceBack(0,0,0,0),T.emplaceBack(o.EXTENT,0,o.EXTENT,0),T.emplaceBack(0,o.EXTENT,0,o.EXTENT),T.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(T,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const O=new o.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(O);const k=new o.StructArrayLayout1ui2;for(const q of[0,1,3,2,0])k.emplaceBack(q);this.debugIndexBuffer=u.createIndexBuffer(k),this.emptyTexture=new o.Texture(u,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=o.create();const N=this.context.gl;this.stencilClearMode=new o.StencilMode({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new J_(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,d=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,d.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Xu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,d,v){if(!d||this.currentStencilSource===d.id||!u.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const N of v)if(this._tileClippingMaskIDs[N.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=d.id;const b=this.context,T=b.gl;this.nextStencilID+v.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of v){const N=d.getTile(k),q=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:K,tileBoundsSegments:ne}=this.getTileBoundsBuffers(N);O.draw(b,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},q,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Xu(k.projMatrix),"$clipping",W,K,ne)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,d=this.context.gl;return new o.StencilMode({func:d.NOTEQUAL,mask:255},u,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const d=this.context.gl;return new o.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(u){const d=this.context.gl,v=u.sort((O,k)=>k.overscaledZ-O.overscaledZ),b=v[v.length-1].overscaledZ,T=v[0].overscaledZ-b+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const O={};for(let k=0;k<T;k++)O[k+b]=new o.StencilMode({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[O,v]}return[{[b]:o.StencilMode.disabled},v]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([u.CONSTANT_COLOR,u.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(u,d,v){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new o.DepthMode(v||this.context.gl.LEQUAL,d,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,d){this.style=u,this.options=d,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const v=this.style.order,b=this.style._sourceCaches;for(const q in b){const W=b[q];W.used&&W.prepare(this.context)}const T={},O={},k={};for(const q in b){const W=b[q];T[q]=W.getVisibleCoordinates(),O[q]=T[q].slice().reverse(),k[q]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<v.length;q++)if(this.style._layers[v[q]].is3D()){this.opaquePassCutoff=q;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const q of v){const W=this.style._layers[q],K=u._getLayerSourceCache(W);if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const ne=K?O[K.id]:void 0;(W.type==="custom"||W.isSky()||ne&&ne.length)&&this.renderLayer(this,K,W,ne)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const N=this.terrain;if(N&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&N.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[v[this.currentLayer]],W=u._getLayerSourceCache(q);if(q.isSky())continue;const K=W?O[W.id]:void 0;this._renderTileClippingMasks(q,W,K),this.renderLayer(this,W,q,K)}if(this.style.fog&&this.transform.projection.supportsFog&&function(q,W){const K=q.context,ne=K.gl,le=q.transform,ue=new o.DepthMode(ne.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ce=q.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),fe=o.globeToMercatorTransition(le.zoom),J=W.properties.get("color").toArray01(),se=W.properties.get("high-color").toArray01(),me=W.properties.get("space-color").toArray01PremultipliedAlpha(),ye=o.identity$1([]);o.rotateY$1(ye,ye,-o.degToRad(le._center.lng)),o.rotateX$1(ye,ye,o.degToRad(le._center.lat)),o.rotateZ$1(ye,ye,le.angle),o.rotateX$1(ye,ye,-le._pitch);const Pe=o.fromQuat(new Float32Array(16),ye),Me=o.mapValue(W.properties.get("star-intensity"),0,1,0,.25),Oe=5e-4,je=o.mapValue(W.properties.get("horizon-blend"),0,1,Oe,.25),Le=o.globeUseCustomAntiAliasing(q,K,le)&&je===Oe?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,We=q.frameCounter/1e3%1,ut=o.length(le.globeCenterInViewSpace),Be=Math.sqrt(Math.pow(ut,2)-Math.pow(Le,2)),rt=Math.acos(Be/ut),He=((Ue,tt,ft,ot,pt,Bt,Jt,jt,qt,gr,fr,zt,Ir,Nr)=>({u_frustum_tl:Ue,u_frustum_tr:tt,u_frustum_br:ft,u_frustum_bl:ot,u_horizon:pt,u_transition:Bt,u_fadeout_range:Jt,u_color:jt,u_high_color:qt,u_space_color:gr,u_star_intensity:fr,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:zt,u_horizon_angle:Ir,u_rotation_matrix:Nr}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,fe,je,J,se,me,Me,We,rt,Pe);q.prepareDrawProgram(K,ce);const lt=q.atmosphereBuffer;lt&&ce.draw(K,ne.TRIANGLES,ue,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,He,"skybox",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const q=this.style._layers[v[this.currentLayer]],W=u._getLayerSourceCache(q);q.isSky()&&this.renderLayer(this,W,q,W?O[W.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;){const q=this.style._layers[v[this.currentLayer]],W=u._getLayerSourceCache(q);if(q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(q)){if(q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const K=W?(q.type==="symbol"?k:O)[W.id]:void 0;this._renderTileClippingMasks(q,W,W?T[W.id]:void 0),this.renderLayer(this,W,q,K),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let q=null;o.values(this.style._layers).forEach(W=>{const K=u._getLayerSourceCache(W);K&&!W.isHidden(this.transform.zoom)&&(!q||q.getSource().maxzoom<K.getSource().maxzoom)&&(q=K)}),q&&this.options.showTileBoundaries&&gl.debug(this,q,q.getVisibleCoordinates())}this.options.showPadding&&function(q){const W=q.transform.padding;X_(q,q.transform.height-(W.top||0),3,_c),X_(q,W.bottom||0,3,uE),Rf(q,W.left||0,3,hE),Rf(q,q.transform.width-(W.right||0),3,fE);const K=q.transform.centerPoint;(function(ne,le,ue,ce){xc(ne,le-1,ue-10,2,20,ce),xc(ne,le-10,ue-1,20,2,ce)})(q,K.x,q.transform.height-K.y,dE)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,d,v,b){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||b&&b.length)&&(this.id=v.id,this.gpuTimingStart(v),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(v.type)||u.terrain&&v.type==="custom")&&gl[v.type](u,d,v,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let v=this.gpuTimers[u.id];v||(v=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),v.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,d=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),u.beginQueryEXT(u.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const d={};for(const v in u){const b=u[v],T=this.context.extTimerQuery,O=T.getQueryObjectEXT(b.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(b.query),d[v]=O}return d}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let v=0;for(const b of u)v+=d.getQueryObjectEXT(b,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(b);return v}translatePosMatrix(u,d,v,b,T){if(!v[0]&&!v[1])return u;const O=T?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(O){const q=Math.sin(O),W=Math.cos(O);v=[v[0]*W-v[1]*q,v[0]*q+v[1]*W]}const k=[T?v[0]:_t(d,v[0],this.transform.zoom),T?v[1]:_t(d,v[1],this.transform.zoom),0],N=new Float32Array(16);return o.translate(N,u,k),N}saveTileTexture(u){const d=this._tileTextures[u.size[0]];d?d.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const d=this._tileTextures[u];return d&&d.length>0?d.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&this.terrain.exaggeration()===0,v=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),this.transform.projection.name==="globe"&&b.push("GLOBE"),d&&b.push("ZERO_EXAGGERATION"),v&&!u&&v.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),u&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(u,d,v){this.cache=this.cache||{};const b=v||[],T=this.currentGlobalDefines().concat(b),O=Sr.cacheKey(_m[u],u,T,d);return this.cache[O]||(this.cache[O]=new Sr(this.context,u,_m[u],d,Lm[u],T)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,d,v){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const T=b.getOpacity(this.transform.pitch),O=((k,N,q,W,K,ne,le,ue,ce,fe,J)=>{const se=k.transform,me=N.properties.get("color").toArray01();me[3]=W;const ye=k.frameCounter/1e3%1;return{u_fog_matrix:q?se.calculateFogTileMatrix(q):k.identityMat,u_fog_range:N.getFovAdjustedRange(se._fov),u_fog_color:me,u_fog_horizon_blend:N.properties.get("horizon-blend"),u_fog_temporal_offset:ye,u_frustum_tl:K,u_frustum_tr:ne,u_frustum_br:le,u_frustum_bl:ue,u_globe_pos:ce,u_globe_radius:fe,u_viewport:J,u_globe_transition:o.globeToMercatorTransition(se.zoom),u_is_globe:+(se.projection.name==="globe")}})(this,b,v,T,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);d.setFogUniformValues(u,O)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,d=u.createTexture();return u.bindTexture(u.TEXTURE_2D,d),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,d=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const b of v)d[b.key]=u[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class jf{constructor(u=0,d=0,v=0,b=0){if(isNaN(u)||u<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=d,this.left=v,this.right=b}interpolate(u,d,v){return d.top!=null&&u.top!=null&&(this.top=o.number(u.top,d.top,v)),d.bottom!=null&&u.bottom!=null&&(this.bottom=o.number(u.bottom,d.bottom,v)),d.left!=null&&u.left!=null&&(this.left=o.number(u.left,d.left,v)),d.right!=null&&u.right!=null&&(this.right=o.number(u.right,d.right,v)),this}getCenter(u,d){const v=o.clamp((this.left+u-this.right)/2,0,u),b=o.clamp((this.top+d-this.bottom)/2,0,d);return new o.Point(v,b)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new jf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function $f(g,u){const d=o.getColumn(g,3);o.fromQuat(g,u),o.setColumn(g,3,d)}function Er(g,u){const d=o.identity$1([]);return o.rotateZ$1(d,d,-u),o.rotateX$1(d,d,-g),d}function rh(g,u){const d=[g[0],g[1],0],v=[u[0],u[1],0];if(o.length(d)>=1e-15){const O=o.normalize([],d);o.scale$2(v,O,o.dot(v,O)),u[0]=v[0],u[1]=v[1]}const b=o.cross([],u,g);if(o.len(b)<1e-15)return null;const T=Math.atan2(-b[1],b[0]);return Er(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),T)}class Q_{constructor(u,d){this.position=u,this.orientation=d}get position(){return this._position}set position(u){if(u){const d=u instanceof o.MercatorCoordinate?u:new o.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(d.x=o.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(u,d){if(this.orientation=null,!this.position)return;const v=this.position,b=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(u)):0,T=o.MercatorCoordinate.fromLngLat(u,b),O=[T.x-v.x,T.y-v.y,T.z-v.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=rh(O,d)}setPitchBearing(u,d){this.orientation=Er(o.degToRad(u),o.degToRad(-d))}}class Nf{constructor(u,d){this._transform=o.identity([]),this.orientation=d,this.position=u}get mercatorPosition(){const u=this.position;return new o.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=o.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var d;u&&o.setColumn(this._transform,3,[(d=u)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||o.identity$1([]),u&&$f(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,d){this._orientation=Er(u,d),$f(this._transform,this._orientation)}forward(){const u=o.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=o.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=o.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,d){const v=new Float64Array(16);return o.invert(v,this.getWorldToCamera(u,d)),v}getWorldToCameraPosition(u,d,v){const b=this.position;o.scale$2(b,b,-u);const T=new Float64Array(16);return o.fromScaling(T,[v,v,v]),o.translate(T,T,b),T[10]*=d,T}getWorldToCamera(u,d){const v=new Float64Array(16),b=new Float64Array(4),T=this.position;return o.conjugate(b,this._orientation),o.scale$2(T,T,-u),o.fromQuat(v,b),o.translate(v,v,T),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=d,v[9]*=d,v[10]*=d,v[11]*=d,v}getCameraToClipPerspective(u,d,v,b){const T=new Float64Array(16);return o.perspective(T,u,d,v,b),T}getDistanceToElevation(u,d=!1){const v=u===0?0:o.mercatorZfromAltitude(u,d?o.latFromMercatorY(this.position[1]):this.position[1]),b=this.forward();return(v-this.position[2])/b[2]}clone(){return new Nf([...this.position],[...this.orientation])}}function wc(g,u){const d=zf(g.projection,g.zoom,g.width,g.height),v=function(T,O,k,N,q){const W=new o.LngLat(k.lng-180*Ya,k.lat),K=new o.LngLat(k.lng+180*Ya,k.lat),ne=T.project(W.lng,W.lat),le=T.project(K.lng,K.lat),ue=-Math.atan2(le.y-ne.y,le.x-ne.x),ce=o.MercatorCoordinate.fromLngLat(k);ce.y=o.clamp(ce.y,-1+Ya,1-Ya);const fe=ce.toLngLat(),J=T.project(fe.lng,fe.lat),se=o.MercatorCoordinate.fromLngLat(fe);se.x+=Ya;const me=se.toLngLat(),ye=T.project(me.lng,me.lat),Pe=Bf(ye.x-J.x,ye.y-J.y,ue),Me=o.MercatorCoordinate.fromLngLat(fe);Me.y+=Ya;const Oe=Me.toLngLat(),je=T.project(Oe.lng,Oe.lat),Le=Bf(je.x-J.x,je.y-J.y,ue),We=Math.abs(Pe.x)/Math.abs(Le.y),ut=o.identity([]);o.rotateZ(ut,ut,-ue*(1-(q?0:N)));const Be=o.identity([]);return o.scale(Be,Be,[1,1-(1-We)*N,1]),Be[4]=-Le.x/Le.y*N,o.rotateZ(Be,Be,ue),o.multiply(Be,ut,Be),Be}(g.projection,0,g.center,d,u),b=e0(g);return o.scale(v,v,[b,b,1]),v}function e0(g){const u=g.projection,d=zf(g.projection,g.zoom,g.width,g.height),v=t0(u,g.center),b=t0(u,o.LngLat.convert(u.center));return Math.pow(2,v*d+(1-d)*b)}function zf(g,u,d,v,b=1/0){const T=g.range;if(!T)return 0;const O=Math.min(b,Math.max(d,v)),k=Math.log(O/1024)/Math.LN2;return o.smoothstep(T[0]+k,T[1]+k,u)}const Ya=1/4e4;function t0(g,u){const d=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),v=new o.LngLat(u.lng-180*Ya,d),b=new o.LngLat(u.lng+180*Ya,d),T=g.project(v.lng,d),O=g.project(b.lng,d),k=o.MercatorCoordinate.fromLngLat(v),N=o.MercatorCoordinate.fromLngLat(b),q=O.x-T.x,W=O.y-T.y,K=N.x-k.x,ne=N.y-k.y,le=Math.sqrt((K*K+ne*ne)/(q*q+W*W));return Math.log(le)/Math.LN2}function Bf(g,u,d){const v=Math.cos(d),b=Math.sin(d);return{x:g*v-u*b,y:g*b+u*v}}class Sc{constructor(u,d,v,b,T,O,k){this.tileSize=512,this._renderWorldCopies=T===void 0||T,this._minZoom=u||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=b??60,this.setProjection(O),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Nf,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Sc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,d=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(u||v)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const v=!m(d,this.getProjection());return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const d=u!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const d=-u*Math.PI/180;var v;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(v=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v),function(b,T,O){var k=T[0],N=T[1],q=T[2],W=T[3],K=Math.sin(O),ne=Math.cos(O);b[0]=k*ne+q*K,b[1]=N*ne+W*K,b[2]=k*-K+q*ne,b[3]=N*-K+W*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const d=o.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=o.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const d=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let b=0,T=0;for(let O=0;O<d.length;O++){const k=new o.Point(d[O][0]*this.width,v+d[O][1]*(this.height-v)),N=u.pointCoordinate(k);if(!N)continue;const q=1/Math.hypot(N[0]-this._camera.position[0],N[1]-this._camera.position[1]);b+=N[3]*q,T+=q}return T===0?NaN:b/T}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*d,b=this._mercatorZfromZoom(u),T=this._mercatorZfromZoom(this._maxZoom),O=Math.max(b-v,T);this._setZoom(this._zoomFromMercatorZ(O))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let v;v=u.z<this._camera.position[2]?[d.x,d.y,d.z]:[u.x,u.y,u.z];const b=o.length(o.sub([],this._camera.position,v));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let d=!1;if(u.orientation&&!o.exactEquals(u.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(u.orientation)),u.position){const v=[u.position.x,u.position.y,u.position.z];o.exactEquals$1(v,this._camera.position)||(this._setCameraPosition(v),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,d=new Q_;return d.position=new o.MercatorCoordinate(u[0],u[1],u[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(u){if(!o.length$1(u))return!1;o.normalize$1(u,u);const d=o.transformQuat([],[0,0,-1],u),v=o.transformQuat([],[0,-1,0],u);if(v[2]<0)return!1;const b=rh(d,v);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(u){const d=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;u[2]=o.clamp(u[2],b/v,b/d),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,d,v){this._unmodified=!1,this._edgeInsets.interpolate(u,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const d=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(u){const d=[new o.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const v=this.pointCoordinate(new o.Point(0,0)),b=this.pointCoordinate(new o.Point(this.width,0)),T=this.pointCoordinate(new o.Point(this.width,this.height)),O=this.pointCoordinate(new o.Point(0,this.height)),k=Math.floor(Math.min(v.x,b.x,T.x,O.x)),N=Math.floor(Math.max(v.x,b.x,T.x,O.x)),q=1;for(let W=k-q;W<=N+q;W++)W!==0&&d.push(new o.UnwrappedTileID(W,u))}return d}coveringTiles(u){let d=this.coveringZoomLevel(u);const v=d,b=this.elevation&&!u.isTerrainDEM,T=this.projection.name==="mercator";if(u.minzoom!==void 0&&d<u.minzoom)return[];u.maxzoom!==void 0&&d>u.maxzoom&&(d=u.maxzoom);const O=this.locationCoordinate(this.center),k=this.center.lat,N=1<<d,q=[N*O.x,N*O.y,0],W=this.projection.name==="globe",K=!W,ne=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,K),le=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ue=N*o.mercatorZfromAltitude(1,this.center.lat),ce=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),fe=[N*le.x,N*le.y,ce*(K?1:ue)],J=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,me=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ye=u.isTerrainDEM?-me:this._elevation?this._elevation.getMinElevationBelowMSL():0,Pe=this.projection.isReprojectedInTileSpace?e0(this):1,Me=Ue=>{const ft=new o.MercatorCoordinate(Ue.x+25e-6,Ue.y,Ue.z),ot=new o.MercatorCoordinate(Ue.x,Ue.y+25e-6,Ue.z),pt=Ue.toLngLat(),Bt=ft.toLngLat(),Jt=ot.toLngLat(),jt=this.locationCoordinate(pt),qt=this.locationCoordinate(Bt),gr=this.locationCoordinate(Jt),fr=Math.hypot(qt.x-jt.x,qt.y-jt.y),zt=Math.hypot(gr.x-jt.x,gr.y-jt.y);return Math.sqrt(fr*zt)*Pe/25e-6},Oe=Ue=>{const tt=me,ft=ye;return{aabb:o.tileAABB(this,N,0,0,0,Ue,ft,tt,this.projection),zoom:0,x:0,y:0,minZ:ft,maxZ:tt,wrap:Ue,fullyVisible:!1}},je=[];let Le=[];const We=d,ut=u.reparseOverscaled?v:d,Be=Ue=>Ue*Ue,rt=Be((ce-this._centerAltitude)*ue),He=Ue=>{if(!this._elevation||!Ue.tileID||!T)return;const tt=this._elevation.getMinMaxForTile(Ue.tileID),ft=Ue.aabb;tt?(ft.min[2]=tt.min,ft.max[2]=tt.max,ft.center[2]=(ft.min[2]+ft.max[2])/2):(Ue.shouldSplit=lt(Ue),Ue.shouldSplit||(ft.min[2]=ft.max[2]=ft.center[2]=this._centerAltitude))},lt=Ue=>{if(Ue.zoom<se)return!0;if(Ue.zoom===We)return!1;if(Ue.shouldSplit!=null)return Ue.shouldSplit;const tt=Ue.aabb.distanceX(fe),ft=Ue.aabb.distanceY(fe);let ot=rt,pt=1;if(W){ot=Be(Ue.aabb.distanceZ(fe));const jt=Math.pow(2,Ue.zoom),qt=o.latFromMercatorY((Ue.y+1)/jt),gr=o.latFromMercatorY(Ue.y/jt),fr=Math.min(Math.max(k,qt),gr),zt=o.circumferenceAtLatitude(fr)/o.circumferenceAtLatitude(k);if(pt=fr===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,zt/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&Ue.zoom===We-1&&zt>=.9)return!0}else if(b&&(ot=Be(Ue.aabb.distanceZ(fe)*ue)),this.projection.isReprojectedInTileSpace&&v<=5){const jt=Math.pow(2,Ue.zoom),qt=Me(new o.MercatorCoordinate((Ue.x+.5)/jt,(Ue.y+.5)/jt));pt=qt>.85?1:qt}const Bt=tt*tt+ft*ft+ot,Jt=Be((1<<We-Ue.zoom)*J*pt*((jt,qt)=>{if(qt*Be(.707)<jt)return 1;const gr=Math.sqrt(qt/jt);return gr/(1.4144271570014144+(Math.pow(1.1,gr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ot,rt),Bt));return Bt<Jt};if(this.renderWorldCopies)for(let Ue=1;Ue<=3;Ue++)je.push(Oe(-Ue)),je.push(Oe(Ue));for(je.push(Oe(0));je.length>0;){const Ue=je.pop(),tt=Ue.x,ft=Ue.y;let ot=Ue.fullyVisible;if(!ot){const pt=Ue.aabb.intersects(ne);if(pt===0)continue;ot=pt===2}if(Ue.zoom!==We&&lt(Ue))for(let pt=0;pt<4;pt++){const Bt=(tt<<1)+pt%2,Jt=(ft<<1)+(pt>>1),jt={aabb:T?Ue.aabb.quadrant(pt):o.tileAABB(this,N,Ue.zoom+1,Bt,Jt,Ue.wrap,Ue.minZ,Ue.maxZ,this.projection),zoom:Ue.zoom+1,x:Bt,y:Jt,wrap:Ue.wrap,fullyVisible:ot,tileID:void 0,shouldSplit:void 0,minZ:Ue.minZ,maxZ:Ue.maxZ};b&&!W&&(jt.tileID=new o.OverscaledTileID(Ue.zoom+1===We?ut:Ue.zoom+1,Ue.wrap,Ue.zoom+1,Bt,Jt),He(jt)),je.push(jt)}else{const pt=Ue.zoom===We?ut:Ue.zoom;if(u.minzoom&&u.minzoom>pt)continue;const Bt=q[0]-(.5+tt+(Ue.wrap<<Ue.zoom))*(1<<d-Ue.zoom),Jt=q[1]-.5-ft,jt=Ue.tileID?Ue.tileID:new o.OverscaledTileID(pt,Ue.wrap,Ue.zoom,tt,ft);Le.push({tileID:jt,distanceSq:Bt*Bt+Jt*Jt})}}if(this.fogCullDistSq){const Ue=this.fogCullDistSq,tt=this.horizonLineFromTop();Le=Le.filter(ft=>{const ot=[0,0,0,1],pt=[o.EXTENT,o.EXTENT,0,1],Bt=this.calculateFogTileMatrix(ft.tileID.toUnwrapped());o.transformMat4$1(ot,ot,Bt),o.transformMat4$1(pt,pt,Bt);const Jt=o.getAABBPointSquareDist(ot,pt);if(Jt===0)return!0;let jt=!1;const qt=this._elevation;if(qt&&Jt>Ue&&tt!==0){const gr=this.calculateProjMatrix(ft.tileID.toUnwrapped());let fr;u.isTerrainDEM||(fr=qt.getMinMaxForTile(ft.tileID)),fr||(fr={min:ye,max:me});const zt=o.furthestTileCorner(this.rotation),Ir=[zt[0]*o.EXTENT,zt[1]*o.EXTENT,fr.max];o.transformMat4(Ir,Ir,gr),jt=(1-Ir[1])*this.height*.5<tt}return Jt<Ue||jt})}return Le.sort((Ue,tt)=>Ue.distanceSq-tt.distanceSq).map(Ue=>Ue.tileID)}resize(u,d){this.width=u,this.height=d,this.pixelsToGLUnits=[2/u,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const d=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),v=this.projection.project(u.lng,d);return new o.Point(v.x*this.worldSize,v.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,d){let v,b;const T=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;v=(d.x-T.x)/k,b=(d.y-T.y)/k}else{const k=this.pointCoordinate(d),N=this.pointCoordinate(T);v=k.x-N.x,b=k.y-N.y}const O=this.locationCoordinate(u);this.setLocation(new o.MercatorCoordinate(O.x-v,O.y-b))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,d){const v=d?o.mercatorZfromAltitude(d,u.lat):void 0,b=this.projection.project(u.lng,u.lat);return new o.MercatorCoordinate(b.x,b.y,v)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,d){const v=d??this._centerAltitude,b=[u.x,u.y,0,1],T=[u.x,u.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(T,T,this.pixelMatrixInverse);const O=T[3];o.scale$1(b,b,1/b[3]),o.scale$1(T,T,1/O);const k=b[2],N=T[2];return{p0:b,p1:T,t:k===N?0:(v-k)/(N-k)}}screenPointToMercatorRay(u){const d=[u.x,u.y,0,1],v=[u.x,u.y,1,1];return o.transformMat4$1(d,d,this.pixelMatrixInverse),o.transformMat4$1(v,v,this.pixelMatrixInverse),o.scale$1(d,d,1/d[3]),o.scale$1(v,v,1/v[3]),d[2]=o.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,v[2]=o.mercatorZfromAltitude(v[2],this._center.lat)*this.worldSize,o.scale$1(d,d,1/this.worldSize),o.scale$1(v,v,1/this.worldSize),new o.Ray([d[0],d[1],d[2]],o.normalize([],o.sub([],v,d)))}rayIntersectionCoordinate(u){const{p0:d,p1:v,t:b}=u,T=o.mercatorZfromAltitude(d[2],this._center.lat),O=o.mercatorZfromAltitude(v[2],this._center.lat);return new o.MercatorCoordinate(o.number(d[0],v[0],b)/this.worldSize,o.number(d[1],v[1],b)/this.worldSize,o.number(T,O,b))}pointCoordinate(u,d=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,d)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let d=this.projection.pointCoordinate3D(this,u.x,u.y);if(d)return new o.MercatorCoordinate(d[0],d[1],d[2]);let v=0,b=this.horizonLineFromTop();if(u.y>b)return this.pointCoordinate(u);const T=.02*b,O=u.clone();for(let k=0;k<10&&b-v>T;k++){O.y=o.number(v,b,.66);const N=this.projection.pointCoordinate3D(this,O.x,O.y);N?(b=O.y,d=N):v=O.y}return d?new o.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}isPointOnSurface(u){if(u.y<0||u.y>this.height||u.x<0||u.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(u);const d=this.pointCoordinate(u);return d.y>=0&&d.y<=1}_coordinatePoint(u,d){const v=d&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,b=[u.x*this.worldSize,u.y*this.worldSize,v+u.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.Point(b[0]/b[3],b[1]/b[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:d}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,T=this.pointLocation3D(new o.Point(d,u)),O=this.pointLocation3D(new o.Point(b,u)),k=this.pointLocation3D(new o.Point(b,v)),N=this.pointLocation3D(new o.Point(d,v));let q=Math.min(T.lng,O.lng,k.lng,N.lng),W=Math.max(T.lng,O.lng,k.lng,N.lng),K=Math.min(T.lat,O.lat,k.lat,N.lat),ne=Math.max(T.lat,O.lat,k.lat,N.lat);const le=Math.pow(2,-this.zoom)/16*270,ue=this.projection.name==="globe"?1:4,ce=(fe,J,se,me,ye)=>{const Pe=(fe+se)/2,Me=(J+me)/2,Oe=new o.Point(Pe,Me),{lng:je,lat:Le}=this.pointLocation3D(Oe),We=Math.max(0,q-je,K-Le,je-W,Le-ne);q=Math.min(q,je),W=Math.max(W,je),K=Math.min(K,Le),ne=Math.max(ne,Le),(ye<ue||We>le)&&(ce(fe,J,Pe,Me,ye+1),ce(Pe,Me,se,me,ye+1))};if(ce(d,u,b,u,1),ce(b,u,b,v,1),ce(b,v,d,v,1),ce(d,v,d,u,1),this.projection.name==="globe"){const[fe,J]=o.polesInViewport(this);fe?(ne=90,W=180,q=-180):J&&(K=-90,W=180,q=-180)}return new o.LngLatBounds(new o.LngLat(q,K),new o.LngLat(W,ne))}_getBoundsRectangular(u,d){const{top:v,left:b}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,O=this.width-this._edgeInsets.right,k=new o.Point(b,v),N=new o.Point(O,v),q=new o.Point(O,T),W=new o.Point(b,T);let K=this.pointCoordinate(k,u),ne=this.pointCoordinate(N,u);const le=this.pointCoordinate(q,d),ue=this.pointCoordinate(W,d),ce=(fe,J)=>(J.y-fe.y)/(J.x-fe.x);return K.y>1&&ne.y>=0?K=new o.MercatorCoordinate((1-ue.y)/ce(ue,K)+ue.x,1):K.y<0&&ne.y<=1&&(K=new o.MercatorCoordinate(-ue.y/ce(ue,K)+ue.x,0)),ne.y>1&&K.y>=0?ne=new o.MercatorCoordinate((1-le.y)/ce(le,ne)+le.x,1):ne.y<0&&K.y<=1&&(ne=new o.MercatorCoordinate(-le.y/ce(le,ne)+le.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(K)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(ue)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=u.visibleDemTiles.reduce((v,b)=>{if(b.dem){const T=b.dem.tree;v.min=Math.min(v.min,T.minimums[0]),v.max=Math.max(v.max,T.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*u.exaggeration(),d.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,v=this.height/2-d*(1-this._horizonShift);return u?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,d){return this.projection.createTileMatrix(this,d,u)}calculateDistanceTileData(u){const d=u.key,v=this._distanceTileDataCache;if(v[d])return v[d];const b=u.canonical,T=1/this.height,O=this.cameraWorldSize,k=O/this.zoomScale(b.z),N=(b.x+Math.pow(2,b.z)*u.wrap)*k,q=b.y*k,W=this.point;W.x*=O/this.worldSize,W.y*=O/this.worldSize;const K=this.angle,ne=Math.sin(-K),le=-Math.cos(-K);return v[d]={bearing:[ne,le],center:[(W.x-N)*T,(W.y-q)*T],scale:k/o.EXTENT*T},v[d]}calculateFogTileMatrix(u){const d=u.key,v=this._fogTileMatrixCache;if(v[d])return v[d];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return o.multiply(b,this.worldToFogMatrix,b),v[d]=new Float32Array(b),v[d]}calculateProjMatrix(u,d=!1){const v=u.key,b=d?this._alignedProjMatrixCache:this._projMatrixCache;if(b[v])return b[v];const T=this.calculatePosMatrix(u,this.worldSize);return o.multiply(T,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,T),b[v]=new Float32Array(T),b[v]}calculatePixelsToTileUnitsMatrix(u){const d=u.tileID.key,v=this._pixelsToTileUnitsCache;if(v[d])return v[d];const b=function(T,O){const{scale:k}=T.tileTransform,N=k*o.EXTENT/(T.tileSize*Math.pow(2,O.zoom-T.tileID.overscaledZ+T.tileID.canonical.z));return q=new Float32Array(4),ne=(W=O.inverseAdjustmentMatrix)[1],le=W[2],ue=W[3],fe=(K=[N,N])[1],q[0]=W[0]*(ce=K[0]),q[1]=ne*ce,q[2]=le*fe,q[3]=ue*fe,q;var q,W,K,ne,le,ue,ce,fe}(u,this);return v[d]=b,v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,d=o.fromScaling([],[u,u,u]);return o.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const d=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),b=this._camera.forward(),T=o.mercatorZfromAltitude(1,this._center.lat);v[2]/=T,b[2]/=T,o.normalize(b,b);const O=u.raycast(v,b,u.exaggeration());if(O){const k=o.scaleAndAdd([],v,b,O),N=new o.MercatorCoordinate(k[0],k[1],o.mercatorZfromAltitude(k[2],o.latFromMercatorY(k[1]))),q=(N.z+o.length([N.x-v[0],N.y-v[1],N.z-v[2]*T]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=N.toAltitude(),this._center=this.coordinateLocation(N),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const d=this._elevation,v=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(v),T=d.getAtPointOrZero(new o.MercatorCoordinate(...b)),O=this.pixelsPerMeter/this.worldSize*T,k=this._minimumHeightOverTerrain(),N=b[2]-O;if(N<=k)if(N<0||u){const q=this.locationCoordinate(this._center,this._centerAltitude),W=[b[0],b[1],q.z-b[2]],K=o.length(W);W[2]-=(k-N)/this._pixelsPerMercatorPixel;const ne=o.length(W);if(ne===0)return;o.scale$2(W,W,K/ne*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],q.z*this._pixelsPerMercatorPixel-W[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const ne=this.center;return ne.lat=o.clamp(ne.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(ne.lng=o.clamp(ne.lng,this.minLng,this.maxLng)),this.center=ne,void(this._constraining=!1)}const d=this._unmodified,{x:v,y:b}=this.point;let T=0,O=v,k=b;const N=this.width/2,q=this.height/2,W=this.worldMinY*this.scale,K=this.worldMaxY*this.scale;if(b-q<W&&(k=W+q),b+q>K&&(k=K-q),K-W<this.height&&(T=Math.max(T,this.height/(K-W)),k=(K+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ne=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,ue=this.worldSize/2-(ne+le)/2;O=(v+ue+this.worldSize)%this.worldSize-ue,O-N<ne&&(O=ne+N),O+N>le&&(O=le-N),le-ne<this.width&&(T=Math.max(T,this.width/(le-ne)),O=(le+ne)/2)}O===v&&k===b||(this.center=this.unproject(new o.Point(O,k))),T&&(this.zoom+=this.scaleZoom(T)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const v=zf(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?d:1,T=this._camera.getWorldToCamera(this.worldSize,b),O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);O[8]=2*-u.x/this.width,O[9]=2*u.y/this.height;let k=o.mul([],O,T);if(this.projection.isReprojectedInTileSpace){const Me=this.locationCoordinate(this.center),Oe=o.identity([]);o.translate(Oe,Oe,[Me.x*this.worldSize,Me.y*this.worldSize,0]),o.multiply(Oe,Oe,wc(this)),o.translate(Oe,Oe,[-Me.x*this.worldSize,-Me.y*this.worldSize,0]),o.multiply(k,k,Oe),this.inverseAdjustmentMatrix=function(je){const Le=wc(je,!0);return ae([],[Le[0],Le[1],Le[4],Le[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],k,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=k,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const N=o.invert([],O);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(N,this.horizonLineFromTop(),this.height);const q=new Float32Array(16);o.identity(q),o.scale(q,q,[1,-1,1]),o.rotateX(q,q,this._pitch),o.rotateZ(q,q,this.angle);const W=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),K=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;W[8]=2*-u.x/this.width,W[9]=2*(u.y+K)/this.height,this.skyboxMatrix=o.multiply(q,W,q);const ne=this.point,le=ne.x,ue=ne.y,ce=this.width%2/2,fe=this.height%2/2,J=Math.cos(this.angle),se=Math.sin(this.angle),me=le-Math.round(le)+J*ce+se*fe,ye=ue-Math.round(ue)+J*fe+se*ce,Pe=new Float64Array(k);if(o.translate(Pe,Pe,[me>.5?me-1:me,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=Pe,k=o.create(),o.scale(k,k,[this.width/2,-this.height/2,1]),o.translate(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=o.create(),o.scale(k,k,[1,-1,1]),o.translate(k,k,[-1,-1,0]),o.scale(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},k=o.invert(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=k,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const Me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(Me,Me,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=k;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,v=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,T=[u,u,d];o.scale$2(T,T,b),o.scale$2(v,v,-1),o.multiply$2(v,v,T);const O=o.create();o.translate(O,O,v),o.scale(O,O,T),this.mercatorFogMatrix=O,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,d,b)}_computeCameraPosition(u){const d=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),b=this.point,T=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-u/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-v[0]*T,b.y/this.worldSize-v[1]*T,u/this.worldSize*this._centerAltitude-v[2]*T]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],b=u[2];let T=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(T=Math.min((d-v)/b,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,u,T),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,d=this._camera.forward(),{pitch:v,bearing:b}=this._camera.getPitchBearing(),T=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,O=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),k=Math.max((u[2]-T)/Math.cos(v),O),N=this._zoomFromMercatorZ(k);o.scaleAndAdd(u,u,d,k),this._pitch=o.clamp(v,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(N,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let d=0,v=o.GLOBE_ZOOM_THRESHOLD_MAX,b=0,T=1/0;for(;v-d>1e-6&&v>d;){const O=d+.5*(v-d),k=this.tileSize*Math.pow(2,O),N=this.getCameraToCenterDistance(this.projection,O,k),q=this.scaleZoom(N/(u*this.tileSize)),W=Math.abs(O-q);W<T&&(T=W,b=O),O<q?d=O:v=O}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,d){const v=Math.min(u.x,d.x),b=Math.max(u.x,d.x),T=Math.min(u.y,d.y),O=Math.max(u.y,d.y);if(T<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new o.Point(v,T),new o.Point(b,O),new o.Point(v,O),new o.Point(b,T)],N=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const W of k){const K=this.pointRayIntersection(W);if(K.t<0)return!0;const ne=this.rayIntersectionCoordinate(K);if(ne.x<N||ne.y<0||ne.x>q||ne.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(u,d){const v=o.length(o.sub([],this._camera.position,u)),b=this._zoomFromMercatorZ(v)+d;return v-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const u=function([d,v,b],T){const O=[d,v,b,1];o.transformMat4$1(O,O,T);const k=O[3]=Math.max(O[3],1e-6);return O[0]/=k,O[1]/=k,O[2]/=k,O}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,u))}}getCameraToCenterDistance(u,d=this.zoom,v=this.worldSize){const b=zf(u,d,this.width,this.height,1024),T=u.pixelSpaceConversion(this.center.lat,v,b);return .5/Math.tan(.5*this._fov)*this.height*T}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(u,u,this.globeMatrix),u}}function Ec(g,u){let d=!1,v=null;const b=()=>{v=null,d&&(g(),v=setTimeout(b,u),d=!1)};return()=>(d=!0,v||b(),v)}class Nm{constructor(u){this._hashName=u&&encodeURIComponent(u),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ec(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,o.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const d=nh(u);if(this._hashName){const v=this._hashName;let b=!1;const T=o.window.location.hash.slice(1).split("&").map(O=>{const k=O.split("=")[0];return k===v?(b=!0,`${k}=${d}`):O}).filter(O=>O);return b||T.push(`${v}=${d}`),`#${T.join("&")}`}return`#${d}`}_getCurrentHash(){const u=o.window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){const v=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(d[3]||0):u.getBearing();return u.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,u)}}function nh(g,u){const d=g.getCenter(),v=Math.round(100*g.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,b),O=Math.round(d.lng*T)/T,k=Math.round(d.lat*T)/T,N=g.getBearing(),q=g.getPitch();let W=u?`/${O}/${k}/${v}`:`${v}/${k}/${O}`;return(N||q)&&(W+="/"+Math.round(10*N)/10),q&&(W+=`/${Math.round(q)}`),W}const ih={linearity:.3,easing:o.bezier(0,0,.3,1)},Ff=o.extend({deceleration:2500,maxSpeed:1400},ih),Uf=o.extend({deceleration:20,maxSpeed:1400},ih),It=o.extend({deceleration:1e3,maxSpeed:360},ih),Bo=o.extend({deceleration:1e3,maxSpeed:90},ih);class r0{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,d=o.exported.now();for(;u.length>0&&d-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(d.pan.mag()){const T=ah(d.pan.mag(),v,o.extend({},Ff,u||{}));b.offset=d.pan.mult(T.amount/d.pan.mag()),b.center=this._map.transform.center,oh(b,T)}if(d.zoom){const T=ah(d.zoom,v,Uf);b.zoom=this._map.transform.zoom+T.amount,oh(b,T)}if(d.bearing){const T=ah(d.bearing,v,It);b.bearing=this._map.transform.bearing+o.clamp(T.amount,-179,179),oh(b,T)}if(d.pitch){const T=ah(d.pitch,v,Bo);b.pitch=this._map.transform.pitch+T.amount,oh(b,T)}if(b.zoom||b.bearing){const T=d.pinchAround===void 0?d.around:d.pinchAround;b.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function oh(g,u){(!g.duration||g.duration<u.duration)&&(g.duration=u.duration,g.easing=u.easing)}function ah(g,u,d){const{maxSpeed:v,linearity:b,deceleration:T}=d,O=o.clamp(g*b/(u/1e3),-v,v),k=Math.abs(O)/(T*b);return{easing:d.easing,duration:1e3*k,amount:O*(k/2)}}class ei extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,d,v,b={}){const T=H(d.getCanvasContainer(),v),O=d.unproject(T);super(u,o.extend({point:T,lngLat:O,originalEvent:v},b)),this._defaultPrevented=!1,this.target=d}}class sh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,d,v){const b=u==="touchend"?v.changedTouches:v.touches,T=X(d.getCanvasContainer(),b),O=T.map(N=>d.unproject(N)),k=T.reduce((N,q,W,K)=>N.add(q.div(K.length)),new o.Point(0,0));super(u,{points:T,point:k,lngLats:O,lngLat:d.unproject(k),originalEvent:v}),this._defaultPrevented=!1}}class Vf extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,d,v){super(u,{originalEvent:v}),this._defaultPrevented=!1}}class zm{constructor(u,d){this._map=u,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Vf(u.type,this._map,u))}mousedown(u,d){return this._mousedownPos=d,this._firePreventable(new ei(u.type,this._map,u))}mouseup(u){this._map.fire(new ei(u.type,this._map,u))}preclick(u){const d=o.extend({},u);d.type="preclick",this._map.fire(new ei(d.type,this._map,d))}click(u,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(u),this._map.fire(new ei(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new ei(u.type,this._map,u))}mouseover(u){this._map.fire(new ei(u.type,this._map,u))}mouseout(u){this._map.fire(new ei(u.type,this._map,u))}touchstart(u){return this._firePreventable(new sh(u.type,this._map,u))}touchmove(u){this._map.fire(new sh(u.type,this._map,u))}touchend(u){this._map.fire(new sh(u.type,this._map,u))}touchcancel(u){this._map.fire(new sh(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wf{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new ei(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new ei(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class n0{constructor(u,d){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,d){this.isEnabled()&&u.shiftKey&&u.button===0&&(B(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(u,d){if(!this._active)return;const v=d,b=this._startPos,T=this._lastPos;if(!b||!T||T.equals(v)||!this._box&&v.dist(b)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=C("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const O=Math.min(b.x,v.x),k=Math.max(b.x,v.x),N=Math.min(b.y,v.y),q=Math.max(b.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${O}px,${N}px)`,this._box.style.width=k-O+"px",this._box.style.height=q-N+"px")})}mouseupWindow(u,d){if(!this._active)return;const v=this._startPos,b=d;if(v&&u.button===0){if(this.reset(),U(),v.x!==b.x||v.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:T=>T.fitScreenCoordinates(v,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),F(),delete this._startPos,delete this._lastPos}_fireEvent(u,d){return this._map.fire(new o.Event(u,{originalEvent:d}))}}function qf(g,u){const d={};for(let v=0;v<g.length;v++)d[g[v].identifier]=u[v];return d}class Tc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const T=new o.Point(0,0);for(const O of b)T._add(O);return T.div(b.length)}(d),this.touches=qf(v,d)))}touchmove(u,d,v){if(this.aborted||!this.centroid)return;const b=qf(v,d);for(const T in this.touches){const O=b[T];(!O||O.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(u,d,v){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Bm{constructor(u){this.singleTap=new Tc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,d,v){this.singleTap.touchstart(u,d,v)}touchmove(u,d,v){this.singleTap.touchmove(u,d,v)}touchend(u,d,v){const b=this.singleTap.touchend(u,d,v);if(b){const T=u.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(b)<30;if(T&&O||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class mE{constructor(){this._zoomIn=new Bm({numTouches:1,numTaps:2}),this._zoomOut=new Bm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,d,v){this._zoomIn.touchstart(u,d,v),this._zoomOut.touchstart(u,d,v)}touchmove(u,d,v){this._zoomIn.touchmove(u,d,v),this._zoomOut.touchmove(u,d,v)}touchend(u,d,v){const b=this._zoomIn.touchend(u,d,v),T=this._zoomOut.touchend(u,d,v);return b?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(b)},{originalEvent:u})}):T?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(T)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const i0={0:1,2:2};class Ac{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,d){return!1}_move(u,d){return{}}mousedown(u,d){if(this._lastPoint)return;const v=ee(u);this._correctButton(u,v)&&(this._lastPoint=d,this._eventButton=v)}mousemoveWindow(u,d){const v=this._lastPoint;if(v){if(u.preventDefault(),this._eventButton!=null&&function(b,T){const O=i0[T];return b.buttons===void 0||(b.buttons&O)!==O}(u,this._eventButton))this.reset();else if(this._moved||!(d.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(v,d)}}mouseupWindow(u){this._lastPoint&&ee(u)===this._eventButton&&(this._moved&&U(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fm extends Ac{mousedown(u,d){super.mousedown(u,d),this._lastPoint&&(this._active=!0)}_correctButton(u,d){return d===0&&!u.ctrlKey}_move(u,d){return{around:d,panDelta:d.sub(u)}}}class Um extends Ac{_correctButton(u,d){return d===0&&u.ctrlKey||d===2}_move(u,d){const v=.8*(d.x-u.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(u){u.preventDefault()}}class Vm extends Ac{_correctButton(u,d){return d===0&&u.ctrlKey||d===2}_move(u,d){const v=-.5*(d.y-u.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(u){u.preventDefault()}}class Gf{constructor(u,d){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(u,d,v){return this._calculateTransform(u,d,v)}touchmove(u,d,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,d,v)}}touchend(u,d,v){this._calculateTransform(u,d,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,d,v){v.length>0&&(this._active=!0);const b=qf(v,d),T=new o.Point(0,0),O=new o.Point(0,0);let k=0;for(const q in b){const W=b[q],K=this._touches[q];K&&(T._add(W),O._add(W.sub(K)),k++,b[q]=W)}if(this._touches=b,k<this._minTouches||!O.mag())return;const N=O.div(k);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(k),panDelta:N}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class lh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,d,v){return{}}touchstart(u,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(u,d,v){const b=this._firstTwoTouches;if(!b)return;u.preventDefault();const[T,O]=b,k=ch(v,d,T),N=ch(v,d,O);if(!k||!N)return;const q=this._aroundCenter?null:k.add(N).div(2);return this._move([k,N],q,u)}touchend(u,d,v){if(!this._firstTwoTouches)return;const[b,T]=this._firstTwoTouches,O=ch(v,d,b),k=ch(v,d,T);O&&k||(this._active&&U(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ch(g,u,d){for(let v=0;v<g.length;v++)if(g[v].identifier===d)return u[v]}function Wm(g,u){return Math.log(g/u)/Math.LN2}class o0 extends lh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,d){const v=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Wm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wm(this._distance,v),pinchAround:d}}}function qm(g,u){return 180*g.angleWith(u)/Math.PI}class a0 extends lh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,d){const v=this._vector;if(this._vector=u[0].sub(u[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:qm(this._vector,v),pinchAround:d}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const d=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const b=qm(u,v);return Math.abs(b)<d}}function Os(g){return Math.abs(g.y)>Math.abs(g.x)}class s0 extends lh{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,Os(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,d,v){const b=this._lastPoints;if(!b)return;const T=u[0].sub(b[0]),O=u[1].sub(b[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(T,O,v.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(T.y+O.y)/2*-.5})}gestureBeginsVertically(u,d,v){if(this._valid!==void 0)return this._valid;const b=u.mag()>=2,T=d.mag()>=2;if(!b&&!T)return;if(!b||!T)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const O=u.y>0==d.y>0;return Os(u)&&Os(d)&&O}}const l0={panStep:100,bearingStep:15,pitchStep:10};class gE{constructor(){const u=l0;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let d=0,v=0,b=0,T=0,O=0;switch(u.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:u.shiftKey?v=-1:(u.preventDefault(),T=-1);break;case 39:u.shiftKey?v=1:(u.preventDefault(),T=1);break;case 38:u.shiftKey?b=1:(u.preventDefault(),O=-1);break;case 40:u.shiftKey?b=-1:(u.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:k=>{const N=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:c0,zoom:d?Math.round(N)+d*(u.shiftKey?2:1):N,bearing:k.getBearing()+v*this._bearingStep,pitch:k.getPitch()+b*this._pitchStep,offset:[-T*this._panStep,-O*this._panStep],center:k.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function c0(g){return g*(2-g)}const Gm=4.000244140625;class u0{constructor(u,d){this._map=u,this._el=u.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=u.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const v=o.exported.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Gm==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(b*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),u.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=u,this._delta-=d,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=H(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>Gm?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&q!==0&&(q=1/q);const W=d(),K=Math.pow(2,W),ne=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):K;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(ne*q))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:d(),b=this._startZoom,T=this._easing;let O,k=!1;if(this._type==="wheel"&&b&&T){const N=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),q=T(N);O=o.number(b,v,q),N<1?this._frameId||(this._frameId=!0):k=!0}else O=v,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:O-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let d=o.ease;if(this._prevEase){const v=this._prevEase,b=(o.exported.now()-v.start)/v.duration,T=v.easing(b+.01)-v.easing(b),O=.27/Math.sqrt(T*T+1e-4)*.01,k=Math.sqrt(.0729-O*O);d=o.bezier(O,k,.25,1)}return this._prevEase={start:o.exported.now(),duration:u,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class h0{constructor(u,d){this._clickZoom=u,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Si{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,d){return u.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(u.shiftKey?-1:1),around:v.unproject(d)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yE{constructor(){this._tap=new Bm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,d,v){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=d[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(u,d,v))}touchmove(u,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=d[0],T=b.y-this._swipePoint.y;return this._swipePoint=b,u.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(u,d,v)}touchend(u,d,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(u,d,v)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class f0{constructor(u,d,v){this._el=u,this._mousePan=d,this._touchPan=v}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vE{constructor(u,d,v){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _E{constructor(u,d,v,b){this._el=u,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _o=g=>g.zoom||g.drag||g.pitch||g.rotate;class d0 extends o.Event{}class xE{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,d){const v=o.sub([],d,u);this.radius=o.length(v[2]<0?o.div([],v,this.constants):[v[0],v[1],0])}projectRay(u){o.div(u,u,this.constants),o.normalize(u,u),o.mul$1(u,u,this.constants);const d=o.scale$2([],u,this.radius);if(d[2]>0){const v=o.scale$2([],[0,0,1],o.dot(d,[0,0,1])),b=o.scale$2([],o.normalize([],[d[0],d[1],0]),this.radius),T=o.add([],d,o.scale$2([],o.sub([],o.add([],b,v),d),2));d[0]=T[0],d[1]=T[1]}return d}}function Fo(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class ha{constructor(u,d){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new r0(u),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new xE,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),o.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,T,O]of this._listeners)b.addEventListener(T,b===o.window.document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[u,d,v]of this._listeners)u.removeEventListener(d,u===o.window.document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(u){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new zm(d,u));const b=d.boxZoom=new n0(d,u);this._add("boxZoom",b);const T=new mE,O=new Si;d.doubleClickZoom=new h0(O,T),this._add("tapZoom",T),this._add("clickZoom",O);const k=new yE;this._add("tapDragZoom",k);const N=d.touchPitch=new s0(d);this._add("touchPitch",N);const q=new Um(u),W=new Vm(u);d.dragRotate=new vE(u,q,W),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const K=new Fm(u),ne=new Gf(d,u);d.dragPan=new f0(v,K,ne),this._add("mousePan",K),this._add("touchPan",ne,["touchZoom","touchRotate"]);const le=new a0,ue=new o0;d.touchZoomRotate=new _E(v,ue,le,k),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Wf(d));const ce=d.scrollZoom=new u0(d,this);this._add("scrollZoom",ce,["mousePan"]);const fe=d.keyboard=new gE;this._add("keyboard",fe);for(const J of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[J]&&d[J].enable(u[J])}_add(u,d,v){this._handlers.push({handlerName:u,handler:d,allowed:v}),this._handlersById[u]=d}stop(u){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_o(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,d,v){for(const b in u)if(b!==v&&(!d||d.indexOf(b)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const d=[];for(const v of u)this._el.contains(v.target)&&d.push(v);return d}handleEvent(u,d){this._updatingCamera=!0;const v=u.type==="renderFrame",b=v?void 0:u,T={needsRenderFrame:!1},O={},k={},N=u.touches?this._getMapTouches(u.touches):void 0,q=N?X(this._el,N):v?void 0:H(this._el,u);for(const{handlerName:ne,handler:le,allowed:ue}of this._handlers){if(!le.isEnabled())continue;let ce;this._blockedByActive(k,ue,ne)?le.reset():le[d||u.type]&&(ce=le[d||u.type](u,q,N),this.mergeHandlerResult(T,O,ce,ne,b),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||le.isActive())&&(k[ne]=le)}const W={};for(const ne in this._previousActiveHandlers)k[ne]||(W[ne]=b);this._previousActiveHandlers=k,(Object.keys(W).length||Fo(T))&&(this._changes.push([T,O,W]),this._triggerRenderFrame()),(Object.keys(k).length||Fo(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=T;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))}mergeHandlerResult(u,d,v,b,T){if(!v)return;o.extend(u,v);const O={handlerName:b,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(d.zoom=O),v.panDelta!==void 0&&(d.drag=O),v.pitchDelta!==void 0&&(d.pitch=O),v.bearingDelta!==void 0&&(d.rotate=O)}_applyChanges(){const u={},d={},v={};for(const[b,T,O]of this._changes)b.panDelta&&(u.panDelta=(u.panDelta||new o.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(u.around=b.around),b.aroundCoord!==void 0&&(u.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(u.pinchAround=b.pinchAround),b.noInertia&&(u.noInertia=b.noInertia),o.extend(d,T),o.extend(v,O);this._updateMapTransform(u,d,v),this._changes=[]}_updateMapTransform(u,d,v){const b=this._map,T=b.transform,O=se=>[se.x,se.y,se.z];if((se=>{const me=this._eventsInProgress.drag;return me&&!this._handlersById[me.handlerName].isActive()})()&&!Fo(u)){const se=T.zoom;T.cameraElevationReference="sea",T.recenterOnTerrain(),T.cameraElevationReference="ground",se!==T.zoom&&this._map._update(!0)}if(T._isCameraConstrained&&b._stop(!0),!Fo(u))return void this._fireEvents(d,v,!0);let{panDelta:k,zoomDelta:N,bearingDelta:q,pitchDelta:W,around:K,aroundCoord:ne,pinchAround:le}=u;T._isCameraConstrained&&(N>0&&(N=0),T._isCameraConstrained=!1),le!==void 0&&(K=le),(N||(se=>d[se]&&!this._eventsInProgress[se])("drag"))&&K&&(this._dragOrigin=O(T.pointCoordinate3D(K)),this._trackingEllipsoid.setup(T._camera.position,this._dragOrigin)),T.cameraElevationReference="sea",b._stop(!0),K=K||b.transform.centerPoint,q&&(T.bearing+=q),W&&(T.pitch+=W),T._updateCameraState();const ue=[0,0,0];if(k)if(T.projection.name==="mercator"){const se=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(K).dir),me=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(K.sub(k)).dir);ue[0]=me[0]-se[0],ue[1]=me[1]-se[1]}else{const se=T.pointCoordinate(K);if(T.projection.name==="globe"){k=k.rotate(-T.angle);const me=T._pixelsPerMercatorPixel/T.worldSize;ue[0]=-k.x*o.mercatorScale(o.latFromMercatorY(se.y))*me,ue[1]=-k.y*o.mercatorScale(T.center.lat)*me}else{const me=T.pointCoordinate(K.sub(k));se&&me&&(ue[0]=me.x-se.x,ue[1]=me.y-se.y)}}const ce=T.zoom,fe=[0,0,0];if(N){const se=O(ne||T.pointCoordinate3D(K)),me={dir:o.normalize([],o.sub([],se,T._camera.position))};if(me.dir[2]<0){const ye=T.zoomDeltaToMovement(se,N);o.scale$2(fe,me.dir,ye)}}const J=o.add(ue,ue,fe);T._translateCameraConstrained(J),N&&Math.abs(T.zoom-ce)>1e-4&&T.recenterOnTerrain(),T.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(d,v,!0)}_fireEvents(u,d,v){const b=_o(this._eventsInProgress),T=_o(u),O={};for(const W in u){const{originalEvent:K}=u[W];this._eventsInProgress[W]||(O[`${W}start`]=K),this._eventsInProgress[W]=u[W]}!b&&T&&this._fireEvent("movestart",T.originalEvent);for(const W in O)this._fireEvent(W,O[W]);T&&this._fireEvent("move",T.originalEvent);for(const W in u){const{originalEvent:K}=u[W];this._fireEvent(W,K)}const k={};let N;for(const W in this._eventsInProgress){const{handlerName:K,originalEvent:ne}=this._eventsInProgress[W];this._handlersById[K].isActive()||(delete this._eventsInProgress[W],N=d[K]||ne,k[`${W}end`]=N)}for(const W in k)this._fireEvent(W,k[W]);const q=_o(this._eventsInProgress);if(v&&(b||T)&&!q){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;W?(K(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:N})):(this._map.fire(new o.Event("moveend",{originalEvent:N})),K(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,d){this._map.fire(new o.Event(u,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{this._frameId=void 0,this.handleEvent(new d0("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const yl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Hf extends o.Evented{constructor(u,d){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,d){return this.jumpTo({center:u},d)}panBy(u,d,v){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},d),v)}panTo(u,d,v){return this.easeTo(o.extend({center:u},d),v)}getZoom(){return this.transform.zoom}setZoom(u,d){return this.jumpTo({zoom:u},d),this}zoomTo(u,d,v){return this.easeTo(o.extend({zoom:u},d),v)}zoomIn(u,d){return this.zoomTo(this.getZoom()+1,u,d),this}zoomOut(u,d){return this.zoomTo(this.getZoom()-1,u,d),this}getBearing(){return this.transform.bearing}setBearing(u,d){return this.jumpTo({bearing:u},d),this}getPadding(){return this.transform.padding}setPadding(u,d){return this.jumpTo({padding:u},d),this}rotateTo(u,d,v){return this.easeTo(o.extend({bearing:u},d),v)}resetNorth(u,d){return this.rotateTo(0,o.extend({duration:1e3},u),d),this}resetNorthPitch(u,d){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),d),this}snapToNorth(u,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,d):this}getPitch(){return this.transform.pitch}setPitch(u,d){return this.jumpTo({pitch:u},d),this}cameraForBounds(u,d){u=o.LngLatBounds.convert(u);const v=d&&d.bearing||0,b=d&&d.pitch||0,T=u.getNorthWest(),O=u.getSouthEast();return this._cameraForBounds(this.transform,T,O,v,b,d)}_extendCameraOptions(u){const d={top:0,bottom:0,right:0,left:0};if(typeof(u=o.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const v=u.padding;u.padding={top:v,bottom:v,right:v,left:v}}return u.padding=o.extend(d,u.padding),u}_minimumAABBFrustumDistance(u,d){const v=d.max[0]-d.min[0],b=d.max[1]-d.min[1];return v/b>u.aspect?v/(2*Math.tan(.5*u.fovX)*u.aspect):b/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,d,v,b,T,O){const k=u.clone(),N=this._extendCameraOptions(O);k.bearing=b,k.pitch=T;const q=o.LngLat.convert(d),W=o.LngLat.convert(v),K=.5*(q.lat+W.lat),ne=.5*(q.lng+W.lng),le=o.latLngToECEF(K,ne),ue=o.normalize([],le),ce=o.normalize([],o.cross([],ue,[0,1,0])),fe=o.cross([],ce,ue),J=[ce[0],ce[1],ce[2],0,fe[0],fe[1],fe[2],0,ue[0],ue[1],ue[2],0,0,0,0,1],se=[le,o.latLngToECEF(q.lat,q.lng),o.latLngToECEF(W.lat,q.lng),o.latLngToECEF(W.lat,W.lng),o.latLngToECEF(q.lat,W.lng),o.latLngToECEF(K,q.lng),o.latLngToECEF(K,W.lng),o.latLngToECEF(q.lat,ne),o.latLngToECEF(W.lat,ne)];let me=o.Aabb.fromPoints(se.map(ot=>[o.dot(ce,ot),o.dot(fe,ot),o.dot(ue,ot)]));const ye=o.transformMat4([],me.center,J);o.squaredLength(ye)===0&&o.set(ye,0,0,1),o.normalize(ye,ye),o.scale$2(ye,ye,o.GLOBE_RADIUS),k.center=o.ecefToLatLng(ye);const Pe=k.getWorldToCameraMatrix(),Me=o.invert(new Float64Array(16),Pe);me=o.Aabb.applyTransform(me,o.multiply([],Pe,J)),o.transformMat4(ye,ye,Pe);const Oe=.5*(me.max[2]-me.min[2]),je=this._minimumAABBFrustumDistance(k,me),Le=o.scale$2([],[0,0,1],Oe),We=o.add(Le,ye,Le),ut=je+(k.pitch===0?0:o.distance(ye,We)),Be=k.globeCenterInViewSpace,rt=o.sub([],ye,[Be[0],Be[1],Be[2]]);o.normalize(rt,rt),o.scale$2(rt,rt,ut);const He=o.add([],ye,rt);o.transformMat4(He,He,Me);const lt=o.earthRadius/o.GLOBE_RADIUS,Ue=o.length(He),tt=o.mercatorZfromAltitude(Math.max(Ue*lt-o.earthRadius,Number.EPSILON),0),ft=Math.min(k.zoomFromMercatorZAdjusted(tt),N.maxZoom);return ft>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"mercator"}),k.zoom=ft,this._cameraForBounds(k,d,v,b,T,O)):{center:k.center,zoom:ft,bearing:b,pitch:T}}queryTerrainElevation(u,d){const v=this.transform.elevation;return v?(d=o.extend({},{exaggerated:!0},d),v.getAtPoint(o.MercatorCoordinate.fromLngLat(u),null,d.exaggerated)):null}_cameraForBounds(u,d,v,b,T,O){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,d,v,b,T,O);const k=u.clone(),N=this._extendCameraOptions(O),q=k.padding;k.bearing=b,k.pitch=T;const W=o.LngLat.convert(d),K=o.LngLat.convert(v),ne=new o.LngLat(W.lng,K.lat),le=new o.LngLat(K.lng,W.lat),ue=k.project(W),ce=k.project(K),fe=this.queryTerrainElevation(W),J=this.queryTerrainElevation(K),se=this.queryTerrainElevation(ne),me=this.queryTerrainElevation(le),ye=[[ue.x,ue.y,Math.min(fe||0,J||0,se||0,me||0)],[ce.x,ce.y,Math.max(fe||0,J||0,se||0,me||0)]];let Pe=o.Aabb.fromPoints(ye);const Me=k.getWorldToCameraMatrix(),Oe=o.invert(new Float64Array(16),Me);Pe=o.Aabb.applyTransform(Pe,Me);const je=o.sub([],Pe.max,Pe.min),Le=q.left||0,We=q.right||0,ut=q.bottom||0,Be=q.top||0,{left:rt,right:He,top:lt,bottom:Ue}=N.padding,tt=.5*(Le+We),ft=.5*(Be+ut),ot=Math.min(k.scaleZoom(k.scale*Math.min((k.width-(Le+We+rt+He))/je[0],(k.height-(ut+Be+Ue+lt))/je[1])),N.maxZoom),pt=k.scale/k.zoomScale(ot);Pe=new o.Aabb([Pe.min[0]-(rt+tt)*pt,Pe.min[1]-(Ue+ft)*pt,Pe.min[2]],[Pe.max[0]+(He+tt)*pt,Pe.max[1]+(lt+ft)*pt,Pe.max[2]]);const Bt=.5*je[2],Jt=this._minimumAABBFrustumDistance(k,Pe),jt=[0,0,1,0];o.transformMat4$1(jt,jt,Me),o.normalize$2(jt,jt);const qt=o.scale$2([],jt,Jt+Bt),gr=o.add([],Pe.center,qt),fr=(typeof N.offset.x=="number"&&typeof N.offset.y=="number"?new o.Point(N.offset.x,N.offset.y):o.Point.convert(N.offset)).rotate(-o.degToRad(b));Pe.center[0]-=fr.x*pt,Pe.center[1]+=fr.y*pt,o.transformMat4(Pe.center,Pe.center,Oe),o.transformMat4(gr,gr,Oe);const zt=[Pe.center[0],Pe.center[1],gr[2]*k.pixelsPerMeter];o.scale$2(zt,zt,1/k.worldSize);const Ir=o.lngFromMercatorX(zt[0]),Nr=o.latFromMercatorY(zt[1]),zr=Math.min(k._zoomFromMercatorZ(zt[2]),N.maxZoom),Br=new o.LngLat(Ir,Nr);return k.mercatorFromTransition&&zr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"globe"}),k.zoom=zr,this._cameraForBounds(k,d,v,b,T,O)):{center:Br,zoom:zr,bearing:b,pitch:T}}fitBounds(u,d,v){const b=this.cameraForBounds(u,d);return this._fitInternal(b,d,v)}fitScreenCoordinates(u,d,v,b,T){const O=o.Point.convert(u),k=o.Point.convert(d),N=new o.Point(Math.min(O.x,k.x),Math.min(O.y,k.y)),q=new o.Point(Math.max(O.x,k.x),Math.max(O.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(O,k))return this;const W=this.transform.pointLocation3D(N),K=this.transform.pointLocation3D(q),ne=this.transform.pointLocation3D(new o.Point(N.x,q.y)),le=this.transform.pointLocation3D(new o.Point(q.x,N.y)),ue=[Math.min(W.lng,K.lng,ne.lng,le.lng),Math.min(W.lat,K.lat,ne.lat,le.lat)],ce=[Math.max(W.lng,K.lng,ne.lng,le.lng),Math.max(W.lat,K.lat,ne.lat,le.lat)],fe=b&&b.pitch?b.pitch:this.getPitch(),J=this._cameraForBounds(this.transform,ue,ce,v,fe,b);return this._fitInternal(J,b,T)}_fitInternal(u,d,v){return u?(delete(d=o.extend(u,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(u,d){this.stop();const v=u.preloadOnly?this.transform.clone():this.transform;let b=!1,T=!1,O=!1;return"zoom"in u&&v.zoom!==+u.zoom&&(b=!0,v.zoom=+u.zoom),u.center!==void 0&&(v.center=o.LngLat.convert(u.center)),"bearing"in u&&v.bearing!==+u.bearing&&(T=!0,v.bearing=+u.bearing),"pitch"in u&&v.pitch!==+u.pitch&&(O=!0,v.pitch=+u.pitch),u.padding==null||v.isPaddingEqual(u.padding)||(v.padding=u.padding),u.preloadOnly?(this._preloadTiles(v),this):(this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),b&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),T&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),O&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(yl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,d){const v=this.transform;if(!v.projection.supportsFreeCamera)return o.warnOnce(yl),this;this.stop();const b=v.zoom,T=v.pitch,O=v.bearing;v.setFreeCameraOptions(u);const k=b!==v.zoom,N=T!==v.pitch,q=O!==v.bearing;return this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),k&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),q&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),N&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d)),this}easeTo(u,d){this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||this._prefersReducedMotion(u))&&(u.duration=0);const v=this.transform,b=this.getZoom(),T=this.getBearing(),O=this.getPitch(),k=this.getPadding(),N="zoom"in u?+u.zoom:b,q="bearing"in u?this._normalizeBearing(u.bearing,T):T,W="pitch"in u?+u.pitch:O,K="padding"in u?u.padding:v.padding,ne=o.Point.convert(u.offset);let le,ue,ce;if(v.projection.name==="globe"){const Le=o.MercatorCoordinate.fromLngLat(v.center),We=ne.rotate(-v.angle);Le.x+=We.x/v.worldSize,Le.y+=We.y/v.worldSize;const ut=Le.toLngLat(),Be=o.LngLat.convert(u.center||ut);this._normalizeCenter(Be),le=v.centerPoint.add(We),ue=new o.Point(Le.x,Le.y).mult(v.worldSize),ce=new o.Point(o.mercatorXfromLng(Be.lng),o.mercatorYfromLat(Be.lat)).mult(v.worldSize).sub(ue)}else{le=v.centerPoint.add(ne);const Le=v.pointLocation(le),We=o.LngLat.convert(u.center||Le);this._normalizeCenter(We),ue=v.project(Le),ce=v.project(We).sub(ue)}const fe=v.zoomScale(N-b);let J,se;u.around&&(J=o.LngLat.convert(u.around),se=v.locationPoint(J));const me=this._zooming||N!==b,ye=this._rotating||T!==q,Pe=this._pitching||W!==O,Me=!v.isPaddingEqual(K),Oe=Le=>We=>{if(me&&(Le.zoom=o.number(b,N,We)),ye&&(Le.bearing=o.number(T,q,We)),Pe&&(Le.pitch=o.number(O,W,We)),Me&&(Le.interpolatePadding(k,K,We),le=Le.centerPoint.add(ne)),J)Le.setLocationAtPoint(J,se);else{const ut=Le.zoomScale(Le.zoom-b),Be=N>b?Math.min(2,fe):Math.max(.5,fe),rt=Math.pow(Be,1-We),He=Le.unproject(ue.add(ce.mult(We*rt)).mult(ut));Le.setLocationAtPoint(Le.renderWorldCopies?He.wrap():He,le)}return u.preloadOnly||this._fireMoveEvents(d),Le};if(u.preloadOnly){const Le=this._emulate(Oe,u.duration,v);return this._preloadTiles(Le),this}const je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=me,this._rotating=ye,this._pitching=Pe,this._padding=Me,this._easeId=u.easeId,this._prepareEase(d,u.noMoveStart,je),this._ease(Oe(v),Le=>{v.recenterOnTerrain(),this._afterEase(d,Le)},u),this}_prepareEase(u,d,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||v.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!v.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!v.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!v.pitching&&this.fire(new o.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))}_afterEase(u,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,b=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new o.Event("zoomend",u)),b&&this.fire(new o.Event("rotateend",u)),T&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}flyTo(u,d){if(this._prefersReducedMotion(u)){const ot=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,d)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);const v=this.transform,b=this.getZoom(),T=this.getBearing(),O=this.getPitch(),k=this.getPadding(),N="zoom"in u?o.clamp(+u.zoom,v.minZoom,v.maxZoom):b,q="bearing"in u?this._normalizeBearing(u.bearing,T):T,W="pitch"in u?+u.pitch:O,K="padding"in u?u.padding:v.padding,ne=v.zoomScale(N-b),le=o.Point.convert(u.offset);let ue=v.centerPoint.add(le);const ce=v.pointLocation(ue),fe=o.LngLat.convert(u.center||ce);this._normalizeCenter(fe);const J=v.project(ce),se=v.project(fe).sub(J);let me=u.curve;const ye=Math.max(v.width,v.height),Pe=ye/ne,Me=se.mag();if("minZoom"in u){const ot=o.clamp(Math.min(u.minZoom,b,N),v.minZoom,v.maxZoom),pt=ye/v.zoomScale(ot-b);me=Math.sqrt(pt/Me*2)}const Oe=me*me;function je(ot){const pt=(Pe*Pe-ye*ye+(ot?-1:1)*Oe*Oe*Me*Me)/(2*(ot?Pe:ye)*Oe*Me);return Math.log(Math.sqrt(pt*pt+1)-pt)}function Le(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function We(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const ut=je(0);let Be=function(ot){return We(ut)/We(ut+me*ot)},rt=function(ot){return ye*((We(ut)*(Le(pt=ut+me*ot)/We(pt))-Le(ut))/Oe)/Me;var pt},He=(je(1)-ut)/me;if(Math.abs(Me)<1e-6||!isFinite(He)){if(Math.abs(ye-Pe)<1e-6)return this.easeTo(u,d);const ot=Pe<ye?-1:1;He=Math.abs(Math.log(Pe/ye))/me,rt=function(){return 0},Be=function(pt){return Math.exp(ot*me*pt)}}u.duration="duration"in u?+u.duration:1e3*He/("screenSpeed"in u?+u.screenSpeed/me:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const lt=T!==q,Ue=W!==O,tt=!v.isPaddingEqual(K),ft=ot=>pt=>{const Bt=pt*He,Jt=1/Be(Bt);ot.zoom=pt===1?N:b+ot.scaleZoom(Jt),lt&&(ot.bearing=o.number(T,q,pt)),Ue&&(ot.pitch=o.number(O,W,pt)),tt&&(ot.interpolatePadding(k,K,pt),ue=ot.centerPoint.add(le));const jt=pt===1?fe:ot.unproject(J.add(se.mult(rt(Bt))).mult(Jt));return ot.setLocationAtPoint(ot.renderWorldCopies?jt.wrap():jt,ue),ot._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(d),ot};if(u.preloadOnly){const ot=this._emulate(ft,u.duration,v);return this._preloadTiles(ot),this}return this._zooming=!0,this._rotating=lt,this._pitching=Ue,this._padding=tt,this._prepareEase(d,!1),this._ease(ft(v),()=>this._afterEase(d),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,d)}if(!u){const v=this.handlers;v&&v.stop(!1)}return this}_ease(u,d,v){v.animate===!1||v.duration===0?(u(1),d()):(this._easeStart=o.exported.now(),this._easeOptions=v,this._onEaseFrame=u,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,d){u=o.wrap(u,-180,180);const v=Math.abs(u-d);return Math.abs(u-360-d)<v&&(u-=360),Math.abs(u+360-d)<v&&(u+=360),u}_normalizeCenter(u){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const v=u.lng-d.center.lng;u.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(u){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(u&&u.essential)}_emulate(u,d,v){const b=Math.ceil(15*d/1e3),T=[],O=u(v.clone());for(let k=0;k<=b;k++){const N=O(k/b);T.push(N.clone())}return T}}class Rt{constructor(u={}){this.options=u,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const d=this.options&&this.options.compact;return this._map=u,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=C("button","mapboxgl-ctrl-attrib-button",this._container),C("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,d){const v=this._map._getUIString(`AttributionControl.${d}`);u.setAttribute("aria-label",v),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",v)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(u){const v=d.reduce((b,T,O)=>(T.value&&(b+=`${T.key}=${T.value}${O<d.length-1?"&":""}`),b),"?");u.href=`${o.config.FEEDBACK_URL}/${v}#${nh(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const d=this._map.style._sourceCaches;for(const b in d){const T=d[b];if(T.used){const O=T.getSource();O.attribution&&u.indexOf(O.attribution)<0&&u.push(O.attribution)}}u.sort((b,T)=>b.length-T.length),u=u.filter((b,T)=>{for(let O=T+1;O<u.length;O++)if(u[O].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const v=u.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,u.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Hm{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=C("div","mapboxgl-ctrl");const d=C("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const d in u){const v=u[d].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Zm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const d=++this._id;return this._queue.push({callback:u,id:d,cancelled:!1}),d}remove(u){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const b of v)if(b.id===u)return void(b.cancelled=!0)}run(u=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Cc(g,u,d){if(g=new o.LngLat(g.lng,g.lat),u){const v=new o.LngLat(g.lng-360,g.lat),b=new o.LngLat(g.lng+360,g.lat),T=360*Math.ceil(Math.abs(g.lng-d.center.lng)/360),O=d.locationPoint(g).distSqr(u),k=u.x<0||u.y<0||u.x>d.width||u.y>d.height;d.locationPoint(v).distSqr(u)<O&&(k||Math.abs(v.lng-d.center.lng)<T)?g=v:d.locationPoint(b).distSqr(u)<O&&(k||Math.abs(b.lng-d.center.lng)<T)&&(g=b)}for(;Math.abs(g.lng-d.center.lng)>180;){const v=d.locationPoint(g);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;g.lng>d.center.lng?g.lng-=360:g.lng+=360}return g}const vl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ct extends o.Evented{constructor(u,d){if(super(),(u instanceof o.window.HTMLElement||d)&&(u=o.extend({element:u},d)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=C("div");const b=41,T=27,O=M("svg",{display:"block",height:b*this._scale+"px",width:T*this._scale+"px",viewBox:`0 0 ${T} ${b}`},this._element),k=M("radialGradient",{id:"shadowGradient"},M("defs",{},O));M("stop",{offset:"10%","stop-opacity":.4},k),M("stop",{offset:"100%","stop-opacity":.05},k),M("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},O),M("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},O),M("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},O),M("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},O),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const v=this._element.classList;for(const b in vl)v.remove(`mapboxgl-marker-anchor-${b}`);v.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const d=u.code,v=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(u){const d=u.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,d=this._pos;if(!u||!d)return!1;const v=u.unproject(d),b=u.getFreeCameraOptions();if(!b.position)return!1;const T=b.position.toLngLat();return T.distanceTo(v)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const d=this._pos;if(!d||d.x<0||d.x>u.transform.width||d.y<0||d.y>u.transform.height)return void this._clearFadeTimer();const v=u.unproject(d);let b;u._showingGlobe()&&o.isLngLatBehindGlobe(u.transform,this._lngLat)?b=0:(b=1-u._queryFogOpacity(v),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${vl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const u=this._pos,d=this._map,v=this.getPitchAlignment();if(!d||!u||v!=="map")return"";if(!d._showingGlobe()){const N=d.getPitch();return N?`rotateX(${N}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(d.transform,this._lngLat)),T=u.sub(o.globeCenterToScreenPoint(d.transform)),O=Math.abs(T.x)+Math.abs(T.y);if(O===0)return"";const k=b/O;return`rotateX(${-T.y*k}deg) rotateY(${T.x*k}deg)`}_calculateZTransform(){const u=this._pos,d=this._map;if(!d||!u)return"";let v=0;const b=this.getRotationAlignment();if(b==="map")if(d._showingGlobe()){const T=d.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),O=d.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(T);v=o.radToDeg(Math.atan2(O.y,O.x))-90}else v=-d.getBearing();else if(b==="horizon"){const T=o.smoothstep(4,6,d.getZoom()),O=o.globeCenterToScreenPoint(d.transform);O.y+=T*d.transform.height;const k=u.sub(O),N=o.radToDeg(Math.atan2(k.y,k.x));v=(N>90?N-270:N+90)*(1-T)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(u){o.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Cc(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),u===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(u){return this._offset=o.Point.convert(u),this._update(),this}_onMove(u){const d=this._map;if(!d)return;const v=this._pointerdownPos,b=this._positionDelta;if(v&&b){if(!this._isDragging){const T=this._clickTolerance||d._clickTolerance;if(u.point.dist(v)<T)return;this._isDragging=!0}this._pos=u.point.sub(b),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(u){const d=this._map,v=this._pos;d&&v&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(v),this._pointerdownPos=u.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const d=this._map;return d&&(u?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Xm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bE=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function p0(g=new o.Point(0,0),u="bottom"){if(typeof g=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(u){case"top":return new o.Point(0,g);case"top-left":return new o.Point(d,d);case"top-right":return new o.Point(-d,d);case"bottom":return new o.Point(0,-g);case"bottom-left":return new o.Point(d,-d);case"bottom-right":return new o.Point(-d,-d);case"left":return new o.Point(g,0);case"right":return new o.Point(-g,0)}return new o.Point(0,0)}return g instanceof o.Point||Array.isArray(g)?o.Point.convert(g):o.Point.convert(g[u]||[0,0])}class Km{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const d=o.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,d,v){this._start=this.getValue(d),this._end=u,this._startTime=d,this._endTime=d+v}}const m0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},g0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},wE={showCompass:!0,showZoom:!0,visualizePitch:!1};class SE{constructor(u,d,v=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Um({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,v&&(this.mousePitch=new Vm({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(u,d){this.mouseRotate.mousedown(u,d),this.mousePitch&&this.mousePitch.mousedown(u,d),B()}move(u,d){const v=this.map,b=this.mouseRotate.mousemoveWindow(u,d),T=b&&b.bearingDelta;if(T&&v.setBearing(v.getBearing()+T),this.mousePitch){const O=this.mousePitch.mousemoveWindow(u,d),k=O&&O.pitchDelta;k&&v.setPitch(v.getPitch()+k)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){F(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(o.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),H(this.element,u)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,H(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=X(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ym={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Jm={maxWidth:100,unit:"metric"},Qm={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Pc={version:o.version,supported:_,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Hf{constructor(g){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(g=o.extend({},g0,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(g.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Sc(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._useWebGL2=g.useWebGL2,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._optimizeForTerrain=g.optimizeForTerrain,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Zm,this._domRenderTaskQueue=new Zm,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},m0,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Km(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,typeof g.container=="string"){if(this._container=o.window.document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ha(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this._hash=g.hash&&new Nm(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),g.attributionControl&&this.addControl(new Rt({customAttribution:g.customAttribution})),this._logoControl=new Hm,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.Event(`${u.dataType}dataloading`,u))})}_getMapId(){return this._mapId}addControl(g,u){if(u===void 0&&(u=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=g.onAdd(this);this._controls.push(g);const v=this._controlPositions[u];return u.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(g);return u>-1&&this._controls.splice(u,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new o.Event("movestart",g)).fire(new o.Event("move",g)),this.fire(new o.Event("resize",g)),u&&this.fire(new o.Event("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(o.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?o.window.navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(u=>u==="auto"?o.window.navigator.language:u):g}setLanguage(g){const u=this._parseLanguage(g);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,u=g.projection.name;let d;u==="globe"&&g.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(g.setMercatorFromTransition(),d=!0):u==="mercator"&&g.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(g.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,u){return this._updateProjection(g||u||{name:"mercator"})}_updateProjection(g){let u;if(u=g.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(g){return this.transform.locationPoint3D(o.LngLat.convert(g))}unproject(g){return this.transform.pointLocation3D(o.Point.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,u,d){if(g==="mouseenter"||g==="mouseover"){let v=!1;const b=O=>{const k=u.filter(q=>this.getLayer(q)),N=k.length?this.queryRenderedFeatures(O.point,{layers:k}):[];N.length?v||(v=!0,d.call(this,new ei(g,this,O.originalEvent,{features:N}))):v=!1},T=()=>{v=!1};return{layers:new Set(u),listener:d,delegates:{mousemove:b,mouseout:T}}}if(g==="mouseleave"||g==="mouseout"){let v=!1;const b=O=>{const k=u.filter(N=>this.getLayer(N));(k.length?this.queryRenderedFeatures(O.point,{layers:k}):[]).length?v=!0:v&&(v=!1,d.call(this,new ei(g,this,O.originalEvent)))},T=O=>{v&&(v=!1,d.call(this,new ei(g,this,O.originalEvent)))};return{layers:new Set(u),listener:d,delegates:{mousemove:b,mouseout:T}}}{const v=b=>{const T=u.filter(k=>this.getLayer(k)),O=T.length?this.queryRenderedFeatures(b.point,{layers:T}):[];O.length&&(b.features=O,d.call(this,b),delete b.features)};return{layers:new Set(u),listener:d,delegates:{[g]:v}}}}on(g,u,d){if(d===void 0)return super.on(g,u);Array.isArray(u)||(u=[u]);const v=this._createDelegatedListener(g,u,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(g,u,d){if(d===void 0)return super.once(g,u);Array.isArray(u)||(u=[u]);const v=this._createDelegatedListener(g,u,d);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(g,u,d){if(d===void 0)return super.off(g,u);u=new Set(Array.isArray(u)?u:[u]);const v=(T,O)=>{if(T.size!==O.size)return!1;for(const k of T)if(!O.has(k))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[g]:void 0;return b&&(T=>{for(let O=0;O<T.length;O++){const k=T[O];if(k.listener===d&&v(k.layers,u)){for(const N in k.delegates)this.off(N,k.delegates[N]);return T.splice(O,1),this}}})(b),this}queryRenderedFeatures(g,u){return this.style?(u!==void 0||g===void 0||g instanceof o.Point||Array.isArray(g)||(u=g,g=void 0),this.style.queryRenderedFeatures(g=g||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(g,u){return this.style.querySourceFeatures(g,u)}isPointOnSurface(g){const{name:u}=this.transform.projection;return u!=="globe"&&u!=="mercator"&&o.warnOnce(`${u} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(g))}setStyle(g,u){return(u=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(g,u))}_getUIString(g){const u=this._locale[g];if(u==null)throw new Error(`Missing UI string '${g}'`);return u}_updateStyle(g,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new ca(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ca(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,u){if(typeof g=="string"){const d=this._requestManager.normalizeStyleURL(g),v=this._requestManager.transformRequest(d,o.ResourceType.Style);o.getJSON(v,(b,T)=>{b?this.fire(new o.ErrorEvent(b)):T&&this._updateDiff(T,u)})}else typeof g=="object"&&this._updateDiff(g,u)}_updateDiff(g,u){try{this.style.setState(g)&&this._update(!0)}catch(d){o.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(g,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(g,u){return this._lazyInitEmptyStyle(),this.style.addSource(g,u),this._update(!0)}isSourceLoaded(g){return!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){const g=this.style&&this.style._sourceCaches;for(const u in g){const d=g[u]._tiles;for(const v in d){const b=d[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(g,u,d){this._lazyInitEmptyStyle(),this.style.addSourceType(g,u,d)}removeSource(g){return this.style.removeSource(g),this._updateTerrain(),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,u,{pixelRatio:d=1,sdf:v=!1,stretchX:b,stretchY:T,content:O}={}){if(this._lazyInitEmptyStyle(),u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap){const{width:k,height:N,data:q}=o.exported.getImageData(u);this.style.addImage(g,{data:new o.RGBAImage({width:k,height:N},q),pixelRatio:d,stretchX:b,stretchY:T,content:O,sdf:v,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:N}=u,q=u;this.style.addImage(g,{data:new o.RGBAImage({width:k,height:N},new Uint8Array(q.data)),pixelRatio:d,stretchX:b,stretchY:T,content:O,sdf:v,version:0,userImage:q}),q.onAdd&&q.onAdd(this,g)}}updateImage(g,u){const d=this.style.getImage(g);if(!d)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap?o.exported.getImageData(u):u,{width:b,height:T}=v;b!==void 0&&T!==void 0?b===d.data.width&&T===d.data.height?(d.data.replace(v.data,!(u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap)),this.style.updateImage(g,d)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${T})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,u){o.getImage(this._requestManager.transformRequest(g,o.ResourceType.Image),(d,v)=>{u(d,v instanceof o.window.HTMLImageElement?o.exported.getImageData(v):v)})}listImages(){return this.style.listImages()}addLayer(g,u){return this._lazyInitEmptyStyle(),this.style.addLayer(g,u),this._update(!0)}moveLayer(g,u){return this.style.moveLayer(g,u),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,u,d){return this.style.setLayerZoomRange(g,u,d),this._update(!0)}setFilter(g,u,d={}){return this.style.setFilter(g,u,d),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,u,d,v={}){return this.style.setPaintProperty(g,u,d,v),this._update(!0)}getPaintProperty(g,u){return this.style.getPaintProperty(g,u)}setLayoutProperty(g,u,d,v={}){return this.style.setLayoutProperty(g,u,d,v),this._update(!0)}getLayoutProperty(g,u){return this.style.getLayoutProperty(g,u)}setLight(g,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(g),this.transform):0}setFeatureState(g,u){return this.style.setFeatureState(g,u),this._update()}removeFeatureState(g,u){return this.style.removeFeatureState(g,u),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let d,v,b,T=this._container;for(;T&&(!v||!b);){const O=o.window.getComputedStyle(T).transform;O&&O!=="none"&&(d=O.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(v=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(b=d[3])),T=T.parentElement}this._containerWidth=v?Math.abs(g/v):g,this._containerHeight=b?Math.abs(u/b):u}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=C("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=C("div","mapboxgl-canvas-container",g);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=C("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=C("div","mapboxgl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{v[b]=C("div",`mapboxgl-ctrl-${b}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,u){const d=o.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(g),this._canvas.height=d*Math.ceil(u),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${u}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const u=this._markers.indexOf(g);u!==-1&&this._markers.splice(u,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const u=this._popups.indexOf(g);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const g=o.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",g),d=u||this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);d?(this._useWebGL2&&!u&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(d,!0),this.painter=new bc(d,this.transform,!!u),this.on("data",v=>{v.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(d)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let u;const d=this.painter.context.extTimerQuery,v=o.exported.now();if(this.listens("gpu-timing-frame")&&(u=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,N=this.transform.pitch,q=o.exported.now(),W=new o.EvaluationParameters(k,{now:q,fadeDuration:b,pitch:N,transition:this.style.getTransition()});this.style.update(W)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let T=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),T=this._updateAverageElevation(v),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):T=this._updateAverageElevation(v),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const k=o.exported.now()-v;d.endQueryEXT(d.TIME_ELAPSED_EXT,u),setTimeout(()=>{const N=d.getQueryObjectEXT(u,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(u),this.fire(new o.Event("gpu-timing-frame",{cpuTime:k,gpuTime:N})),o.window.performance.mark("frame-gpu",{startTime:v,detail:{gpuTime:N}})},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const N=this.painter.queryGpuTimers(k);this.fire(new o.Event("gpu-timing-layer",{layerTimes:N}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const N=this.painter.queryGpuTimeDeferredRender(k);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:N}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||T;if(O||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(T=this._updateAverageElevation(v,!0)),T)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const N=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:N})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const u of this._markers)g&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!g||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(g,u=!1){const d=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);if((u||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),T=!1;this.transform.elevation&&(T=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=g;const O=Math.abs(v-b);if(O>1){if(this._isInitialLoad||T)return this._averageElevation.jumpTo(b),d(b);this._averageElevation.easeTo(b,g,300)}else if(O>1e-4)return this._averageElevation.jumpTo(b),d(b)}return!!this._averageElevation.isEasing(g)&&d(this._averageElevation.getValue(g))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===o.AUTH_ERR_MSG||g.status===401)){const u=this.painter.context.gl;o.storeAuthState(u,!1),this._logoControl instanceof Hm&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const d=this.painter.context.gl,v=d.createFramebuffer();function b(T){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,T,0);const O=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,O),O}return d.bindFramebuffer(d.FRAMEBUFFER,v),this._canvasPixelComparison(b(g),u.canvasCopies.map(b),u.timeStamps)}_canvasPixelComparison(g,u,d){let v=d[1]-d[0];const b=g.length/4;for(let T=0;T<u.length;T++){const O=u[T];let k=0;for(let N=0;N<O.length;N+=4)O[N]===g[N]&&O[N+1]===g[N+1]&&O[N+2]===g[N+2]&&O[N+3]===g[N+3]&&(k+=1);v+=(d[T+2]-d[T+1])*(1-k/b)}return v}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=o.exported.frame(u=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(u)}))}_preloadTiles(g){const u=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(u,(d,v)=>d._preloadTiles(g,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,u){o.setCacheLimits(g,u)}get version(){return o.version}},NavigationControl:class{constructor(g){this.options=o.extend({},wE,g),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",u=>{this._map&&this._map.zoomIn({},{originalEvent:u})}),C("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",u=>{this._map&&this._map.zoomOut({},{originalEvent:u})}),C("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",u=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:u}):d.resetNorth({},{originalEvent:u}))}),this._compassIcon=C("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const u=g.getZoom(),d=u===g.getMaxZoom(),v=u===g.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=u)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new SE(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,u){const d=C("button",g,this._container);return d.type="button",d.addEventListener("click",u),d}_setButtonTitle(g,u){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${u}`);g.setAttribute("aria-label",d),g.firstElementChild&&g.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends o.Evented{constructor(g){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Ym,g),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ec(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const u=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,g(d)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(d=>u(d.state!=="denied")).catch(()=>u()):u()}_isOutOfMapMaxBounds(g){const u=this._map.getMaxBounds(),d=g.coords;return!!u&&(d.longitude<u.getWest()||d.longitude>u.getEast()||d.latitude<u.getSouth()||d.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",g)),this._finish()}}_updateCamera(g){const u=new o.LngLat(g.coords.longitude,g.coords.latitude),d=g.coords.accuracy,v=this._map.getBearing(),b=o.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(d),b,{geolocateSource:!0})}_updateMarker(g){if(g){const u=new o.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,u=o.mercatorZfromAltitude(1,g._center.lat)*g.worldSize,d=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=C("button","mapboxgl-ctrl-geolocate",this._container),C("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C("div","mapboxgl-user-location"),this._dotElement.appendChild(C("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(C("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ct({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=C("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ct({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(u=>{u==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Rt,ScaleControl:class{constructor(g){this.options=o.extend({},Jm,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,u=this._map,d=u._containerHeight/2,v=u._containerWidth/2-g/2,b=u.unproject([v,d]),T=u.unproject([v+g,d]),O=b.distanceTo(T);if(this.options.unit==="imperial"){const k=3.2808*O;k>5280?this._setScale(g,k/5280,"mile"):this._setScale(g,k,"foot")}else this.options.unit==="nautical"?this._setScale(g,O/1852,"nautical-mile"):O>=1e3?this._setScale(g,O/1e3,"kilometer"):this._setScale(g,O,"meter")}_setScale(g,u,d){this._map._requestDomTask(()=>{const v=function(T){const O=Math.pow(10,`${Math.floor(T)}`.length-1);let k=T/O;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(N){const q=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*q)/q}(k),O*k}(u),b=v/u;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(v):`${v}&nbsp;${Qm[d]}`,this._container.style.width=g*b+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof o.window.HTMLElement?this._container=g.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=C("button","mapboxgl-ctrl-fullscreen",this._controlContainer);C("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(g){super(),this.options=o.extend(Object.create(Xm),g),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=o.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(o.window.document.createTextNode(g))}setHTML(g){const u=o.window.document.createDocumentFragment(),d=o.window.document.createElement("body");let v;for(d.innerHTML=g;v=d.firstChild,v;)u.appendChild(v);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=C("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(g),this.options.closeButton){const d=this._closeButton=C("button","mapboxgl-popup-close-button",u);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let u;return this._classList.delete(g)?u=!1:(this._classList.add(g),u=!0),this._updateClassList(),u}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const u=this._map,d=this._container,v=this._pos;if(!u||!d||!v)return"bottom";const b=d.offsetWidth,T=d.offsetHeight,O=v.x<b/2,k=v.x>u.transform.width-b/2;if(v.y+g<T)return O?"top-left":k?"top-right":"top";if(v.y>u.transform.height-T){if(O)return"bottom-left";if(k)return"bottom-right"}return O?"left":k?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),g.className=u.join(" ")}_update(g){const u=this._map,d=this._content;if(!u||!this._lngLat&&!this._trackPointer||!d)return;let v=this._container;if(v||(v=this._container=C("div","mapboxgl-popup",u.getContainer()),this._tip=C("div","mapboxgl-popup-tip",v),v.appendChild(d)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cc(this._lngLat,this._pos,u.transform)),!this._trackPointer||g){const b=this._pos=this._trackPointer&&g?g:u.project(this._lngLat),T=p0(this.options.offset),O=this._anchor=this._getAnchor(T.y),k=p0(this.options.offset,O),N=b.add(k).round();u._requestDomTask(()=>{this._container&&O&&(this._container.style.transform=`${vl[O]} translate(${N.x}px,${N.y}px)`)})}if(!this._marker&&u._showingGlobe()){const b=o.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(bE);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:Ct,Style:ca,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Q_,Evented:o.Evented,config:o.config,prewarm:function(){uc().acquire(aa)},clearPrewarmedResources:function(){const g=Ri;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(aa),Ri=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(g){o.config.ACCESS_TOKEN=g},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(g){o.config.API_URL=g},get workerCount(){return Jn.workerCount},set workerCount(g){Jn.workerCount=g},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){o.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){o.clearTileCache(g)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Pc});var f=a;return f})})(JW);var bMe=JW.exports;const ay=Hr(bMe),UB=Bl("http://localhost:3003"),wMe=()=>{var E,C,M,I,D,$,B,F,R,U,H,X,ee,oe,ae,ge;const e=Lo(),[t,r]=Y.useState(!1),n=lf(),a=(M=(C=(E=n==null?void 0:n.state)==null?void 0:E.trip)==null?void 0:C.pickupLocation)==null?void 0:M.lat,c=(I=n==null?void 0:n.state)==null?void 0:I.trip.pickupLocation.lon,f=(B=($=(D=n==null?void 0:n.state)==null?void 0:D.trip)==null?void 0:$.destinationLocation)==null?void 0:B.lat,o=(U=(R=(F=n==null?void 0:n.state)==null?void 0:F.trip)==null?void 0:R.destinationLocation)==null?void 0:U.lon,m=(ee=(X=(H=n==null?void 0:n.state)==null?void 0:H.trip)==null?void 0:X.pickupLocation)==null?void 0:ee.name,_=(ge=(ae=(oe=n==null?void 0:n.state)==null?void 0:oe.trip)==null?void 0:ae.destinationLocation)==null?void 0:ge.name,w=async()=>{if(t){const he="Ride Completed";UB.emit("ride_completed",he),localStorage.removeItem("isRideStarted"),e("/driverhome")}else{console.log("ride");const he="The ride has started!";UB.emit("ride_started",he),r(!0),localStorage.setItem("isRideStarted","true")}};return Y.useEffect(()=>{localStorage.getItem("isRideStarted")==="true"&&r(!0)},[]),Y.useEffect(()=>{const he="pk.eyJ1IjoibWFhbmFzNzc3IiwiYSI6ImNsbWxqbGhsdjAxNmEyc3IyNDhhZTV3Z2EifQ.ujqCz1sTNYUtQ_o1AEFPFA",ve=new ay.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[(c+o)/2,(a+f)/2],zoom:13,accessToken:he});new ay.Marker().setLngLat([c,a]).setPopup(new ay.Popup().setHTML(`<h3>Pickup Location</h3><p>${m}</p>`)).addTo(ve),new ay.Marker().setLngLat([o,f]).setPopup(new ay.Popup().setHTML(`<h3>Destination</h3><p>${_}</p>`)).addTo(ve);const Ee=`https://api.mapbox.com/directions/v5/mapbox/driving/${c},${a};${o},${f}?access_token=${he}&geometries=geojson`;return fetch(Ee).then(Re=>Re.json()).then(Re=>{const Ne=Re.routes[0].geometry;ve.addSource("route",{type:"geojson",data:Ne}),ve.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4285f4","line-width":8}})}),()=>{ve.remove()}},[m,c,a,o,f,_]),j.jsxs("div",{className:"mapmain",children:[j.jsx("div",{className:"startridediv",children:j.jsx("button",{className:t?"finishRide":"startRide",onClick:w,children:t?"finish ride":"Start Ride"})}),j.jsx("div",{className:"container",id:"map",style:{width:"70%",height:"85%"}})]})},SMe=()=>j.jsxs("div",{children:[j.jsx(Yk,{}),j.jsx(wMe,{})]});const VB=Bl("http://localhost:3003"),EMe={backgroundColor:"#f1bf29"},TMe=()=>{var ee,oe,ae,ge,he,ve,Ee,Re,Ne,Ve,Ke,ke,Ge,Ye,_t,Ot,bt,Zt,Xt,kt,Mt,$r,St;const e=Lo(),[t,r]=Y.useState(!1),[n,a]=Y.useState(!1),[c,f]=Y.useState(!1),o=lf();console.log(o,"driverrrr");const m=localStorage.getItem("userData"),_=m?JSON.parse(m):null;console.log(_.user.username);const w=_.user.username,E=(ee=o==null?void 0:o.state)==null?void 0:ee.tripId,C=((ge=(ae=(oe=o==null?void 0:o.state)==null?void 0:oe.driverdetails)==null?void 0:ae.driver)==null?void 0:ge.Drivername)||((ve=(he=o==null?void 0:o.state)==null?void 0:he.driverdetails)==null?void 0:ve.Drivername),M=((Ne=(Re=(Ee=o==null?void 0:o.state)==null?void 0:Ee.driverdetails)==null?void 0:Re.driver)==null?void 0:Ne.VehicleModel)||((Ke=(Ve=o==null?void 0:o.state)==null?void 0:Ve.driverdetails)==null?void 0:Ke.VehicleModel),I=((Ye=(Ge=(ke=o==null?void 0:o.state)==null?void 0:ke.driverdetails)==null?void 0:Ge.driver)==null?void 0:Ye.vehiclePhoto)||((Ot=(_t=o==null?void 0:o.state)==null?void 0:_t.driverdetails)==null?void 0:Ot.vehiclePhoto),D=((Xt=(Zt=(bt=o==null?void 0:o.state)==null?void 0:bt.driverdetails)==null?void 0:Zt.driver)==null?void 0:Xt.phone)||((Mt=(kt=o==null?void 0:o.state)==null?void 0:kt.driverdetails)==null?void 0:Mt.phone),$=($r=o==null?void 0:o.state)==null?void 0:$r.distance,B=(St=o==null?void 0:o.state)==null?void 0:St.fare,F="rzp_test_fjmhOp5pwKBfU6",R=()=>{e("/userhome")},U=()=>{e("/review")};Y.useEffect(()=>{VB.on("ride_started",Dt=>{console.log(Dt),localStorage.setItem("startedRide","true"),a(!0)})},[]),Y.useEffect(()=>{VB.on("ride_completed",Dt=>{console.log(Dt),localStorage.removeItem("startedRide"),f(!0);const xt=bU.put(`/completeride/${E}`);console.log(xt)})},[]),Y.useEffect(()=>{localStorage.getItem("startedRide")==="true"&&(console.log("hiii"),a(!0))},[]),Y.useEffect(()=>{(async()=>{try{const xt=await Fh.get(`/findTrip/${E}`);console.log(xt.data.Isfarepaid,"paymentt"),xt.data.Isfarepaid&&r(!0)}catch(xt){console.log(xt)}})()},[]);const H=Dt=>{console.log(Dt.data.id,"dayeeeee"),console.log(Dt.data.currency,"currency"),console.log(Dt.amount,"amount");const xt={key:F,name:w,amount:Dt.data.amount,currency:Dt.data.currency,order_id:Dt.data.id,handler:async er=>{console.log(er,"respondeeee");try{const{data:Kt}=await Fh.post("/verify",er);console.log(Kt,"dattaaaaaaa")}catch(Kt){console.log(Kt)}},theme:{color:"#3399cc"}};new window.Razorpay(xt).open()},X=async()=>{try{const{data:Dt}=await Fh.post("/payment",{id:E});console.log(Dt),console.log(Dt.data.amount,"payment data"),console.log(Dt.currency,"payment data"),console.log(Dt.id,"payment data"),H(Dt),r(!0)}catch(Dt){console.log(Dt)}};return j.jsxs("div",{className:"container",children:[j.jsx("div",{className:"row",children:j.jsx("div",{className:"col-md-8 offset-md-2",children:j.jsxs("div",{className:"card mt-5",children:[j.jsx("div",{className:"card-header",children:j.jsx("h2",{style:{fontWeight:"bolder",marginTop:"10px"},children:"Driver Details"})}),j.jsx("div",{className:"card-body-driver-details",style:EMe,children:j.jsxs("div",{className:"row",children:[j.jsxs("div",{className:"col-md-6",children:[j.jsx("h4",{style:{fontWeight:"bold"},children:"Name"}),j.jsx("p",{children:C}),j.jsx("h4",{style:{fontWeight:"bold"},children:"Contact Number"}),j.jsx("p",{children:D}),j.jsx("h4",{style:{fontWeight:"bold"},children:"Total Distance"}),j.jsxs("p",{style:{fontWeight:"bold"},children:[$," kms"]}),j.jsx("h4",{style:{fontWeight:"bold"},children:n?j.jsx("span",{style:{color:"#b30c0ca8"},children:"Ride Started...."}):"Amount to Pay"}),j.jsx("p",{style:{fontWeight:"bold"},children:t&&!n?j.jsx("span",{children:"Payment Completed, Driver will reach you soon...."}):n?null:j.jsxs(j.Fragment,{children:["₹",B,j.jsx("button",{className:"payment",onClick:X,style:{marginLeft:"2rem"},children:"Pay Now"})]})})," "]}),j.jsxs("div",{className:"col-md-6",children:[j.jsx("h4",{style:{fontWeight:"bold"},children:"Vehicle"}),j.jsx("p",{children:M}),j.jsx("div",{children:j.jsx("img",{style:{height:"13rem",width:"18rem",borderRadius:"20px"},src:I,alt:M})})]})]})})]})})}),j.jsxs(Aa,{show:c,onHide:()=>f(!1),size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",keyboard:!1,dialogClassName:"custom-modalUser",children:[j.jsx(Aa.Header,{closeButton:!0,className:"text-center",style:{backgroundColor:"#3498db",color:"white"},children:j.jsx(Aa.Title,{id:"contained-modal-title-vcenter",children:"Thank you for choosing Velocity."})}),j.jsx(Aa.Body,{style:{padding:"20px"},children:j.jsx("p",{children:"Your trip has been completed. "})}),j.jsxs(Aa.Footer,{style:{backgroundColor:"#f2f2f2",textAlign:"center"},children:[j.jsx(Wb,{variant:"primary",onClick:R,children:"go to home"}),j.jsx(Wb,{variant:"primary",onClick:U,children:"Feedback"})]})]})]})},AMe="/assets/India_uberMOTO_Blog_960x480-1d1c0145.avif",CMe=()=>j.jsxs("div",{children:[j.jsx(AS,{}),j.jsx("div",{style:{backgroundColor:"blue",height:"84vh",backgroundImage:`url(${AMe})`},children:j.jsx(TMe,{})})]});function PMe(){const e=Lo(),[t,r]=Y.useState(""),n=m=>{r(m.target.value)},a=localStorage.getItem("userData"),c=a?JSON.parse(a):null;console.log(c.user._id);const f=c.user._id,o=m=>{console.log("post submitted"),m.preventDefault(),Fh.post(`/review/${f}`,{content:t}).then(_=>{console.log(_.data),Qt.success(_.data.message),setTimeout(()=>{e("/userhome")},2e3)}).catch(_=>{Qt.error(_)})};return j.jsxs("div",{className:"specific-page",children:[j.jsx(Ro,{}),j.jsxs("div",{className:"review-container",children:[j.jsx("div",{className:"post",children:j.jsx("div",{className:"text",children:"Thanks for rating us!"})}),j.jsxs("form",{className:"review-form",onSubmit:o,children:[j.jsx("header",{}),j.jsx("div",{className:"textarea",children:j.jsx("textarea",{value:t,onChange:n,cols:30,placeholder:"Describe your experience.."})}),j.jsx("div",{className:"btn",children:j.jsx("button",{type:"submit",children:"Post"})})]})]})]})}const OMe=()=>j.jsxs("div",{children:[j.jsx(AS,{}),j.jsx(PMe,{})]});function MMe(){return j.jsxs(FZ,{children:["//user",j.jsx(Zn,{path:"usersignup",element:j.jsx(GJ,{})}),j.jsx(Zn,{path:"/review",element:j.jsx(OMe,{})}),j.jsx(Zn,{path:"/userhome",element:j.jsx(jAe,{})}),j.jsx(Zn,{path:"hero",element:j.jsx(fW,{})}),j.jsx(Zn,{path:"/",element:j.jsx(WJ,{})}),j.jsx(Zn,{path:"userprofile",element:j.jsx(cMe,{})}),j.jsx(Zn,{path:"OtpPhone",element:j.jsx(JJ,{})}),j.jsx(Zn,{path:"/VerifyOtp",element:j.jsx(QJ,{})}),j.jsx(Zn,{path:"/driverdetails",element:j.jsx(CMe,{})}),"//////driver",j.jsx(Zn,{path:"driversignup",element:j.jsx(HJ,{})}),j.jsx(Zn,{path:"driverlogin",element:j.jsx(XJ,{})}),j.jsx(Zn,{path:"/driverhome",element:j.jsx(sMe,{})}),j.jsx(Zn,{path:"/driveprofile",element:j.jsx(xMe,{})}),j.jsx(Zn,{path:"/drivermap",element:j.jsx(SMe,{})}),"//admin",j.jsx(Zn,{path:"dashboard",element:j.jsx(ATe,{})}),j.jsx(Zn,{path:"navbar",element:j.jsx(n_,{})}),j.jsx(Zn,{path:"verifiedDriver",element:j.jsx(cCe,{})}),j.jsx(Zn,{path:"adminlogin",element:j.jsx(YJ,{})}),j.jsx(Zn,{path:"users",element:j.jsx(YAe,{})}),j.jsx(Zn,{path:"driver-verification",element:j.jsx(hCe,{})})]})}const kMe=gY({reducer:{users:PY}});u1.createRoot(document.getElementById("root")).render(j.jsx(Se.StrictMode,{children:j.jsx(NX,{store:kMe,children:j.jsx(HZ,{children:j.jsx(MMe,{})})})}));
